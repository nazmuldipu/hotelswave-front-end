(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"25bS":function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return kt}),n.d(e,"AdminAgentModule",function(){return Bt});var o=n("KZX/"),i=n("tyNb"),r=n("0sMf"),c=n("ITiG"),a=n("/e7+"),b=n("FJeW"),l=n("Sa+r"),s=n("fXoL"),u=n("ofXK"),g=n("d26D"),d=n("3Pt+"),f=n("uEz7");function h(t,e){if(1&t){var n=s.Ub();s.Tb(0,"a",7),s.ec("click",function(){s.zc(n);var t=e.$implicit;return s.gc().onSelectHotel(t.id)}),s.Pb(1,"i",8),s.Gc(2),s.Sb()}if(2&t){var o=e.$implicit;s.Bb(2),s.Ic(" ",o.name," ")}}function p(t,e){if(1&t){var n=s.Ub();s.Tb(0,"pagination",9),s.ec("getPage",function(t){return s.zc(n),s.gc().getAdminAgentHotelPage(t)}),s.Sb()}if(2&t){var o=s.gc();s.oc("page",o.hotelPage)("short",o.short)}}var m=function(){function t(t){this.hotelService=t,this.hotel=new s.n}return t.prototype.ngOnInit=function(){this.getAdminAgentHotelPage()},t.prototype.getAdminAgentHotelPage=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){switch(n.label){case 0:return[4,this.hotelService.getAdminAgentHotelPage(t,this.hotelName).subscribe(function(t){e.hotelPage=t})];case 1:return n.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.prototype.onSelectHotel=function(t){var e=this.hotelPage.content.find(function(e){return e.id==t});this.hotel.emit(e)},t.\u0275fac=function(e){return new(e||t)(s.Ob(g.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["admin-agent-hotel-list"]],outputs:{hotel:"hotel"},decls:11,vars:3,consts:[[1,"list-group"],[1,"list-group-item"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"form-group","mb-0"],["type","text","id","hotelName","name","hotelName","placeholder","Hotel name",1,"form-control",3,"ngModel","ngModelChange"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"page","short","getPage",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-building"],[3,"page","short","getPage"]],template:function(t,e){1&t&&(s.Tb(0,"ul",0),s.Tb(1,"li",1),s.Tb(2,"h5"),s.Gc(3,"Hotel List"),s.Sb(),s.Tb(4,"small"),s.Gc(5,"Choose a hotel from below list"),s.Sb(),s.Sb(),s.Tb(6,"form",2),s.ec("ngSubmit",function(){return e.getAdminAgentHotelPage()}),s.Tb(7,"div",3),s.Tb(8,"input",4),s.ec("ngModelChange",function(t){return e.hotelName=t}),s.Sb(),s.Sb(),s.Sb(),s.Ec(9,h,3,1,"a",5),s.Ec(10,p,1,2,"pagination",6),s.Sb()),2&t&&(s.Bb(8),s.oc("ngModel",e.hotelName),s.Bb(1),s.oc("ngForOf",null==e.hotelPage?null:e.hotelPage.content),s.Bb(1),s.oc("ngIf",null!=e.hotelPage))},directives:[d.x,d.n,d.o,d.b,d.m,d.p,u.o,u.p,f.a],styles:[".list-group-item[_ngcontent-%COMP%]{padding:.15rem 1.25rem;cursor:pointer}"]}),t}(),S=n("yBZE"),v=n("B01t"),T=n("HF3I");function y(t,e){if(1&t){var n=s.Ub();s.Tb(0,"span"),s.Tb(1,"button",15),s.ec("click",function(){s.zc(n);var t=e.$implicit;return s.gc(2).onSelectCategory(t)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var o=e.$implicit,i=s.gc(2);s.Bb(1),s.oc("ngClass",o==i.category?"btn-primary":"btn-secondary"),s.Bb(1),s.Ic(" ",o," ")}}var k=function(t){return{disabled:t}};function B(t,e){if(1&t){var n=s.Ub();s.Tb(0,"div",16),s.Tb(1,"div",17),s.ec("click",function(){s.zc(n);var t=e.$implicit;return s.gc(2).onRoomSelect(t.id,t.available)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var o=e.$implicit;s.Bb(1),s.oc("ngClass",s.sc(2,k,!o.available)),s.Bb(1),s.Ic(" ",o.roomNumber," ")}}function w(t,e){if(1&t&&(s.Tb(0,"div"),s.Tb(1,"div",11),s.Ec(2,y,3,2,"span",12),s.Sb(),s.Tb(3,"div",13),s.Ec(4,B,3,4,"div",14),s.Sb(),s.Sb()),2&t){var n=s.gc();s.Bb(2),s.oc("ngForOf",n.categoryList),s.Bb(2),s.oc("ngForOf",n.filteredRoomList)}}function G(t,e){if(1&t&&s.Pb(0,"loading",18),2&t){var n=s.gc();s.oc("message",n.message)}}var D=function(){function t(t,e){this.roomService=t,this.util=e,this.showHotels=new s.n,this.roomSelected=new s.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.hotel&&this.getAdminAgentAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.ngOnChanges=function(t){t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.reload(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAdminAgentAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.reload=function(t,e,n){this.getAdminAgentAvailableRoomList(t,e,n)},t.prototype.getAdminAgentAvailableRoomList=function(t,e,n,o){return void 0===o&&(o=null),i=this,void 0,c=function(){var i,r,c=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(a){switch(a.label){case 0:return i=this.util.getDateString(e),r=this.util.getDateString(n),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getAdminAgentAvailableRoomListByHotelId(t,i,r,o).subscribe(function(t){c.showRoomListLoading=!1,c.roomList=t,c.filteredRoomList=t,c.category="All",c.categoryList=["All"],c.roomList.forEach(function(t){c.categoryList.includes(t.category.name)||c.categoryList.push(t.category.name)})})];case 1:return a.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(t,e){function n(t){try{a(c.next(t))}catch(n){e(n)}}function o(t){try{a(c.throw(t))}catch(n){e(n)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r(function(t){t(i)})).then(n,o)}a((c=c.apply(i,[])).next())});var i,r,c},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onRoomSelect=function(t,e){if(e){var n={room:this.roomList.find(function(e){return e.id===t}),checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(n)}},t.prototype.onHotelList=function(){this.showHotels.emit(!0)},t.\u0275fac=function(e){return new(e||t)(s.Ob(S.a),s.Ob(a.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["admin-agent-available-room-list"]],inputs:{hotel:"hotel",reloadRoomList:"reloadRoomList"},outputs:{showHotels:"showHotels",roomSelected:"roomSelected"},features:[s.zb],decls:15,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"btn","btn-sm","btn-info",3,"click"],[1,"row","mt-1"],[4,"ngFor","ngForOf"],[1,"row","m-0"],["class","col-md-2 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"div",4),s.Tb(5,"div",5),s.Pb(6,"i",6),s.Sb(),s.Sb(),s.Tb(7,"input",7),s.ec("selected",function(t){return e.selectedDate(t)}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(8,"h3"),s.Gc(9),s.Sb(),s.Ec(10,w,5,2,"div",8),s.Ec(11,G,1,1,"ng-template",null,9,s.Fc),s.Tb(13,"button",10),s.ec("click",function(){return e.onHotelList()}),s.Gc(14," Back to hotel list "),s.Sb(),s.Sb()),2&t){var n=s.yc(12);s.Bb(7),s.oc("options",e.options),s.Bb(2),s.Ic(" ",null==e.hotel?null:e.hotel.name,""),s.Bb(1),s.oc("ngIf",!e.showRoomListLoading)("ngIfElse",n)}},directives:[v.b,u.p,u.o,u.n,T.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 10px 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}();function P(t,e){1&t&&(s.Tb(0,"small",12),s.Gc(1," Name required "),s.Sb())}function I(t,e){if(1&t&&(s.Tb(0,"small",12),s.Tb(1,"div",13),s.Gc(2," Phone number required "),s.Sb(),s.Tb(3,"div",13),s.Gc(4," Phone number format 01934953023 "),s.Sb(),s.Sb()),2&t){var n=s.gc();s.Bb(1),s.oc("hidden",!n.form.controls.phoneNumber.errors.required),s.Bb(2),s.oc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var x=function(t){return{disabled:t}},A=function(){function t(t){this.builder=t,this.user=new s.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",d.v.required],phoneNumber:["",[d.v.required,d.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(e){return new(e||t)(s.Ob(d.d))},t.\u0275cmp=s.Ib({type:t,selectors:[["user-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(s.Tb(0,"h4"),s.Gc(1,"User Info"),s.Sb(),s.Tb(2,"form",0),s.ec("ngSubmit",function(){return e.submit()}),s.Tb(3,"div",1),s.Tb(4,"div",2),s.Tb(5,"label",3),s.Gc(6,"Name *"),s.Sb(),s.Pb(7,"input",4),s.Ec(8,P,2,0,"small",5),s.Sb(),s.Tb(9,"div",2),s.Tb(10,"label",6),s.Gc(11,"Phone *"),s.Sb(),s.Pb(12,"input",7),s.Ec(13,I,5,2,"small",5),s.Sb(),s.Tb(14,"div",2),s.Tb(15,"label",8),s.Gc(16,"Email"),s.Sb(),s.Pb(17,"input",9),s.Sb(),s.Sb(),s.Tb(18,"div",10),s.Tb(19,"button",11),s.Gc(20," Submit "),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(2),s.oc("formGroup",e.form),s.Bb(6),s.oc("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),s.Bb(5),s.oc("ngIf",e.form.controls.phoneNumber.errors&&e.form.controls.phoneNumber.touched),s.Bb(6),s.oc("ngClass",s.sc(4,x,e.form.invalid)))},directives:[d.x,d.n,d.g,d.b,d.m,d.f,u.p,d.j,u.n],styles:[""]}),t}(),M=function(){return(M=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function L(t,e){if(1&t){var n=s.Ub();s.Tb(0,"admin-agent-hotel-list",7),s.ec("hotel",function(t){return s.zc(n),s.gc().onHotel(t)}),s.Sb()}}function E(t,e){if(1&t){var n=s.Ub();s.Tb(0,"admin-agent-available-room-list",8),s.ec("showHotels",function(t){return s.zc(n),s.gc().onShowHotels(t)})("roomSelected",function(t){return s.zc(n),s.gc().onRoomSelect(t)}),s.Sb()}if(2&t){var o=s.gc();s.oc("hotel",o.hotel)("reloadRoomList",o.reloadRoomList)}}function O(t,e){1&t&&(s.Tb(0,"th",25),s.Gc(1,"Commission"),s.Sb())}function C(t,e){if(1&t){var n=s.Ub();s.Tb(0,"td"),s.Tb(1,"input",33),s.ec("ngModelChange",function(t){return s.zc(n),s.gc().$implicit.commission=t}),s.Sb(),s.Sb()}if(2&t){var o=s.gc().$implicit;s.Bb(1),s.oc("ngModel",o.commission)}}function R(t,e){if(1&t){var n=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.Sb(),s.Tb(3,"td"),s.Gc(4),s.Sb(),s.Tb(5,"td"),s.Gc(6),s.Sb(),s.Tb(7,"td",25),s.Gc(8),s.Sb(),s.Tb(9,"td",25),s.Gc(10),s.Sb(),s.Tb(11,"td",25),s.Gc(12),s.Sb(),s.Tb(13,"td",25),s.Tb(14,"input",30),s.ec("ngModelChange",function(t){return s.zc(n),e.$implicit.advance=t})("keyup",function(){s.zc(n);var t=e.index;return s.gc(3).updateSubBooking(t)}),s.Sb(),s.Sb(),s.Tb(15,"td",25),s.Gc(16),s.Sb(),s.Ec(17,C,2,1,"td",29),s.Tb(18,"td"),s.Tb(19,"button",31),s.ec("click",function(){s.zc(n);var t=e.index;return s.gc(3).onRemove(t)}),s.Pb(20,"i",32),s.Sb(),s.Sb(),s.Sb()}if(2&t){var o=e.$implicit,i=s.gc(3);s.Bb(2),s.Hc(o.room.category.hotel.name),s.Bb(2),s.Hc(o.date),s.Bb(2),s.Hc("N/A"==o.room.roomNumber?o.room.category.name:o.room.roomNumber),s.Bb(2),s.Hc(o.room.price),s.Bb(2),s.Hc(o.room.discount),s.Bb(2),s.Ic("",o.room.price-o.discount," BDT"),s.Bb(2),s.oc("ngModel",o.advance),s.Bb(2),s.Ic("",null==o?null:o.due," BDT"),s.Bb(1),s.oc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function H(t,e){1&t&&s.Pb(0,"td")}function N(t,e){1&t&&s.Pb(0,"td")}function F(t,e){1&t&&s.Pb(0,"td")}function z(t,e){if(1&t&&(s.Tb(0,"table",24),s.Tb(1,"thead"),s.Tb(2,"tr"),s.Tb(3,"th"),s.Gc(4,"Hotel"),s.Sb(),s.Tb(5,"th"),s.Gc(6,"Date"),s.Sb(),s.Tb(7,"th"),s.Gc(8,"Room No."),s.Sb(),s.Tb(9,"th",25),s.Gc(10,"Per night"),s.Sb(),s.Tb(11,"th",25),s.Gc(12,"Discount"),s.Sb(),s.Tb(13,"th",25),s.Gc(14,"Payable"),s.Sb(),s.Tb(15,"th",25),s.Gc(16,"Advance"),s.Sb(),s.Tb(17,"th",25),s.Gc(18,"Due"),s.Sb(),s.Ec(19,O,2,0,"th",26),s.Pb(20,"th"),s.Sb(),s.Sb(),s.Tb(21,"tbody"),s.Ec(22,R,21,9,"tr",27),s.Sb(),s.Tb(23,"tfoot"),s.Tb(24,"tr"),s.Tb(25,"th",28),s.Gc(26,"Total"),s.Sb(),s.Tb(27,"th",25),s.Gc(28),s.Sb(),s.Pb(29,"td"),s.Ec(30,H,1,0,"td",29),s.Sb(),s.Tb(31,"tr"),s.Tb(32,"th",28),s.Gc(33,"Total Advance"),s.Sb(),s.Tb(34,"th",25),s.Gc(35),s.Sb(),s.Pb(36,"td"),s.Ec(37,N,1,0,"td",29),s.Sb(),s.Tb(38,"tr"),s.Tb(39,"th",28),s.Gc(40,"Total due"),s.Sb(),s.Tb(41,"th",25),s.Gc(42),s.Sb(),s.Pb(43,"td"),s.Ec(44,F,1,0,"td",29),s.Sb(),s.Sb(),s.Sb()),2&t){var n=s.gc(2);s.Bb(19),s.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.Bb(3),s.oc("ngForOf",n.subBookings),s.Bb(6),s.Ic("",null==n.booking?null:n.booking.total," BDT"),s.Bb(2),s.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.Bb(5),s.Ic("",null==n.booking?null:n.booking.totalAdvance," BDT"),s.Bb(2),s.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.Bb(5),s.Ic("",null==n.booking?null:n.booking.totalDue," BDT"),s.Bb(2),s.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function U(t,e){if(1&t){var n=s.Ub();s.Tb(0,"user-form",34),s.ec("user",function(t){return s.zc(n),s.gc(2).onCreateUser(t)}),s.Sb()}}function $(t,e){if(1&t){var n=s.Ub();s.Tb(0,"div",9),s.Tb(1,"h3",10),s.Gc(2,"New Booking"),s.Sb(),s.Tb(3,"div",11),s.Pb(4,"div",12),s.Tb(5,"div",13),s.Tb(6,"div",14),s.Tb(7,"input",15),s.ec("ngModelChange",function(t){return s.zc(n),s.gc().changeSimilar=t}),s.Sb(),s.Tb(8,"label",16),s.Gc(9," Auto Change Similar Category "),s.Sb(),s.Sb(),s.Sb(),s.Tb(10,"div",13),s.Tb(11,"div",17),s.Tb(12,"div",18),s.Tb(13,"div",19),s.Gc(14,"Ref. By"),s.Sb(),s.Sb(),s.Tb(15,"input",20),s.ec("ngModelChange",function(t){return s.zc(n),s.gc().refBy=t}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(16,"div",2),s.Tb(17,"div",21),s.Tb(18,"h5"),s.Gc(19,"Booking List"),s.Sb(),s.Sb(),s.Sb(),s.Ec(20,z,45,8,"table",22),s.Ec(21,U,1,0,"user-form",23),s.Sb()}if(2&t){var o=s.gc();s.Bb(7),s.oc("ngModel",o.changeSimilar),s.Bb(8),s.oc("ngModel",o.refBy),s.Bb(5),s.oc("ngIf",!o.sendingInfo)("ngIfElse",o.sending),s.Bb(1),s.oc("ngIf",!o.sendingInfo)}}var _=function(){function t(t,e,n,o){this.utilService=t,this.userService=e,this.bookingService=n,this.router=o,this.subBookings=[],this.showRoomList=!1,this.sendingInfo=!1,this.reloadRoomList=!1,this.changeSimilar=!0,this.message=""}return t.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0}},t.prototype.onHotel=function(t){this.hotel=t,this.hotelId=t.id,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t},t.prototype.onRoomSelect=function(t){var e=this;console.log(t),this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(n){var o=new b.a(n,t.room);o.room.discount>0&&(o.discount=o.room.discount),e.isContain(o)||(e.subBookings.push(o),e.updateSubBooking(e.subBookings.length-1),e.subBookings.sort(e.utilService.dynamicSortObject("date")),e.subBookings.sort(e.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.onCreateUser=function(t){var e=M({id:0},t);this.createBooking(e)},t.prototype.createBooking=function(t){var e=this,n=new l.a(t,this.subBookings),o=M({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue},n);this.message="generating booking",this.sendingInfo=!0,this.bookingService.createAdminAgentBooking(o).subscribe(function(t){e.message="Booking generated, Thank you.",e.sendingInfo=!1,e.booking.subBookingList=[],e.subBookings=[],e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])})},t.prototype.isContain=function(t){return this.subBookings.find(function(e){return e.room.id===t.room.id&&e.date===t.date&&e.room.category.hotel.id===t.room.category.hotel.id})},t.prototype.onRemove=function(t){this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.updateSubBooking=function(t){var e=this.subBookings[t];e.payablePrice=e.room.price-e.discount,e.due=e.payablePrice-e.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var e=0,n=0,o=0;if(this.changeSimilar){var i=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==i.room.category.id&&(t.discount=i.discount,t.advance=i.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){e+=t.payablePrice,n+=t.advance,o+=t.due}),this.booking.total=e,this.booking.totalAdvance=n,this.booking.totalDue=o},t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a),s.Ob(c.a),s.Ob(r.a),s.Ob(i.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-sell-room"]],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],[1,"text-center"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border",4,"ngIf","ngIfElse"],[3,"user",4,"ngIf"],[1,"table","mb-4","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"text-right"],[4,"ngIf"],["type","number","name","advance",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange"],[3,"user"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Sell room"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Ec(6,L,1,0,"admin-agent-hotel-list",4),s.Ec(7,E,1,2,"admin-agent-available-room-list",5),s.Sb(),s.Ec(8,$,22,5,"div",6),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",!e.showRoomList),s.Bb(1),s.oc("ngIf",e.showRoomList),s.Bb(1),s.oc("ngIf",e.subBookings.length>0))},directives:[u.p,m,D,d.a,d.m,d.p,d.b,u.o,d.r,A],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),j=n("haEQ");function J(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.hc(3,"date"),s.Sb(),s.Tb(4,"td"),s.Gc(5),s.Sb(),s.Tb(6,"td"),s.Gc(7),s.Sb(),s.Tb(8,"td"),s.Gc(9),s.Sb(),s.Tb(10,"td",7),s.Gc(11),s.hc(12,"currency"),s.Sb(),s.Sb()),2&t){var n=e.$implicit;s.Bb(2),s.Hc(s.jc(3,5,n.date,"MMM d, y, h:mm:ss a")),s.Bb(3),s.Hc(n.explanation),s.Bb(2),s.Hc(n.debit),s.Bb(2),s.Hc(n.credit),s.Bb(2),s.Ic(" ",s.lc(12,8,n.balance,"BDT ","symbol","4.2-2")," ")}}function q(t,e){1&t&&(s.Tb(0,"tr"),s.Tb(1,"td",10),s.Pb(2,"loading"),s.Sb(),s.Sb())}function X(t,e){if(1&t){var n=s.Ub();s.Tb(0,"pagination",12),s.ec("getPage",function(t){return s.zc(n),s.gc(2).getMyLedger(t)}),s.Sb()}if(2&t){var o=s.gc(2);s.oc("page",o.adminAgentLedgerPage)}}function Y(t,e){if(1&t&&(s.Tb(0,"div",5),s.Tb(1,"table",6),s.Tb(2,"thead"),s.Tb(3,"tr"),s.Tb(4,"th"),s.Gc(5,"Date"),s.Sb(),s.Tb(6,"th"),s.Gc(7,"Explanation"),s.Sb(),s.Tb(8,"th"),s.Gc(9,"Debit"),s.Sb(),s.Tb(10,"th"),s.Gc(11,"Credit"),s.Sb(),s.Tb(12,"th",7),s.Gc(13,"Balance"),s.Sb(),s.Sb(),s.Sb(),s.Tb(14,"tbody"),s.Ec(15,J,13,13,"tr",8),s.Sb(),s.Tb(16,"tfoot"),s.Ec(17,q,3,0,"tr",9),s.Tb(18,"tr"),s.Tb(19,"td",10),s.Ec(20,X,1,1,"pagination",11),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t){var n=s.gc();s.Bb(15),s.oc("ngForOf",n.adminAgentLedgerPage.content),s.Bb(2),s.oc("ngIf",n.loading),s.Bb(3),s.oc("ngIf",null!=n.adminAgentLedgerPage)}}var K=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyLedger()},t.prototype.getMyLedger=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){return this.accountingService.getAdminAgentMyLedger(t).subscribe(function(t){e.adminAgentLedgerPage=t}),[2]})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.\u0275fac=function(e){return new(e||t)(s.Ob(j.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-admin-agent-ledger"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"table","border","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[3,"page","getPage"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"My ledger"),s.Sb(),s.Sb(),s.Tb(3,"div",2),s.Tb(4,"div",3),s.Ec(5,Y,21,3,"div",4),s.Sb(),s.Sb()),2&t&&(s.Bb(5),s.oc("ngIf",(null==e.adminAgentLedgerPage||null==e.adminAgentLedgerPage.content?null:e.adminAgentLedgerPage.content.length)>0))},directives:[u.p,u.o,T.a,f.a],pipes:[u.f,u.d],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Q=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},W=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function V(t,e){if(1&t){var n=s.Ub();s.Tb(0,"a",11),s.ec("click",function(){s.zc(n);var t=e.$implicit;return s.gc(2).onSelectBooking(t.id)}),s.Pb(1,"i",12),s.Gc(2),s.hc(3,"date"),s.Sb()}if(2&t){var o=e.$implicit;s.Bb(2),s.Kc(" ",o.id,". ",o.user.name," [",s.jc(3,3,null==o?null:o.created,"d MMM,yy"),"] ")}}function tt(t,e){if(1&t&&(s.Tb(0,"ul",9),s.Tb(1,"li",6),s.Tb(2,"h5"),s.Gc(3,"My Bookings"),s.Sb(),s.Tb(4,"small"),s.Gc(5,"Choose a booking from below list"),s.Sb(),s.Sb(),s.Ec(6,V,4,6,"a",10),s.Sb()),2&t){var n=s.gc();s.Bb(6),s.oc("ngForOf",null==n.bookingPage?null:n.bookingPage.content)}}function et(t,e){if(1&t){var n=s.Ub();s.Tb(0,"pagination",13),s.ec("getPage",function(t){return s.zc(n),s.gc().onSelectBooking(t)}),s.Sb()}if(2&t){var o=s.gc();s.oc("page",o.bookingPage)("short",o.short)}}function nt(t,e){1&t&&(s.Tb(0,"th",20),s.Gc(1," Commi. "),s.Sb())}function ot(t,e){if(1&t&&(s.Tb(0,"td",20),s.Gc(1),s.Sb()),2&t){var n=s.gc().$implicit;s.Bb(1),s.Ic(" ",n.commission," ")}}function it(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.hc(3,"date"),s.Sb(),s.Tb(4,"td"),s.Gc(5),s.Sb(),s.Tb(6,"td",20),s.Gc(7),s.Sb(),s.Tb(8,"td",20),s.Gc(9),s.Sb(),s.Tb(10,"td",20),s.Gc(11),s.Sb(),s.Tb(12,"td",20),s.Gc(13),s.Sb(),s.Tb(14,"td",20),s.Gc(15),s.Sb(),s.Ec(16,ot,2,1,"td",21),s.Sb()),2&t){var n=e.$implicit,o=s.gc(3);s.Bb(2),s.Hc(s.jc(3,9,null==n?null:n.date,"d MMM,yy")),s.Bb(3),s.Jc(" ",null==n||null==n.room?null:n.room.roomNumber," [",null==n||null==n.room.category?null:n.room.category.name,"] "),s.Bb(2),s.Ic("",null==n||null==n.room?null:n.room.price," BDT"),s.Bb(2),s.Hc(n.discount),s.Bb(2),s.Hc(n.payablePrice),s.Bb(2),s.Hc(null==n?null:n.advance),s.Bb(2),s.Hc(null==n?null:n.due),s.Bb(1),s.oc("ngIf",(null==o.booking.refBy?null:o.booking.refBy.length)>0)}}function rt(t,e){if(1&t&&(s.Tb(0,"tbody"),s.Ec(1,it,17,12,"tr",24),s.Sb()),2&t){var n=s.gc(2);s.Bb(1),s.oc("ngForOf",n.booking.subBookingList)}}function ct(t,e){1&t&&s.Pb(0,"td")}function at(t,e){1&t&&s.Pb(0,"td")}function bt(t,e){1&t&&s.Pb(0,"td")}function lt(t,e){if(1&t&&(s.Tb(0,"div",14),s.Tb(1,"div",3),s.Tb(2,"div",15),s.Tb(3,"h3"),s.Gc(4,"Customer Info"),s.Sb(),s.Tb(5,"table"),s.Tb(6,"tr"),s.Tb(7,"th"),s.Gc(8,"Name :"),s.Sb(),s.Tb(9,"th"),s.Gc(10),s.Sb(),s.Sb(),s.Tb(11,"tr"),s.Tb(12,"th"),s.Gc(13,"Phone :"),s.Sb(),s.Tb(14,"th"),s.Gc(15),s.Sb(),s.Sb(),s.Tb(16,"tr"),s.Tb(17,"th"),s.Gc(18,"Email :"),s.Sb(),s.Tb(19,"th"),s.Gc(20),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Pb(21,"div",16),s.Tb(22,"div",16),s.Tb(23,"table"),s.Tb(24,"tr"),s.Tb(25,"td"),s.Gc(26,"Booking Id"),s.Sb(),s.Tb(27,"td"),s.Gc(28,":"),s.Sb(),s.Tb(29,"th"),s.Gc(30),s.Sb(),s.Sb(),s.Tb(31,"tr"),s.Tb(32,"td"),s.Gc(33,"Date"),s.Sb(),s.Tb(34,"td"),s.Gc(35,":"),s.Sb(),s.Tb(36,"td"),s.Tb(37,"strong"),s.Gc(38),s.hc(39,"date"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(40,"div",3),s.Pb(41,"div",17),s.Tb(42,"div",18),s.Gc(43),s.Sb(),s.Sb(),s.Tb(44,"div",3),s.Tb(45,"table",19),s.Tb(46,"thead"),s.Tb(47,"tr"),s.Tb(48,"th"),s.Gc(49,"Date"),s.Sb(),s.Tb(50,"th"),s.Gc(51,"Room number"),s.Sb(),s.Tb(52,"th",20),s.Gc(53,"Per night"),s.Sb(),s.Tb(54,"th",20),s.Gc(55,"Discount"),s.Sb(),s.Tb(56,"th",20),s.Gc(57,"Payable"),s.Sb(),s.Tb(58,"th",20),s.Gc(59,"Advance"),s.Sb(),s.Tb(60,"th",20),s.Gc(61,"Due"),s.Sb(),s.Ec(62,nt,2,0,"th",21),s.Sb(),s.Sb(),s.Ec(63,rt,2,1,"tbody",22),s.Tb(64,"tfoot"),s.Tb(65,"tr"),s.Tb(66,"th",23),s.Gc(67,"Total"),s.Sb(),s.Tb(68,"th",20),s.Gc(69),s.Sb(),s.Pb(70,"td"),s.Ec(71,ct,1,0,"td",22),s.Sb(),s.Tb(72,"tr"),s.Tb(73,"th",23),s.Gc(74,"Total Advance"),s.Sb(),s.Tb(75,"th",20),s.Gc(76),s.Sb(),s.Pb(77,"td"),s.Ec(78,at,1,0,"td",22),s.Sb(),s.Tb(79,"tr"),s.Tb(80,"th",23),s.Gc(81,"Total due"),s.Sb(),s.Tb(82,"th",20),s.Gc(83),s.Sb(),s.Pb(84,"td"),s.Ec(85,bt,1,0,"td",22),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t){var n=s.gc();s.Bb(10),s.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.name),s.Bb(5),s.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),s.Bb(5),s.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.email),s.Bb(10),s.Hc(null==n.booking?null:n.booking.id),s.Bb(8),s.Ic(" ",s.jc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),s.Bb(5),s.Ic("Ref. By : ",n.booking.refBy,""),s.Bb(19),s.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.Bb(1),s.oc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),s.Bb(6),s.Ic("",null==n.booking?null:n.booking.total," BDT"),s.Bb(2),s.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.Bb(5),s.Ic("",null==n.booking?null:n.booking.totalAdvance," BDT"),s.Bb(2),s.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.Bb(5),s.Ic("",null==n.booking?null:n.booking.totalDue," BDT"),s.Bb(2),s.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var st=function(){function t(t){this.bookingService=t,this.short=!0}return t.prototype.ngOnInit=function(){this.getServiceAgentBookings()},t.prototype.getServiceAgentBookings=function(t){return void 0===t&&(t=0),Q(this,void 0,void 0,function(){var e=this;return W(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getAdminAgentBookings(t).subscribe(function(t){e.bookingPage=t})];case 1:return n.sent(),[2]}})})},t.prototype.onSelectBooking=function(t){return Q(this,void 0,void 0,function(){var e;return W(this,function(n){return e=this.bookingPage.content.find(function(e){return e.id==t}),this.booking=Z({},e),[2]})})},t.\u0275fac=function(e){return new(e||t)(s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-my-sell"]],decls:10,vars:3,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3","my-4","d-print-none"],["class","list-group",4,"ngIf"],[1,"list-group-item"],[3,"page","short","getPage",4,"ngIf"],["class","col",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[3,"page","short","getPage"],[1,"col"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"col-md-9"],[1,"col-md-3"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"My bookings"),s.Sb(),s.Sb(),s.Tb(3,"div",2),s.Tb(4,"div",3),s.Tb(5,"div",4),s.Ec(6,tt,7,1,"ul",5),s.Tb(7,"li",6),s.Ec(8,et,1,2,"pagination",7),s.Sb(),s.Sb(),s.Ec(9,lt,86,17,"div",8),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",(null==e.bookingPage||null==e.bookingPage.content?null:e.bookingPage.content.length)>0),s.Bb(2),s.oc("ngIf",null!=e.bookingPage),s.Bb(1),s.oc("ngIf",e.booking))},directives:[u.p,u.o,f.a],pipes:[u.f],styles:[""]}),t}(),ut=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyBalance()},t.prototype.getMyBalance=function(){return t=this,void 0,n=function(){var t=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(e){return this.accountingService.getAdminAgentBalance().subscribe(function(e){t.balance=e.response}),[2]})},new((e=void 0)||(e=Promise))(function(o,i){function r(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,c)}a((n=n.apply(t,[])).next())});var t,e,n},t.\u0275fac=function(e){return new(e||t)(s.Ob(j.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-my-balance"]],decls:9,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"text-center"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"My balance"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"h3",2),s.Gc(5," My balance is : BDT"),s.Tb(6,"u"),s.Gc(7),s.Sb(),s.Gc(8," /= "),s.Sb(),s.Sb()),2&t&&(s.Bb(7),s.Hc(e.balance))},styles:[""]}),t}(),gt=n("kU/X"),dt=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},ft=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ht(t,e){1&t&&(s.Tb(0,"th"),s.Gc(1,"Reservation Date"),s.Sb())}function pt(t,e){if(1&t&&(s.Tb(0,"td"),s.Gc(1),s.hc(2,"date"),s.Sb()),2&t){var n=s.gc().$implicit;s.Bb(1),s.Ic(" ",s.jc(2,1,n.date,"d MMM,y")," ")}}var mt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function St(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.Sb(),s.Tb(3,"td"),s.Gc(4),s.Sb(),s.Tb(5,"td"),s.Gc(6),s.Sb(),s.Tb(7,"td"),s.Gc(8),s.Sb(),s.Tb(9,"td"),s.Gc(10),s.Sb(),s.Ec(11,pt,3,4,"td",16),s.Tb(12,"td",17),s.Gc(13),s.Sb(),s.Tb(14,"td",17),s.Gc(15),s.Sb(),s.Tb(16,"td",17),s.Gc(17),s.Sb(),s.Tb(18,"td"),s.Gc(19),s.Sb(),s.Tb(20,"td",17),s.Gc(21),s.Sb(),s.Tb(22,"td",20),s.Gc(23),s.Sb(),s.Sb()),2&t){var n=e.$implicit,o=s.gc(2);s.Bb(2),s.Hc(n.date),s.Bb(2),s.Hc(n.hotelName),s.Bb(2),s.Jc(" ",n.company," ",n.role?"["+n.role+"]":""," "),s.Bb(2),s.Jc("",n.customerName,"[",n.customerPhone,"]"),s.Bb(2),s.Jc("",n.roomNumber," [",n.category,"]"),s.Bb(1),s.oc("ngIf","Booking"===o.reportHead),s.Bb(2),s.Hc(n.price),s.Bb(2),s.Hc(n.advance),s.Bb(2),s.Hc(n.due),s.Bb(2),s.Hc(n.ref),s.Bb(2),s.Hc(n.commission),s.Bb(1),s.oc("ngClass",s.tc(16,mt,"Paid"==n.status,"Unpaid"==n.status)),s.Bb(1),s.Ic(" ",n.status," ")}}function vt(t,e){1&t&&s.Pb(0,"td")}function Tt(t,e){if(1&t&&(s.Tb(0,"table",15),s.Tb(1,"thead"),s.Tb(2,"tr"),s.Tb(3,"th"),s.Gc(4,"Check in Date"),s.Sb(),s.Tb(5,"th"),s.Gc(6,"Hotel Name"),s.Sb(),s.Tb(7,"th"),s.Gc(8,"Sold by"),s.Sb(),s.Tb(9,"th"),s.Gc(10,"Customer"),s.Sb(),s.Tb(11,"th"),s.Gc(12,"Room No."),s.Sb(),s.Ec(13,ht,2,0,"th",16),s.Tb(14,"th",17),s.Gc(15,"Rent"),s.Sb(),s.Tb(16,"th",17),s.Gc(17,"Advance"),s.Sb(),s.Tb(18,"th",17),s.Gc(19,"Due"),s.Sb(),s.Tb(20,"th"),s.Gc(21,"Ref"),s.Sb(),s.Tb(22,"th",17),s.Gc(23,"Commission"),s.Sb(),s.Tb(24,"th"),s.Gc(25,"Status"),s.Sb(),s.Sb(),s.Sb(),s.Tb(26,"tbody"),s.Ec(27,St,24,19,"tr",18),s.Sb(),s.Tb(28,"tfoot"),s.Tb(29,"tr"),s.Pb(30,"td"),s.Pb(31,"td"),s.Pb(32,"td"),s.Tb(33,"th"),s.Gc(34,"Total"),s.Sb(),s.Ec(35,vt,1,0,"td",16),s.Pb(36,"th"),s.Tb(37,"th",17),s.Gc(38),s.Sb(),s.Tb(39,"th",17),s.Gc(40),s.Sb(),s.Tb(41,"th",17),s.Gc(42),s.Sb(),s.Pb(43,"th",19),s.Sb(),s.Sb(),s.Sb()),2&t){var n=s.gc();s.Bb(13),s.oc("ngIf","Booking"===n.reportHead),s.Bb(14),s.oc("ngForOf",n.reportList),s.Bb(8),s.oc("ngIf","Booking"===n.reportHead),s.Bb(3),s.Hc(n.total.totalrent),s.Bb(2),s.Hc(n.total.totalAdvance),s.Bb(2),s.Hc(n.total.totalDue)}}function yt(t,e){1&t&&(s.Tb(0,"h3",21),s.Pb(1,"i",22),s.Gc(2," No data found"),s.Sb())}var kt=[{path:"sell",component:_},{path:"my-ledger",component:K},{path:"my-sells",component:st},{path:"report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.mode="Sell",this.daterange={},this.reportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkoutDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getAdminAgentBookingReport(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminAgentReserveReport(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminAgentBookingReport=function(t,e){return dt(this,void 0,void 0,function(){var n=this;return ft(this,function(o){switch(o.label){case 0:return[4,this.reportService.getAdminAgentBookingReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminAgentReserveReport=function(t,e){return dt(this,void 0,void 0,function(){var n=this;return ft(this,function(o){switch(o.label){case 0:return[4,this.reportService.getAdminAgentReserveReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.reportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(s.Ob(gt.a),s.Ob(a.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Agent report"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Tb(6,"div",4),s.Tb(7,"div",5),s.Tb(8,"div",6),s.Pb(9,"i",7),s.Sb(),s.Sb(),s.Tb(10,"input",8),s.ec("selected",function(t){return e.selectedDate(t)}),s.Sb(),s.Sb(),s.Sb(),s.Tb(11,"div",3),s.Tb(12,"div",9),s.Tb(13,"div",5),s.Tb(14,"div",6),s.Gc(15,"Type"),s.Sb(),s.Sb(),s.Tb(16,"select",10),s.ec("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),s.Tb(17,"option",11),s.Gc(18," By checkin date "),s.Sb(),s.Tb(19,"option",12),s.Gc(20," By sell's date "),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Ec(21,Tt,44,6,"table",13),s.Ec(22,yt,3,0,"ng-template",null,14,s.Fc),s.Sb()),2&t){var n=s.yc(23);s.Bb(10),s.oc("options",e.options),s.Bb(6),s.oc("ngModel",e.mode),s.Bb(5),s.oc("ngIf",e.reportList.length>0)("ngIfElse",n)}},directives:[v.b,d.u,d.m,d.p,d.q,d.w,u.p,u.o,u.n],pipes:[u.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}()},{path:"my-balance",component:ut}],Bt=function(){function t(){}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[o.a,i.e.forChild(kt)]]}),t}()}}]);