(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{SfbY:function(t,e,o){"use strict";o.r(e),o.d(e,"ROUTES",function(){return Ie}),o.d(e,"ServiceAdminRoomsModule",function(){return xe});var n=o("3M1h"),r=o("d26D"),i=o("yBZE"),c=o("8Y7J"),a=o("iInd"),b=o("SVse"),l=o("HF3I"),s=o("7rPp"),u=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(e){i(e)}}function a(t){try{b(n.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}b((n=n.apply(t,e||[])).next())})},d=function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function m(t,e){if(1&t&&(c.Qb(0,"li",7),c.Mb(1,"loading",12),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("message",o.message)}}function f(t,e){if(1&t){var o=c.Rb();c.Qb(0,"a",13),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc(2).onSelectCategory(t.id)}),c.Mb(1,"i",14),c.Fc(2),c.Pb()}if(2&t){var n=e.$implicit;c.zb(2),c.Hc(" ",n.name," ")}}function g(t,e){if(1&t&&(c.Qb(0,"ul",6),c.Qb(1,"li",7),c.Qb(2,"h5"),c.Fc(3,"Category list"),c.Pb(),c.Qb(4,"small"),c.Fc(5,"Choose a category from below list"),c.Pb(),c.Pb(),c.Dc(6,m,2,1,"li",8),c.Dc(7,f,3,1,"a",9),c.Qb(8,"a",10),c.Mb(9,"i",11),c.Fc(10," Room list "),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(6),c.lc("ngIf",o.showCategoryLoading),c.zb(1),c.lc("ngForOf",o.categoryList)}}function h(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",15),c.Qb(1,"room-form",16),c.bc("create",function(t){return c.wc(o),c.dc().onCreate(t)})("update",function(t){return c.wc(o),c.dc().onUpdate(t)}),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(1),c.lc("hotel",n.hotel)("category",n.category)("room",n.room)}}var p=function(){function t(t,e,o,n,r){this.hotelService=t,this.categoryService=e,this.roomService=o,this.activeRoute=n,this.router=r,this.showCategoryLoading=!1,this.message="Category loading ",this.id=n.snapshot.params.id}return t.prototype.ngOnInit=function(){this.getMyHotel(),this.getMyCategories(),this.id&&this.getServiceAdminRoom(this.id)},t.prototype.getMyHotel=function(){return u(this,void 0,void 0,function(){var t=this;return d(this,function(e){switch(e.label){case 0:return[4,this.hotelService.getServiceAdminHotel().subscribe(function(e){t.hotel=e})];case 1:return e.sent(),[2]}})})},t.prototype.getMyCategories=function(){return u(this,void 0,void 0,function(){var t=this;return d(this,function(e){switch(e.label){case 0:return[4,this.categoryService.getServiceAdminCategoryList().subscribe(function(e){t.categoryList=e})];case 1:return e.sent(),[2]}})})},t.prototype.getServiceAdminRoom=function(t){return u(this,void 0,void 0,function(){var e=this;return d(this,function(o){switch(o.label){case 0:return[4,this.roomService.getServiceRoom(t).subscribe(function(t){e.room=t,e.category=e.room.category,e.hotel=e.room.category.hotel})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categoryList.find(function(e){return e.id===t});this.category=e},t.prototype.onCreate=function(t){var e=this;this.roomService.saveServiceAdminRoom(t).subscribe(function(t){e.router.navigate(["/dashboard/service-admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;t.id=this.room.id,this.roomService.saveServiceAdminRoom(t).subscribe(function(t){e.router.navigate(["/dashboard/service-admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(c.Lb(r.a),c.Lb(n.a),c.Lb(i.a),c.Lb(a.a),c.Lb(a.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-add"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["routerLink","/dashboard/service-admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-chevron-left"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Add Rooms"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Dc(6,g,11,2,"ul",4),c.Pb(),c.Dc(7,h,2,3,"div",5),c.Pb(),c.Pb()),2&t&&(c.zb(6),c.lc("ngIf",(null==e.categoryList?null:e.categoryList.length)>0),c.zb(1),c.lc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[b.q,b.p,a.d,l.a,s.a],styles:[""]}),t}(),v=o("R/zX"),P=o("eIep"),y=o("LLt/"),Q=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(e){i(e)}}function a(t){try{b(n.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}b((n=n.apply(t,e||[])).next())})},k=function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function w(t,e){if(1&t&&c.Mb(0,"img",35),2&t){var o=c.dc();c.lc("src",o.imageUrl,c.yc)}}function F(t,e){if(1&t&&(c.Qb(0,"div",36),c.Fc(1),c.Pb()),2&t){var o=c.dc();c.zb(1),c.Hc(" ",o.errorMessage," ")}}function D(t,e){if(1&t){var o=c.Rb();c.Qb(0,"p"),c.Qb(1,"input",37),c.bc("change",function(t){return c.wc(o),c.dc().fileChange(t)}),c.Pb(),c.Pb()}}function S(t,e){1&t&&(c.Qb(0,"div"),c.Fc(1," Uploaded "),c.Mb(2,"i",38),c.Pb())}function M(t,e){if(1&t){var o=c.Rb();c.Qb(0,"button",39),c.bc("click",function(){return c.wc(o),c.dc().startUpload()}),c.Fc(1," Upload "),c.Pb()}}function I(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div"),c.Qb(1,"button",41),c.bc("click",function(){c.wc(o);var t=c.dc().$implicit;return c.dc().deleteImage(t)}),c.Qb(2,"span"),c.Fc(3,"\xd7"),c.Pb(),c.Pb(),c.Qb(4,"div",42),c.Mb(5,"img",35),c.Pb(),c.Pb()}if(2&t){var n=c.dc().$implicit;c.zb(5),c.lc("src",n,c.yc)}}function x(t,e){if(1&t&&(c.Qb(0,"div",40),c.Dc(1,I,6,1,"div",29),c.Pb()),2&t){var o=e.$implicit;c.zb(1),c.lc("ngIf",o.length)}}var z=function(){function t(t,e,o,n){this.roomService=t,this.auth=e,this.activatedRoute=o,this.ng2ImgMax=n,this.errorMessage="",this.roomImagesUrl=[],this.id=o.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&(this.getServiceAdminRoom(this.id),this.loadRoomImages(this.id))},t.prototype.getServiceAdminRoom=function(t){return Q(this,void 0,void 0,function(){var e=this;return k(this,function(o){switch(o.label){case 0:return[4,this.roomService.getServiceRoom(t).subscribe(function(t){e.room=t})];case 1:return o.sent(),[2]}})})},t.prototype.loadRoomImages=function(t){return Q(this,void 0,void 0,function(){var e=this;return k(this,function(o){switch(o.label){case 0:return[4,this.roomService.getRoomImageUrls(t).subscribe(function(t){e.roomImagesUrl=[],t.forEach(function(t){e.roomImagesUrl.push(e.roomService.imageUrl+t)})},function(t){console.log(t)})];case 1:return o.sent(),[2]}})})},t.prototype.previewFile=function(t){var e=this,o=new FileReader;o.onload=function(t){e.imageUrl=t.target.result},o.readAsDataURL(t.target.files[0])},t.prototype.fileChange=function(t){this.previewFile(t),this.fileList=t.target.files,this.progressPercentage=0,this.errorMessage=""},t.prototype.startUpload=function(){var t=this;if(this.fileList.length>0){var e=new FormData,o=this.fileList[0];this.ng2ImgMax.resizeImage(o,800,600).pipe(Object(P.a)(function(n){return console.log("size : ",n.size),e.append("image",n,o.name),t.roomService.uploadServiceAdminRoomImage(t.id,e)})).subscribe(function(e){t.imageUrl="",t.fileList=null,t.progressPercentage=100,t.loadRoomImages(t.id)},function(e){console.log(e),t.errorMessage=e._body})}},t.prototype.deleteImage=function(t){var e=this,o=new URL(t).pathname.split("/"),n=parseInt(o[o.length-1]);this.roomService.deleteServiceAdminRoomImage(o[o.length-3],n).subscribe(function(t){e.roomImagesUrl.splice(n,1,"")},function(t){console.log("Image could not delete")})},t.prototype.resizeImage=function(t,e,o){return this.ng2ImgMax.resizeImage(t,e,o)},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(y.a),c.Lb(a.a),c.Lb(v.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-details"]],decls:156,vars:35,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["for","floorNumber"],[1,"form-group","col-md-4"],["for","price"],["for","discount"],["for","agentDiscount"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/service-admin/rooms",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-6 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-6","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Room details"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"label",5),c.Fc(8,"Hotel Name"),c.Pb(),c.Qb(9,"label",6),c.Fc(10),c.Pb(),c.Pb(),c.Qb(11,"div",4),c.Qb(12,"label",7),c.Fc(13,"Category Name"),c.Pb(),c.Qb(14,"label",6),c.Fc(15),c.Pb(),c.Pb(),c.Qb(16,"div",8),c.Qb(17,"div",9),c.Qb(18,"label",10),c.Fc(19,"Room Number *"),c.Pb(),c.Qb(20,"label",6),c.Fc(21),c.Pb(),c.Pb(),c.Qb(22,"div",9),c.Qb(23,"label",11),c.Fc(24,"Floor Number *"),c.Pb(),c.Qb(25,"label",6),c.Fc(26),c.Pb(),c.Pb(),c.Pb(),c.Qb(27,"div",8),c.Qb(28,"div",9),c.Qb(29,"label",10),c.Fc(30,"Number of Beds *"),c.Pb(),c.Qb(31,"label",6),c.Fc(32),c.Pb(),c.Pb(),c.Qb(33,"div",9),c.Qb(34,"label",11),c.Fc(35,"Room Size (Square feet) *"),c.Pb(),c.Qb(36,"label",6),c.Fc(37),c.Pb(),c.Pb(),c.Pb(),c.Qb(38,"div",8),c.Qb(39,"div",12),c.Qb(40,"label",13),c.Fc(41,"Price *"),c.Pb(),c.Qb(42,"label",6),c.Fc(43),c.Pb(),c.Pb(),c.Qb(44,"div",12),c.Qb(45,"label",14),c.Fc(46,"Discount *"),c.Pb(),c.Qb(47,"label",6),c.Fc(48),c.Pb(),c.Pb(),c.Qb(49,"div",12),c.Qb(50,"label",15),c.Fc(51,"Agent Discount *"),c.Pb(),c.Qb(52,"label",6),c.Fc(53),c.Pb(),c.Pb(),c.Pb(),c.Qb(54,"div",16),c.Qb(55,"h3",17),c.Fc(56,"Facilities"),c.Pb(),c.Qb(57,"div",18),c.Qb(58,"div",19),c.Qb(59,"label",20),c.Mb(60,"i",21),c.Fc(61," Front Face "),c.Pb(),c.Pb(),c.Qb(62,"div",19),c.Qb(63,"label",20),c.Mb(64,"i",21),c.Fc(65," Back Face "),c.Pb(),c.Pb(),c.Qb(66,"div",19),c.Qb(67,"label",20),c.Mb(68,"i",21),c.Fc(69," High Commode "),c.Pb(),c.Pb(),c.Qb(70,"div",19),c.Qb(71,"label",20),c.Mb(72,"i",21),c.Fc(73," Breakfast "),c.Pb(),c.Pb(),c.Qb(74,"div",19),c.Qb(75,"label",20),c.Mb(76,"i",21),c.Fc(77," Internet "),c.Pb(),c.Pb(),c.Qb(78,"div",19),c.Qb(79,"label",20),c.Mb(80,"i",21),c.Fc(81," Air Condition "),c.Pb(),c.Pb(),c.Qb(82,"div",19),c.Qb(83,"label",20),c.Mb(84,"i",21),c.Fc(85," TV "),c.Pb(),c.Pb(),c.Qb(86,"div",19),c.Qb(87,"label",20),c.Mb(88,"i",21),c.Fc(89," Geyser "),c.Pb(),c.Pb(),c.Qb(90,"div",19),c.Qb(91,"label",20),c.Mb(92,"i",21),c.Fc(93," HillView "),c.Pb(),c.Pb(),c.Qb(94,"div",19),c.Qb(95,"label",20),c.Mb(96,"i",21),c.Fc(97," Sea View "),c.Pb(),c.Pb(),c.Qb(98,"div",19),c.Qb(99,"label",20),c.Mb(100,"i",21),c.Fc(101," Telephone "),c.Pb(),c.Pb(),c.Qb(102,"div",19),c.Qb(103,"label",20),c.Mb(104,"i",21),c.Fc(105," Bath Towel "),c.Pb(),c.Pb(),c.Qb(106,"div",19),c.Qb(107,"label",20),c.Mb(108,"i",21),c.Fc(109," Table And Chair "),c.Pb(),c.Pb(),c.Qb(110,"div",19),c.Qb(111,"label",20),c.Mb(112,"i",21),c.Fc(113," In Middle "),c.Pb(),c.Pb(),c.Qb(114,"div",19),c.Qb(115,"label",20),c.Mb(116,"i",21),c.Fc(117," Kitchen "),c.Pb(),c.Pb(),c.Qb(118,"div",19),c.Qb(119,"label",20),c.Mb(120,"i",21),c.Fc(121," BathTub "),c.Pb(),c.Pb(),c.Qb(122,"div",19),c.Qb(123,"label",20),c.Mb(124,"i",21),c.Fc(125," Balcony "),c.Pb(),c.Pb(),c.Qb(126,"div",19),c.Qb(127,"label",20),c.Mb(128,"i",21),c.Fc(129," Extra Beds "),c.Pb(),c.Pb(),c.Qb(130,"div",19),c.Qb(131,"label",20),c.Mb(132,"i",21),c.Fc(133," Pets Allowed "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(134,"div",22),c.Qb(135,"a",23),c.Fc(136," Edit "),c.Pb(),c.Pb(),c.Pb(),c.Qb(137,"div",3),c.Qb(138,"div",24),c.Qb(139,"div",25),c.Dc(140,w,1,1,"img",26),c.Pb(),c.Qb(141,"div",27),c.Dc(142,F,2,1,"div",28),c.Qb(143,"div"),c.Fc(144," Please select a image to upload "),c.Mb(145,"br"),c.Fc(146," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),c.Pb(),c.Dc(147,D,2,0,"p",29),c.Dc(148,S,3,0,"div",29),c.Qb(149,"div"),c.Dc(150,M,2,0,"button",30),c.Qb(151,"a",31),c.Fc(152," Back "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(153,"div",32),c.Qb(154,"div",33),c.Dc(155,x,2,1,"div",34),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(10),c.Hc(" ",null==e.room||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name," "),c.zb(5),c.Hc(" ",null==e.room||null==e.room.category?null:e.room.category.name," "),c.zb(6),c.Gc(null==e.room?null:e.room.roomNumber),c.zb(5),c.Gc(null==e.room?null:e.room.floorNumber),c.zb(6),c.Gc(null==e.room?null:e.room.numberOfBed),c.zb(5),c.Gc(null==e.room?null:e.room.roomSize),c.zb(6),c.Gc(null==e.room?null:e.room.price),c.zb(5),c.Gc(null==e.room?null:e.room.discount),c.zb(5),c.Gc(null==e.room?null:e.room.agentDiscount),c.zb(7),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.frontFace?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.backFace?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.highCommode?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.breakfast?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.internet?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.airConditioned?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tv?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.geyser?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.hillView?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.seaView?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.telephone?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTowel?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tableAndChair?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.inMiddle?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.kitchen?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTub?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.balcony?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.extraBeds?"fa-check-square-o":"fa-square-o"),c.zb(4),c.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.petsAllowed?"fa-check-square-o":"fa-square-o"),c.zb(3),c.nc("routerLink","/dashboard/service-admin/rooms/add/",null==e.room?null:e.room.id,""),c.zb(5),c.lc("ngIf",e.imageUrl),c.zb(2),c.lc("ngIf",e.errorMessage.length>0),c.zb(5),c.lc("ngIf",e.roomImagesUrl.length<5),c.zb(1),c.lc("ngIf",100==e.progressPercentage),c.zb(2),c.lc("ngIf",e.fileList),c.zb(5),c.lc("ngForOf",e.roomImagesUrl))},directives:[b.o,a.d,b.q,b.p],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;width:100%}"]}),t}();function R(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",3),c.Qb(1,"div",4),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc().onSelectRoom(t.id,t.roomNumber,t.price)}),c.Fc(2),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit;c.zb(2),c.Hc(" ",n.roomNumber," ")}}var C=function(){function t(t){this.roomService=t,this.selectRoom=new c.n}return t.prototype.ngOnInit=function(){this.getServiceAdminRoomNumbers()},t.prototype.getServiceAdminRoomNumbers=function(){return t=this,void 0,o=function(){var t=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(e){switch(e.label){case 0:return[4,this.roomService.getServiceAdminRoomNumbers().subscribe(function(e){t.roomList=e})];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(n,r){function i(t){try{a(o.next(t))}catch(e){r(e)}}function c(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var o;t.done?n(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(i,c)}a((o=o.apply(t,[])).next())});var t,e,o},t.prototype.onSelectRoom=function(t,e,o){this.selectRoom.emit({roomId:t,roomNumber:e,price:o})},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["service-admin-all-room-numbers"]],outputs:{selectRoom:"selectRoom"},decls:5,vars:1,consts:[[1,"container"],[1,"row","m-0","mt-4"],["class","col-md-1 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"h4"),c.Fc(2,"All room list"),c.Pb(),c.Qb(3,"div",1),c.Dc(4,R,3,1,"div",2),c.Pb(),c.Pb()),2&t&&(c.zb(4),c.lc("ngForOf",e.roomList))},directives:[b.p],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),O=o("s7LF"),L=o("G0yt");function B(t,e){if(1&t&&(c.Qb(0,"span"),c.Fc(1),c.Pb()),2&t){var o=e.$implicit;c.zb(1),c.Hc("",o,", ")}}var N=function(t){return{disabled:t}},A=function(){function t(t){this.builder=t,this.create=new c.n,this.close=new c.n,this.mouseoverShifting=!1,this.createForm()}return t.prototype.ngOnChanges=function(t){t.roomIds&&(this.form.patchValue({roomIds:this.roomIds}),console.log(this.form.value))},t.prototype.createForm=function(){this.form=this.builder.group({roomIds:this.builder.array(this.roomIds||[]),startDate:["",O.v.required],endDate:["",O.v.required],amount:["",O.v.required],changeSimilar:!1})},t.prototype.submit=function(){if(this.form.valid){var t=this.form.get("roomIds");t.reset(),this.roomIds.forEach(function(e){t.push(new O.e(e))}),this.form.get("roomIds").setValue(this.roomIds),this.create.emit(this.form.value),this.form.reset()}},t.prototype.onClose=function(){this.close.emit(!1)},t.\u0275fac=function(e){return new(e||t)(c.Lb(O.d))},t.\u0275cmp=c.Fb({type:t,selectors:[["room-discount-form"]],inputs:{roomIds:"roomIds",roomNumbers:"roomNumbers"},outputs:{create:"create",close:"close"},features:[c.xb],decls:35,vars:5,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],[4,"ngFor","ngForOf"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"]],template:function(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"h3",3),c.Fc(4,"Adjust room discount map"),c.Pb(),c.Qb(5,"form",4),c.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),c.Qb(6,"div",5),c.Qb(7,"label",6),c.Fc(8,"Room numbers"),c.Pb(),c.Qb(9,"label",7),c.Dc(10,B,2,1,"span",8),c.Pb(),c.Pb(),c.Qb(11,"div",5),c.Qb(12,"label",9),c.Fc(13,"Start date"),c.Pb(),c.Qb(14,"input",10,11),c.bc("click",function(){return c.wc(o),c.vc(15).toggle()}),c.Pb(),c.Pb(),c.Qb(16,"div",5),c.Qb(17,"label",12),c.Fc(18,"End date"),c.Pb(),c.Qb(19,"input",13,14),c.bc("click",function(){return c.wc(o),c.vc(20).toggle()}),c.Pb(),c.Pb(),c.Qb(21,"div",5),c.Qb(22,"label",15),c.Fc(23,"Amount"),c.Pb(),c.Mb(24,"input",16),c.Pb(),c.Qb(25,"div",17),c.Mb(26,"input",18),c.Qb(27,"label",19),c.Fc(28," Change similar "),c.Pb(),c.Pb(),c.Qb(29,"div",20),c.Qb(30,"button",21),c.bc("click",function(){return e.onClose()}),c.Fc(31," Close "),c.Pb(),c.Qb(32,"span",22),c.bc("mouseenter",function(){return e.mouseoverShifting=!0}),c.Qb(33,"button",23),c.Fc(34," Submit "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&t&&(c.zb(5),c.lc("formGroup",e.form),c.zb(5),c.lc("ngForOf",e.roomNumbers),c.zb(23),c.lc("ngClass",c.pc(3,N,e.form.invalid)))},directives:[O.x,O.n,O.g,b.p,O.b,L.i,O.m,O.f,O.r,O.a,b.o],styles:[""]}),t}(),q=o("/e7+"),_=o("53Co");function E(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td",12),c.Fc(5),c.Pb(),c.Qb(6,"td",12),c.Fc(7),c.Pb(),c.Qb(8,"td",12),c.Fc(9),c.Pb(),c.Pb()),2&t){var o=e.$implicit,n=c.dc(3);c.zb(2),c.Gc(c.gc(3,4,o.key,"d MMM,yy : EEE")),c.zb(3),c.Gc(n.price),c.zb(2),c.Gc(o.value),c.zb(2),c.Gc(n.price-o.value)}}function G(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,E,10,7,"tr",13),c.ec(2,"keyvalue"),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngForOf",c.fc(2,1,o.discountMap))}}function H(t,e){if(1&t&&(c.Qb(0,"div"),c.Qb(1,"h3"),c.Fc(2),c.Pb(),c.Qb(3,"table",11),c.Qb(4,"thead"),c.Qb(5,"tr"),c.Qb(6,"th"),c.Fc(7,"Date"),c.Pb(),c.Qb(8,"th",12),c.Fc(9,"Price"),c.Pb(),c.Qb(10,"th",12),c.Fc(11,"Discount"),c.Pb(),c.Qb(12,"th",12),c.Fc(13,"Payable"),c.Pb(),c.Pb(),c.Pb(),c.Dc(14,G,3,3,"tbody",10),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(2),c.Hc("Discount map for Room number : ",o.roomNumber,""),c.zb(12),c.lc("ngIf",o.discountMap)}}var T=function(){function t(t,e){this.roomService=t,this.utilService=e,this.showForm=new c.n,this.setDateRanges()}return t.prototype.ngOnChanges=function(t){var e=t.roomId;e.currentValue&&this.getServiceAdminDiscountMap(e.currentValue)},t.prototype.setDateRanges=function(){this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30);var t=new Date,e={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()};this.model=e,this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.roomId&&this.getServiceAdminDiscountMap(this.roomId)},t.prototype.getServiceAdminDiscountMap=function(t){return e=this,void 0,n=function(){var e,o,n=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return this.startDate||this.setDateRanges(),e=this.utilService.getDateString(this.startDate),o=this.utilService.getDateString(this.endDate),this.discountMap=null,[4,this.roomService.getServiceAdminDiscountMap(t,e,o).subscribe(function(t){n.discountMap=t})];case 1:return r.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onAdjustStatusMap=function(){this.showForm.emit(!0)},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["room-discount-map"]],inputs:{roomId:"roomId",roomNumber:"roomNumber",price:"price"},outputs:{showForm:"showForm"},features:[c.xb],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-6"],[1,"btn-sm","btn-warning",3,"click"],[4,"ngIf"],[1,"table","border","table-hover"],[1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.Qb(5,"div",5),c.Mb(6,"i",6),c.Pb(),c.Pb(),c.Qb(7,"input",7),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(8,"div",8),c.Qb(9,"button",9),c.bc("click",function(){return e.onAdjustStatusMap()}),c.Fc(10," Adjust Status Map "),c.Pb(),c.Pb(),c.Pb(),c.Dc(11,H,15,2,"div",10),c.Pb()),2&t&&(c.zb(7),c.lc("options",e.options),c.zb(4),c.lc("ngIf",e.roomId))},directives:[_.b,b.q,b.p],pipes:[b.k,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem}"]}),t}();function U(t,e){if(1&t){var o=c.Rb();c.Qb(0,"room-discount-form",8),c.bc("create",function(t){return c.wc(o),c.dc().onCreate(t)})("close",function(t){return c.wc(o),c.dc().onShowForm(t)}),c.Pb()}if(2&t){var n=c.dc();c.lc("roomIds",n.roomIds)("roomNumbers",n.roomNumbers)}}function $(t,e){if(1&t){var o=c.Rb();c.Qb(0,"room-discount-map",9),c.bc("showForm",function(t){return c.wc(o),c.dc().onShowForm(t)}),c.Pb()}if(2&t){var n=c.dc();c.lc("roomId",n.roomId)("roomNumber",n.roomNumber)("price",n.price)}}var j=function(){function t(t){this.roomService=t,this.roomIds=[],this.roomNumbers=[],this.showForm=!1}return t.prototype.ngOnInit=function(){},t.prototype.onSelectRoom=function(t){var e=t.roomId,o=t.roomNumber,n=t.price;this.roomIds.includes(e)?this.roomIds.splice(this.roomIds.findIndex(function(t){return t==e}),1):this.roomIds.push(e),this.roomNumbers.includes(o)?this.roomNumbers.splice(this.roomNumbers.findIndex(function(t){return t==o}),1):this.roomNumbers.push(o),this.roomId=e,this.roomNumber=o,this.price=n},t.prototype.onShowForm=function(t){this.roomIds=[],this.roomNumbers=[],this.showForm=t},t.prototype.onCreate=function(t){var e=this;this.roomService.updateServiceAdminDiscountMap(t.roomIds,t.startDate.year+"-"+t.startDate.month+"-"+t.startDate.day,t.endDate.year+"-"+t.endDate.month+"-"+t.endDate.day,t.amount,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-discount-map"]],decls:10,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-5"],[3,"selectRoom"],[1,"col-md-7"],[3,"roomIds","roomNumbers","create","close",4,"ngIf"],[3,"roomId","roomNumber","price","showForm",4,"ngIf"],[3,"roomIds","roomNumbers","create","close"],[3,"roomId","roomNumber","price","showForm"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Room discount map"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"service-admin-all-room-numbers",4),c.bc("selectRoom",function(t){return e.onSelectRoom(t)}),c.Pb(),c.Pb(),c.Qb(7,"div",5),c.Dc(8,U,1,2,"room-discount-form",6),c.Dc(9,$,1,3,"room-discount-map",7),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(8),c.lc("ngIf",e.showForm),c.zb(1),c.lc("ngIf",!e.showForm))},directives:[C,b.q,A,T],styles:[""]}),t}(),V=o("uEz7"),Y=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(e){i(e)}}function a(t){try{b(n.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}b((n=n.apply(t,e||[])).next())})},J=function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function K(t,e){if(1&t){var o=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Qb(2,"a",14),c.Fc(3),c.Pb(),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Qb(6,"td"),c.Fc(7),c.Pb(),c.Qb(8,"td"),c.Fc(9),c.Pb(),c.Qb(10,"td"),c.Fc(11),c.Pb(),c.Qb(12,"td"),c.Fc(13),c.Pb(),c.Qb(14,"td"),c.Qb(15,"a",15),c.Fc(16,"Images"),c.Pb(),c.Qb(17,"a",16),c.Fc(18,"Details"),c.Pb(),c.Qb(19,"a",17),c.Fc(20,"Edit"),c.Pb(),c.Qb(21,"button",18),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc(2).onDelete(t.id,t.roomNumber)}),c.Fc(22," Delete "),c.Pb(),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit;c.zb(2),c.nc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.zb(1),c.Hc(" ",n.roomNumber," "),c.zb(2),c.Gc(n.floorNumber),c.zb(2),c.Gc(n.price),c.zb(2),c.Gc(n.discount),c.zb(2),c.Gc(n.agentDiscount),c.zb(2),c.Gc(n.category.name),c.zb(2),c.nc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.zb(2),c.nc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.zb(2),c.nc("routerLink","/dashboard/service-admin/rooms/add/",n.id,"")}}function X(t,e){if(1&t){var o=c.Rb();c.Qb(0,"pagination",19),c.bc("getPage",function(t){return c.wc(o),c.dc(2).getRoomPage(t)}),c.Pb()}if(2&t){var n=c.dc(2);c.lc("page",n.roomPage)}}function W(t,e){if(1&t&&(c.Qb(0,"table",7),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th"),c.Fc(4,"Room number"),c.Pb(),c.Qb(5,"th"),c.Fc(6,"Floor"),c.Pb(),c.Qb(7,"th"),c.Fc(8,"Price"),c.Pb(),c.Qb(9,"th"),c.Fc(10,"Discount"),c.Pb(),c.Qb(11,"th"),c.Fc(12,"Agent dis."),c.Pb(),c.Qb(13,"th"),c.Fc(14,"Category"),c.Pb(),c.Mb(15,"td"),c.Pb(),c.Pb(),c.Qb(16,"tbody"),c.Dc(17,K,23,10,"tr",8),c.Pb(),c.Qb(18,"tfoot"),c.Qb(19,"tr"),c.Qb(20,"td",9),c.Qb(21,"div",10),c.Qb(22,"button",11),c.Mb(23,"i",12),c.Fc(24," Add room "),c.Pb(),c.Dc(25,X,1,1,"pagination",13),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(17),c.lc("ngForOf",null==o.roomPage?null:o.roomPage.content),c.zb(8),c.lc("ngIf",null!=o.roomPage)}}var Z=function(){function t(t){this.roomService=t}return t.prototype.ngOnInit=function(){this.getRoomPage()},t.prototype.getRoomPage=function(t){return void 0===t&&(t=0),Y(this,void 0,void 0,function(){var e=this;return J(this,function(o){switch(o.label){case 0:return[4,this.roomService.getServiceRoomPage(t).subscribe(function(t){e.roomPage=t})];case 1:return o.sent(),[2]}})})},t.prototype.onDelete=function(t,e){return Y(this,void 0,void 0,function(){var o=this;return J(this,function(n){switch(n.label){case 0:return confirm('Are you sure to delete room number "'+e+'" with id '+t)?[4,this.roomService.deleteServiceAdminRoom(t).subscribe(function(t){"success"==t.response?(o.message="Room deleted successfully",o.getRoomPage()):o.message="Room deleted Failed"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-list"]],decls:10,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3"],[1,"col-md-9"],[1,"text-center"],["class","table border table-responsive-sm",4,"ngIf"],[1,"table","border","table-responsive-sm"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"d-flex","justify-content-between"],["routerLink","/dashboard/service-admin/rooms/add",1,"btn","btn-sm","btn-success"],[1,"fa","fa-plus"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],[1,"btn","btn-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-success","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-warning","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[3,"page","getPage"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Room List"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Mb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"h3",5),c.Fc(8,"Room List"),c.Pb(),c.Dc(9,W,26,2,"table",6),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(9),c.lc("ngIf",null!=(null==e.roomPage?null:e.roomPage.content)))},directives:[b.q,b.p,a.c,a.d,V.a],styles:[""]}),t}(),tt=o("0sMf"),et=function(){return(et=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ot=function(t,e,o,n,r){return{"bg-lightgray":t,"bg-yellow":e,"bg-green":o,"bg-red":n,"bg-white":r}};function nt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",13),c.Qb(1,"div",14),c.bc("click",function(){c.wc(o);var t=e.$implicit,n=c.dc(2);return n.onRoomClick(t.id,t.bookingId,n.dd)}),c.Fc(2),c.Mb(3,"br"),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit;c.zb(1),c.lc("ngClass",c.tc(2,ot,"ROOM_BLOCKED"===n.status,"ROOM_BOOKED"===n.status,"ROOM_RESERVED"===n.status,"ROOM_SOLD"===n.status,"ROOM_FREE"===n.status)),c.zb(1),c.Hc(" ",n.roomNumber," ")}}function rt(t,e){if(1&t&&(c.Qb(0,"div",11),c.Dc(1,nt,4,8,"div",12),c.Pb()),2&t){var o=c.dc();c.zb(1),c.lc("ngForOf",o.roomList)}}function it(t,e){1&t&&c.Mb(0,"loading")}function ct(t,e){1&t&&(c.Qb(0,"div",15),c.Qb(1,"div",16),c.Mb(2,"div",17),c.Fc(3," Blocked "),c.Pb(),c.Qb(4,"div",16),c.Mb(5,"div",18),c.Fc(6," Reserved "),c.Pb(),c.Qb(7,"div",16),c.Mb(8,"div",19),c.Fc(9," Sold "),c.Pb(),c.Qb(10,"div",16),c.Mb(11,"div",20),c.Fc(12," Free "),c.Pb(),c.Pb())}var at=function(){function t(t,e){this.roomService=t,this.util=e,this.roomSelected=new c.n,this.loading=!0}return t.prototype.ngOnInit=function(){var t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.getServiceAdminBookingList(this.dd)},t.prototype.getServiceAdminBookingList=function(t){return e=this,void 0,n=function(){var e=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.roomService.getServiceAdminBookingList(this.util.makeDateString(t)).subscribe(function(t){e.roomList=t,e.loading=!1})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onRoomClick=function(t,e,o){if(e>0){var n=this.roomList.find(function(e){return e.id==t});this.status=n.status;var r=et({date:o.year+"-"+o.month+"-"+o.day},n);this.roomSelected.emit(r)}},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["service-admin-room-status-date"]],outputs:{roomSelected:"roomSelected"},decls:12,vars:4,consts:[[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click","dateSelect"],["date","ngbDatepicker"],["class","row m-0",4,"ngIf","ngIfElse"],["showLoading",""],["class","row border m-0 py-3",4,"ngIf"],[1,"row","m-0"],["class","col-md-1 col-sm-3 col-3 p-0",4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-3","col-3","p-0"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-3"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-green"],[1,"foo","bg-red"],[1,"foo","bg-white"]],template:function(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.bc("click",function(){return c.wc(o),c.vc(7).toggle()}),c.Qb(4,"div",4),c.Mb(5,"i",5),c.Pb(),c.Pb(),c.Qb(6,"input",6,7),c.bc("ngModelChange",function(t){return e.dd=t})("click",function(){return c.wc(o),c.vc(7).toggle()})("dateSelect",function(){return e.getServiceAdminBookingList(e.dd)}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Dc(8,rt,2,1,"div",8),c.Dc(9,it,1,0,"ng-template",null,9,c.Ec),c.Dc(11,ct,13,0,"div",10)}if(2&t){var n=c.vc(10);c.zb(6),c.lc("ngModel",e.dd),c.zb(2),c.lc("ngIf",!e.loading)("ngIfElse",n),c.zb(3),c.lc("ngIf",null==e.roomList?null:e.roomList.length)}},directives:[L.i,O.b,O.m,O.p,b.q,b.p,b.o,l.a],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;margin-right:2px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),t}(),bt=o("Xtf6"),lt=o("YXrq");function st(t,e){if(1&t&&(c.Qb(0,"span"),c.Fc(1),c.Pb()),2&t){var o=e.$implicit;c.zb(1),c.Hc("",o,", ")}}function ut(t,e){if(1&t&&(c.Qb(0,"option",22),c.Fc(1),c.Pb()),2&t){var o=e.$implicit;c.lc("value",o.key),c.zb(1),c.Hc(" ",o.value," ")}}var dt=function(t){return{disabled:t}},mt=function(){function t(t){this.builder=t,this.create=new c.n,this.close=new c.n,this.mouseoverShifting=!1,this.statusEnum=lt.a,this.createForm()}return t.prototype.ngOnChanges=function(t){this.roomIds&&this.form.patchValue({roomIds:this.roomIds})},t.prototype.createForm=function(){this.form=this.builder.group({roomIds:this.builder.array(this.roomIds||[]),startDate:["",O.v.required],endDate:["",O.v.required],satus:["",O.v.required]})},t.prototype.submit=function(){if(this.form.valid){var t=this.form.get("roomIds");t.reset(),this.roomIds.forEach(function(e){t.push(new O.e(e))}),this.form.get("roomIds").setValue(this.roomIds),this.create.emit(this.form.value),this.form.reset()}},t.prototype.onClose=function(){this.close.emit(!1)},t.\u0275fac=function(e){return new(e||t)(c.Lb(O.d))},t.\u0275cmp=c.Fb({type:t,selectors:[["room-status-form"]],inputs:{roomIds:"roomIds",roomNumbers:"roomNumbers"},outputs:{create:"create",close:"close"},features:[c.xb],decls:33,vars:8,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],[4,"ngFor","ngForOf"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","satus"],["id","satus","formControlName","satus",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],[3,"value"]],template:function(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"h3",3),c.Fc(4,"Adjust room status map"),c.Pb(),c.Qb(5,"form",4),c.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),c.Qb(6,"div",5),c.Qb(7,"label",6),c.Fc(8,"Room number"),c.Pb(),c.Qb(9,"label",7),c.Dc(10,st,2,1,"span",8),c.Pb(),c.Pb(),c.Qb(11,"div",5),c.Qb(12,"label",9),c.Fc(13,"Start date"),c.Pb(),c.Qb(14,"input",10,11),c.bc("click",function(){return c.wc(o),c.vc(15).toggle()}),c.Pb(),c.Pb(),c.Qb(16,"div",5),c.Qb(17,"label",12),c.Fc(18,"End date"),c.Pb(),c.Qb(19,"input",13,14),c.bc("click",function(){return c.wc(o),c.vc(20).toggle()}),c.Pb(),c.Pb(),c.Qb(21,"div",5),c.Qb(22,"label",15),c.Fc(23,"Status"),c.Pb(),c.Qb(24,"select",16),c.Dc(25,ut,2,2,"option",17),c.ec(26,"keyvalue"),c.Pb(),c.Pb(),c.Qb(27,"div",18),c.Qb(28,"button",19),c.bc("click",function(){return e.onClose()}),c.Fc(29," Close "),c.Pb(),c.Qb(30,"span",20),c.bc("mouseenter",function(){return e.mouseoverShifting=!0}),c.Qb(31,"button",21),c.Fc(32," Submit "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()}2&t&&(c.zb(5),c.lc("formGroup",e.form),c.zb(5),c.lc("ngForOf",e.roomNumbers),c.zb(15),c.lc("ngForOf",c.fc(26,4,e.statusEnum)),c.zb(6),c.lc("ngClass",c.pc(6,dt,e.form.invalid)))},directives:[O.x,O.n,O.g,b.p,O.b,L.i,O.m,O.f,O.u,b.o,O.q,O.w],pipes:[b.k],styles:[""]}),t}();function ft(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Pb()),2&t){var o=e.$implicit;c.zb(2),c.Gc(c.gc(3,2,o.key,"d MMM,yy : EEE")),c.zb(3),c.Gc(o.value)}}function gt(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,ft,6,5,"tr",12),c.ec(2,"keyvalue"),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngForOf",c.fc(2,1,o.statusMap))}}function ht(t,e){if(1&t&&(c.Qb(0,"div"),c.Qb(1,"h3"),c.Fc(2),c.Pb(),c.Qb(3,"table",11),c.Qb(4,"thead"),c.Qb(5,"tr"),c.Qb(6,"th"),c.Fc(7,"Date"),c.Pb(),c.Qb(8,"th"),c.Fc(9,"Room Satus"),c.Pb(),c.Pb(),c.Pb(),c.Dc(10,gt,3,3,"tbody",10),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(2),c.Hc("Status map for Room number : ",o.roomNumber,""),c.zb(8),c.lc("ngIf",o.statusMap)}}var pt=function(){function t(t,e){this.roomService=t,this.utilService=e,this.showForm=new c.n,this.setDateRanges()}return t.prototype.ngOnChanges=function(t){var e=t.roomId;e.currentValue&&this.getServiceAdminRoomMap(e.currentValue)},t.prototype.setDateRanges=function(){this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30);var t=new Date,e={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()};this.model=e,this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.roomId&&this.getServiceAdminRoomMap(this.roomId)},t.prototype.getServiceAdminRoomMap=function(t){return e=this,void 0,n=function(){var e,o,n=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return this.startDate||this.setDateRanges(),e=this.utilService.getDateString(this.startDate),o=this.utilService.getDateString(this.endDate),this.statusMap=null,[4,this.roomService.getServiceAdminStatusMap(t,e,o).subscribe(function(t){n.statusMap=t})];case 1:return r.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onAdjustStatusMap=function(){this.showForm.emit(!0)},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["service-admin-room-status"]],inputs:{roomId:"roomId",roomNumber:"roomNumber"},outputs:{showForm:"showForm"},features:[c.xb],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-6"],[1,"btn-sm","btn-warning",3,"click"],[4,"ngIf"],[1,"table","border"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.Qb(5,"div",5),c.Mb(6,"i",6),c.Pb(),c.Pb(),c.Qb(7,"input",7),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(8,"div",8),c.Qb(9,"button",9),c.bc("click",function(){return e.onAdjustStatusMap()}),c.Fc(10," Adjust Status Map "),c.Pb(),c.Pb(),c.Pb(),c.Dc(11,ht,11,2,"div",10),c.Pb()),2&t&&(c.zb(7),c.lc("options",e.options),c.zb(4),c.lc("ngIf",e.roomId))},directives:[_.b,b.q,b.p],pipes:[b.k,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem}"]}),t}(),vt=function(t,e){return{"bg-danger":t,"bg-primary":e}};function Pt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",8),c.Qb(1,"div",9),c.Qb(2,"service-admin-room-status-date",10),c.bc("roomSelected",function(t){return c.wc(o),c.dc().onRoomSelectFromRoomStatus(t)}),c.Pb(),c.Pb(),c.Qb(3,"div",11),c.Qb(4,"div",12),c.Fc(5),c.Pb(),c.Mb(6,"booking-info",13),c.Fc(7),c.ec(8,"json"),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(4),c.lc("ngClass",c.qc(6,vt,"ROOM_SOLD"==(null==n.booking?null:n.booking.bookingStatus),"ROOM_RESERVED"==(null==n.booking?null:n.booking.bookingStatus))),c.zb(1),c.Hc(" ","ROOM_SOLD"==(null==n.booking?null:n.booking.bookingStatus)?"Booking Details":"Reservation Details"," "),c.zb(1),c.lc("booking",n.booking),c.zb(1),c.Hc(" ",c.fc(8,4,n.booking)," ")}}function yt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"room-status-form",18),c.bc("create",function(t){return c.wc(o),c.dc(2).onCreate(t)})("close",function(t){return c.wc(o),c.dc(2).onShowForm(t)}),c.Pb()}if(2&t){var n=c.dc(2);c.lc("roomIds",n.roomIds)("roomNumbers",n.roomNumberList)}}function Qt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"service-admin-room-status",19),c.bc("showForm",function(t){return c.wc(o),c.dc(2).onShowForm(t)}),c.Pb()}if(2&t){var n=c.dc(2);c.lc("roomId",n.roomId)("roomNumber",n.roomNumber)}}function kt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",14),c.Qb(1,"div",9),c.Qb(2,"service-admin-all-room-numbers",15),c.bc("selectRoom",function(t){return c.wc(o),c.dc().onSelectRoom(t)}),c.Pb(),c.Pb(),c.Qb(3,"div",11),c.Dc(4,yt,1,2,"room-status-form",16),c.Dc(5,Qt,1,2,"service-admin-room-status",17),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(4),c.lc("ngIf",n.showForm),c.zb(1),c.lc("ngIf",!n.showForm)}}var wt=function(){function t(t,e){this.roomService=t,this.bookingService=e,this.roomIds=[],this.roomNumberList=[],this.showForm=!1,this.active=1}return t.prototype.ngOnInit=function(){},t.prototype.onSelectRoom=function(t){var e=t.roomId,o=t.roomNumber;this.roomIds.includes(e)?this.roomIds.splice(this.roomIds.findIndex(function(t){return t==e}),1):this.roomIds.push(e),this.roomNumberList.includes(o)?this.roomNumberList.splice(this.roomNumberList.findIndex(function(t){return t==o}),1):this.roomNumberList.push(o),this.roomId=e,this.roomNumber=o},t.prototype.onShowForm=function(t){this.showForm=t},t.prototype.onRoomSelectFromRoomStatus=function(t){return e=this,void 0,n=function(){var e,o;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,this.bookingService.getServiceAdminBooking(t.bookingId).toPromise()];case 1:return e.booking=n.sent(),console.log(this.booking),[3,3];case 2:return o=n.sent(),console.log(o),[3,3];case 3:return console.log(t),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onCreate=function(t){var e=this;this.roomService.updateServiceAdminStatusMap(t.roomIds,t.startDate.year+"-"+t.startDate.month+"-"+t.startDate.day,t.endDate.year+"-"+t.endDate.month+"-"+t.endDate.day,t.satus).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(tt.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-status-map"]],decls:15,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","my-2"],[1,"col-md-5"],[3,"roomSelected"],[1,"col-md-7"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking"],[1,"row"],[3,"selectRoom"],[3,"roomIds","roomNumbers","create","close",4,"ngIf"],[3,"roomId","roomNumber","showForm",4,"ngIf"],[3,"roomIds","roomNumbers","create","close"],[3,"roomId","roomNumber","showForm"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Room Status"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"ul",2,3),c.bc("activeIdChange",function(t){return e.active=t}),c.Qb(6,"li",4),c.Qb(7,"a",5),c.Fc(8,"By Date"),c.Pb(),c.Dc(9,Pt,9,9,"ng-template",6),c.Pb(),c.Qb(10,"li",4),c.Qb(11,"a",5),c.Fc(12,"By Room"),c.Pb(),c.Dc(13,kt,6,2,"ng-template",6),c.Pb(),c.Pb(),c.Mb(14,"div",7),c.Pb()),2&t){var o=c.vc(5);c.zb(4),c.lc("activeId",e.active),c.zb(2),c.lc("ngbNavItem",1),c.zb(4),c.lc("ngbNavItem",2),c.zb(4),c.lc("ngbNavOutlet",o)}},directives:[L.k,L.m,L.n,L.l,L.o,at,b.o,bt.a,C,b.q,mt,pt],pipes:[b.j],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),t}(),Ft=o("ITiG"),Dt=o("Sa+r"),St=o("FJeW"),Mt=function(){return(Mt=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function It(t,e){if(1&t){var o=c.Rb();c.Qb(0,"span"),c.Qb(1,"button",13),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc(2).onSelectCategory(t)}),c.Fc(2),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit,r=c.dc(2);c.zb(1),c.lc("ngClass",n==r.category?"btn-primary":"btn-secondary"),c.zb(1),c.Hc(" ",n," ")}}var xt=function(t,e){return{disabled:t,selected:e}};function zt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",14),c.Qb(1,"div",15),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc(2).onRoomSelect(t.id,t.available)}),c.Fc(2),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit;c.zb(1),c.lc("ngClass",c.qc(2,xt,!n.available,n.selected)),c.zb(1),c.Hc(" ",n.roomNumber," ")}}function Rt(t,e){if(1&t&&(c.Qb(0,"div"),c.Qb(1,"div",10),c.Dc(2,It,3,2,"span",11),c.Pb(),c.Qb(3,"div",1),c.Dc(4,zt,3,5,"div",12),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(2),c.lc("ngForOf",o.categoryList),c.zb(2),c.lc("ngForOf",o.filteredRoomList)}}function Ct(t,e){if(1&t&&c.Mb(0,"loading",16),2&t){var o=c.dc();c.lc("message",o.message)}}var Ot=function(){function t(t,e){this.roomService=t,this.util=e,this.roomSelected=new c.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges()},t.prototype.ngOnChanges=function(t){var e=this;if(this.unSelect){var o=this.roomList.find(function(t){return t.id===e.unSelect}),n=Mt(Mt({},o),{selected:!1});this.roomList.splice(this.roomList.findIndex(function(t){return t.id==e.unSelect}),1,n)}t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.getAvailableRoom()},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1},this.getAvailableRoom()},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAvailableRoom()},t.prototype.getAvailableRoom=function(t){return void 0===t&&(t=null),e=this,void 0,n=function(){var e,o,n=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return e=this.util.getDateString(this.daterange.checkinDate),o=this.util.getDateString(this.daterange.checkoutDate),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getServiceAvailableRoomListByHotelId(e,o,t).subscribe(function(t){n.showRoomListLoading=!1,n.roomList=t,n.filteredRoomList=t,n.category="All",n.categoryList=["All"],n.roomList.forEach(function(t){n.categoryList.includes(t.category.name)||n.categoryList.push(t.category.name)})})];case 1:return r.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onRoomSelect=function(t,e){if(e){var o=this.roomList.find(function(e){return e.id===t}),n=Mt({selected:!0},o);this.roomList.splice(this.roomList.findIndex(function(e){return e.id==t}),1,n);var r={room:o,checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(r)}},t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["service-admin-room-list"]],inputs:{unSelect:"unSelect",reloadRoomList:"reloadRoomList"},outputs:{roomSelected:"roomSelected"},features:[c.xb],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"row","mt-1"],[4,"ngFor","ngForOf"],["class","col-3 col-md-1 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-3","col-md-1","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.Qb(5,"div",5),c.Mb(6,"i",6),c.Pb(),c.Pb(),c.Qb(7,"input",7),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Dc(8,Rt,5,2,"div",8),c.Dc(9,Ct,1,1,"ng-template",null,9,c.Ec),c.Pb()),2&t){var o=c.vc(10);c.zb(7),c.lc("options",e.options),c.zb(1),c.lc("ngIf",!e.showRoomListLoading)("ngIfElse",o)}},directives:[_.b,b.q,b.p,b.o,l.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:3px;border:1px solid grey;border-radius:5px;text-align:center;margin:5px 2px 5px 0}.selected[_ngcontent-%COMP%]{background-color:#90ee90;color:#fff}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}();function Lt(t,e){1&t&&(c.Qb(0,"small",12),c.Fc(1," Name required "),c.Pb())}function Bt(t,e){if(1&t&&(c.Qb(0,"small",12),c.Qb(1,"div",13),c.Fc(2," Phone number required "),c.Pb(),c.Qb(3,"div",13),c.Fc(4," Phone number format 01934953023 "),c.Pb(),c.Pb()),2&t){var o=c.dc();c.zb(1),c.lc("hidden",!o.form.controls.phoneNumber.errors.required),c.zb(2),c.lc("hidden",!o.form.controls.phoneNumber.errors.pattern)}}var Nt=function(t){return{disabled:t}},At=function(){function t(t){this.builder=t,this.user=new c.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",O.v.required],phoneNumber:["",[O.v.required,O.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(e){return new(e||t)(c.Lb(O.d))},t.\u0275cmp=c.Fb({type:t,selectors:[["sell-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(c.Qb(0,"h4"),c.Fc(1,"User Info"),c.Pb(),c.Qb(2,"form",0),c.bc("ngSubmit",function(){return e.submit()}),c.Qb(3,"div",1),c.Qb(4,"div",2),c.Qb(5,"label",3),c.Fc(6,"Name *"),c.Pb(),c.Mb(7,"input",4),c.Dc(8,Lt,2,0,"small",5),c.Pb(),c.Qb(9,"div",2),c.Qb(10,"label",6),c.Fc(11,"Phone *"),c.Pb(),c.Mb(12,"input",7),c.Dc(13,Bt,5,2,"small",5),c.Pb(),c.Qb(14,"div",2),c.Qb(15,"label",8),c.Fc(16,"Email"),c.Pb(),c.Mb(17,"input",9),c.Pb(),c.Pb(),c.Qb(18,"div",10),c.Qb(19,"button",11),c.Fc(20," Submit "),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(2),c.lc("formGroup",e.form),c.zb(6),c.lc("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),c.zb(5),c.lc("ngIf",e.form.controls.phoneNumber.errors&&e.form.controls.phoneNumber.touched),c.zb(6),c.lc("ngClass",c.pc(4,Nt,e.form.invalid)))},directives:[O.x,O.n,O.g,O.b,O.m,O.f,b.q,O.j,b.o],styles:[""]}),t}(),qt=o("V9jR"),_t=function(){return(_t=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Et=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(e){i(e)}}function a(t){try{b(n.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}b((n=n.apply(t,e||[])).next())})},Gt=function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function Ht(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",19),c.Qb(1,"h4",20),c.Fc(2),c.Qb(3,"button",21),c.bc("click",function(){return c.wc(o),c.dc(2).clear()}),c.Fc(4," clear "),c.Pb(),c.Pb(),c.Pb()}if(2&t){var n=c.dc(2);c.zb(2),c.Hc(" ",n.message," ")}}function Tt(t,e){1&t&&(c.Qb(0,"th",35),c.Fc(1," Commission "),c.Pb())}function Ut(t,e){if(1&t){var o=c.Rb();c.Qb(0,"td"),c.Qb(1,"input",51),c.bc("ngModelChange",function(t){return c.wc(o),c.dc().$implicit.commission=t}),c.Pb(),c.Pb()}if(2&t){var n=c.dc().$implicit;c.zb(1),c.lc("ngModel",n.commission)}}function $t(t,e){if(1&t){var o=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td",35),c.Fc(6),c.Pb(),c.Qb(7,"td"),c.Qb(8,"input",47),c.bc("ngModelChange",function(t){return c.wc(o),e.$implicit.discount=t})("keyup",function(){c.wc(o);var t=e.index;return c.dc(3).updateSubBooking(t)}),c.Pb(),c.Pb(),c.Qb(9,"td",35),c.Fc(10),c.Pb(),c.Qb(11,"td",35),c.Qb(12,"input",48),c.bc("ngModelChange",function(t){return c.wc(o),e.$implicit.advance=t})("keyup",function(){c.wc(o);var t=e.index;return c.dc(3).updateSubBooking(t)}),c.Pb(),c.Pb(),c.Qb(13,"td",35),c.Fc(14),c.Pb(),c.Dc(15,Ut,2,1,"td",18),c.Qb(16,"td"),c.Qb(17,"button",49),c.bc("click",function(){c.wc(o);var t=e.index;return c.dc(3).onRemove(t)}),c.Mb(18,"i",50),c.Pb(),c.Pb(),c.Pb()}if(2&t){var n=e.$implicit,r=c.dc(3);c.zb(2),c.Gc(n.date),c.zb(2),c.Ic("",n.room.roomNumber," [",n.room.category.name,"]"),c.zb(2),c.Gc(n.room.price),c.zb(2),c.lc("ngModel",n.discount),c.zb(2),c.Hc(" ",n.room.price-n.discount," BDT "),c.zb(2),c.lc("ngModel",n.advance),c.zb(2),c.Hc("",null==n?null:n.due," BDT"),c.zb(1),c.lc("ngIf",(null==r.refBy?null:r.refBy.length)>0)}}function jt(t,e){1&t&&c.Mb(0,"td")}function Vt(t,e){1&t&&c.Mb(0,"td")}function Yt(t,e){1&t&&c.Mb(0,"td")}function Jt(t,e){if(1&t&&(c.Qb(0,"option",52),c.Fc(1),c.Pb()),2&t){var o=e.$implicit;c.lc("value",o.key),c.zb(1),c.Hc(" ",o.value," ")}}function Kt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"sell-form",53),c.bc("user",function(t){return c.wc(o),c.dc(3).onCreateUser(t)}),c.Pb()}}function Xt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div"),c.Qb(1,"h3",20),c.Fc(2,"New Booking"),c.Pb(),c.Qb(3,"div",22),c.Mb(4,"div",23),c.Qb(5,"div",24),c.Qb(6,"div",25),c.Qb(7,"input",26),c.bc("ngModelChange",function(t){return c.wc(o),c.dc(2).changeSimilar=t}),c.Pb(),c.Qb(8,"label",27),c.Fc(9," Auto Change Similar Category "),c.Pb(),c.Pb(),c.Pb(),c.Qb(10,"div",24),c.Qb(11,"div",28),c.Qb(12,"div",29),c.Qb(13,"div",30),c.Fc(14,"Ref. By"),c.Pb(),c.Pb(),c.Qb(15,"input",31),c.bc("ngModelChange",function(t){return c.wc(o),c.dc(2).refBy=t}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(16,"div",32),c.Qb(17,"div",33),c.Qb(18,"h5"),c.Fc(19,"Booking List"),c.Pb(),c.Pb(),c.Pb(),c.Qb(20,"table",34),c.Qb(21,"thead"),c.Qb(22,"tr"),c.Qb(23,"th"),c.Fc(24,"Date"),c.Pb(),c.Qb(25,"th"),c.Fc(26,"Room No."),c.Pb(),c.Qb(27,"th",35),c.Fc(28,"Per night"),c.Pb(),c.Qb(29,"th",35),c.Fc(30,"Discount"),c.Pb(),c.Qb(31,"th",35),c.Fc(32,"Payable"),c.Pb(),c.Qb(33,"th",35),c.Fc(34,"Advance"),c.Pb(),c.Qb(35,"th",35),c.Fc(36,"Due"),c.Pb(),c.Dc(37,Tt,2,0,"th",36),c.Mb(38,"th"),c.Pb(),c.Pb(),c.Qb(39,"tbody"),c.Dc(40,$t,19,9,"tr",37),c.Pb(),c.Qb(41,"tfoot"),c.Qb(42,"tr"),c.Qb(43,"th",38),c.Fc(44,"Total"),c.Pb(),c.Qb(45,"th",35),c.Fc(46),c.Pb(),c.Mb(47,"td"),c.Dc(48,jt,1,0,"td",18),c.Pb(),c.Qb(49,"tr"),c.Qb(50,"th",38),c.Fc(51,"Total Advance"),c.Pb(),c.Qb(52,"th",35),c.Fc(53),c.Pb(),c.Mb(54,"td"),c.Dc(55,Vt,1,0,"td",18),c.Pb(),c.Qb(56,"tr"),c.Qb(57,"th",38),c.Fc(58,"Total due"),c.Pb(),c.Qb(59,"th",35),c.Fc(60),c.Pb(),c.Mb(61,"td"),c.Dc(62,Yt,1,0,"td",18),c.Pb(),c.Pb(),c.Pb(),c.Qb(63,"h4"),c.Fc(64,"Payment Info"),c.Pb(),c.Qb(65,"div",39),c.Qb(66,"div",40),c.Qb(67,"label",41),c.Fc(68,"Payment Method"),c.Pb(),c.Qb(69,"select",42),c.bc("ngModelChange",function(t){return c.wc(o),c.dc(2).booking.paymentMethod=t}),c.Dc(70,Jt,2,2,"option",43),c.ec(71,"keyvalue"),c.Pb(),c.Pb(),c.Qb(72,"div",40),c.Qb(73,"label",44),c.Fc(74,"Reference"),c.Pb(),c.Qb(75,"input",45),c.bc("ngModelChange",function(t){return c.wc(o),c.dc(2).booking.paymentRef=t}),c.Pb(),c.Pb(),c.Pb(),c.Dc(76,Kt,1,0,"sell-form",46),c.Pb()}if(2&t){var n=c.dc(2);c.zb(7),c.lc("ngModel",n.changeSimilar),c.zb(8),c.lc("ngModel",n.refBy),c.zb(22),c.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.zb(3),c.lc("ngForOf",n.subBookings),c.zb(6),c.Hc("",null==n.booking?null:n.booking.total," BDT"),c.zb(2),c.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.zb(2),c.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),c.zb(2),c.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.zb(7),c.lc("ngModel",n.booking.paymentMethod),c.zb(1),c.lc("ngForOf",c.fc(71,14,n.paymentMethods)),c.zb(5),c.lc("ngModel",n.booking.paymentRef),c.zb(1),c.lc("ngIf",!n.sendingInfo)}}var Wt=function(t,e){return{"btn-primary active":t,"btn-light":e}};function Zt(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",8),c.Qb(1,"div",9),c.Qb(2,"service-admin-room-list",10),c.bc("roomSelected",function(t){return c.wc(o),c.dc().onRoomSelect(t)}),c.Pb(),c.Pb(),c.Qb(3,"div",11),c.Qb(4,"div",12),c.Qb(5,"label",13),c.Qb(6,"input",14),c.bc("ngModelChange",function(t){return c.wc(o),c.dc().mode=t}),c.Pb(),c.Fc(7," Sell "),c.Pb(),c.Qb(8,"label",15),c.Qb(9,"input",16),c.bc("ngModelChange",function(t){return c.wc(o),c.dc().mode=t}),c.Pb(),c.Fc(10," Reserve "),c.Pb(),c.Pb(),c.Dc(11,Ht,5,1,"div",17),c.Dc(12,Xt,77,16,"div",18),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(2),c.lc("unSelect",n.unSelect)("reloadRoomList",n.reloadRoomList),c.zb(3),c.lc("ngClass",c.qc(8,Wt,"Sell"==n.mode,"Sell"!=n.mode)),c.zb(1),c.lc("ngModel",n.mode),c.zb(2),c.lc("ngClass",c.qc(11,Wt,"Reserve"==n.mode,"Reserve"!=n.mode)),c.zb(1),c.lc("ngModel",n.mode),c.zb(2),c.lc("ngIf",n.message.length>0),c.zb(1),c.lc("ngIf",n.subBookings.length>0&&!n.sendingInfo)}}function te(t,e){if(1&t&&c.Mb(0,"booking-info",59),2&t){var o=c.dc(2);c.lc("booking",o.reservation)}}function ee(t,e){if(1&t){var o=c.Rb();c.Qb(0,"button",62),c.bc("click",function(){c.wc(o);var t=c.dc(3);return t.onCancelBooking(t.reservation.id)}),c.Fc(1," Cancel Booking "),c.Pb()}}function oe(t,e){if(1&t&&(c.Qb(0,"div",60),c.Dc(1,ee,2,0,"button",61),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngIf",!(null!=o.reservation&&o.reservation.paid))}}function ne(t,e){if(1&t){var o=c.Rb();c.Qb(0,"booking-form",63),c.bc("onBooking",function(t){return c.wc(o),c.dc(2).onConfirmRerservation(t)})("cancelBooking",function(t){return c.wc(o),c.dc(2).onCancelRerservation(t)}),c.Pb()}if(2&t){var n=c.dc(2);c.lc("booking",n.reservation)}}var re=function(t,e){return{"bg-danger":t,"bg-primary":e}};function ie(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",22),c.Qb(1,"div",9),c.Qb(2,"service-admin-room-status-date",54),c.bc("roomSelected",function(t){return c.wc(o),c.dc().onRoomSelectFromRoomStatus(t)}),c.Pb(),c.Pb(),c.Qb(3,"div",11),c.Qb(4,"div",55),c.Fc(5),c.Pb(),c.Dc(6,te,1,1,"booking-info",56),c.Dc(7,oe,2,1,"div",57),c.Dc(8,ne,1,1,"booking-form",58),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(4),c.lc("ngClass",c.qc(5,re,"ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus),"ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))),c.zb(1),c.Hc(" ","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),c.zb(1),c.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),c.zb(1),c.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),c.zb(1),c.lc("ngIf","ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))}}var ce=function(){function t(t,e,o,n){this.utilService=t,this.userService=e,this.bookingService=o,this.router=n,this.subBookings=[],this.paymentMethods=Dt.b,this.mode="Sell",this.reloadRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.message="",this.activeTab=1,this.refBy=""}return t.prototype.ngOnInit=function(){this.subBookings=[],this.booking={total:0,totalAdvance:0,totalDue:0},this.booking.paymentMethod="CASH"},t.prototype.onRoomSelect=function(t){var e=this;this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(o){var n=new St.a(o,t.room);n.room.discount>0&&(n.discount=n.room.discount),e.isContain(n)||(e.subBookings.push(n),e.updateSubBooking(e.subBookings.length-1),e.subBookings.sort(e.utilService.dynamicSortObject("date")),e.subBookings.sort(e.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.isContain=function(t){return this.subBookings.find(function(e){return e.room.id===t.room.id&&e.date===t.date})},t.prototype.onRemove=function(t){this.unSelect=this.subBookings[t].room.id,this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.onCreateUser=function(t){var e=_t({id:0},t);console.log(e),this.createBooking(e)},t.prototype.createBooking=function(t){var e=this,o=new Dt.a(t,this.subBookings),n=_t({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy,paymentMethod:this.booking.paymentMethod,paymentRef:this.booking.paymentRef},o);switch(this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createServiceAdminBooking(n).subscribe(function(t){e.message="Booking complete, Thank you.",e.sendingInfo=!1,e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])});break;case"Reserve":this.bookingService.reserveServiceAdminBooking(n).subscribe(function(t){e.message="Booking complete, Thank you.",e.sendingInfo=!1,e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])})}},t.prototype.updateSubBooking=function(t){var e=this.subBookings[t];e.payablePrice=e.room.price-e.discount,e.due=e.payablePrice-e.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var e=0,o=0,n=0;if(this.changeSimilar){var r=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==r.room.category.id&&(t.discount=r.discount,t.advance=r.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){e+=t.payablePrice,o+=t.advance,n+=t.due}),this.booking.total=e,this.booking.totalAdvance=o,this.booking.totalDue=n},t.prototype.clear=function(){this.message="",this.ngOnInit()},t.prototype.onRoomSelectFromRoomStatus=function(t){return Et(this,void 0,void 0,function(){var e=this;return Gt(this,function(o){switch(o.label){case 0:return[4,this.bookingService.getServiceAdminBooking(t.bookingId).subscribe(function(t){e.reservation=t,console.log(e.reservation)})];case 1:return o.sent(),[2]}})})},t.prototype.onConfirmRerservation=function(t){return Et(this,void 0,void 0,function(){var e=this;return Gt(this,function(o){switch(o.label){case 0:return console.log("onConfirmRerservation ",t),[4,this.bookingService.confirmServiceAdminReservation(t).subscribe(function(t){e.reservation=null,console.log(t),console.log("Confirm Reservation Done")})];case 1:return o.sent(),[2]}})})},t.prototype.onCancelRerservation=function(t){return Et(this,void 0,void 0,function(){var e=this;return Gt(this,function(o){switch(o.label){case 0:return console.log("onCancelRerservation ",t),confirm("Are you sure to cancel reservation with id : "+t)?[4,this.bookingService.cancelServiceAdminReservation(t).subscribe(function(t){e.reservation=null,console.log("Cancel Reservation done")})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.prototype.onCancelBooking=function(t){return Et(this,void 0,void 0,function(){var e=this;return Gt(this,function(o){return confirm("Are you sure to cancel booking with id : "+t)&&(console.log("cancel booking : ",t),this.bookingService.cancelServiceAdminBooking(t).subscribe(function(t){e.reservation=null,console.log(t),console.log("Booking canceled")})),[2]})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(q.a),c.Lb(Ft.a),c.Lb(tt.a),c.Lb(a.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-sell-rooms"]],decls:15,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","py-2"],[1,"col-md-4"],[3,"unSelect","reloadRoomList","roomSelected"],[1,"col-md-8"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","border"],[1,"btn",3,"ngClass"],["type","radio","value","Sell","name","mode","id","mode_sell","autocomplete","off",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","value","Reserve","name","mode","id","mode_reservation","autocomplete","off",3,"ngModel","ngModelChange"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"text-center"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control","sized-form",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],[1,"table","mb-4","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right"],[1,"form-row"],[1,"form-group","col-md-3"],["for","paymentMethod"],["id","paymentMethod",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","reference"],["type","text","id","reference",1,"form-control",3,"ngModel","ngModelChange"],[3,"user",4,"ngIf"],["type","number","name","totalDiscount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","advance",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],[3,"value"],[3,"user"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking"],[1,"d-flex","flex-row-reverse","bd-highlight"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Sell Room"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"ul",2,3),c.bc("activeIdChange",function(t){return e.activeTab=t}),c.Qb(6,"li",4),c.Qb(7,"a",5),c.Fc(8,"Sell room"),c.Pb(),c.Dc(9,Zt,13,14,"ng-template",6),c.Pb(),c.Qb(10,"li",4),c.Qb(11,"a",5),c.Fc(12,"Room status"),c.Pb(),c.Dc(13,ie,9,8,"ng-template",6),c.Pb(),c.Pb(),c.Mb(14,"div",7),c.Pb()),2&t){var o=c.vc(5);c.zb(4),c.lc("activeId",e.activeTab),c.zb(2),c.lc("ngbNavItem",1),c.zb(4),c.lc("ngbNavItem",2),c.zb(4),c.lc("ngbNavOutlet",o)}},directives:[L.k,L.m,L.n,L.l,L.o,Ot,b.o,O.s,O.b,O.m,O.p,b.q,O.a,b.p,O.u,O.r,O.q,O.w,At,at,bt.a,qt.a],pipes:[b.k],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control.sized-form[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}();function ae(t,e){if(1&t&&(c.Qb(0,"h3",19),c.Fc(1),c.Pb()),2&t){var o=c.dc();c.zb(1),c.Gc(o.message)}}function be(t,e){if(1&t){var o=c.Rb();c.Qb(0,"a",23),c.bc("click",function(){c.wc(o);var t=e.$implicit;return c.dc(2).onSelectBooking(t.id)}),c.Mb(1,"i",24),c.Fc(2),c.ec(3,"date"),c.Pb()}if(2&t){var n=e.$implicit;c.zb(2),c.Jc(" ",n.id,". ",n.user.name," [",c.gc(3,3,null==n?null:n.created,"d MMM,yy"),"] ")}}function le(t,e){if(1&t&&(c.Qb(0,"ul",20),c.Qb(1,"li",21),c.Qb(2,"h5"),c.Fc(3,"Unpaid Bookings"),c.Pb(),c.Qb(4,"small"),c.Fc(5,"Choose a booking from below list"),c.Pb(),c.Pb(),c.Dc(6,be,4,6,"a",22),c.Pb()),2&t){var o=c.dc();c.zb(6),c.lc("ngForOf",o.bookigs)}}function se(t,e){1&t&&(c.Qb(0,"th",28),c.Fc(1," Commi. "),c.Pb())}function ue(t,e){if(1&t&&(c.Qb(0,"td",28),c.Fc(1),c.Pb()),2&t){var o=c.dc().$implicit;c.zb(1),c.Hc(" ",o.commission," ")}}function de(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Qb(6,"td",28),c.Fc(7),c.Pb(),c.Qb(8,"td",28),c.Fc(9),c.Pb(),c.Qb(10,"td",28),c.Fc(11),c.Pb(),c.Qb(12,"td",28),c.Fc(13),c.Pb(),c.Qb(14,"td",28),c.Fc(15),c.Pb(),c.Dc(16,ue,2,1,"td",29),c.Pb()),2&t){var o=e.$implicit,n=c.dc(3);c.zb(2),c.Gc(c.gc(3,9,null==o?null:o.date,"d MMM,yy")),c.zb(3),c.Ic(" ",null==o||null==o.room?null:o.room.roomNumber," [",null==o||null==o.room.category?null:o.room.category.name,"] "),c.zb(2),c.Hc("",null==o||null==o.room?null:o.room.price," BDT"),c.zb(2),c.Gc(o.discount),c.zb(2),c.Gc(o.payablePrice),c.zb(2),c.Gc(null==o?null:o.advance),c.zb(2),c.Gc(null==o?null:o.due),c.zb(1),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}function me(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,de,17,12,"tr",35),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngForOf",o.booking.subBookingList)}}function fe(t,e){1&t&&c.Mb(0,"td")}function ge(t,e){1&t&&c.Mb(0,"td")}function he(t,e){1&t&&c.Mb(0,"td")}function pe(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",5),c.Qb(1,"div",3),c.Qb(2,"div",25),c.Qb(3,"h3"),c.Fc(4,"Customer Info"),c.Pb(),c.Qb(5,"table"),c.Qb(6,"tr"),c.Qb(7,"th"),c.Fc(8,"Name :"),c.Pb(),c.Qb(9,"th"),c.Fc(10),c.Pb(),c.Pb(),c.Qb(11,"tr"),c.Qb(12,"th"),c.Fc(13,"Phone :"),c.Pb(),c.Qb(14,"th"),c.Fc(15),c.Pb(),c.Pb(),c.Qb(16,"tr"),c.Qb(17,"th"),c.Fc(18,"Email :"),c.Pb(),c.Qb(19,"th"),c.Fc(20),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Mb(21,"div",26),c.Qb(22,"div",26),c.Qb(23,"table"),c.Qb(24,"tr"),c.Qb(25,"td"),c.Fc(26,"Booking Id"),c.Pb(),c.Qb(27,"td"),c.Fc(28,":"),c.Pb(),c.Qb(29,"th"),c.Fc(30),c.Pb(),c.Pb(),c.Qb(31,"tr"),c.Qb(32,"td"),c.Fc(33,"Date"),c.Pb(),c.Qb(34,"td"),c.Fc(35,":"),c.Pb(),c.Qb(36,"td"),c.Qb(37,"strong"),c.Fc(38),c.ec(39,"date"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(40,"div",3),c.Mb(41,"div",5),c.Qb(42,"div",4),c.Fc(43),c.Pb(),c.Pb(),c.Qb(44,"div",3),c.Qb(45,"table",27),c.Qb(46,"thead"),c.Qb(47,"tr"),c.Qb(48,"th"),c.Fc(49,"Date"),c.Pb(),c.Qb(50,"th"),c.Fc(51,"Room number"),c.Pb(),c.Qb(52,"th",28),c.Fc(53,"Per night"),c.Pb(),c.Qb(54,"th",28),c.Fc(55,"Discount"),c.Pb(),c.Qb(56,"th",28),c.Fc(57,"Payable"),c.Pb(),c.Qb(58,"th",28),c.Fc(59,"Advance"),c.Pb(),c.Qb(60,"th",28),c.Fc(61,"Due"),c.Pb(),c.Dc(62,se,2,0,"th",29),c.Pb(),c.Pb(),c.Dc(63,me,2,1,"tbody",30),c.Qb(64,"tfoot"),c.Qb(65,"tr"),c.Qb(66,"th",31),c.Fc(67,"Total"),c.Pb(),c.Qb(68,"th",28),c.Fc(69),c.Pb(),c.Mb(70,"td"),c.Dc(71,fe,1,0,"td",30),c.Pb(),c.Qb(72,"tr"),c.Qb(73,"th",31),c.Fc(74,"Total Advance"),c.Pb(),c.Qb(75,"th",28),c.Fc(76),c.Pb(),c.Mb(77,"td"),c.Dc(78,ge,1,0,"td",30),c.Pb(),c.Qb(79,"tr"),c.Qb(80,"th",31),c.Fc(81,"Total due"),c.Pb(),c.Qb(82,"th",28),c.Fc(83),c.Pb(),c.Mb(84,"td"),c.Dc(85,he,1,0,"td",30),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(86,"div",32),c.Qb(87,"button",33),c.bc("click",function(){c.wc(o);var t=c.dc();return t.onPaid(t.booking.id)}),c.Mb(88,"i",34),c.Fc(89," Mark as paid "),c.Pb(),c.Pb(),c.Pb()}if(2&t){var n=c.dc();c.zb(10),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.name),c.zb(5),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),c.zb(5),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.email),c.zb(10),c.Gc(null==n.booking?null:n.booking.id),c.zb(8),c.Hc(" ",c.gc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),c.zb(5),c.Hc("Ref. By : ",n.booking.refBy,""),c.zb(19),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(1),c.lc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),c.zb(6),c.Hc("",null==n.booking?null:n.booking.total," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var ve=function(){function t(t,e){this.bookingService=t,this.util=e}return t.prototype.ngOnInit=function(){this.getUnpaidBookings(),this.message="",this.setDate()},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.onDateChange=function(){this.getUnpaidBookings(this.util.makeDateString(this.date))},t.prototype.getUnpaidBookings=function(t){return void 0===t&&(t=null),e=this,void 0,n=function(){var e=this;return function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(o){switch(o.label){case 0:return console.log("DD1 ",t),[4,this.bookingService.getUnpaidBookings(t).subscribe(function(t){e.bookigs=t})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(e){r(e)}}function c(t){try{a(n.throw(t))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o(function(t){t(n)})).then(i,c)}a((n=n.apply(e,[])).next())});var e,o,n},t.prototype.onSelectBooking=function(t){var e=this.bookigs.find(function(e){return e.id==t});this.booking=e,this.message=""},t.prototype.onPaid=function(t){var e=this;confirm("Are you sure to confirm as paid booking : "+t)&&(this.bookingService.serviceAdminMarkBookingPaid(t).subscribe(function(t){e.booking=null,e.message="Operation success",e.getUnpaidBookings()}),console.log("on paid ",t))},t.\u0275fac=function(e){return new(e||t)(c.Lb(tt.a),c.Lb(q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-due-bookings"]],decls:23,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],["class","text-center",4,"ngIf"],[1,"col-md-3","my-4"],[1,"input-group","mb-2"],[1,"btn","btn-sm","btn-success","mr-1",3,"click"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"text-center"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","btn-success","mx-1",3,"click"],[1,"fa","fa-check-square-o"],[4,"ngFor","ngForOf"]],template:function(t,e){if(1&t){var o=c.Rb();c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Unpaid bookings"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Mb(5,"div",4),c.Qb(6,"div",5),c.Dc(7,ae,2,1,"h3",6),c.Pb(),c.Pb(),c.Qb(8,"div",3),c.Qb(9,"div",7),c.Qb(10,"div",8),c.Qb(11,"button",9),c.bc("click",function(){return e.getUnpaidBookings()}),c.Fc(12,"All"),c.Pb(),c.Qb(13,"div",10),c.Qb(14,"div",11),c.Fc(15,"Date"),c.Pb(),c.Pb(),c.Qb(16,"input",12,13),c.bc("ngModelChange",function(t){return e.date=t})("dateSelect",function(){return e.onDateChange()})("click",function(){return c.wc(o),c.vc(17).toggle()}),c.Pb(),c.Qb(18,"div",14),c.Qb(19,"button",15),c.bc("click",function(){return c.wc(o),c.vc(17).toggle()}),c.Mb(20,"i",16),c.Pb(),c.Pb(),c.Pb(),c.Dc(21,le,7,1,"ul",17),c.Pb(),c.Dc(22,pe,90,17,"div",18),c.Pb(),c.Pb()}2&t&&(c.zb(7),c.lc("ngIf",e.message.length>0),c.zb(9),c.lc("ngModel",e.date),c.zb(5),c.lc("ngIf",(null==e.bookigs?null:e.bookigs.length)>0),c.zb(1),c.lc("ngIf",e.booking))},directives:[b.q,L.i,O.b,O.m,O.p,b.p],pipes:[b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),Pe=o("MKLO"),ye=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(e){i(e)}}function a(t){try{b(n.throw(t))}catch(e){i(e)}}function b(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}b((n=n.apply(t,e||[])).next())})},Qe=function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function ke(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.ec(5,"date"),c.Pb(),c.Qb(6,"td"),c.Fc(7),c.Pb(),c.Qb(8,"td",11),c.Fc(9),c.Pb(),c.Qb(10,"td",11),c.Fc(11),c.Pb(),c.Qb(12,"td",11),c.Fc(13),c.Pb(),c.Mb(14,"td"),c.Pb()),2&t){var o=e.$implicit;c.zb(2),c.Gc(null==o||null==o.room.category||null==o.room.category.hotel?null:o.room.category.hotel.name),c.zb(2),c.Gc(c.gc(5,7,null==o?null:o.date,"d MMM,yy")),c.zb(3),c.Ic(" ",null==o||null==o.room?null:o.room.roomNumber," [",null==o||null==o.room.category?null:o.room.category.name,"] "),c.zb(2),c.Hc("",null==o||null==o.room?null:o.room.price," BDT"),c.zb(2),c.Hc("",null==o?null:o.discount," BDT"),c.zb(2),c.Hc("",null==o?null:o.payablePrice," BDT")}}function we(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,ke,15,10,"tr",15),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngForOf",o.booking.subBookingList)}}function Fe(t,e){1&t&&(c.Qb(0,"tr"),c.Qb(1,"th",16),c.Fc(2,"Paid"),c.Pb(),c.Pb())}function De(t,e){if(1&t){var o=c.Rb();c.Qb(0,"button",19),c.bc("click",function(){c.wc(o);var t=c.dc(3);return t.onCancelBooking(t.booking.id)}),c.Mb(1,"i",20),c.Fc(2," Cancel booking "),c.Pb()}}function Se(t,e){if(1&t&&(c.Qb(0,"div",17),c.Dc(1,De,3,0,"button",18),c.Pb()),2&t){var o=c.dc(2);c.zb(1),c.lc("ngIf",!o.booking.paid)}}function Me(t,e){if(1&t&&(c.Qb(0,"div",6),c.Qb(1,"div",7),c.Qb(2,"div",8),c.Qb(3,"h3"),c.Fc(4,"Customer Info"),c.Pb(),c.Qb(5,"table"),c.Qb(6,"tr"),c.Qb(7,"th"),c.Fc(8,"Name :"),c.Pb(),c.Qb(9,"th"),c.Fc(10),c.Pb(),c.Pb(),c.Qb(11,"tr"),c.Qb(12,"th"),c.Fc(13,"Phone :"),c.Pb(),c.Qb(14,"th"),c.Fc(15),c.Pb(),c.Pb(),c.Qb(16,"tr"),c.Qb(17,"th"),c.Fc(18,"Email :"),c.Pb(),c.Qb(19,"th"),c.Fc(20),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",9),c.Fc(22),c.Pb(),c.Qb(23,"div",8),c.Qb(24,"h3"),c.Fc(25,"Hotel Info"),c.Pb(),c.Qb(26,"table"),c.Qb(27,"tr"),c.Qb(28,"th"),c.Fc(29,"Name :"),c.Pb(),c.Qb(30,"td"),c.Fc(31),c.Pb(),c.Pb(),c.Qb(32,"tr"),c.Qb(33,"th"),c.Fc(34,"Phone :"),c.Pb(),c.Qb(35,"td"),c.Fc(36),c.Pb(),c.Pb(),c.Qb(37,"tr"),c.Qb(38,"th"),c.Fc(39,"Address:"),c.Pb(),c.Qb(40,"td"),c.Fc(41),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(42,"div",7),c.Qb(43,"table",10),c.Qb(44,"thead"),c.Qb(45,"tr"),c.Qb(46,"th"),c.Fc(47,"Hotel"),c.Pb(),c.Qb(48,"th"),c.Fc(49,"Date"),c.Pb(),c.Qb(50,"th"),c.Fc(51,"Room number"),c.Pb(),c.Qb(52,"th",11),c.Fc(53,"Per night"),c.Pb(),c.Qb(54,"th",11),c.Fc(55,"Discount"),c.Pb(),c.Qb(56,"th",11),c.Fc(57,"Payable"),c.Pb(),c.Mb(58,"th",11),c.Pb(),c.Pb(),c.Dc(59,we,2,1,"tbody",12),c.Qb(60,"tfoot"),c.Qb(61,"tr"),c.Qb(62,"th",13),c.Fc(63,"Sub total"),c.Pb(),c.Qb(64,"th",11),c.Fc(65),c.Pb(),c.Mb(66,"td"),c.Pb(),c.Qb(67,"tr"),c.Qb(68,"th",13),c.Fc(69,"Discount"),c.Pb(),c.Qb(70,"th",11),c.Fc(71),c.Pb(),c.Mb(72,"td"),c.Pb(),c.Qb(73,"tr"),c.Qb(74,"th",13),c.Fc(75,"Promotional Discount"),c.Pb(),c.Qb(76,"th",11),c.Fc(77),c.Pb(),c.Mb(78,"td"),c.Pb(),c.Qb(79,"tr"),c.Qb(80,"th",13),c.Fc(81,"Total"),c.Pb(),c.Qb(82,"th",11),c.Fc(83),c.Pb(),c.Mb(84,"td"),c.Pb(),c.Dc(85,Fe,3,0,"tr",12),c.Pb(),c.Pb(),c.Pb(),c.Dc(86,Se,2,1,"div",14),c.Pb()),2&t){var o=c.dc();c.zb(10),c.Gc(null==o.booking||null==o.booking.user?null:o.booking.user.name),c.zb(5),c.Gc(null==o.booking||null==o.booking.user?null:o.booking.user.phoneNumber),c.zb(5),c.Gc(null==o.booking||null==o.booking.user?null:o.booking.user.email),c.zb(2),c.Hc(" Booking id : ",null==o.booking?null:o.booking.id," "),c.zb(9),c.Gc(null==o.booking?null:o.booking.hotels[0].name),c.zb(5),c.Gc(null==o.booking?null:o.booking.hotels[0].phoneNumber),c.zb(5),c.Gc(null==o.booking?null:o.booking.hotels[0].address.commaSeperatedString),c.zb(18),c.lc("ngIf",null!=o.booking&&null!=o.booking.subBookingList&&o.booking.subBookingList.length>0),c.zb(6),c.Hc("",null==o.booking?null:o.booking.subtotal," BDT"),c.zb(6),c.Hc("",null==o.booking?null:o.booking.totalDiscount," BDT"),c.zb(6),c.Hc("",null==o.booking?null:o.booking.promotionDiscount," BDT"),c.zb(6),c.Hc("",null==o.booking?null:o.booking.total," BDT"),c.zb(2),c.lc("ngIf",o.booking.paid),c.zb(1),c.lc("ngIf",null!=(null==o.booking?null:o.booking.subBookingList)&&o.booking.subBookingList.length>0)}}var Ie=[{path:"add",component:p},{path:"add/:id",component:p},{path:"details/:id",component:z},{path:"discount-map",component:j},{path:"status-map",component:wt},{path:"sell-rooms",component:ce},{path:"due-bookings",component:ve},{path:"cancel-bookings",component:function(){function t(t,e){this.util=t,this.bookingService=e,this.showRoomList=!1}return t.prototype.ngOnInit=function(){},t.prototype.onHotelId=function(t){this.hotelId=t,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t},t.prototype.onRoomSelect=function(t){this.getServiceAdminBooking(t.bookingId)},t.prototype.getServiceAdminBooking=function(t){return ye(this,void 0,void 0,function(){var e=this;return Qe(this,function(o){switch(o.label){case 0:return[4,this.bookingService.getServiceAdminBooking(t).subscribe(function(t){e.booking=t})];case 1:return o.sent(),[2]}})})},t.prototype.onCancelBooking=function(t){return ye(this,void 0,void 0,function(){var e=this;return Qe(this,function(o){switch(o.label){case 0:return confirm("Are you sure to cancel booking with booking id "+t)?[4,this.bookingService.cancelServiceAdminBooking(t).subscribe(function(t){e.booking=null})]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(q.a),c.Lb(tt.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-cancel-bookings"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4"],[3,"roomSelected"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"row"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my-4","p-2","text-center"],[1,"table","table-responsive-sm","border"],[1,"text-right"],[4,"ngIf"],["colspan","5",1,"text-right"],["class","d-flex flex-row-reverse bd-highlight mb-5",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],["class","btn btn-sm btn-success mx-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Cancel Bookings"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"service-admin-room-status-date",4),c.bc("roomSelected",function(t){return e.onRoomSelect(t)}),c.Pb(),c.Pb(),c.Dc(7,Me,87,14,"div",5),c.Pb(),c.Pb()),2&t&&(c.zb(7),c.lc("ngIf",e.booking))},directives:[at,b.q,b.p],pipes:[b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}()},{path:"due-bookings/:bookingId",component:ve},{path:":id",component:Z},{path:"",component:Z}],xe=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[Pe.a,a.e.forChild(Ie)]]}),t}()}}]);