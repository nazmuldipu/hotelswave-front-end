(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{U6ZW:function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return pe}),n.d(e,"AdminReportModule",function(){return fe});var o=n("iInd"),i=n("3whx"),a=n("kU/X"),r=n("/e7+"),c=n("8Y7J"),s=n("G0yt"),l=n("s7LF"),b=n("SVse"),u=n("HF3I"),d=function(t,e){return{"bg-warning":t,"bg-danger":e}},h=function(t,e){return{"bg-primary":t,"bg-danger":e}};function g(t,e){if(1&t&&(c.Qb(0,"tr",9),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Mb(7,"br"),c.Fc(8),c.Pb(),c.Qb(9,"td"),c.Fc(10),c.Pb(),c.Qb(11,"td"),c.Fc(12),c.Pb(),c.Qb(13,"td"),c.Fc(14),c.ec(15,"date"),c.Pb(),c.Qb(16,"td",2),c.Fc(17),c.Pb(),c.Qb(18,"td",2),c.Fc(19),c.Pb(),c.Qb(20,"td",2),c.Fc(21),c.Pb(),c.Qb(22,"td"),c.Fc(23),c.Pb(),c.Qb(24,"td",2),c.Fc(25),c.Pb(),c.Qb(26,"td",10),c.Fc(27),c.Pb(),c.Qb(28,"td"),c.Qb(29,"a",11),c.Fc(30),c.Pb(),c.Pb(),c.Pb()),2&t){var n=e.$implicit,o=e.index;c.lc("ngClass",c.qc(23,d,"ROOM_RESERVED"==n.bookingStatus,"ROOM_CANCELED"==n.bookingStatus)),c.zb(2),c.Gc(o+1),c.zb(2),c.Gc(n.hotelName),c.zb(2),c.Ic(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.zb(2),c.Hc(" ",n.updatedBy?"Canceled by : "+n.updatedBy:""," "),c.zb(2),c.Ic("",n.customerName,"[",n.customerPhone,"]"),c.zb(2),c.Ic("",n.roomNumber," [",n.category,"]"),c.zb(2),c.Hc(" ",c.gc(15,20,n.date,"d MMM,y")," "),c.zb(3),c.Gc(n.price),c.zb(2),c.Gc(n.advance),c.zb(2),c.Gc(n.due),c.zb(2),c.Gc(n.ref),c.zb(2),c.Gc(n.commission),c.zb(1),c.lc("ngClass",c.qc(26,h,"Paid"==n.status,"Unpaid"==n.status)),c.zb(1),c.Hc(" ",n.status," "),c.zb(2),c.nc("routerLink","/dashboard/printTicket/",n.bookingId,""),c.zb(1),c.Hc(" ",n.bookingId,"")}}function p(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td"),c.Fc(8),c.Pb(),c.Pb()),2&t){var n=e.$implicit,o=c.dc();c.zb(2),c.Gc(n.key),c.zb(2),c.Gc(o.rentMap.get(n.key)),c.zb(2),c.Gc(o.advanceMap.get(n.key)),c.zb(2),c.Gc(o.dueMap.get(n.key))}}var f=function(){function t(){this.rentMap=new Map,this.advanceMap=new Map,this.dueMap=new Map}return t.prototype.ngOnChanges=function(t){t.bookingList&&null!=this.bookingList&&this.calculateReportList()},t.prototype.calculateReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.rentMap=new Map,this.advanceMap=new Map,this.dueMap=new Map,this.bookingList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due,e.company&&(t.rentMap.set(e.company,t.rentMap.get(e.company)?t.rentMap.get(e.company)+e.price:e.price),t.advanceMap.set(e.company,t.advanceMap.get(e.company)?t.advanceMap.get(e.company)+e.advance:e.advance),t.dueMap.set(e.company,t.dueMap.get(e.company)?t.dueMap.get(e.company)+e.due:e.due))})},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["booking-report-list"]],inputs:{title:"title",bookingList:"bookingList"},features:[c.xb],decls:68,vars:11,consts:[[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[3,"ngClass",4,"ngFor","ngForOf"],["colspan","5"],["colspan","4"],[1,"row"],[1,"col-auto"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-white",3,"ngClass"],["target","_blank",3,"routerLink"]],template:function(t,e){1&t&&(c.Qb(0,"h3",0),c.Fc(1),c.Pb(),c.Qb(2,"table",1),c.Qb(3,"thead"),c.Qb(4,"tr"),c.Qb(5,"th"),c.Fc(6,"#"),c.Pb(),c.Qb(7,"th"),c.Fc(8,"Hotel Name"),c.Pb(),c.Qb(9,"th"),c.Fc(10,"Sold by"),c.Pb(),c.Qb(11,"th"),c.Fc(12,"Customer"),c.Pb(),c.Qb(13,"th"),c.Fc(14,"Room No."),c.Pb(),c.Qb(15,"th"),c.Fc(16,"Checkin Date"),c.Pb(),c.Qb(17,"th",2),c.Fc(18,"Rent"),c.Pb(),c.Qb(19,"th",2),c.Fc(20,"Advance"),c.Pb(),c.Qb(21,"th",2),c.Fc(22,"Due"),c.Pb(),c.Qb(23,"th"),c.Fc(24,"Ref"),c.Pb(),c.Qb(25,"th",2),c.Fc(26,"Commission"),c.Pb(),c.Qb(27,"th"),c.Fc(28,"Status"),c.Pb(),c.Qb(29,"th"),c.Fc(30,"Id"),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"tbody"),c.Dc(32,g,31,29,"tr",3),c.Pb(),c.Qb(33,"tfoot"),c.Qb(34,"tr"),c.Mb(35,"td",4),c.Qb(36,"th"),c.Fc(37,"Total"),c.Pb(),c.Qb(38,"th",2),c.Fc(39),c.Pb(),c.Qb(40,"th",2),c.Fc(41),c.Pb(),c.Qb(42,"th",2),c.Fc(43),c.Pb(),c.Mb(44,"th",5),c.Pb(),c.Pb(),c.Pb(),c.Qb(45,"div",6),c.Qb(46,"div",7),c.Qb(47,"table",1),c.Qb(48,"tr"),c.Qb(49,"th"),c.Fc(50,"Counter Name"),c.Pb(),c.Qb(51,"th"),c.Fc(52,"Rent"),c.Pb(),c.Qb(53,"th"),c.Fc(54,"Advance"),c.Pb(),c.Qb(55,"th"),c.Fc(56,"Due"),c.Pb(),c.Pb(),c.Dc(57,p,9,4,"tr",8),c.ec(58,"keyvalue"),c.Qb(59,"tr"),c.Qb(60,"th"),c.Fc(61,"Total"),c.Pb(),c.Qb(62,"th"),c.Fc(63),c.Pb(),c.Qb(64,"th"),c.Fc(65),c.Pb(),c.Qb(66,"th"),c.Fc(67),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(1),c.Hc(" ",e.title,"\n"),c.zb(31),c.lc("ngForOf",e.bookingList),c.zb(7),c.Gc(e.total.totalrent),c.zb(2),c.Gc(e.total.totalAdvance),c.zb(2),c.Gc(e.total.totalDue),c.zb(14),c.lc("ngForOf",c.fc(58,9,e.rentMap)),c.zb(6),c.Gc(e.total.totalrent),c.zb(2),c.Gc(e.total.totalAdvance),c.zb(2),c.Gc(e.total.totalDue))},directives:[b.p,b.o,o.d],pipes:[b.k,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),v=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},m=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function P(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"loading",40),c.Pb()),2&t){var n=c.dc();c.zb(1),c.lc("message",n.message)}}function y(t,e){if(1&t&&(c.Ob(0),c.Mb(1,"booking-report-list",41),c.Nb()),2&t){var n=c.dc();c.zb(1),c.lc("title",n.reportHead)("bookingList",n.serviceAdminBookingReportList)}}function Q(t,e){1&t&&(c.Qb(0,"h4",42),c.Mb(1,"i",43),c.Fc(2," No record yet "),c.Pb())}var D=function(){function t(t,e){this.reportService=t,this.utilService=e,this.savedList=[],this.serviceAdminBookingReportList=[],this.reportType="Reservation",this.filterRole="all",this.filterBookingStatus="all",this.reportHead="",this.loading=!1}return t.prototype.ngOnInit=function(){this.setDate(),this.getAdminReservationReport(this.date)},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.getDate=function(){return this.date.day+"-"+this.date.month+"-"+this.date.year},t.prototype.onLoad=function(t){var e=new Date(this.date.year,this.date.month-1,this.date.day+t);switch(this.date=this.utilService.convertJsDateToNgbDate(e),this.reportType){case"Reservation":this.getAdminReservationReport(this.date);break;case"Booking":this.getAdminBookingReport(this.date)}},t.prototype.onTypeChange=function(t){this.reportType=t,this.onLoad(0)},t.prototype.onPrint=function(){window.print()},t.prototype.onFilterChange=function(t,e){switch(this.filterRole=t,this.filterBookingStatus=e,t){case"all":this.serviceAdminBookingReportList=this.savedList;break;case"SuperSell":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role||"Agent"===t.role||"Admin"==t.role});break;default:this.serviceAdminBookingReportList=this.savedList.filter(function(e){return e.role==t})}"all"!=e&&(this.serviceAdminBookingReportList.forEach(function(t){console.log(t.bookingStatus,e,t.bookingStatus==e)}),this.serviceAdminBookingReportList=this.serviceAdminBookingReportList.filter(function(t){return t.bookingStatus==e}))},t.prototype.getAdminReservationReport=function(t){return v(this,void 0,void 0,function(){var e=this;return m(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReport(this.utilService.makeDateString(t)).subscribe(function(t){e.savedList=t,e.onFilterChange(e.filterRole,e.filterBookingStatus),e.reportHead="Reservation report for date of : "+e.getDate(),e.loading=!1})];case 1:return n.sent(),[2]}})})},t.prototype.getAdminBookingReport=function(t){return v(this,void 0,void 0,function(){var e=this;return m(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReport(this.utilService.makeDateString(t)).subscribe(function(t){e.savedList=t,e.savedList.sort(e.utilService.dynamicSortObject("date")),e.savedList.sort(e.utilService.dynamicSortObject("roomNumber")),e.onFilterChange(e.filterRole,e.filterBookingStatus),e.reportHead="Booking report for date of : "+e.getDate(),e.loading=!1})];case 1:return n.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-booking-report"]],decls:79,vars:5,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reservation"],["value","Booking"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","Admin"],["value","Counter"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["value","SuperSell"],["value","User"],["value","ROOM_SOLD"],["value","ROOM_RESERVED"],["value","ROOM_CANCELED"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[3,"message"],[3,"title","bookingList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Booking report"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"button",5),c.bc("click",function(){return e.onLoad(-1)}),c.Mb(7,"i",6),c.Fc(8," Prev"),c.Pb(),c.Pb(),c.Qb(9,"div",7),c.Qb(10,"div",8),c.Qb(11,"div",9),c.Qb(12,"div",10),c.Fc(13,"Date"),c.Pb(),c.Pb(),c.Qb(14,"input",11,12),c.bc("ngModelChange",function(t){return e.date=t})("dateSelect",function(){return e.onLoad(0)})("click",function(){return c.wc(n),c.vc(15).toggle()}),c.Pb(),c.Qb(16,"div",13),c.Qb(17,"button",14),c.bc("click",function(){return c.wc(n),c.vc(15).toggle()}),c.Mb(18,"i",15),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(19,"div",4),c.Qb(20,"button",5),c.bc("click",function(){return e.onLoad(1)}),c.Fc(21," Next "),c.Mb(22,"i",16),c.Pb(),c.Pb(),c.Qb(23,"div",4),c.Qb(24,"div",8),c.Qb(25,"div",9),c.Qb(26,"div",10),c.Fc(27,"Type"),c.Pb(),c.Pb(),c.Qb(28,"select",17),c.bc("ngModelChange",function(t){return e.reportType=t})("change",function(t){return e.onTypeChange(t.target.value)}),c.Qb(29,"option",18),c.Fc(30," By checkin date "),c.Pb(),c.Qb(31,"option",19),c.Fc(32," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(33,"div",20),c.Qb(34,"div",8),c.Qb(35,"strong"),c.Fc(36," Filter by \xa0"),c.Pb(),c.Qb(37,"div",9),c.Qb(38,"div",10),c.Fc(39,"Role"),c.Pb(),c.Pb(),c.Qb(40,"select",21),c.bc("change",function(t){return e.onFilterChange(t.target.value,e.filterBookingStatus)}),c.Qb(41,"option",22),c.Fc(42," All "),c.Pb(),c.Qb(43,"option",23),c.Fc(44," Hotelswave "),c.Pb(),c.Qb(45,"option",24),c.Fc(46," Counter "),c.Pb(),c.Qb(47,"option",25),c.Fc(48," Agent "),c.Pb(),c.Qb(49,"option",26),c.Fc(50," Hotel Admin "),c.Pb(),c.Qb(51,"option",27),c.Fc(52," Hotel Agent "),c.Pb(),c.Qb(53,"option",28),c.Fc(54," Super Sell "),c.Pb(),c.Qb(55,"option",29),c.Fc(56," User "),c.Pb(),c.Pb(),c.Qb(57,"div",9),c.Qb(58,"div",10),c.Fc(59,"Status"),c.Pb(),c.Pb(),c.Qb(60,"select",21),c.bc("change",function(t){return e.onFilterChange(e.filterRole,t.target.value)}),c.Qb(61,"option",22),c.Fc(62," All "),c.Pb(),c.Qb(63,"option",30),c.Fc(64," Sold "),c.Pb(),c.Qb(65,"option",31),c.Fc(66," Reserved "),c.Pb(),c.Qb(67,"option",32),c.Fc(68," Cancled "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(69,"div",4),c.Qb(70,"button",33),c.bc("click",function(){return e.onPrint()}),c.Mb(71,"i",34),c.Fc(72," Print "),c.Pb(),c.Pb(),c.Pb(),c.Qb(73,"div",35),c.Qb(74,"div",36),c.Dc(75,P,2,1,"div",37),c.Dc(76,y,2,2,"ng-container",38),c.Dc(77,Q,3,0,"ng-template",null,39,c.Ec),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=c.vc(78);c.zb(14),c.lc("ngModel",e.date),c.zb(14),c.lc("ngModel",e.reportType),c.zb(47),c.lc("ngIf",e.loading),c.zb(1),c.lc("ngIf",e.serviceAdminBookingReportList.length>0&&!e.loading)("ngIfElse",o)}},directives:[s.i,l.b,l.m,l.p,l.u,l.q,l.w,b.q,u.a,f],styles:[""]}),t}(),k=n("/YPm"),F=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},w=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function L(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"loading",44),c.Pb()),2&t){var n=c.dc(2);c.zb(1),c.lc("message",n.message)}}function S(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"booking-report-list",45),c.Pb()),2&t){var n=c.dc(2);c.zb(1),c.lc("title",n.reportHead)("bookingList",n.serviceAdminBookingReportList)}}function R(t,e){1&t&&(c.Qb(0,"h4",46),c.Mb(1,"i",47),c.Fc(2," No record yet "),c.Pb())}function C(t,e){if(1&t&&(c.Qb(0,"div",40),c.Dc(1,L,2,1,"div",41),c.Dc(2,S,2,2,"div",42),c.Dc(3,R,3,0,"ng-template",null,43,c.Ec),c.Pb()),2&t){var n=c.vc(4),o=c.dc();c.zb(1),c.lc("ngIf",o.loading),c.zb(1),c.lc("ngIf",o.serviceAdminBookingReportList.length>0&&!o.loading)("ngIfElse",n)}}function M(t,e){1&t&&(c.Qb(0,"h4",46),c.Mb(1,"i",47),c.Fc(2," Select a hotel first "),c.Pb())}var B=function(){function t(t,e){this.reportService=t,this.utilService=e,this.savedList=[],this.serviceAdminBookingReportList=[],this.reportType="Reservation",this.filterRole="all",this.filterBookingStatus="all",this.reportHead="",this.loading=!1,this.rentMap=new Map,this.advanceMap=new Map,this.dueMap=new Map}return t.prototype.ngOnInit=function(){this.setDate()},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.getDate=function(){return this.date.day+"-"+this.date.month+"-"+this.date.year},t.prototype.onHotel=function(t){this.hotel=t,this.onLoad(0)},t.prototype.onLoad=function(t){var e=new Date(this.date.year,this.date.month-1,this.date.day+t);if(this.date=this.utilService.convertJsDateToNgbDate(e),this.hotel&&this.hotel.id)switch(this.reportType){case"Reservation":this.getAdminReservationReportByHotelId(this.date,this.hotel.id);break;case"Booking":this.getAdminBookingReportByHotelId(this.date,this.hotel.id)}},t.prototype.onTypeChange=function(t){this.reportType=t,this.onLoad(0)},t.prototype.onPrint=function(){window.print()},t.prototype.onFilterChange=function(t,e){switch(this.filterRole=t,this.filterBookingStatus=e,t){case"all":this.serviceAdminBookingReportList=this.savedList;break;case"SuperSell":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role||"Agent"===t.role||"Admin"==t.role});break;default:this.serviceAdminBookingReportList=this.savedList.filter(function(e){return e.role==t})}"all"!=e&&(this.serviceAdminBookingReportList=this.serviceAdminBookingReportList.filter(function(t){return t.bookingStatus==e}))},t.prototype.getAdminReservationReportByHotelId=function(t,e){return F(this,void 0,void 0,function(){var n=this;return w(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReportByHotelId(this.utilService.makeDateString(t),e).subscribe(function(t){n.savedList=t,n.onFilterChange(n.filterRole,n.filterBookingStatus),n.reportHead='Reservation report for "'+n.hotel.name+'" for date of : '+n.getDate(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminBookingReportByHotelId=function(t,e){return F(this,void 0,void 0,function(){var n=this;return w(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReportByHotelId(this.utilService.makeDateString(t),e).subscribe(function(t){n.savedList=t,n.savedList.sort(n.utilService.dynamicSortObject("date")),n.savedList.sort(n.utilService.dynamicSortObject("roomNumber")),n.onFilterChange(n.filterRole,n.filterBookingStatus),n.reportHead='Booking report for "'+n.hotel.name+'" for date of : '+n.getDate(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-hotel-report"]],decls:77,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"hotel"],[1,"col","d-print-block"],[1,"row","d-print-none"],[1,"col-auto"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reservation"],["value","Booking"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","Admin"],["value","Counter"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["value","SuperSell"],["value","User"],["value","ROOM_SOLD"],["value","ROOM_RESERVED"],["value","ROOM_CANCELED"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],["class","col-12",4,"ngIf","ngIfElse"],["noHotel",""],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[3,"message"],[3,"title","bookingList"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Hotel report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"admin-hotel-list",4),c.bc("hotel",function(t){return e.onHotel(t)}),c.Pb(),c.Pb(),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Qb(9,"div",7),c.Qb(10,"button",8),c.bc("click",function(){return e.onLoad(-1)}),c.Mb(11,"i",9),c.Pb(),c.Pb(),c.Qb(12,"div",10),c.Qb(13,"div",11),c.Qb(14,"div",12),c.Qb(15,"div",13),c.Fc(16,"Date"),c.Pb(),c.Pb(),c.Qb(17,"input",14,15),c.bc("ngModelChange",function(t){return e.date=t})("dateSelect",function(){return e.onLoad(0)})("click",function(){return c.wc(n),c.vc(18).toggle()}),c.Pb(),c.Qb(19,"div",16),c.Qb(20,"button",17),c.bc("click",function(){return c.wc(n),c.vc(18).toggle()}),c.Mb(21,"i",18),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(22,"div",7),c.Qb(23,"button",8),c.bc("click",function(){return e.onLoad(1)}),c.Mb(24,"i",19),c.Pb(),c.Pb(),c.Qb(25,"div",7),c.Qb(26,"div",11),c.Qb(27,"div",12),c.Qb(28,"div",13),c.Fc(29,"Type"),c.Pb(),c.Pb(),c.Qb(30,"select",20),c.bc("ngModelChange",function(t){return e.reportType=t})("change",function(t){return e.onTypeChange(t.target.value)}),c.Qb(31,"option",21),c.Fc(32," By checkin date "),c.Pb(),c.Qb(33,"option",22),c.Fc(34," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(35,"div",23),c.Qb(36,"div",11),c.Qb(37,"div",12),c.Qb(38,"div",13),c.Fc(39,"Filter"),c.Pb(),c.Pb(),c.Qb(40,"select",24),c.bc("change",function(t){return e.onFilterChange(t.target.value,e.filterBookingStatus)}),c.Qb(41,"option",25),c.Fc(42," All "),c.Pb(),c.Qb(43,"option",26),c.Fc(44," Hotelswave "),c.Pb(),c.Qb(45,"option",27),c.Fc(46," Counter "),c.Pb(),c.Qb(47,"option",28),c.Fc(48," Agent "),c.Pb(),c.Qb(49,"option",29),c.Fc(50," Hotel Admin "),c.Pb(),c.Qb(51,"option",30),c.Fc(52," Hotel Agent "),c.Pb(),c.Qb(53,"option",31),c.Fc(54," Super Sell "),c.Pb(),c.Qb(55,"option",32),c.Fc(56," User "),c.Pb(),c.Pb(),c.Qb(57,"div",12),c.Qb(58,"div",13),c.Fc(59,"Status"),c.Pb(),c.Pb(),c.Qb(60,"select",24),c.bc("change",function(t){return e.onFilterChange(e.filterRole,t.target.value)}),c.Qb(61,"option",25),c.Fc(62," All "),c.Pb(),c.Qb(63,"option",33),c.Fc(64," Sold "),c.Pb(),c.Qb(65,"option",34),c.Fc(66," Reserved "),c.Pb(),c.Qb(67,"option",35),c.Fc(68," Cancled "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(69,"div",7),c.Qb(70,"button",36),c.bc("click",function(){return e.onPrint()}),c.Mb(71,"i",37),c.Fc(72," Print "),c.Pb(),c.Pb(),c.Pb(),c.Qb(73,"div",2),c.Dc(74,C,5,3,"div",38),c.Dc(75,M,3,0,"ng-template",null,39,c.Ec),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=c.vc(76);c.zb(17),c.lc("ngModel",e.date),c.zb(13),c.lc("ngModel",e.reportType),c.zb(44),c.lc("ngIf",e.hotel&&e.hotel.id)("ngIfElse",o)}},directives:[k.a,s.i,l.b,l.m,l.p,l.u,l.q,l.w,b.q,u.a,f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),A=n("ITiG"),z=n("53Co"),I=n("uEz7"),x=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},O=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function H(t,e){if(1&t){var n=c.Rb();c.Qb(0,"a",30),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc().onSelectUser(t.id)}),c.Mb(1,"i",31),c.Fc(2),c.Pb()}if(2&t){var o=e.$implicit;c.zb(2),c.Ic(" ",o.name," - ",o.phoneNumber," ")}}function E(t,e){if(1&t){var n=c.Rb();c.Qb(0,"pagination",32),c.bc("getPage",function(t){c.wc(n);var e=c.dc();return e.getUserPage(e.userQuery,e.role,t)}),c.Pb()}if(2&t){var o=c.dc();c.lc("page",o.userPage)("short",o.short)}}function T(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"loading",33),c.Pb()),2&t){var n=c.dc();c.zb(1),c.lc("message",n.message)}}function G(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"booking-report-list",34),c.Pb()),2&t){var n=c.dc();c.zb(1),c.lc("bookingList",n.serviceAdminBookingReportList)}}function _(t,e){1&t&&(c.Qb(0,"h4",26),c.Mb(1,"i",35),c.Fc(2," No record yet "),c.Pb())}var N=function(){function t(t,e,n){this.reportService=t,this.userService=e,this.utilService=n,this.short=!0,this.loading=!1,this.role="Agent",this.mode="Reserve",this.daterange={},this.serviceAdminBookingReportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.getUserPage(this.userQuery,this.role)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-1),this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.loadReport(this.userId,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},t.prototype.onPrint=function(){window.print()},t.prototype.getUserPage=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),x(this,void 0,void 0,function(){var o=this;return O(this,function(i){switch(i.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(t,e,n).subscribe(function(t){o.userPage=t,o.loading=!1},function(t){return console.log("User list loading error!",t)})];case 1:return i.sent(),[2]}})})},t.prototype.onSelectUser=function(t){this.userId=t,this.user=this.userPage.content.find(function(e){return e.id==t}),this.loadReport(t,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.onModeChange=function(t){this.mode=t,this.userId&&this.loadReport(this.userId,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.loadReport=function(t,e,n){switch(this.mode){case"Reserve":this.getAdminAgentReservationReport(t,e,n);break;case"Sell":this.getAdminAgentBookingReport(t,e,n)}},t.prototype.getAdminAgentBookingReport=function(t,e,n){return x(this,void 0,void 0,function(){var o=this;return O(this,function(i){switch(i.label){case 0:return t?[4,this.reportService.getAdminAgentBookingReportByAgentId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.serviceAdminBookingReportList=t,o.loading=!1,o.calculateServiceAdminBookingReportList()})]:[2];case 1:return i.sent(),[2]}})})},t.prototype.getAdminAgentReservationReport=function(t,e,n){return x(this,void 0,void 0,function(){var o=this;return O(this,function(i){switch(i.label){case 0:return t?[4,this.reportService.getAdminAgentReservationReportByAgentId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.serviceAdminBookingReportList=t,o.loading=!1,o.calculateServiceAdminBookingReportList()})]:[2];case 1:return i.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.serviceAdminBookingReportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(A.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-agent-report"]],decls:48,vars:11,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","d-print-none"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-md-2","d-print-none"],[1,"my-1",3,"ngSubmit"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","mt-2"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"page","short","getPage",4,"ngIf"],[1,"col","d-print-block"],[1,"text-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-user"],[3,"page","short","getPage"],[3,"message"],[3,"title","bookingList"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Agent report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Mb(9,"i",7),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(11,"div",3),c.Qb(12,"div",9),c.Qb(13,"div",5),c.Qb(14,"div",6),c.Fc(15,"Type"),c.Pb(),c.Pb(),c.Qb(16,"select",10),c.bc("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Qb(17,"option",11),c.Fc(18," By checkin date "),c.Pb(),c.Qb(19,"option",12),c.Fc(20," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",13),c.Qb(22,"button",14),c.bc("click",function(){return e.onPrint()}),c.Mb(23,"i",15),c.Fc(24," Print "),c.Pb(),c.Pb(),c.Pb(),c.Qb(25,"div",16),c.Qb(26,"div",17),c.Qb(27,"form",18),c.bc("ngSubmit",function(){return e.submit()}),c.Qb(28,"div",9),c.Qb(29,"div",5),c.Qb(30,"div",6),c.Mb(31,"i",19),c.Pb(),c.Pb(),c.Qb(32,"input",20),c.bc("ngModelChange",function(t){return e.userQuery=t}),c.Pb(),c.Pb(),c.Pb(),c.Qb(33,"ul",21),c.Qb(34,"li",22),c.Qb(35,"h5"),c.Fc(36,"Agent List"),c.Pb(),c.Qb(37,"small"),c.Fc(38,"Choose a agent from below list"),c.Pb(),c.Pb(),c.Dc(39,H,3,2,"a",23),c.Dc(40,E,1,2,"pagination",24),c.Pb(),c.Pb(),c.Qb(41,"div",25),c.Qb(42,"h3",26),c.Fc(43),c.Pb(),c.Dc(44,T,2,1,"div",27),c.Dc(45,G,2,1,"div",28),c.Dc(46,_,3,0,"ng-template",null,29,c.Ec),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.vc(47);c.zb(10),c.lc("options",e.options),c.zb(6),c.lc("ngModel",e.mode),c.zb(16),c.lc("ngModel",e.userQuery),c.zb(7),c.lc("ngForOf",null==e.userPage?null:e.userPage.content),c.zb(1),c.lc("ngIf",null!=e.userPage),c.zb(3),c.Jc(" ",null==e.user?null:e.user.name," - ",null==e.user?null:e.user.phoneNumber," ",e.mode," report"),c.zb(1),c.lc("ngIf",e.loading),c.zb(1),c.lc("ngIf",e.serviceAdminBookingReportList.length>0&&!e.loading)("ngIfElse",n)}},directives:[z.b,l.u,l.m,l.p,l.q,l.w,l.x,l.n,l.o,l.b,b.p,b.q,I.a,u.a,f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),U=n("0sMf"),q=n("YBP9"),Y=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},$=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function J(t,e){1&t&&c.Mb(0,"loading")}function j(t,e){if(1&t){var n=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.ec(5,"date"),c.Pb(),c.Qb(6,"td"),c.Fc(7),c.Pb(),c.Qb(8,"td",19),c.Fc(9),c.Pb(),c.Qb(10,"td",19),c.Fc(11),c.Pb(),c.Qb(12,"td",19),c.Fc(13),c.Pb(),c.Qb(14,"td",19),c.Qb(15,"a",22),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc(2).onBookingDetails(t.bookingId)}),c.Fc(16),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit,i=e.index;c.zb(2),c.Gc(i+1),c.zb(2),c.Gc(c.fc(5,8,o.date)),c.zb(3),c.Ic(" ",o.company," ",o.role?"["+o.role+"]":""," "),c.zb(2),c.Gc(o.hotelswaveCommission),c.zb(2),c.Gc(o.hotelswaveAgentCommission),c.zb(2),c.Gc(o.price),c.zb(3),c.Gc(o.bookingId)}}function V(t,e){if(1&t&&(c.Qb(0,"table",18),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th"),c.Fc(4,"Sl."),c.Pb(),c.Qb(5,"th"),c.Fc(6,"Date"),c.Pb(),c.Qb(7,"th"),c.Fc(8,"Sold by"),c.Pb(),c.Qb(9,"th",19),c.Fc(10,"Hotelswave Commission"),c.Pb(),c.Qb(11,"th",19),c.Fc(12,"Hotelswave Agent Commission"),c.Pb(),c.Qb(13,"th",19),c.Fc(14,"Price"),c.Pb(),c.Qb(15,"th",19),c.Fc(16,"Bookign ID"),c.Pb(),c.Pb(),c.Pb(),c.Qb(17,"tbody"),c.Dc(18,j,17,10,"tr",20),c.Pb(),c.Qb(19,"tfoot"),c.Qb(20,"tr"),c.Mb(21,"th"),c.Qb(22,"th"),c.Fc(23,"Total"),c.Pb(),c.Mb(24,"th"),c.Qb(25,"th",19),c.Fc(26),c.Pb(),c.Qb(27,"th",19),c.Fc(28),c.Pb(),c.Qb(29,"th",19),c.Fc(30),c.Pb(),c.Mb(31,"th",21),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(18),c.lc("ngForOf",n.reportList),c.zb(8),c.Gc(n.total.totalHotelswaveCommission),c.zb(2),c.Gc(n.total.toatalHotelswaveAgentCommission),c.zb(2),c.Gc(n.total.totalPrice)}}function W(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",9),c.Mb(1,"admin-booking-details",23),c.Qb(2,"button",24),c.bc("click",function(){return c.wc(n),c.dc().onCloseBooking()}),c.Fc(3,"Close"),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(1),c.lc("booking",o.booking)}}var X=function(){function t(t,e,n){this.reportService=t,this.bookingService=e,this.utilService=n,this.loading=!1,this.mode="Reserve",this.reportList=[],this.daterange={}}return t.prototype.ngOnInit=function(){this.total={totalHotelswaveCommission:0,toatalHotelswaveAgentCommission:0,totalPrice:0},this.setDateRanges(),this.onLoad()},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onLoad()},t.prototype.onLoad=function(){switch(this.mode){case"Reserve":this.getAdminCommissionReportByCheckIn(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Sell":this.getAdminCommissionReportBySells(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminCommissionReportBySells=function(t,e){return Y(this,void 0,void 0,function(){var n=this;return $(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminCommissionReportBySells(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCommissionReportByCheckIn=function(t,e){return Y(this,void 0,void 0,function(){var n=this;return $(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminCommissionReportByCheckIn(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onBookingDetails=function(t){return Y(this,void 0,void 0,function(){var e=this;return $(this,function(n){switch(n.label){case 0:return console.log("Details: ",t),[4,this.bookingService.getAdminBooking(t).subscribe(function(t){e.booking=t})];case 1:return n.sent(),[2]}})})},t.prototype.onCloseBooking=function(){this.booking=null},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalHotelswaveCommission:0,toatalHotelswaveAgentCommission:0,totalPrice:0},this.reportList.forEach(function(e){t.total.totalHotelswaveCommission+=e.hotelswaveCommission,t.total.toatalHotelswaveAgentCommission+=e.hotelswaveAgentCommission,t.total.totalPrice+=e.price})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(U.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-commission-report"]],decls:26,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"col","text-center"],[4,"ngIf"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[3,"click"],[3,"booking"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Commission report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Mb(9,"i",7),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(11,"div",9),c.Qb(12,"div",10),c.Qb(13,"div",5),c.Qb(14,"div",6),c.Fc(15,"Type"),c.Pb(),c.Pb(),c.Qb(16,"select",11),c.bc("ngModelChange",function(t){return e.mode=t})("change",function(){return e.onLoad()}),c.Qb(17,"option",12),c.Fc(18," By checkin date "),c.Pb(),c.Qb(19,"option",13),c.Fc(20," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",2),c.Qb(22,"div",14),c.Dc(23,J,1,0,"loading",15),c.Dc(24,V,32,4,"table",16),c.Pb(),c.Dc(25,W,4,1,"div",17),c.Pb(),c.Pb()),2&t&&(c.zb(10),c.lc("options",e.options),c.zb(6),c.lc("ngModel",e.mode),c.zb(7),c.lc("ngIf",e.loading),c.zb(1),c.lc("ngIf",!e.loading),c.zb(1),c.lc("ngIf",e.booking))},directives:[z.b,l.u,l.m,l.p,l.q,l.w,b.q,u.a,b.p,q.a],pipes:[b.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}a[_ngcontent-%COMP%]{cursor:pointer;color:#00f!important;font-weight:600}"]}),t}(),Z=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},K=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function tt(t,e){1&t&&(c.Qb(0,"div",17),c.Mb(1,"loading"),c.Pb())}function et(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td",20),c.Fc(8),c.Pb(),c.Qb(9,"td",20),c.Fc(10),c.Pb(),c.Qb(11,"td",20),c.Fc(12),c.Pb(),c.Qb(13,"td",20),c.Fc(14),c.Pb(),c.Pb()),2&t){var n=e.$implicit,o=e.index;c.zb(2),c.Gc(o+1),c.zb(2),c.Jc("",n.date.year,"-",n.date.monthValue,"-",n.date.dayOfMonth,""),c.zb(2),c.Hc(" ",n.hotelName," "),c.zb(2),c.Gc(n.totalNumberOfRooms),c.zb(2),c.Gc(n.totalRent),c.zb(2),c.Gc(n.totalAdvance),c.zb(2),c.Gc(n.totalDue)}}function nt(t,e){if(1&t&&(c.Qb(0,"div",18),c.Qb(1,"table",19),c.Qb(2,"thead"),c.Qb(3,"tr"),c.Qb(4,"th"),c.Fc(5,"Sl."),c.Pb(),c.Qb(6,"th"),c.Fc(7,"Date"),c.Pb(),c.Qb(8,"th"),c.Fc(9,"Hotel Name"),c.Pb(),c.Qb(10,"th",20),c.Fc(11,"Number of Rooms"),c.Pb(),c.Qb(12,"th",20),c.Fc(13,"Rent"),c.Pb(),c.Qb(14,"th",20),c.Fc(15,"Advance"),c.Pb(),c.Qb(16,"th",20),c.Fc(17,"Due"),c.Pb(),c.Pb(),c.Pb(),c.Qb(18,"tbody"),c.Dc(19,et,15,9,"tr",21),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(19),c.lc("ngForOf",n.reportList)}}var ot=function(){function t(t,e){this.reportService=t,this.utilService=e,this.reportList=[],this.daterange={},this.mode="Reserve",this.loading=!1}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+2),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getAdminBookingReportRange(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRange(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminBookingReportRange=function(t,e){return Z(this,void 0,void 0,function(){var n=this;return K(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReportRange(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminReservationReportRange=function(t,e){return Z(this,void 0,void 0,function(){var n=this;return K(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReportRange(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.loading=!1})];case 1:return o.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-booking-range-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"row","mb-5"],["class","col text-center",4,"ngIf"],["class","col",4,"ngIf"],[1,"col","text-center"],[1,"col"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Booking range report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Mb(9,"i",7),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(11,"div",9),c.Qb(12,"div",10),c.Qb(13,"div",5),c.Qb(14,"div",6),c.Fc(15,"Type"),c.Pb(),c.Pb(),c.Qb(16,"select",11),c.bc("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Qb(17,"option",12),c.Fc(18," By checkin date "),c.Pb(),c.Qb(19,"option",13),c.Fc(20," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",14),c.Dc(22,tt,2,0,"div",15),c.Dc(23,nt,20,1,"div",16),c.Pb(),c.Pb()),2&t&&(c.zb(10),c.lc("options",e.options),c.zb(6),c.lc("ngModel",e.mode),c.zb(6),c.lc("ngIf",e.loading),c.zb(1),c.lc("ngIf",!e.loading))},directives:[z.b,l.u,l.m,l.p,l.q,l.w,b.q,u.a,b.p],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),it=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},at=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},rt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function ct(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td",22),c.Fc(8),c.Pb(),c.Qb(9,"td",22),c.Fc(10),c.Pb(),c.Qb(11,"td",22),c.Fc(12),c.Pb(),c.Qb(13,"td",22),c.Fc(14),c.Pb(),c.Qb(15,"td",24),c.Fc(16),c.Pb(),c.Pb()),2&t){var n=e.$implicit,o=e.index;c.zb(2),c.Gc(o+1),c.zb(2),c.Jc("",n.date.year,"-",n.date.monthValue,"-",n.date.dayOfMonth,""),c.zb(2),c.Hc(" ",n.hotelName," "),c.zb(2),c.Gc(n.totalNumberOfRooms),c.zb(2),c.Gc(n.totalRent),c.zb(2),c.Gc(n.totalAdvance),c.zb(2),c.Gc(n.totalDue),c.zb(1),c.lc("ngClass",c.qc(11,rt,"Paid"==n.status,"Unpaid"==n.status)),c.zb(1),c.Gc(n.status)}}function st(t,e){if(1&t&&(c.Qb(0,"table",21),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th"),c.Fc(4,"Sl."),c.Pb(),c.Qb(5,"th"),c.Fc(6,"Date"),c.Pb(),c.Qb(7,"th"),c.Fc(8,"Hotel Name"),c.Pb(),c.Qb(9,"th",22),c.Fc(10,"Number of Rooms"),c.Pb(),c.Qb(11,"th",22),c.Fc(12,"Rent"),c.Pb(),c.Qb(13,"th",22),c.Fc(14,"Advance"),c.Pb(),c.Qb(15,"th",22),c.Fc(16,"Due"),c.Pb(),c.Qb(17,"th",22),c.Fc(18,"Status"),c.Pb(),c.Pb(),c.Pb(),c.Qb(19,"tbody"),c.Dc(20,ct,17,14,"tr",23),c.Pb(),c.Pb()),2&t){var n=c.dc(2);c.zb(20),c.lc("ngForOf",n.reportList)}}function lt(t,e){1&t&&(c.Qb(0,"h3",18),c.Mb(1,"i",25),c.Fc(2," No data found"),c.Pb())}function bt(t,e){if(1&t&&(c.Qb(0,"div",17),c.Qb(1,"h3",18),c.Fc(2),c.ec(3,"date"),c.ec(4,"date"),c.Pb(),c.Dc(5,st,21,1,"table",19),c.Dc(6,lt,3,0,"ng-template",null,20,c.Ec),c.Pb()),2&t){var n=c.vc(7),o=c.dc();c.zb(2),c.Jc(" ",null==o.hotel?null:o.hotel.name," booking report from ",c.fc(3,5,o.daterange.checkinDate)," to ",c.fc(4,7,o.daterange.checkoutDate)," "),c.zb(3),c.lc("ngIf",o.reportList.length>0)("ngIfElse",n)}}function ut(t,e){1&t&&(c.Qb(0,"h3",18),c.Mb(1,"i",25),c.Fc(2," No hotel selected yet"),c.Pb())}var dt=function(){function t(t,e){this.reportService=t,this.utilService=e,this.daterange={},this.mode="Sell",this.reportList=[]}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+11),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onHotel=function(t){this.hotel=t,this.hotelId=t.id,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){if(this.hotelId)switch(this.mode=t,this.mode){case"Sell":this.getAdminBookingReportByHotelId(this.hotelId,this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRangeByHotelId(this.hotelId,this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminReservationReportRangeByHotelId=function(t,e,n){return it(this,void 0,void 0,function(){var o=this;return at(this,function(i){switch(i.label){case 0:return[4,this.reportService.getAdminReservationReportRangeByHotelId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.reportList=t})];case 1:return i.sent(),[2]}})})},t.prototype.getAdminBookingReportByHotelId=function(t,e,n){return it(this,void 0,void 0,function(){var o,i,a=this;return at(this,function(r){switch(r.label){case 0:return o=this.utilService.getDateString(e),i=this.utilService.getDateString(n),[4,this.reportService.getAdminBookingReportRangeByHotelId(t,o,i).subscribe(function(t){a.reportList=t})];case 1:return r.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-hotel-range-report"]],decls:27,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"col-md-3","d-print-none"],[3,"hotel"],["class","col d-print-block",4,"ngIf","ngIfElse"],["noHotelYet",""],[1,"col","d-print-block"],[1,"text-center"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-white",3,"ngClass"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Hotel Booking range report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Mb(9,"i",7),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(11,"div",3),c.Qb(12,"div",9),c.Qb(13,"div",5),c.Qb(14,"div",6),c.Fc(15,"Type"),c.Pb(),c.Pb(),c.Qb(16,"select",10),c.bc("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Qb(17,"option",11),c.Fc(18," By checkin date "),c.Pb(),c.Qb(19,"option",12),c.Fc(20," By sells date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",2),c.Qb(22,"div",13),c.Qb(23,"admin-hotel-list",14),c.bc("hotel",function(t){return e.onHotel(t)}),c.Pb(),c.Pb(),c.Dc(24,bt,8,9,"div",15),c.Dc(25,ut,3,0,"ng-template",null,16,c.Ec),c.Pb(),c.Pb()),2&t){var n=c.vc(26);c.zb(10),c.lc("options",e.options),c.zb(6),c.lc("ngModel",e.mode),c.zb(8),c.lc("ngIf",e.hotelId)("ngIfElse",n)}},directives:[z.b,l.u,l.m,l.p,l.q,l.w,k.a,b.q,b.p,b.o],pipes:[b.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),ht=n("d26D"),gt=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},pt=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function ft(t,e){if(1&t&&(c.Qb(0,"option",31),c.Fc(1),c.Pb()),2&t){var n=e.$implicit;c.lc("value",n.id),c.zb(1),c.Ic("",n.name,"[",n.phoneNumber,"] ")}}function vt(t,e){if(1&t&&(c.Qb(0,"option",31),c.Fc(1),c.Pb()),2&t){var n=e.$implicit;c.lc("value",n.id),c.zb(1),c.Hc(" ",n.name," ")}}function mt(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",32),c.Qb(1,"button",33),c.bc("click",function(){return c.wc(n),c.dc().onSearch()}),c.Fc(2,"Search"),c.Pb(),c.Pb()}}function Pt(t,e){if(1&t&&(c.Qb(0,"div"),c.Mb(1,"loading",34),c.Pb()),2&t){var n=c.dc();c.zb(1),c.lc("message",n.message)}}var yt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function Qt(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td",37),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Qb(6,"td"),c.Fc(7),c.Pb(),c.Qb(8,"td"),c.Fc(9),c.Pb(),c.Qb(10,"td",37),c.Fc(11),c.ec(12,"date"),c.Pb(),c.Qb(13,"td",37),c.Fc(14),c.Pb(),c.Qb(15,"td",37),c.Fc(16),c.Pb(),c.Qb(17,"td",37),c.Fc(18),c.Pb(),c.Qb(19,"td"),c.Fc(20),c.Pb(),c.Qb(21,"td",37),c.Fc(22),c.Pb(),c.Qb(23,"td",40),c.Fc(24),c.Pb(),c.Pb()),2&t){var n=e.$implicit;c.zb(2),c.Hc(" ",c.gc(3,14,n.created,"d MMM,y")," "),c.zb(3),c.Gc(n.hotelName),c.zb(2),c.Ic("",n.customerName,"[",n.customerPhone,"]"),c.zb(2),c.Ic("",n.roomNumber," [",n.category,"]"),c.zb(2),c.Hc(" ",c.gc(12,17,n.date,"d MMM,y")," "),c.zb(3),c.Gc(n.price),c.zb(2),c.Gc(n.advance),c.zb(2),c.Gc(n.due),c.zb(2),c.Gc(n.ref),c.zb(2),c.Gc(n.commission),c.zb(1),c.lc("ngClass",c.qc(20,yt,"Paid"==n.status,"Unpaid"==n.status)),c.zb(1),c.Hc(" ",n.status," ")}}function Dt(t,e){if(1&t&&(c.Qb(0,"div"),c.Qb(1,"h3",35),c.Fc(2),c.Pb(),c.Qb(3,"table",36),c.Qb(4,"thead"),c.Qb(5,"tr"),c.Qb(6,"th"),c.Fc(7,"Sells Date"),c.Pb(),c.Qb(8,"th"),c.Fc(9,"Hotel Name"),c.Pb(),c.Qb(10,"th"),c.Fc(11,"Guest"),c.Pb(),c.Qb(12,"th"),c.Fc(13,"Room No."),c.Pb(),c.Qb(14,"th",37),c.Fc(15,"Checkin Date"),c.Pb(),c.Qb(16,"th",37),c.Fc(17,"Rent"),c.Pb(),c.Qb(18,"th",37),c.Fc(19,"Advance"),c.Pb(),c.Qb(20,"th",37),c.Fc(21,"Due"),c.Pb(),c.Qb(22,"th"),c.Fc(23,"Ref"),c.Pb(),c.Qb(24,"th",37),c.Fc(25,"Comm."),c.Pb(),c.Qb(26,"th"),c.Fc(27,"Status"),c.Pb(),c.Pb(),c.Pb(),c.Qb(28,"tbody"),c.Dc(29,Qt,25,23,"tr",38),c.Pb(),c.Qb(30,"tfoot"),c.Qb(31,"tr"),c.Qb(32,"th"),c.Fc(33,"Total"),c.Pb(),c.Mb(34,"td"),c.Mb(35,"td"),c.Mb(36,"td"),c.Mb(37,"th"),c.Qb(38,"th",37),c.Fc(39),c.Pb(),c.Qb(40,"th",37),c.Fc(41),c.Pb(),c.Qb(42,"th",37),c.Fc(43),c.Pb(),c.Mb(44,"th",39),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(2),c.Ic(" ",n.reportType," report for date of : ",n.getDate()," "),c.zb(27),c.lc("ngForOf",n.reportList),c.zb(10),c.Gc(n.total.totalrent),c.zb(2),c.Gc(n.total.totalAdvance),c.zb(2),c.Gc(n.total.totalDue)}}function kt(t,e){1&t&&(c.Qb(0,"h4",35),c.Mb(1,"i",41),c.Fc(2," No record yet "),c.Pb())}var Ft=function(){function t(t,e,n,o){this.userService=t,this.hotelService=e,this.reportService=n,this.util=o,this.daterange={},this.reportType="Sells",this.loading=!1,this.reportList=[],this.message=""}return t.prototype.ngOnInit=function(){this.getAllHotels(),this.setDateRanges()},t.prototype.setDateRanges=function(){this.daterange.startDate=new Date,this.daterange.endDate=new Date;var t=new Date;t.setDate(this.daterange.startDate.getDate()-490);var e=new Date;e.setDate(this.daterange.endDate.getDate()+90),this.daterange.startDate.setDate(this.daterange.endDate.getDate()-10),this.daterange.endDate.setDate(this.daterange.endDate.getDate()+10),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.reportList=null,this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.daterange.label=t.label},t.prototype.getAllHotels=function(){return gt(this,void 0,void 0,function(){var t,e;return pt(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,this.hotelService.gethotelsList().toPromise()];case 2:return t.hotelList=n.sent(),this.hotelList.sort(this.util.dynamicSortObject("name")),this.loading=!1,[3,4];case 3:return e=n.sent(),console.log(e),[3,4];case 4:return[2]}})})},t.prototype.onHotelChange=function(t){this.reportList=null,this.hotel=this.hotelList.find(function(e){return e.id==t})},t.prototype.getUserListByRole=function(t){return gt(this,void 0,void 0,function(){var e,n;return pt(this,function(o){switch(o.label){case 0:this.reportList=null,this.loading=!0,o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,this.userService.getAdminUserByRole(t).toPromise()];case 2:return e.userList=o.sent(),this.userList.sort(this.util.dynamicSortObject("name")),this.loading=!1,[3,4];case 3:return n=o.sent(),console.log(n),[3,4];case 4:return[2]}})})},t.prototype.onSearch=function(){switch(this.reportType){case"Sells":this.getAdminSellsRangeReport(this.hotel?this.hotel.id:null,this.counter.id,this.daterange.startDate,this.daterange.endDate);break;case"Reservation":this.getAdminReservationRangeReport(this.hotel?this.hotel.id:null,this.counter.id,this.daterange.startDate,this.daterange.endDate)}},t.prototype.getAdminSellsRangeReport=function(t,e,n,o){return void 0===t&&(t=null),gt(this,void 0,void 0,function(){var i,a,r,c;return pt(this,function(s){switch(s.label){case 0:this.loading=!0,i=this.util.getDateString(n),a=this.util.getDateString(o),s.label=1;case 1:return s.trys.push([1,3,,4]),r=this,[4,this.reportService.getAdminSellsReportRangeForIndividual(t,e,i,a).toPromise()];case 2:return r.reportList=s.sent(),this.reportList.sort(this.util.dynamicSortObject("created")),this.calculateServiceAdminBookingReportList(),this.loading=!1,[3,4];case 3:return c=s.sent(),console.log(c),[3,4];case 4:return[2]}})})},t.prototype.getAdminReservationRangeReport=function(t,e,n,o){return void 0===t&&(t=null),gt(this,void 0,void 0,function(){var i,a,r,c;return pt(this,function(s){switch(s.label){case 0:this.loading=!0,i=this.util.getDateString(n),a=this.util.getDateString(o),s.label=1;case 1:return s.trys.push([1,3,,4]),r=this,[4,this.reportService.getAdminReserveReportRangeForIndividual(t,e,i,a).toPromise()];case 2:return r.reportList=s.sent(),this.reportList.sort(this.util.dynamicSortObject("date")),this.calculateServiceAdminBookingReportList(),this.loading=!1,[3,4];case 3:return c=s.sent(),console.log(c),[3,4];case 4:return[2]}})})},t.prototype.onCounterChange=function(t){this.reportList=null,this.counter=this.userList.find(function(e){return e.id==t})},t.prototype.getDate=function(){return this.daterange.startDate.getDate()+"-"+(this.daterange.startDate.getMonth()+1)+"-"+this.daterange.startDate.getFullYear()+"-"+this.daterange.endDate.getDate()+" to "+(this.daterange.endDate.getMonth()+1)+"-"+this.daterange.endDate.getFullYear()},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.reportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.prototype.clear=function(){this.reportList=null},t.prototype.onPrint=function(){window.print()},t.\u0275fac=function(e){return new(e||t)(c.Lb(A.a),c.Lb(ht.a),c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-couter-report"]],decls:63,vars:8,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","d-print-none","bg-light","shadow-sm"],[1,"col-auto"],[1,"form-group"],["for","counterType"],["id","counterType",1,"form-control",3,"change"],["value",""],["value","admin"],["value","Counter"],["value","Agent"],["value","Service Admin"],["value","Service Agent"],["for","counter"],[3,"value",4,"ngFor","ngForOf"],["for","dateRange"],["type","text","id","dateRange","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],["for","reportType"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Sells"],["value","Reservation"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center","ml-auto","mr-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[3,"value"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-success",3,"click"],[3,"message"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Counter report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"label",5),c.Fc(8,"Counter Type"),c.Pb(),c.Qb(9,"select",6),c.bc("change",function(t){return e.getUserListByRole(t.target.value)}),c.Qb(10,"option",7),c.Fc(11," Select a counterType "),c.Pb(),c.Qb(12,"option",8),c.Fc(13," Hotelswave "),c.Pb(),c.Qb(14,"option",9),c.Fc(15," Hotelswave Counter "),c.Pb(),c.Qb(16,"option",10),c.Fc(17," Hotelswave Agent "),c.Pb(),c.Qb(18,"option",11),c.Fc(19," Hotel Admin "),c.Pb(),c.Qb(20,"option",12),c.Fc(21," Hotel Agent "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(22,"div",3),c.Qb(23,"div",4),c.Qb(24,"label",13),c.Fc(25,"Counter"),c.Pb(),c.Qb(26,"select",6),c.bc("change",function(t){return e.onCounterChange(t.target.value)}),c.Qb(27,"option",7),c.Fc(28," Select a Counter "),c.Pb(),c.Dc(29,ft,2,3,"option",14),c.Pb(),c.Pb(),c.Pb(),c.Qb(30,"div",3),c.Qb(31,"div",4),c.Qb(32,"label",15),c.Fc(33,"Date Range"),c.Pb(),c.Qb(34,"input",16),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(35,"div",3),c.Qb(36,"label",17),c.Fc(37,"Report Type"),c.Pb(),c.Qb(38,"div",18),c.Qb(39,"select",19),c.bc("ngModelChange",function(t){return e.reportType=t})("change",function(){return e.clear()}),c.Qb(40,"option",20),c.Fc(41," By Sells Date"),c.Pb(),c.Qb(42,"option",21),c.Fc(43," By Checkin Date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(44,"div",3),c.Qb(45,"div",4),c.Qb(46,"label",13),c.Fc(47,"Hotel"),c.Pb(),c.Qb(48,"select",6),c.bc("change",function(t){return e.onHotelChange(t.target.value)}),c.Qb(49,"option",7),c.Fc(50," All Hotel "),c.Pb(),c.Dc(51,vt,2,2,"option",14),c.Pb(),c.Pb(),c.Pb(),c.Dc(52,mt,3,0,"div",22),c.Qb(53,"div",23),c.Qb(54,"button",24),c.bc("click",function(){return e.onPrint()}),c.Mb(55,"i",25),c.Fc(56," Print"),c.Pb(),c.Pb(),c.Pb(),c.Qb(57,"div",26),c.Qb(58,"div",27),c.Dc(59,Pt,2,1,"div",28),c.Dc(60,Dt,45,6,"div",29),c.Dc(61,kt,3,0,"ng-template",null,30,c.Ec),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.vc(62);c.zb(29),c.lc("ngForOf",e.userList),c.zb(5),c.lc("options",e.options),c.zb(5),c.lc("ngModel",e.reportType),c.zb(12),c.lc("ngForOf",e.hotelList),c.zb(1),c.lc("ngIf",!!e.counter),c.zb(7),c.lc("ngIf",e.loading),c.zb(1),c.lc("ngIf",(null==e.reportList?null:e.reportList.length)>0&&!e.loading)("ngIfElse",n)}},directives:[l.q,l.w,b.p,z.b,l.u,l.m,l.p,b.q,u.a,b.o],pipes:[b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),wt=n("KZX/"),Lt=n("+2eb"),St=n("s1VS");function Rt(t,e){if(1&t&&(c.Qb(0,"option",20),c.Fc(1),c.Pb()),2&t){var n=e.$implicit;c.lc("value",n),c.zb(1),c.Hc(" ",n," ")}}function Ct(t,e){1&t&&(c.Qb(0,"div",10),c.Qb(1,"div",11),c.Fc(2,"Type"),c.Pb(),c.Pb())}function Mt(t,e){if(1&t&&(c.Qb(0,"option",20),c.Fc(1),c.Pb()),2&t){var n=e.$implicit;c.lc("value",n),c.zb(1),c.Hc(" ",n," ")}}function Bt(t,e){if(1&t){var n=c.Rb();c.Qb(0,"select",21),c.bc("change",function(t){return c.wc(n),c.dc(2).onFilterType(t.target.value)}),c.Qb(1,"option",13),c.Fc(2," All "),c.Pb(),c.Dc(3,Mt,2,2,"option",17),c.Pb()}if(2&t){var o=c.dc(2);c.zb(3),c.lc("ngForOf",o.typeList)}}function At(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",8),c.Qb(1,"div",9),c.Qb(2,"strong"),c.Fc(3," Filter by \xa0"),c.Pb(),c.Qb(4,"div",10),c.Qb(5,"div",11),c.Fc(6,"Dr/Cr"),c.Pb(),c.Pb(),c.Qb(7,"select",12),c.bc("change",function(t){return c.wc(n),c.dc().onFilterDrCr(t.target.value)}),c.Qb(8,"option",13),c.Fc(9," All "),c.Pb(),c.Qb(10,"option",14),c.Fc(11,"Debit"),c.Pb(),c.Qb(12,"option",15),c.Fc(13,"Credit"),c.Pb(),c.Pb(),c.Qb(14,"div",10),c.Qb(15,"div",11),c.Fc(16,"Company"),c.Pb(),c.Pb(),c.Qb(17,"select",16),c.bc("change",function(t){return c.wc(n),c.dc().onFilterCompany(t.target.value)}),c.Qb(18,"option",13),c.Fc(19," All "),c.Pb(),c.Dc(20,Rt,2,2,"option",17),c.Pb(),c.Dc(21,Ct,3,0,"div",18),c.Dc(22,Bt,4,1,"select",19),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(20),c.lc("ngForOf",o.companyList),c.zb(1),c.lc("ngIf",o.typeList.length>0),c.zb(1),c.lc("ngIf",o.typeList.length>0)}}function zt(t,e){if(1&t&&(c.Qb(0,"tr",22),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td"),c.Fc(8),c.Pb(),c.Qb(9,"td"),c.Fc(10),c.Pb(),c.Qb(11,"td"),c.Fc(12),c.Pb(),c.Pb()),2&t){var n=e.$implicit;c.zb(2),c.Gc(n.date),c.zb(2),c.Gc(n.company),c.zb(2),c.Gc(n.type),c.zb(2),c.Gc(n.explanation),c.zb(2),c.Gc(n.debit),c.zb(2),c.Gc(n.credit)}}var It=function(){function t(){this.companyfilter="all",this.typeFilter="all",this.drcr="all",this.companyList=[],this.typeList=[],this.cashbookList=[]}return t.prototype.ngOnChanges=function(t){t.accountsCashbookList&&null!=this.accountsCashbookList&&(this.total={debit:0,credit:0},this.cashbookList=this.accountsCashbookList,this.calculateRecords())},t.prototype.calculateRecords=function(){var t=this;this.total={debit:0,credit:0},this.companyList=[],this.cashbookList.forEach(function(e){e.company=null==e.company?"No Company":e.company,t.companyList.includes(e.company)||t.companyList.push(e.company),t.total.debit+=e.debit,t.total.credit+=e.credit}),1==this.companyList.length&&this.onFilterCompany(this.companyList[0])},t.prototype.onFilterCompany=function(t){switch(this.companyfilter=t,this.typeList=[],t){case"all":this.cashbookList=this.accountsCashbookList;break;default:this.cashbookList=this.accountsCashbookList.filter(function(e){return e.company==t}),this.createTypeList()}},t.prototype.createTypeList=function(){var t=this;this.typeList=[],this.cashbookList.forEach(function(e){e.type=null==e.type?"No Type":e.type,t.typeList.includes(e.type)||t.typeList.push(e.type)})},t.prototype.onFilterType=function(t){switch(this.typeFilter=t,t){case"all":this.onFilterCompany(this.companyfilter);break;default:this.cashbookList=this.accountsCashbookList.filter(function(e){return e.type==t})}},t.prototype.onFilterDrCr=function(t){switch(this.typeFilter="all",this.drcr=t,t){case"debit":this.cashbookList=this.cashbookList.filter(function(t){return t.debit>0});break;case"credit":this.cashbookList=this.cashbookList.filter(function(t){return t.credit>0});break;case"all":default:this.onFilterCompany(this.companyfilter)}this.calculateRecords()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["accounts-report-ledger"]],inputs:{accountsCashbookList:"accountsCashbookList"},features:[c.xb],decls:31,vars:4,consts:[[1,"table","table-sm","table-hover","table-bordered","table-responsive-sm"],[2,"background-color","#f8f9fa"],["colspan","7"],[1,"row","m-0"],[1,"mr-auto"],["class","col-auto",4,"ngIf"],["class","user-row",4,"ngFor","ngForOf"],["colspan","4",1,"text-right"],[1,"col-auto"],[1,"input-group","input-group-sm","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["id","dr_cr",1,"form-control",3,"change"],["value","all"],["value","debit"],["value","credit"],["id","companyList",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","input-group-prepend",4,"ngIf"],["class","form-control","id","typeList",3,"change",4,"ngIf"],[3,"value"],["id","typeList",1,"form-control",3,"change"],[1,"user-row"]],template:function(t,e){1&t&&(c.Qb(0,"table",0),c.Qb(1,"thead"),c.Qb(2,"tr",1),c.Qb(3,"td",2),c.Qb(4,"div",3),c.Qb(5,"h5",4),c.Fc(6,"Cashbook"),c.Pb(),c.Dc(7,At,23,3,"div",5),c.Pb(),c.Pb(),c.Pb(),c.Qb(8,"tr"),c.Qb(9,"th"),c.Fc(10,"Date"),c.Pb(),c.Qb(11,"th"),c.Fc(12,"Company"),c.Pb(),c.Qb(13,"th"),c.Fc(14,"Type"),c.Pb(),c.Qb(15,"th"),c.Fc(16,"Explanation"),c.Pb(),c.Qb(17,"th"),c.Fc(18,"Debit"),c.Pb(),c.Qb(19,"th"),c.Fc(20,"Credit"),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"tbody"),c.Dc(22,zt,13,6,"tr",6),c.Pb(),c.Qb(23,"tfoot"),c.Qb(24,"tr"),c.Qb(25,"th",7),c.Fc(26,"Total"),c.Pb(),c.Qb(27,"th"),c.Fc(28),c.Pb(),c.Qb(29,"th"),c.Fc(30),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(7),c.lc("ngIf",(null==e.companyList?null:e.companyList.length)>0),c.zb(15),c.lc("ngForOf",e.cashbookList),c.zb(6),c.Gc(e.total.debit),c.zb(2),c.Gc(e.total.credit))},directives:[b.q,b.p,l.q,l.w],styles:[""]}),t}(),xt=n("lpBv");function Ot(t,e){if(1&t){var n=c.Rb();c.Qb(0,"a",7),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc().onSelectCompany(t)}),c.Mb(1,"i",8),c.Fc(2),c.Pb()}if(2&t){var o=e.$implicit,i=c.dc();c.lc("ngClass",i.company==o?"bg-light":""),c.zb(1),c.lc("ngClass",i.company==o?"fa-folder-open-o":"fa-folder-o"),c.zb(1),c.Hc(" ",o," ")}}function Ht(t,e){if(1&t&&(c.Qb(0,"div",11),c.Qb(1,"div",12),c.Mb(2,"accounts-report-ledger",13),c.Pb(),c.Pb()),2&t){var n=c.dc(2);c.zb(2),c.lc("accountsCashbookList",n.accountsCashbookList)}}function Et(t,e){1&t&&(c.Qb(0,"div",14),c.Qb(1,"h5"),c.Fc(2,"Sorry no record found"),c.Pb(),c.Pb())}function Tt(t,e){if(1&t&&(c.Ob(0),c.Dc(1,Ht,3,1,"div",9),c.Dc(2,Et,3,0,"ng-template",null,10,c.Ec),c.Nb()),2&t){var n=c.vc(3),o=c.dc();c.zb(1),c.lc("ngIf",o.accountsCashbookList.length>0)("ngIfElse",n)}}function Gt(t,e){1&t&&(c.Qb(0,"div",14),c.Qb(1,"h5"),c.Fc(2,"Select a company first"),c.Pb(),c.Pb())}var _t=function(){function t(t,e){this.accountsService=t,this.util=e,this.accountsCashbookList=[],this.companyList=xt.a,this.loading=!1,this.errorMessage=""}return t.prototype.ngOnChanges=function(t){(t.startDate||t.endDate)&&null!=this.company&&this.getAccountsCashbookListByDateRangeAndCompany(this.startDate,this.endDate,this.company)},t.prototype.onSelectCompany=function(t){this.company=t,this.getAccountsCashbookListByDateRangeAndCompany(this.startDate,this.endDate,t)},t.prototype.getAccountsCashbookListByDateRangeAndCompany=function(t,e,n){return o=this,void 0,a=function(){var o,i;return function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.loading=!0,o=this,[4,this.accountsService.getAccountsCashbookListByDateRangeAndCompany(this.util.getDateString(t),this.util.getDateString(e),n).toPromise()];case 1:return o.accountsCashbookList=a.sent(),this.loading=!1,[3,3];case 2:return i=a.sent(),this.errorMessage=i,this.loading=!1,console.log(i),[3,3];case 3:return[2]}})},new((i=void 0)||(i=Promise))(function(t,e){function n(t){try{c(a.next(t))}catch(n){e(n)}}function r(t){try{c(a.throw(t))}catch(n){e(n)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof i?o:new i(function(t){t(o)})).then(n,r)}c((a=a.apply(o,[])).next())});var o,i,a},t.\u0275fac=function(e){return new(e||t)(c.Lb(Lt.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["accounts-company-report"]],inputs:{startDate:"startDate",endDate:"endDate"},features:[c.xb],decls:12,vars:3,consts:[[1,"row"],[1,"col-md-3","d-print-none"],[1,"list-group"],[1,"list-group-item","active"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["noCompany",""],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"fa",3,"ngClass"],["class","col pl-0",4,"ngIf","ngIfElse"],["noRecordFound",""],[1,"col","pl-0"],[1,"shadow-sm","bg-white","p-3","rounded-lg"],[3,"accountsCashbookList"],[1,"col-9","text-center"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"ul",2),c.Qb(3,"li",3),c.Qb(4,"h5"),c.Fc(5,"Company List"),c.Pb(),c.Qb(6,"small"),c.Fc(7,"Choose a company from below list"),c.Pb(),c.Pb(),c.Dc(8,Ot,3,3,"a",4),c.Pb(),c.Pb(),c.Dc(9,Tt,4,2,"ng-container",5),c.Dc(10,Gt,3,0,"ng-template",null,6,c.Ec),c.Pb()),2&t){var n=c.vc(11);c.zb(8),c.lc("ngForOf",e.companyList),c.zb(1),c.lc("ngIf",e.company)("ngIfElse",n)}},directives:[b.p,b.q,b.o,It],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.4rem 1.25rem}"]}),t}(),Nt=n("sMOk"),Ut=n("lWB2"),qt=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},Yt=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function $t(t,e){if(1&t&&(c.Qb(0,"div",20),c.Mb(1,"accounts-report-ledger",21),c.Pb()),2&t){var n=c.dc(2);c.zb(1),c.lc("accountsCashbookList",n.accountsCashbookList)}}function Jt(t,e){1&t&&(c.Qb(0,"div",22),c.Qb(1,"h5"),c.Fc(2,"Sorry no record found"),c.Pb(),c.Pb())}function jt(t,e){if(1&t&&(c.Ob(0),c.Qb(1,"div",16),c.Mb(2,"div",17),c.Qb(3,"div",17),c.Dc(4,$t,2,1,"div",18),c.Dc(5,Jt,3,0,"ng-template",null,19,c.Ec),c.Pb(),c.Pb(),c.Nb()),2&t){var n=c.vc(6),o=c.dc();c.zb(4),c.lc("ngIf",o.accountsCashbookList.length>0)("ngIfElse",n)}}function Vt(t,e){if(1&t&&(c.Ob(0),c.Mb(1,"accounts-company-report",23),c.Nb()),2&t){var n=c.dc();c.zb(1),c.lc("startDate",n.daterange.startDate)("endDate",n.daterange.endDate)}}function Wt(t,e){if(1&t){var n=c.Rb();c.Qb(0,"a",32),c.bc("click",function(){c.wc(n);var t=e.$implicit,o=c.dc(2);return o.onSelectAgent(t.id,o.date)}),c.Qb(1,"table",33),c.Qb(2,"tr"),c.Qb(3,"td",34),c.Mb(4,"i",35),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Pb(),c.Qb(7,"tr"),c.Qb(8,"td"),c.Fc(9),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit,i=c.dc(2);c.lc("ngClass",(null==i.user?null:i.user.id)==o.id?"bg-light":""),c.zb(4),c.lc("ngClass","fa-user-o"),c.zb(2),c.Gc(o.name),c.zb(3),c.Gc(o.phoneNumber)}}function Xt(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",20),c.Qb(1,"manual-booking-list",37),c.bc("details",function(t){return c.wc(n),c.dc(3).onManualDetails(t)}),c.Pb(),c.Qb(2,"manual-booking-list",37),c.bc("details",function(t){return c.wc(n),c.dc(3).onBookingDetails(t)}),c.Pb(),c.Pb()}if(2&t){var o=c.dc(3);c.zb(1),c.lc("manualBookingList",o.manualBookingList)("manual",!0),c.zb(1),c.lc("manualBookingList",o.bookingList)("manual",!1)}}function Zt(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",22),c.Qb(1,"manual-booking-details",38),c.bc("clear",function(){return c.wc(n),c.dc(3).clearManualBooking()}),c.Pb(),c.Pb()}if(2&t){var o=c.dc(3);c.zb(1),c.lc("manualBooking",o.manualBooking)}}function Kt(t,e){if(1&t&&(c.Qb(0,"div",17),c.Dc(1,Xt,3,4,"div",18),c.Dc(2,Zt,2,1,"ng-template",null,36,c.Ec),c.Pb()),2&t){var n=c.vc(3),o=c.dc(2);c.zb(1),c.lc("ngIf",!o.manualBooking)("ngIfElse",n)}}function te(t,e){1&t&&(c.Qb(0,"div",39),c.Mb(1,"i",40),c.Fc(2," Please select a counter first; "),c.Pb())}function ee(t,e){if(1&t&&(c.Ob(0),c.Qb(1,"div",17),c.Qb(2,"div",24),c.Qb(3,"ul",25),c.Qb(4,"li",26),c.Qb(5,"h5"),c.Fc(6,"Coutner List"),c.Pb(),c.Qb(7,"small"),c.Fc(8,"Choose a counter from below list"),c.Pb(),c.Pb(),c.Dc(9,Wt,10,4,"a",27),c.Pb(),c.Pb(),c.Qb(10,"div",28),c.Qb(11,"div",29),c.Dc(12,Kt,4,2,"div",30),c.Dc(13,te,3,0,"ng-template",null,31,c.Ec),c.Pb(),c.Pb(),c.Pb(),c.Nb()),2&t){var n=c.vc(14),o=c.dc();c.zb(9),c.lc("ngForOf",o.userList),c.zb(3),c.lc("ngIf",o.user)("ngIfElse",n)}}function ne(t,e){if(1&t){var n=c.Rb();c.Qb(0,"a",32),c.bc("click",function(){c.wc(n);var t=e.$implicit,o=c.dc(2);return o.onSelectAgent(t.id,o.date)}),c.Qb(1,"table",33),c.Qb(2,"tr"),c.Qb(3,"td",34),c.Mb(4,"i",35),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Pb(),c.Qb(7,"tr"),c.Qb(8,"td"),c.Fc(9),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit,i=c.dc(2);c.lc("ngClass",(null==i.user?null:i.user.id)==o.id?"bg-light":""),c.zb(4),c.lc("ngClass","fa-user-o"),c.zb(2),c.Gc(o.name),c.zb(3),c.Gc(o.phoneNumber)}}function oe(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",20),c.Qb(1,"manual-booking-list",37),c.bc("details",function(t){return c.wc(n),c.dc(3).onDueBookingDetails(t)}),c.Pb(),c.Pb()}if(2&t){var o=c.dc(3);c.zb(1),c.lc("manualBookingList",o.dueBookingList)("manual",!0)}}function ie(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",22),c.Qb(1,"manual-booking-details",38),c.bc("clear",function(){return c.wc(n),c.dc(3).clearManualBooking()}),c.Pb(),c.Pb()}if(2&t){var o=c.dc(3);c.zb(1),c.lc("manualBooking",o.manualBooking)}}function ae(t,e){if(1&t&&(c.Qb(0,"div",17),c.Dc(1,oe,2,2,"div",18),c.Dc(2,ie,2,1,"ng-template",null,36,c.Ec),c.Pb()),2&t){var n=c.vc(3),o=c.dc(2);c.zb(1),c.lc("ngIf",!o.manualBooking)("ngIfElse",n)}}function re(t,e){1&t&&(c.Qb(0,"div",39),c.Mb(1,"i",40),c.Fc(2," Please select a counter first; "),c.Pb())}function ce(t,e){if(1&t&&(c.Ob(0),c.Qb(1,"div",17),c.Qb(2,"div",24),c.Qb(3,"ul",25),c.Qb(4,"li",26),c.Qb(5,"h5"),c.Fc(6,"Coutner List"),c.Pb(),c.Qb(7,"small"),c.Fc(8,"Choose a counter from below list"),c.Pb(),c.Pb(),c.Dc(9,ne,10,4,"a",27),c.Pb(),c.Pb(),c.Qb(10,"div",28),c.Qb(11,"div",29),c.Dc(12,ae,4,2,"div",30),c.Dc(13,re,3,0,"ng-template",null,31,c.Ec),c.Pb(),c.Pb(),c.Pb(),c.Nb()),2&t){var n=c.vc(14),o=c.dc();c.zb(9),c.lc("ngForOf",o.userList),c.zb(3),c.lc("ngIf",o.user)("ngIfElse",n)}}var se=function(){function t(t,e,n,o,i){this.accountsService=t,this.manualBookingService=e,this.userService=n,this.reportService=o,this.util=i,this.tab="date",this.daterange={},this.userList=[],this.accountsCashbookList=[],this.manualBookingList=[],this.bookingList=[],this.dueBookingList=[],this.loading=!1,this.errorMessage=""}return t.prototype.ngOnInit=function(){switch(this.setDateRanges(),this.tab){case"date":this.getAccountsCashbookListByDateRange(this.daterange.startDate,this.daterange.endDate);break;case"counter":this.getAgentList(0)}},t.prototype.setDateRanges=function(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-10);var t=new Date;t.setDate(this.daterange.startDate.getDate()-90);var e=new Date;e.setDate(this.daterange.startDate.getDate()+13),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){switch(this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.daterange.label=t.label,this.tab){case"date":this.getAccountsCashbookListByDateRange(this.daterange.startDate,this.daterange.endDate);break;case"counter":this.user&&(this.getManulbookingByDateRange(this.user.id,this.daterange.startDate,this.daterange.endDate),this.getCounterReportHotel(this.user.id,this.daterange.startDate,this.daterange.endDate));break;case"due":this.user&&this.getAccountsDueListByCounterByDateRange(this.user.id,this.daterange.startDate,this.daterange.endDate)}},t.prototype.onSelectTab=function(t){switch(this.manualBooking=null,this.tab=t,this.tab){case"date":this.getAccountsCashbookListByDateRange(this.daterange.startDate,this.daterange.endDate);break;case"counter":case"due":this.getAgentList(0)}},t.prototype.onPrint=function(){window.print()},t.prototype.onSelectAgent=function(t){switch(this.user=this.userList.find(function(e){return e.id==t}),this.tab){case"counter":this.getManulbookingByDateRange(t,this.daterange.startDate,this.daterange.endDate),this.getCounterReportHotel(t,this.daterange.startDate,this.daterange.endDate);break;case"due":this.getAccountsDueListByCounterByDateRange(t,this.daterange.startDate,this.daterange.endDate)}},t.prototype.onManualDetails=function(t){this.manualBooking=this.manualBookingList.find(function(e){return e.id==t})},t.prototype.onDueBookingDetails=function(t){this.manualBooking=this.dueBookingList.find(function(e){return e.id==t})},t.prototype.onBookingDetails=function(t){this.manualBooking=this.bookingList.find(function(e){return e.id==t})},t.prototype.getAccountsCashbookListByDate=function(t){return qt(this,void 0,void 0,function(){var e,n;return Yt(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.loading=!0,e=this,[4,this.accountsService.getAccountsCashbookListByDate(t).toPromise()];case 1:return e.accountsCashbookList=o.sent(),this.loading=!1,[3,3];case 2:return n=o.sent(),this.errorMessage=n,this.loading=!1,console.log(n),[3,3];case 3:return[2]}})})},t.prototype.getAccountsCashbookListByDateRange=function(t,e){return qt(this,void 0,void 0,function(){var n,o;return Yt(this,function(i){switch(i.label){case 0:console.log("getAccountsCashbookListByDateRange"),i.label=1;case 1:return i.trys.push([1,3,,4]),this.loading=!0,n=this,[4,this.accountsService.getAccountsCashbookListByDateRange(this.util.getDateString(t),this.util.getDateString(e)).toPromise()];case 2:return n.accountsCashbookList=i.sent(),this.loading=!1,[3,4];case 3:return o=i.sent(),this.errorMessage=o,this.loading=!1,console.log(o),[3,4];case 4:return[2]}})})},t.prototype.getAgentList=function(t){return void 0===t&&(t=0),qt(this,void 0,void 0,function(){var t,e;return Yt(this,function(n){switch(n.label){case 0:this.loading=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,this.userService.getAdminUserByRole("Counter").toPromise()];case 2:return t.userList=n.sent(),this.loading=!1,[3,4];case 3:return e=n.sent(),this.errorMessage=e,this.loading=!1,console.log(e),[3,4];case 4:return[2]}})})},t.prototype.getManulbookingByDateRange=function(t,e,n){return qt(this,void 0,void 0,function(){var o,i;return Yt(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.loading=!0,o=this,[4,this.manualBookingService.getForDayRangeAndCreateBy(t,this.util.getDateString(e),this.util.getDateString(n)).toPromise()];case 1:return o.manualBookingList=a.sent(),this.loading=!1,[3,3];case 2:return i=a.sent(),this.errorMessage=i,this.loading=!1,console.log(i),[3,3];case 3:return[2]}})})},t.prototype.getCounterReportHotel=function(t,e,n){return qt(this,void 0,void 0,function(){var o,i;return Yt(this,function(a){switch(a.label){case 0:this.user=this.userList.find(function(e){return e.id==t}),a.label=1;case 1:return a.trys.push([1,3,,4]),this.loading=!0,o=this,[4,this.reportService.getForDayRangeAndCreateBy(t,this.util.getDateString(e),this.util.getDateString(n)).toPromise()];case 2:return o.bookingList=a.sent(),this.loading=!1,[3,4];case 3:return i=a.sent(),this.errorMessage=i,this.loading=!1,[3,4];case 4:return[2]}})})},t.prototype.getAccountsDueListByCounterByDateRange=function(t,e,n){return qt(this,void 0,void 0,function(){var o,i;return Yt(this,function(a){switch(a.label){case 0:console.log("getAccountsDueListByCounterByDateRange userId, startDate, endDate",t,e,n),this.user=this.userList.find(function(e){return e.id==t}),a.label=1;case 1:return a.trys.push([1,3,,4]),this.loading=!0,o=this,[4,this.manualBookingService.getDueListForCounterByDateRange(t,this.util.getDateString(e),this.util.getDateString(n)).toPromise()];case 2:return o.dueBookingList=a.sent(),this.loading=!1,[3,4];case 3:return i=a.sent(),this.errorMessage=i,this.loading=!1,[3,4];case 4:return[2]}})})},t.prototype.clearManualBooking=function(){this.manualBooking=null},t.\u0275fac=function(e){return new(e||t)(c.Lb(Lt.a),c.Lb(St.a),c.Lb(A.a),c.Lb(a.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-accounts-report"]],decls:30,vars:9,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row","mx-2"],[1,"col-auto"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn",3,"ngClass","click"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[4,"ngIf"],[1,"shadow-sm","bg-white","p-2","rounded-lg"],[1,"row"],["class","col-12",4,"ngIf","ngIfElse"],["noRecordFound",""],[1,"col-12"],[3,"accountsCashbookList"],[1,"col-12","text-center"],[3,"startDate","endDate"],[1,"col-md-3","d-print-none"],[1,"list-group"],[1,"list-group-item","active"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col","pl-0"],[1,"shadow-sm","bg-white","p-3","rounded-lg"],["class","row",4,"ngIf","ngIfElse"],["noUserSelected",""],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"table","mb-0"],["rowspan","2"],[1,"fa","fa-2x","p-2",3,"ngClass"],["showBookingDetails",""],[3,"manualBookingList","manual","details"],[3,"manualBooking","clear"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Accounts report"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"a",6),c.bc("click",function(){return e.onSelectTab("date")}),c.Fc(8,"Date"),c.Pb(),c.Qb(9,"a",6),c.bc("click",function(){return e.onSelectTab("company")}),c.Fc(10,"Company"),c.Pb(),c.Qb(11,"a",6),c.bc("click",function(){return e.onSelectTab("counter")}),c.Fc(12,"Counter"),c.Pb(),c.Qb(13,"a",6),c.bc("click",function(){return e.onSelectTab("due")}),c.Fc(14,"Due"),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"div",4),c.Qb(16,"div",7),c.Qb(17,"div",8),c.Qb(18,"div",9),c.Fc(19,"Date"),c.Pb(),c.Pb(),c.Qb(20,"input",10),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Mb(21,"div",11),c.Qb(22,"div",12),c.Qb(23,"button",13),c.bc("click",function(){return e.onPrint()}),c.Mb(24,"i",14),c.Fc(25," Print "),c.Pb(),c.Pb(),c.Pb(),c.Dc(26,jt,7,2,"ng-container",15),c.Dc(27,Vt,2,2,"ng-container",15),c.Dc(28,ee,15,3,"ng-container",15),c.Dc(29,ce,15,3,"ng-container",15),c.Pb()),2&t&&(c.zb(7),c.lc("ngClass","date"==e.tab?"btn-primary":"btn-light"),c.zb(2),c.lc("ngClass","company"==e.tab?"btn-primary":"btn-light"),c.zb(2),c.lc("ngClass","counter"==e.tab?"btn-primary":"btn-light"),c.zb(2),c.lc("ngClass","due"==e.tab?"btn-primary":"btn-light"),c.zb(7),c.lc("options",e.options),c.zb(6),c.lc("ngIf","date"==e.tab),c.zb(1),c.lc("ngIf","company"==e.tab),c.zb(1),c.lc("ngIf","counter"==e.tab),c.zb(1),c.lc("ngIf","due"==e.tab))},directives:[b.o,z.b,b.q,It,_t,b.p,Nt.a,Ut.a],styles:["[_nghost-%COMP%]{background-color:#f0f2f5;display:block;min-height:calc(100vh - 59px)}.list-group-item[_ngcontent-%COMP%]{padding:.4rem 1.25rem;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;padding:.15rem;border:none}"]}),t}(),le=n("LLt/"),be=function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}s((o=o.apply(t,e||[])).next())})},ue=function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function de(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",18),c.Qb(1,"manual-booking-list",19),c.bc("details",function(t){return c.wc(n),c.dc().onManualDetails(t)}),c.Pb(),c.Qb(2,"manual-booking-list",19),c.bc("details",function(t){return c.wc(n),c.dc().onBookingDetails(t)}),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(1),c.lc("manualBookingList",o.manualBookingList)("manual",!0),c.zb(1),c.lc("manualBookingList",o.bookingList)("manual",!1)}}function he(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",20),c.Qb(1,"manual-booking-details",21),c.bc("clear",function(){return c.wc(n),c.dc().clearManualBooking()}),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(1),c.lc("manualBooking",o.manualBooking)}}function ge(t,e){1&t&&(c.Qb(0,"div",22),c.Mb(1,"i",23),c.Fc(2," Please select a counter first; "),c.Pb())}var pe=[{path:"accounts-report",component:se},{path:"booking-report",component:D},{path:"booking-range-report",component:ot},{path:"counter-report",component:Ft},{path:"counter-sells",component:function(){function t(t,e,n,o){this.manualBookingService=t,this.reportService=e,this.auth=n,this.util=o,this.daterange={},this.manualBookingList=[],this.bookingList=[],this.loading=!1,this.errorMessage="",this.userId=this.auth.user.id}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.getManulbookingByDateRange(this.userId,this.daterange.startDate,this.daterange.endDate),this.getCounterReportHotel(this.userId,this.daterange.startDate,this.daterange.endDate)},t.prototype.setDateRanges=function(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-10);var t=new Date;t.setDate(this.daterange.startDate.getDate()-90);var e=new Date;e.setDate(this.daterange.startDate.getDate()+13),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.daterange.label=t.label,this.getManulbookingByDateRange(this.userId,this.daterange.startDate,this.daterange.endDate),this.getCounterReportHotel(this.userId,this.daterange.startDate,this.daterange.endDate)},t.prototype.getManulbookingByDateRange=function(t,e,n){return be(this,void 0,void 0,function(){var o,i;return ue(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.loading=!0,o=this,[4,this.manualBookingService.getForDayRangeAndCreateBy(t,this.util.getDateString(e),this.util.getDateString(n)).toPromise()];case 1:return o.manualBookingList=a.sent(),this.loading=!1,[3,3];case 2:return i=a.sent(),this.errorMessage=i,this.loading=!1,console.log(i),[3,3];case 3:return[2]}})})},t.prototype.getCounterReportHotel=function(t,e,n){return be(this,void 0,void 0,function(){var o,i;return ue(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.loading=!0,o=this,[4,this.reportService.getForDayRangeAndCreateBy(t,this.util.getDateString(e),this.util.getDateString(n)).toPromise()];case 1:return o.bookingList=a.sent(),this.loading=!1,[3,3];case 2:return i=a.sent(),this.errorMessage=i,this.loading=!1,[3,3];case 3:return[2]}})})},t.prototype.onPrint=function(){window.print()},t.prototype.onManualDetails=function(t){this.manualBooking=this.manualBookingList.find(function(e){return e.id==t})},t.prototype.onBookingDetails=function(t){this.manualBooking=this.bookingList.find(function(e){return e.id==t})},t.prototype.clearManualBooking=function(){this.manualBooking=null},t.\u0275fac=function(e){return new(e||t)(c.Lb(St.a),c.Lb(a.a),c.Lb(le.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-counter-sells"]],decls:25,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"col-md-12","px-0"],[1,"shadow-sm","bg-white","p-3","rounded-lg"],["class","col-12",4,"ngIf","ngIfElse"],["showBookingDetails",""],["noUserSelected",""],[1,"col-12"],[3,"manualBookingList","manual","details"],[1,"col-12","text-center"],[3,"manualBooking","clear"],[1,"text-center"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Counter sells"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Qb(6,"div",5),c.Qb(7,"div",6),c.Qb(8,"div",7),c.Fc(9,"Date"),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Mb(11,"div",9),c.Qb(12,"div",10),c.Qb(13,"button",11),c.bc("click",function(){return e.onPrint()}),c.Mb(14,"i",12),c.Fc(15," Print "),c.Pb(),c.Pb(),c.Pb(),c.Qb(16,"div",3),c.Qb(17,"div",13),c.Qb(18,"div",14),c.Qb(19,"div",3),c.Dc(20,de,3,4,"div",15),c.Dc(21,he,2,1,"ng-template",null,16,c.Ec),c.Pb(),c.Dc(23,ge,3,0,"ng-template",null,17,c.Ec),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.vc(22);c.zb(10),c.lc("options",e.options),c.zb(10),c.lc("ngIf",!e.manualBooking)("ngIfElse",n)}},directives:[z.b,b.q,Nt.a,Ut.a],styles:[""]}),t}()},{path:"hotel-report",component:B},{path:"hotel-range-report",component:dt},{path:"agent-report",component:N},{path:"commission-report",component:X}],fe=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[i.a,wt.a,o.e.forChild(pe)]]}),t}()}}]);