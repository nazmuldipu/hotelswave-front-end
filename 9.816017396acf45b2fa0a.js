(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"25bS":function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return kt}),n.d(e,"AdminAgentModule",function(){return Ft});var o=n("KZX/"),i=n("iInd"),r=n("0sMf"),c=n("ITiG"),a=n("/e7+"),l=n("FJeW"),b=n("Sa+r"),s=n("8Y7J"),u=n("SVse"),d=n("d26D"),g=n("s7LF"),f=n("uEz7");function h(t,e){if(1&t){var n=s.Rb();s.Qb(0,"a",7),s.bc("click",function(){s.wc(n);var t=e.$implicit;return s.dc().onSelectHotel(t.id)}),s.Mb(1,"i",8),s.Fc(2),s.Pb()}if(2&t){var o=e.$implicit;s.zb(2),s.Hc(" ",o.name," ")}}function p(t,e){if(1&t){var n=s.Rb();s.Qb(0,"pagination",9),s.bc("getPage",function(t){return s.wc(n),s.dc().getAdminAgentHotelPage(t)}),s.Pb()}if(2&t){var o=s.dc();s.lc("page",o.hotelPage)("short",o.short)}}var m=function(){function t(t){this.hotelService=t,this.hotel=new s.n}return t.prototype.ngOnInit=function(){this.getAdminAgentHotelPage()},t.prototype.getAdminAgentHotelPage=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){switch(n.label){case 0:return[4,this.hotelService.getAdminAgentHotelPage(t,this.hotelName).subscribe(function(t){e.hotelPage=t})];case 1:return n.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.prototype.onSelectHotel=function(t){var e=this.hotelPage.content.find(function(e){return e.id==t});this.hotel.emit(e)},t.\u0275fac=function(e){return new(e||t)(s.Lb(d.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["admin-agent-hotel-list"]],outputs:{hotel:"hotel"},decls:11,vars:3,consts:[[1,"list-group"],[1,"list-group-item"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"form-group","mb-0"],["type","text","id","hotelName","name","hotelName","placeholder","Hotel name",1,"form-control",3,"ngModel","ngModelChange"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"page","short","getPage",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-building"],[3,"page","short","getPage"]],template:function(t,e){1&t&&(s.Qb(0,"ul",0),s.Qb(1,"li",1),s.Qb(2,"h5"),s.Fc(3,"Hotel List"),s.Pb(),s.Qb(4,"small"),s.Fc(5,"Choose a hotel from below list"),s.Pb(),s.Pb(),s.Qb(6,"form",2),s.bc("ngSubmit",function(){return e.getAdminAgentHotelPage()}),s.Qb(7,"div",3),s.Qb(8,"input",4),s.bc("ngModelChange",function(t){return e.hotelName=t}),s.Pb(),s.Pb(),s.Pb(),s.Dc(9,h,3,1,"a",5),s.Dc(10,p,1,2,"pagination",6),s.Pb()),2&t&&(s.zb(8),s.lc("ngModel",e.hotelName),s.zb(1),s.lc("ngForOf",null==e.hotelPage?null:e.hotelPage.content),s.zb(1),s.lc("ngIf",null!=e.hotelPage))},directives:[g.x,g.n,g.o,g.b,g.m,g.p,u.p,u.q,f.a],styles:[".list-group-item[_ngcontent-%COMP%]{padding:.15rem 1.25rem;cursor:pointer}"]}),t}(),v=n("yBZE"),P=n("53Co"),y=n("HF3I");function Q(t,e){if(1&t){var n=s.Rb();s.Qb(0,"span"),s.Qb(1,"button",15),s.bc("click",function(){s.wc(n);var t=e.$implicit;return s.dc(2).onSelectCategory(t)}),s.Fc(2),s.Pb(),s.Pb()}if(2&t){var o=e.$implicit,i=s.dc(2);s.zb(1),s.lc("ngClass",o==i.category?"btn-primary":"btn-secondary"),s.zb(1),s.Hc(" ",o," ")}}var k=function(t){return{disabled:t}};function F(t,e){if(1&t){var n=s.Rb();s.Qb(0,"div",16),s.Qb(1,"div",17),s.bc("click",function(){s.wc(n);var t=e.$implicit;return s.dc(2).onRoomSelect(t.id,t.available)}),s.Fc(2),s.Pb(),s.Pb()}if(2&t){var o=e.$implicit;s.zb(1),s.lc("ngClass",s.pc(2,k,!o.available)),s.zb(1),s.Hc(" ",o.roomNumber," ")}}function w(t,e){if(1&t&&(s.Qb(0,"div"),s.Qb(1,"div",11),s.Dc(2,Q,3,2,"span",12),s.Pb(),s.Qb(3,"div",13),s.Dc(4,F,3,4,"div",14),s.Pb(),s.Pb()),2&t){var n=s.dc();s.zb(2),s.lc("ngForOf",n.categoryList),s.zb(2),s.lc("ngForOf",n.filteredRoomList)}}function D(t,e){if(1&t&&s.Mb(0,"loading",18),2&t){var n=s.dc();s.lc("message",n.message)}}var M=function(){function t(t,e){this.roomService=t,this.util=e,this.showHotels=new s.n,this.roomSelected=new s.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.hotel&&this.getAdminAgentAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.ngOnChanges=function(t){t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.reload(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAdminAgentAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.reload=function(t,e,n){this.getAdminAgentAvailableRoomList(t,e,n)},t.prototype.getAdminAgentAvailableRoomList=function(t,e,n,o){return void 0===o&&(o=null),i=this,void 0,c=function(){var i,r,c=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(a){switch(a.label){case 0:return i=this.util.getDateString(e),r=this.util.getDateString(n),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getAdminAgentAvailableRoomListByHotelId(t,i,r,o).subscribe(function(t){c.showRoomListLoading=!1,c.roomList=t,c.filteredRoomList=t,c.category="All",c.categoryList=["All"],c.roomList.forEach(function(t){c.categoryList.includes(t.category.name)||c.categoryList.push(t.category.name)})})];case 1:return a.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(t,e){function n(t){try{a(c.next(t))}catch(n){e(n)}}function o(t){try{a(c.throw(t))}catch(n){e(n)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r(function(t){t(i)})).then(n,o)}a((c=c.apply(i,[])).next())});var i,r,c},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onRoomSelect=function(t,e){if(e){var n={room:this.roomList.find(function(e){return e.id===t}),checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(n)}},t.prototype.onHotelList=function(){this.showHotels.emit(!0)},t.\u0275fac=function(e){return new(e||t)(s.Lb(v.a),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["admin-agent-available-room-list"]],inputs:{hotel:"hotel",reloadRoomList:"reloadRoomList"},outputs:{showHotels:"showHotels",roomSelected:"roomSelected"},features:[s.xb],decls:15,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"btn","btn-sm","btn-info",3,"click"],[1,"row","mt-1"],[4,"ngFor","ngForOf"],[1,"row","m-0"],["class","col-md-2 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"div",3),s.Qb(4,"div",4),s.Qb(5,"div",5),s.Mb(6,"i",6),s.Pb(),s.Pb(),s.Qb(7,"input",7),s.bc("selected",function(t){return e.selectedDate(t)}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(8,"h3"),s.Fc(9),s.Pb(),s.Dc(10,w,5,2,"div",8),s.Dc(11,D,1,1,"ng-template",null,9,s.Ec),s.Qb(13,"button",10),s.bc("click",function(){return e.onHotelList()}),s.Fc(14," Back to hotel list "),s.Pb(),s.Pb()),2&t){var n=s.vc(12);s.zb(7),s.lc("options",e.options),s.zb(2),s.Hc(" ",null==e.hotel?null:e.hotel.name,""),s.zb(1),s.lc("ngIf",!e.showRoomListLoading)("ngIfElse",n)}},directives:[P.b,u.q,u.p,u.o,y.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 10px 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}();function z(t,e){1&t&&(s.Qb(0,"small",12),s.Fc(1," Name required "),s.Pb())}function S(t,e){if(1&t&&(s.Qb(0,"small",12),s.Qb(1,"div",13),s.Fc(2," Phone number required "),s.Pb(),s.Qb(3,"div",13),s.Fc(4," Phone number format 01934953023 "),s.Pb(),s.Pb()),2&t){var n=s.dc();s.zb(1),s.lc("hidden",!n.form.controls.phoneNumber.errors.required),s.zb(2),s.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var x=function(t){return{disabled:t}},B=function(){function t(t){this.builder=t,this.user=new s.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",g.v.required],phoneNumber:["",[g.v.required,g.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(e){return new(e||t)(s.Lb(g.d))},t.\u0275cmp=s.Fb({type:t,selectors:[["user-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(s.Qb(0,"h4"),s.Fc(1,"User Info"),s.Pb(),s.Qb(2,"form",0),s.bc("ngSubmit",function(){return e.submit()}),s.Qb(3,"div",1),s.Qb(4,"div",2),s.Qb(5,"label",3),s.Fc(6,"Name *"),s.Pb(),s.Mb(7,"input",4),s.Dc(8,z,2,0,"small",5),s.Pb(),s.Qb(9,"div",2),s.Qb(10,"label",6),s.Fc(11,"Phone *"),s.Pb(),s.Mb(12,"input",7),s.Dc(13,S,5,2,"small",5),s.Pb(),s.Qb(14,"div",2),s.Qb(15,"label",8),s.Fc(16,"Email"),s.Pb(),s.Mb(17,"input",9),s.Pb(),s.Pb(),s.Qb(18,"div",10),s.Qb(19,"button",11),s.Fc(20," Submit "),s.Pb(),s.Pb(),s.Pb()),2&t&&(s.zb(2),s.lc("formGroup",e.form),s.zb(6),s.lc("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),s.zb(5),s.lc("ngIf",e.form.controls.phoneNumber.errors&&e.form.controls.phoneNumber.touched),s.zb(6),s.lc("ngClass",s.pc(4,x,e.form.invalid)))},directives:[g.x,g.n,g.g,g.b,g.m,g.f,u.q,g.j,u.o],styles:[""]}),t}(),I=function(){return(I=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function L(t,e){if(1&t){var n=s.Rb();s.Qb(0,"admin-agent-hotel-list",7),s.bc("hotel",function(t){return s.wc(n),s.dc().onHotel(t)}),s.Pb()}}function A(t,e){if(1&t){var n=s.Rb();s.Qb(0,"admin-agent-available-room-list",8),s.bc("showHotels",function(t){return s.wc(n),s.dc().onShowHotels(t)})("roomSelected",function(t){return s.wc(n),s.dc().onRoomSelect(t)}),s.Pb()}if(2&t){var o=s.dc();s.lc("hotel",o.hotel)("reloadRoomList",o.reloadRoomList)}}function R(t,e){1&t&&(s.Qb(0,"th",25),s.Fc(1,"Commission"),s.Pb())}function C(t,e){if(1&t){var n=s.Rb();s.Qb(0,"td"),s.Qb(1,"input",33),s.bc("ngModelChange",function(t){return s.wc(n),s.dc().$implicit.commission=t}),s.Pb(),s.Pb()}if(2&t){var o=s.dc().$implicit;s.zb(1),s.lc("ngModel",o.commission)}}function O(t,e){if(1&t){var n=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td"),s.Fc(2),s.Pb(),s.Qb(3,"td"),s.Fc(4),s.Pb(),s.Qb(5,"td"),s.Fc(6),s.Pb(),s.Qb(7,"td",25),s.Fc(8),s.Pb(),s.Qb(9,"td",25),s.Fc(10),s.Pb(),s.Qb(11,"td",25),s.Fc(12),s.Pb(),s.Qb(13,"td",25),s.Qb(14,"input",30),s.bc("ngModelChange",function(t){return s.wc(n),e.$implicit.advance=t})("keyup",function(){s.wc(n);var t=e.index;return s.dc(3).updateSubBooking(t)}),s.Pb(),s.Pb(),s.Qb(15,"td",25),s.Fc(16),s.Pb(),s.Dc(17,C,2,1,"td",29),s.Qb(18,"td"),s.Qb(19,"button",31),s.bc("click",function(){s.wc(n);var t=e.index;return s.dc(3).onRemove(t)}),s.Mb(20,"i",32),s.Pb(),s.Pb(),s.Pb()}if(2&t){var o=e.$implicit,i=s.dc(3);s.zb(2),s.Gc(o.room.category.hotel.name),s.zb(2),s.Gc(o.date),s.zb(2),s.Gc("N/A"==o.room.roomNumber?o.room.category.name:o.room.roomNumber),s.zb(2),s.Gc(o.room.price),s.zb(2),s.Gc(o.room.discount),s.zb(2),s.Hc("",o.room.price-o.discount," BDT"),s.zb(2),s.lc("ngModel",o.advance),s.zb(2),s.Hc("",null==o?null:o.due," BDT"),s.zb(1),s.lc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function H(t,e){1&t&&s.Mb(0,"td")}function G(t,e){1&t&&s.Mb(0,"td")}function N(t,e){1&t&&s.Mb(0,"td")}function T(t,e){if(1&t&&(s.Qb(0,"table",24),s.Qb(1,"thead"),s.Qb(2,"tr"),s.Qb(3,"th"),s.Fc(4,"Hotel"),s.Pb(),s.Qb(5,"th"),s.Fc(6,"Date"),s.Pb(),s.Qb(7,"th"),s.Fc(8,"Room No."),s.Pb(),s.Qb(9,"th",25),s.Fc(10,"Per night"),s.Pb(),s.Qb(11,"th",25),s.Fc(12,"Discount"),s.Pb(),s.Qb(13,"th",25),s.Fc(14,"Payable"),s.Pb(),s.Qb(15,"th",25),s.Fc(16,"Advance"),s.Pb(),s.Qb(17,"th",25),s.Fc(18,"Due"),s.Pb(),s.Dc(19,R,2,0,"th",26),s.Mb(20,"th"),s.Pb(),s.Pb(),s.Qb(21,"tbody"),s.Dc(22,O,21,9,"tr",27),s.Pb(),s.Qb(23,"tfoot"),s.Qb(24,"tr"),s.Qb(25,"th",28),s.Fc(26,"Total"),s.Pb(),s.Qb(27,"th",25),s.Fc(28),s.Pb(),s.Mb(29,"td"),s.Dc(30,H,1,0,"td",29),s.Pb(),s.Qb(31,"tr"),s.Qb(32,"th",28),s.Fc(33,"Total Advance"),s.Pb(),s.Qb(34,"th",25),s.Fc(35),s.Pb(),s.Mb(36,"td"),s.Dc(37,G,1,0,"td",29),s.Pb(),s.Qb(38,"tr"),s.Qb(39,"th",28),s.Fc(40,"Total due"),s.Pb(),s.Qb(41,"th",25),s.Fc(42),s.Pb(),s.Mb(43,"td"),s.Dc(44,N,1,0,"td",29),s.Pb(),s.Pb(),s.Pb()),2&t){var n=s.dc(2);s.zb(19),s.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.zb(3),s.lc("ngForOf",n.subBookings),s.zb(6),s.Hc("",null==n.booking?null:n.booking.total," BDT"),s.zb(2),s.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.zb(5),s.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),s.zb(2),s.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),s.zb(5),s.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),s.zb(2),s.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function E(t,e){if(1&t){var n=s.Rb();s.Qb(0,"user-form",34),s.bc("user",function(t){return s.wc(n),s.dc(2).onCreateUser(t)}),s.Pb()}}function $(t,e){if(1&t){var n=s.Rb();s.Qb(0,"div",9),s.Qb(1,"h3",10),s.Fc(2,"New Booking"),s.Pb(),s.Qb(3,"div",11),s.Mb(4,"div",12),s.Qb(5,"div",13),s.Qb(6,"div",14),s.Qb(7,"input",15),s.bc("ngModelChange",function(t){return s.wc(n),s.dc().changeSimilar=t}),s.Pb(),s.Qb(8,"label",16),s.Fc(9," Auto Change Similar Category "),s.Pb(),s.Pb(),s.Pb(),s.Qb(10,"div",13),s.Qb(11,"div",17),s.Qb(12,"div",18),s.Qb(13,"div",19),s.Fc(14,"Ref. By"),s.Pb(),s.Pb(),s.Qb(15,"input",20),s.bc("ngModelChange",function(t){return s.wc(n),s.dc().refBy=t}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(16,"div",2),s.Qb(17,"div",21),s.Qb(18,"h5"),s.Fc(19,"Booking List"),s.Pb(),s.Pb(),s.Pb(),s.Dc(20,T,45,8,"table",22),s.Dc(21,E,1,0,"user-form",23),s.Pb()}if(2&t){var o=s.dc();s.zb(7),s.lc("ngModel",o.changeSimilar),s.zb(8),s.lc("ngModel",o.refBy),s.zb(5),s.lc("ngIf",!o.sendingInfo)("ngIfElse",o.sending),s.zb(1),s.lc("ngIf",!o.sendingInfo)}}var _=function(){function t(t,e,n,o){this.utilService=t,this.userService=e,this.bookingService=n,this.router=o,this.subBookings=[],this.showRoomList=!1,this.sendingInfo=!1,this.reloadRoomList=!1,this.changeSimilar=!0,this.message=""}return t.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0}},t.prototype.onHotel=function(t){this.hotel=t,this.hotelId=t.id,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t},t.prototype.onRoomSelect=function(t){var e=this;console.log(t),this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(n){var o=new l.a(n,t.room);o.room.discount>0&&(o.discount=o.room.discount),e.isContain(o)||(e.subBookings.push(o),e.updateSubBooking(e.subBookings.length-1),e.subBookings.sort(e.utilService.dynamicSortObject("date")),e.subBookings.sort(e.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.onCreateUser=function(t){var e=I({id:0},t);this.createBooking(e)},t.prototype.createBooking=function(t){var e=this,n=new b.a(t,this.subBookings),o=I({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue},n);this.message="generating booking",this.sendingInfo=!0,this.bookingService.createAdminAgentBooking(o).subscribe(function(t){e.message="Booking generated, Thank you.",e.sendingInfo=!1,e.booking.subBookingList=[],e.subBookings=[],e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])})},t.prototype.isContain=function(t){return this.subBookings.find(function(e){return e.room.id===t.room.id&&e.date===t.date&&e.room.category.hotel.id===t.room.category.hotel.id})},t.prototype.onRemove=function(t){this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.updateSubBooking=function(t){var e=this.subBookings[t];e.payablePrice=e.room.price-e.discount,e.due=e.payablePrice-e.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var e=0,n=0,o=0;if(this.changeSimilar){var i=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==i.room.category.id&&(t.discount=i.discount,t.advance=i.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){e+=t.payablePrice,n+=t.advance,o+=t.due}),this.booking.total=e,this.booking.totalAdvance=n,this.booking.totalDue=o},t.\u0275fac=function(e){return new(e||t)(s.Lb(a.a),s.Lb(c.a),s.Lb(r.a),s.Lb(i.b))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-sell-room"]],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],[1,"text-center"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border",4,"ngIf","ngIfElse"],[3,"user",4,"ngIf"],[1,"table","mb-4","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"text-right"],[4,"ngIf"],["type","number","name","advance",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange"],[3,"user"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Fc(2,"Sell room"),s.Pb(),s.Pb(),s.Qb(3,"div",0),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Dc(6,L,1,0,"admin-agent-hotel-list",4),s.Dc(7,A,1,2,"admin-agent-available-room-list",5),s.Pb(),s.Dc(8,$,22,5,"div",6),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.lc("ngIf",!e.showRoomList),s.zb(1),s.lc("ngIf",e.showRoomList),s.zb(1),s.lc("ngIf",e.subBookings.length>0))},directives:[u.q,m,M,g.a,g.m,g.p,g.b,u.p,g.r,B],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),q=n("haEQ");function j(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Fc(2),s.ec(3,"date"),s.Pb(),s.Qb(4,"td"),s.Fc(5),s.Pb(),s.Qb(6,"td"),s.Fc(7),s.Pb(),s.Qb(8,"td"),s.Fc(9),s.Pb(),s.Qb(10,"td",7),s.Fc(11),s.ec(12,"currency"),s.Pb(),s.Pb()),2&t){var n=e.$implicit;s.zb(2),s.Gc(s.gc(3,5,n.date,"MMM d, y, h:mm:ss a")),s.zb(3),s.Gc(n.explanation),s.zb(2),s.Gc(n.debit),s.zb(2),s.Gc(n.credit),s.zb(2),s.Hc(" ",s.ic(12,8,n.balance,"BDT ","symbol","4.2-2")," ")}}function J(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",10),s.Mb(2,"loading"),s.Pb(),s.Pb())}function U(t,e){if(1&t){var n=s.Rb();s.Qb(0,"pagination",12),s.bc("getPage",function(t){return s.wc(n),s.dc(2).getMyLedger(t)}),s.Pb()}if(2&t){var o=s.dc(2);s.lc("page",o.adminAgentLedgerPage)}}function Y(t,e){if(1&t&&(s.Qb(0,"div",5),s.Qb(1,"table",6),s.Qb(2,"thead"),s.Qb(3,"tr"),s.Qb(4,"th"),s.Fc(5,"Date"),s.Pb(),s.Qb(6,"th"),s.Fc(7,"Explanation"),s.Pb(),s.Qb(8,"th"),s.Fc(9,"Debit"),s.Pb(),s.Qb(10,"th"),s.Fc(11,"Credit"),s.Pb(),s.Qb(12,"th",7),s.Fc(13,"Balance"),s.Pb(),s.Pb(),s.Pb(),s.Qb(14,"tbody"),s.Dc(15,j,13,13,"tr",8),s.Pb(),s.Qb(16,"tfoot"),s.Dc(17,J,3,0,"tr",9),s.Qb(18,"tr"),s.Qb(19,"td",10),s.Dc(20,U,1,1,"pagination",11),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){var n=s.dc();s.zb(15),s.lc("ngForOf",n.adminAgentLedgerPage.content),s.zb(2),s.lc("ngIf",n.loading),s.zb(3),s.lc("ngIf",null!=n.adminAgentLedgerPage)}}var X=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyLedger()},t.prototype.getMyLedger=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){return this.accountingService.getAdminAgentMyLedger(t).subscribe(function(t){e.adminAgentLedgerPage=t}),[2]})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.\u0275fac=function(e){return new(e||t)(s.Lb(q.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-admin-agent-ledger"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"table","border","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[3,"page","getPage"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Fc(2,"My ledger"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Dc(5,Y,21,3,"div",4),s.Pb(),s.Pb()),2&t&&(s.zb(5),s.lc("ngIf",(null==e.adminAgentLedgerPage||null==e.adminAgentLedgerPage.content?null:e.adminAgentLedgerPage.content.length)>0))},directives:[u.q,u.p,y.a,f.a],pipes:[u.f,u.d],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},K=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{l(o.next(t))}catch(e){r(e)}}function a(t){try{l(o.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}l((o=o.apply(t,e||[])).next())})},V=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function W(t,e){if(1&t){var n=s.Rb();s.Qb(0,"a",11),s.bc("click",function(){s.wc(n);var t=e.$implicit;return s.dc(2).onSelectBooking(t.id)}),s.Mb(1,"i",12),s.Fc(2),s.ec(3,"date"),s.Pb()}if(2&t){var o=e.$implicit;s.zb(2),s.Jc(" ",o.id,". ",o.user.name," [",s.gc(3,3,null==o?null:o.created,"d MMM,yy"),"] ")}}function tt(t,e){if(1&t&&(s.Qb(0,"ul",9),s.Qb(1,"li",6),s.Qb(2,"h5"),s.Fc(3,"My Bookings"),s.Pb(),s.Qb(4,"small"),s.Fc(5,"Choose a booking from below list"),s.Pb(),s.Pb(),s.Dc(6,W,4,6,"a",10),s.Pb()),2&t){var n=s.dc();s.zb(6),s.lc("ngForOf",null==n.bookingPage?null:n.bookingPage.content)}}function et(t,e){if(1&t){var n=s.Rb();s.Qb(0,"pagination",13),s.bc("getPage",function(t){return s.wc(n),s.dc().onSelectBooking(t)}),s.Pb()}if(2&t){var o=s.dc();s.lc("page",o.bookingPage)("short",o.short)}}function nt(t,e){1&t&&(s.Qb(0,"th",20),s.Fc(1," Commi. "),s.Pb())}function ot(t,e){if(1&t&&(s.Qb(0,"td",20),s.Fc(1),s.Pb()),2&t){var n=s.dc().$implicit;s.zb(1),s.Hc(" ",n.commission," ")}}function it(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Fc(2),s.ec(3,"date"),s.Pb(),s.Qb(4,"td"),s.Fc(5),s.Pb(),s.Qb(6,"td",20),s.Fc(7),s.Pb(),s.Qb(8,"td",20),s.Fc(9),s.Pb(),s.Qb(10,"td",20),s.Fc(11),s.Pb(),s.Qb(12,"td",20),s.Fc(13),s.Pb(),s.Qb(14,"td",20),s.Fc(15),s.Pb(),s.Dc(16,ot,2,1,"td",21),s.Pb()),2&t){var n=e.$implicit,o=s.dc(3);s.zb(2),s.Gc(s.gc(3,9,null==n?null:n.date,"d MMM,yy")),s.zb(3),s.Ic(" ",null==n||null==n.room?null:n.room.roomNumber," [",null==n||null==n.room.category?null:n.room.category.name,"] "),s.zb(2),s.Hc("",null==n||null==n.room?null:n.room.price," BDT"),s.zb(2),s.Gc(n.discount),s.zb(2),s.Gc(n.payablePrice),s.zb(2),s.Gc(null==n?null:n.advance),s.zb(2),s.Gc(null==n?null:n.due),s.zb(1),s.lc("ngIf",(null==o.booking.refBy?null:o.booking.refBy.length)>0)}}function rt(t,e){if(1&t&&(s.Qb(0,"tbody"),s.Dc(1,it,17,12,"tr",24),s.Pb()),2&t){var n=s.dc(2);s.zb(1),s.lc("ngForOf",n.booking.subBookingList)}}function ct(t,e){1&t&&s.Mb(0,"td")}function at(t,e){1&t&&s.Mb(0,"td")}function lt(t,e){1&t&&s.Mb(0,"td")}function bt(t,e){if(1&t&&(s.Qb(0,"div",14),s.Qb(1,"div",3),s.Qb(2,"div",15),s.Qb(3,"h3"),s.Fc(4,"Customer Info"),s.Pb(),s.Qb(5,"table"),s.Qb(6,"tr"),s.Qb(7,"th"),s.Fc(8,"Name :"),s.Pb(),s.Qb(9,"th"),s.Fc(10),s.Pb(),s.Pb(),s.Qb(11,"tr"),s.Qb(12,"th"),s.Fc(13,"Phone :"),s.Pb(),s.Qb(14,"th"),s.Fc(15),s.Pb(),s.Pb(),s.Qb(16,"tr"),s.Qb(17,"th"),s.Fc(18,"Email :"),s.Pb(),s.Qb(19,"th"),s.Fc(20),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Mb(21,"div",16),s.Qb(22,"div",16),s.Qb(23,"table"),s.Qb(24,"tr"),s.Qb(25,"td"),s.Fc(26,"Booking Id"),s.Pb(),s.Qb(27,"td"),s.Fc(28,":"),s.Pb(),s.Qb(29,"th"),s.Fc(30),s.Pb(),s.Pb(),s.Qb(31,"tr"),s.Qb(32,"td"),s.Fc(33,"Date"),s.Pb(),s.Qb(34,"td"),s.Fc(35,":"),s.Pb(),s.Qb(36,"td"),s.Qb(37,"strong"),s.Fc(38),s.ec(39,"date"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(40,"div",3),s.Mb(41,"div",17),s.Qb(42,"div",18),s.Fc(43),s.Pb(),s.Pb(),s.Qb(44,"div",3),s.Qb(45,"table",19),s.Qb(46,"thead"),s.Qb(47,"tr"),s.Qb(48,"th"),s.Fc(49,"Date"),s.Pb(),s.Qb(50,"th"),s.Fc(51,"Room number"),s.Pb(),s.Qb(52,"th",20),s.Fc(53,"Per night"),s.Pb(),s.Qb(54,"th",20),s.Fc(55,"Discount"),s.Pb(),s.Qb(56,"th",20),s.Fc(57,"Payable"),s.Pb(),s.Qb(58,"th",20),s.Fc(59,"Advance"),s.Pb(),s.Qb(60,"th",20),s.Fc(61,"Due"),s.Pb(),s.Dc(62,nt,2,0,"th",21),s.Pb(),s.Pb(),s.Dc(63,rt,2,1,"tbody",22),s.Qb(64,"tfoot"),s.Qb(65,"tr"),s.Qb(66,"th",23),s.Fc(67,"Total"),s.Pb(),s.Qb(68,"th",20),s.Fc(69),s.Pb(),s.Mb(70,"td"),s.Dc(71,ct,1,0,"td",22),s.Pb(),s.Qb(72,"tr"),s.Qb(73,"th",23),s.Fc(74,"Total Advance"),s.Pb(),s.Qb(75,"th",20),s.Fc(76),s.Pb(),s.Mb(77,"td"),s.Dc(78,at,1,0,"td",22),s.Pb(),s.Qb(79,"tr"),s.Qb(80,"th",23),s.Fc(81,"Total due"),s.Pb(),s.Qb(82,"th",20),s.Fc(83),s.Pb(),s.Mb(84,"td"),s.Dc(85,lt,1,0,"td",22),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){var n=s.dc();s.zb(10),s.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.name),s.zb(5),s.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),s.zb(5),s.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.email),s.zb(10),s.Gc(null==n.booking?null:n.booking.id),s.zb(8),s.Hc(" ",s.gc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),s.zb(5),s.Hc("Ref. By : ",n.booking.refBy,""),s.zb(19),s.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.zb(1),s.lc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),s.zb(6),s.Hc("",null==n.booking?null:n.booking.total," BDT"),s.zb(2),s.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.zb(5),s.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),s.zb(2),s.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),s.zb(5),s.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),s.zb(2),s.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var st=function(){function t(t){this.bookingService=t,this.short=!0}return t.prototype.ngOnInit=function(){this.getServiceAgentBookings()},t.prototype.getServiceAgentBookings=function(t){return void 0===t&&(t=0),K(this,void 0,void 0,function(){var e=this;return V(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getAdminAgentBookings(t).subscribe(function(t){e.bookingPage=t})];case 1:return n.sent(),[2]}})})},t.prototype.onSelectBooking=function(t){return K(this,void 0,void 0,function(){var e;return V(this,function(n){return e=this.bookingPage.content.find(function(e){return e.id==t}),this.booking=Z({},e),[2]})})},t.\u0275fac=function(e){return new(e||t)(s.Lb(r.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-my-sell"]],decls:10,vars:3,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3","my-4","d-print-none"],["class","list-group",4,"ngIf"],[1,"list-group-item"],[3,"page","short","getPage",4,"ngIf"],["class","col",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[3,"page","short","getPage"],[1,"col"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"col-md-9"],[1,"col-md-3"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Fc(2,"My bookings"),s.Pb(),s.Pb(),s.Qb(3,"div",2),s.Qb(4,"div",3),s.Qb(5,"div",4),s.Dc(6,tt,7,1,"ul",5),s.Qb(7,"li",6),s.Dc(8,et,1,2,"pagination",7),s.Pb(),s.Pb(),s.Dc(9,bt,86,17,"div",8),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.lc("ngIf",(null==e.bookingPage||null==e.bookingPage.content?null:e.bookingPage.content.length)>0),s.zb(2),s.lc("ngIf",null!=e.bookingPage),s.zb(1),s.lc("ngIf",e.booking))},directives:[u.q,u.p,f.a],pipes:[u.f],styles:[""]}),t}(),ut=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyBalance()},t.prototype.getMyBalance=function(){return t=this,void 0,n=function(){var t=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(e){return this.accountingService.getAdminAgentBalance().subscribe(function(e){t.balance=e.response}),[2]})},new((e=void 0)||(e=Promise))(function(o,i){function r(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,c)}a((n=n.apply(t,[])).next())});var t,e,n},t.\u0275fac=function(e){return new(e||t)(s.Lb(q.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-my-balance"]],decls:9,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"text-center"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Fc(2,"My balance"),s.Pb(),s.Pb(),s.Qb(3,"div",0),s.Qb(4,"h3",2),s.Fc(5," My balance is : BDT"),s.Qb(6,"u"),s.Fc(7),s.Pb(),s.Fc(8," /= "),s.Pb(),s.Pb()),2&t&&(s.zb(7),s.Gc(e.balance))},styles:[""]}),t}(),dt=n("kU/X"),gt=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{l(o.next(t))}catch(e){r(e)}}function a(t){try{l(o.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}l((o=o.apply(t,e||[])).next())})},ft=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ht(t,e){1&t&&(s.Qb(0,"th"),s.Fc(1,"Reservation Date"),s.Pb())}function pt(t,e){if(1&t&&(s.Qb(0,"td"),s.Fc(1),s.ec(2,"date"),s.Pb()),2&t){var n=s.dc().$implicit;s.zb(1),s.Hc(" ",s.gc(2,1,n.date,"d MMM,y")," ")}}var mt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function vt(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Fc(2),s.Pb(),s.Qb(3,"td"),s.Fc(4),s.Pb(),s.Qb(5,"td"),s.Fc(6),s.Pb(),s.Qb(7,"td"),s.Fc(8),s.Pb(),s.Qb(9,"td"),s.Fc(10),s.Pb(),s.Dc(11,pt,3,4,"td",16),s.Qb(12,"td",17),s.Fc(13),s.Pb(),s.Qb(14,"td",17),s.Fc(15),s.Pb(),s.Qb(16,"td",17),s.Fc(17),s.Pb(),s.Qb(18,"td"),s.Fc(19),s.Pb(),s.Qb(20,"td",17),s.Fc(21),s.Pb(),s.Qb(22,"td",20),s.Fc(23),s.Pb(),s.Pb()),2&t){var n=e.$implicit,o=s.dc(2);s.zb(2),s.Gc(n.date),s.zb(2),s.Gc(n.hotelName),s.zb(2),s.Ic(" ",n.company," ",n.role?"["+n.role+"]":""," "),s.zb(2),s.Ic("",n.customerName,"[",n.customerPhone,"]"),s.zb(2),s.Ic("",n.roomNumber," [",n.category,"]"),s.zb(1),s.lc("ngIf","Booking"===o.reportHead),s.zb(2),s.Gc(n.price),s.zb(2),s.Gc(n.advance),s.zb(2),s.Gc(n.due),s.zb(2),s.Gc(n.ref),s.zb(2),s.Gc(n.commission),s.zb(1),s.lc("ngClass",s.qc(16,mt,"Paid"==n.status,"Unpaid"==n.status)),s.zb(1),s.Hc(" ",n.status," ")}}function Pt(t,e){1&t&&s.Mb(0,"td")}function yt(t,e){if(1&t&&(s.Qb(0,"table",15),s.Qb(1,"thead"),s.Qb(2,"tr"),s.Qb(3,"th"),s.Fc(4,"Check in Date"),s.Pb(),s.Qb(5,"th"),s.Fc(6,"Hotel Name"),s.Pb(),s.Qb(7,"th"),s.Fc(8,"Sold by"),s.Pb(),s.Qb(9,"th"),s.Fc(10,"Customer"),s.Pb(),s.Qb(11,"th"),s.Fc(12,"Room No."),s.Pb(),s.Dc(13,ht,2,0,"th",16),s.Qb(14,"th",17),s.Fc(15,"Rent"),s.Pb(),s.Qb(16,"th",17),s.Fc(17,"Advance"),s.Pb(),s.Qb(18,"th",17),s.Fc(19,"Due"),s.Pb(),s.Qb(20,"th"),s.Fc(21,"Ref"),s.Pb(),s.Qb(22,"th",17),s.Fc(23,"Commission"),s.Pb(),s.Qb(24,"th"),s.Fc(25,"Status"),s.Pb(),s.Pb(),s.Pb(),s.Qb(26,"tbody"),s.Dc(27,vt,24,19,"tr",18),s.Pb(),s.Qb(28,"tfoot"),s.Qb(29,"tr"),s.Mb(30,"td"),s.Mb(31,"td"),s.Mb(32,"td"),s.Qb(33,"th"),s.Fc(34,"Total"),s.Pb(),s.Dc(35,Pt,1,0,"td",16),s.Mb(36,"th"),s.Qb(37,"th",17),s.Fc(38),s.Pb(),s.Qb(39,"th",17),s.Fc(40),s.Pb(),s.Qb(41,"th",17),s.Fc(42),s.Pb(),s.Mb(43,"th",19),s.Pb(),s.Pb(),s.Pb()),2&t){var n=s.dc();s.zb(13),s.lc("ngIf","Booking"===n.reportHead),s.zb(14),s.lc("ngForOf",n.reportList),s.zb(8),s.lc("ngIf","Booking"===n.reportHead),s.zb(3),s.Gc(n.total.totalrent),s.zb(2),s.Gc(n.total.totalAdvance),s.zb(2),s.Gc(n.total.totalDue)}}function Qt(t,e){1&t&&(s.Qb(0,"h3",21),s.Mb(1,"i",22),s.Fc(2," No data found"),s.Pb())}var kt=[{path:"sell",component:_},{path:"my-ledger",component:X},{path:"my-sells",component:st},{path:"report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.mode="Sell",this.daterange={},this.reportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkoutDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getAdminAgentBookingReport(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminAgentReserveReport(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminAgentBookingReport=function(t,e){return gt(this,void 0,void 0,function(){var n=this;return ft(this,function(o){switch(o.label){case 0:return[4,this.reportService.getAdminAgentBookingReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminAgentReserveReport=function(t,e){return gt(this,void 0,void 0,function(){var n=this;return ft(this,function(o){switch(o.label){case 0:return[4,this.reportService.getAdminAgentReserveReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.reportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(s.Lb(dt.a),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(s.Qb(0,"div",0),s.Qb(1,"span",1),s.Fc(2,"Agent report"),s.Pb(),s.Pb(),s.Qb(3,"div",0),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",5),s.Qb(8,"div",6),s.Mb(9,"i",7),s.Pb(),s.Pb(),s.Qb(10,"input",8),s.bc("selected",function(t){return e.selectedDate(t)}),s.Pb(),s.Pb(),s.Pb(),s.Qb(11,"div",3),s.Qb(12,"div",9),s.Qb(13,"div",5),s.Qb(14,"div",6),s.Fc(15,"Type"),s.Pb(),s.Pb(),s.Qb(16,"select",10),s.bc("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),s.Qb(17,"option",11),s.Fc(18," By checkin date "),s.Pb(),s.Qb(19,"option",12),s.Fc(20," By sell's date "),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Dc(21,yt,44,6,"table",13),s.Dc(22,Qt,3,0,"ng-template",null,14,s.Ec),s.Pb()),2&t){var n=s.vc(23);s.zb(10),s.lc("options",e.options),s.zb(6),s.lc("ngModel",e.mode),s.zb(5),s.lc("ngIf",e.reportList.length>0)("ngIfElse",n)}},directives:[P.b,g.u,g.m,g.p,g.q,g.w,u.q,u.p,u.o],pipes:[u.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}()},{path:"my-balance",component:ut}],Ft=function(){function t(){}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[o.a,i.e.forChild(kt)]]}),t}()}}]);