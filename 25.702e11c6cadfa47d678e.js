(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{fyiT:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return P}),n.d(t,"ServiceAdminUsersModule",function(){return Q});var r=n("iInd"),o=n("MKLO"),i=n("ITiG"),c=n("8Y7J"),u=n("s7LF"),s=n("SVse"),b=n("uEz7"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){1&e&&(c.Qb(0,"small",14),c.Fc(1," Name required "),c.Pb())}function f(e,t){if(1&e&&(c.Qb(0,"small",14),c.Qb(1,"div",15),c.Fc(2," Phone number required "),c.Pb(),c.Qb(3,"div",15),c.Fc(4," Phone number format 01934953023 "),c.Pb(),c.Pb()),2&e){var n=c.dc();c.zb(1),c.lc("hidden",!n.form.controls.phoneNumber.errors.required),c.zb(2),c.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}function m(e,t){if(1&e){var n=c.Rb();c.Qb(0,"button",16),c.bc("click",function(){c.wc(n);var e=c.dc();return e.onRemoveAgent(e.user.id)}),c.Fc(1," Remove this agent "),c.Pb()}}var p=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},h=function(){function e(e){this.builder=e,this.create=new c.n,this.removeAgent=new c.n,this.exists=!1,this.createForm()}return e.prototype.ngOnChanges=function(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(a({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email})))},e.prototype.createForm=function(){this.form=this.builder.group({name:["",u.v.required],phoneNumber:["",[u.v.required,u.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},e.prototype.submit=function(){if(this.form.valid){if(this.exists){var e=a(a({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}},e.prototype.onRemoveAgent=function(e){this.removeAgent.emit(e),this.onClear()},e.prototype.onClear=function(){this.form.reset(),this.exists=!1},e.\u0275fac=function(t){return new(t||e)(c.Lb(u.d))},e.\u0275cmp=c.Fb({type:e,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[c.xb],decls:22,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(c.Qb(0,"form",0),c.bc("ngSubmit",function(){return t.submit()}),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"label",3),c.Fc(4,"Name *"),c.Pb(),c.Mb(5,"input",4),c.Dc(6,l,2,0,"small",5),c.Pb(),c.Qb(7,"div",2),c.Qb(8,"label",6),c.Fc(9,"Phone *"),c.Pb(),c.Mb(10,"input",7),c.Dc(11,f,5,2,"small",5),c.Pb(),c.Qb(12,"div",2),c.Qb(13,"label",8),c.Fc(14,"Email"),c.Pb(),c.Mb(15,"input",9),c.Pb(),c.Pb(),c.Qb(16,"div",10),c.Qb(17,"button",11),c.Fc(18),c.Pb(),c.Dc(19,m,2,0,"button",12),c.Qb(20,"button",13),c.bc("click",function(){return t.onClear()}),c.Fc(21," Clear "),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.lc("formGroup",t.form),c.zb(6),c.lc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),c.zb(5),c.lc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),c.zb(6),c.lc("ngClass",c.rc(6,p,t.form.invalid,t.exists,!t.exists)),c.zb(1),c.Hc(" ",t.exists?"Update":"Create"," User "),c.zb(1),c.lc("ngIf",t.exists))},directives:[u.x,u.n,u.g,u.b,u.m,u.f,s.q,u.j,s.o],styles:[""]}),e}(),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,u)}s((r=r.apply(e,t||[])).next())})},g=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function v(e,t){if(1&e){var n=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td"),c.Qb(8,"button",16),c.bc("click",function(){c.wc(n);var e=t.$implicit;return c.dc().onSelect(e.id)}),c.Mb(9,"i",17),c.Pb(),c.Pb(),c.Pb()}if(2&e){var r=t.$implicit;c.zb(2),c.Gc(r.name),c.zb(2),c.Gc(r.phoneNumber),c.zb(2),c.Gc(r.email)}}var P=[{path:"",component:function(){function e(e){this.userService=e,this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage(this.userQuery)},e.prototype.getUserPage=function(e,t){return void 0===t&&(t=0),d(this,void 0,void 0,function(){var n=this;return g(this,function(r){return this.userService.getServiceAdminAgents(e,t).subscribe(function(e){n.userPage=e}),[2]})})},e.prototype.submit=function(){this.getUserPage(this.userQuery)},e.prototype.onCreate=function(e){return d(this,void 0,void 0,function(){var t=this;return g(this,function(n){switch(n.label){case 0:return[4,this.userService.createSerivceAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery)})];case 1:return n.sent(),[2]}})})},e.prototype.onSelect=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onRemoveAgent=function(e){return d(this,void 0,void 0,function(){var t=this;return g(this,function(n){switch(n.label){case 0:return console.log("On leave ",e),[4,this.userService.removeServiceAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(c.Lb(i.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-add-agent"]],decls:35,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","4"],[3,"page","getPage"],[3,"user","create","removeAgent"],[1,"btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil-square-o"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Agents"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"h3",4),c.Fc(7,"Agent list"),c.Pb(),c.Qb(8,"form",5),c.bc("ngSubmit",function(){return t.submit()}),c.Qb(9,"div",6),c.Qb(10,"div",7),c.Qb(11,"div",8),c.Mb(12,"i",9),c.Fc(13,"\xa0 Search"),c.Pb(),c.Pb(),c.Qb(14,"input",10),c.bc("ngModelChange",function(e){return t.userQuery=e}),c.Pb(),c.Pb(),c.Pb(),c.Qb(15,"table",11),c.Qb(16,"thead"),c.Qb(17,"tr"),c.Qb(18,"th"),c.Fc(19,"Name"),c.Pb(),c.Qb(20,"th"),c.Fc(21,"Phone"),c.Pb(),c.Qb(22,"th"),c.Fc(23,"Email"),c.Pb(),c.Mb(24,"th"),c.Pb(),c.Pb(),c.Qb(25,"tbody"),c.Dc(26,v,10,3,"tr",12),c.Pb(),c.Qb(27,"tfoot"),c.Qb(28,"tr"),c.Qb(29,"td",13),c.Qb(30,"pagination",14),c.bc("getPage",function(e){return t.getUserPage(e)}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"div",3),c.Qb(32,"h3",4),c.Fc(33,"Add Agent"),c.Pb(),c.Qb(34,"agent-form",15),c.bc("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(14),c.lc("ngModel",t.userQuery),c.zb(12),c.lc("ngForOf",null==t.userPage?null:t.userPage.content),c.zb(4),c.lc("page",t.userPage),c.zb(4),c.lc("user",t.user))},directives:[u.x,u.n,u.o,u.b,u.m,u.p,s.p,b.a,h],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}()}],Q=function(){function e(){}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(P)]]}),e}()}}]);