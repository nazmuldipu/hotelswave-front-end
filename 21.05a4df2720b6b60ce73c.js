(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{IxGd:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return ae}),n.d(t,"UsersModule",function(){return le});var r=n("tyNb"),o=n("KZX/"),i=n("fXoL"),c=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(i.Tb(0,"p"),i.Gc(1," add works!\n"),i.Sb())},styles:[""]}),e}(),b=n("ITiG"),s=n("IzEk"),u=n("3Pt+"),a=n("ofXK"),l=n("uEz7"),f=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},d=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function g(e,t){if(1&e&&(i.Tb(0,"span"),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Ic(" ",n.name,", ")}}function h(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",25),i.Tb(1,"div",26),i.Tb(2,"h4",27),i.Gc(3,"User details"),i.Sb(),i.Tb(4,"table",28),i.Tb(5,"tr"),i.Tb(6,"td"),i.Gc(7,"id"),i.Sb(),i.Tb(8,"td"),i.Gc(9),i.Sb(),i.Sb(),i.Tb(10,"tr"),i.Tb(11,"td"),i.Gc(12,"name"),i.Sb(),i.Tb(13,"td"),i.Gc(14),i.Sb(),i.Sb(),i.Tb(15,"tr"),i.Tb(16,"td"),i.Gc(17,"Username"),i.Sb(),i.Tb(18,"td"),i.Gc(19),i.Sb(),i.Sb(),i.Tb(20,"tr"),i.Tb(21,"td"),i.Gc(22,"Email"),i.Sb(),i.Tb(23,"td"),i.Gc(24),i.Sb(),i.Sb(),i.Tb(25,"tr"),i.Tb(26,"td"),i.Gc(27,"Phone Number"),i.Sb(),i.Tb(28,"td"),i.Gc(29),i.Sb(),i.Sb(),i.Tb(30,"tr"),i.Tb(31,"td"),i.Gc(32,"Enabled"),i.Sb(),i.Tb(33,"td"),i.Pb(34,"i",29),i.Sb(),i.Sb(),i.Tb(35,"tr"),i.Tb(36,"td"),i.Gc(37,"Roles"),i.Sb(),i.Tb(38,"td"),i.Ec(39,g,2,1,"span",22),i.Sb(),i.Sb(),i.Sb(),i.Tb(40,"span"),i.Tb(41,"a",30),i.ec("click",function(){i.zc(n);var e=i.gc();return e.chageRole(e.user.id,"ROLE_USER")}),i.Gc(42," User "),i.Sb(),i.Tb(43,"a",30),i.ec("click",function(){i.zc(n);var e=i.gc();return e.chageRole(e.user.id,"ROLE_HOTEL_AGENT")}),i.Gc(44," Hotel Agent "),i.Sb(),i.Tb(45,"a",31),i.ec("click",function(){i.zc(n);var e=i.gc();return e.chageRole(e.user.id,"ROLE_HOTEL_ADMIN")}),i.Gc(46," Hotel Admin "),i.Sb(),i.Tb(47,"a",31),i.ec("click",function(){i.zc(n);var e=i.gc();return e.chageRole(e.user.id,"ROLE_AGENT")}),i.Gc(48," Agent "),i.Sb(),i.Tb(49,"button",32),i.ec("click",function(){i.zc(n);var e=i.gc();return e.activate(e.user.id)}),i.Pb(50,"i",33),i.Sb(),i.Tb(51,"button",34),i.ec("click",function(){return i.zc(n),i.gc().clear()}),i.Gc(52," Close "),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=i.gc();i.Bb(9),i.Hc(r.user.id),i.Bb(5),i.Hc(r.user.name),i.Bb(5),i.Hc(r.user.username),i.Bb(5),i.Hc(r.user.email),i.Bb(5),i.Hc(r.user.phoneNumber),i.Bb(5),i.oc("ngClass",r.user.enabled?"fa-check":"fa-times"),i.Bb(5),i.oc("ngForOf",r.user.roles),i.Bb(10),i.oc("ngClass",r.user.enabled?"btn-success":"btn-danger")}}function p(e,t){if(1&e&&(i.Tb(0,"span",38),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.oc("ngClass",t.index%2==0?"badge-success":"badge-info"),i.Bb(1),i.Ic(" ",n.name," ")}}function m(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Ec(3,p,2,2,"span",35),i.Sb(),i.Tb(4,"td"),i.Gc(5),i.Pb(6,"br"),i.Gc(7),i.Sb(),i.Tb(8,"td"),i.Gc(9),i.hc(10,"date"),i.Sb(),i.Tb(11,"td"),i.Gc(12),i.Sb(),i.Tb(13,"td"),i.Tb(14,"button",36),i.ec("click",function(){i.zc(n);var e=t.$implicit;return i.gc().onEdit(e.id)}),i.Pb(15,"i",37),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=t.$implicit;i.Bb(2),i.Ic(" ",r.name," "),i.Bb(1),i.oc("ngForOf",null==r?null:r.roles),i.Bb(2),i.Ic(" ",r.phoneNumber," "),i.Bb(2),i.Ic(" ",r.email," "),i.Bb(2),i.Hc(i.jc(10,6,r.created,"MMM d, y, h:mm:ss a")),i.Bb(3),i.Hc(r.enabled?"ACTIVE":"INACTIVE")}}function S(e,t){if(1&e){var n=i.Ub();i.Tb(0,"pagination",39),i.ec("getPage",function(e){i.zc(n);var t=i.gc();return t.getUserPage(t.userQuery,t.role,e)}),i.Sb()}if(2&e){var r=i.gc();i.oc("page",r.users)("short",r.short)}}var v=function(){function e(e){this.userService=e,this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage()},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),f(this,void 0,void 0,function(){var r=this;return d(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.users=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onRoleChange=function(e){this.role=e.length>0?e:null,this.getUserPage(this.userQuery,this.role)},e.prototype.chageRole=function(e,t){var n=this;this.userService.changeUserRole(e,t).pipe(Object(s.a)(1)).subscribe(function(e){n.users.content.splice(n.users.content.findIndex(function(t){return t.id===e.id}),1,e),n.user&&n.getUser(n.user.id)},function(e){return console.log("Role change failed",e)})},e.prototype.onEdit=function(e){var t=this.users.content.find(function(t){return t.id===e});this.user=t},e.prototype.activate=function(e){var t,n=this;t=this.user?!this.user.enabled:!this.users.content.find(function(t){return t.id===e}).enabled,this.userService.changeUserEnable(e,t).pipe(Object(s.a)(1)).subscribe(function(e){n.users.content.splice(n.users.content.findIndex(function(t){return t.id===e.id}),1,e),n.user&&n.getUser(n.user.id)},function(e){return console.log("Status change failed",e)})},e.prototype.getUser=function(e){return f(this,void 0,void 0,function(){var t=this;return d(this,function(n){switch(n.label){case 0:return[4,this.userService.getUer(e).subscribe(function(e){t.user=e})];case 1:return n.sent(),[2]}})})},e.prototype.clear=function(){this.user=null},e.\u0275fac=function(t){return new(t||e)(i.Ob(b.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-list"]],decls:50,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"pull-right"],[1,"form-control",3,"change"],["value","","selected",""],["value","User"],["value","Service Admin"],["value","Service Agent"],["value","Agent"],["value","Admin"],[1,"row","m-0"],["class","offset-md-3 col-md-6 p-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-hover","table-responsive-sm","shadow"],[1,"pl-3"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","short","getPage",4,"ngIf"],[1,"offset-md-3","col-md-6","p-2"],[1,"p-4","shadow"],[1,"text-center"],[1,"table"],[1,"fa",3,"ngClass"],[1,"btn","btn-info","btn-sm","raised","mr-1",3,"click"],[1,"btn","btn-success","btn-sm","raised","mr-1",3,"click"],[1,"btn","btn-sm","raised",3,"ngClass","click"],[1,"fa","fa-power-off"],[1,"btn","btn-sm","btn-danger","float-right",3,"click"],["class","badge badge-pill",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"badge","badge-pill",3,"ngClass"],[3,"page","short","getPage"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"span",1),i.Gc(2," All User "),i.Tb(3,"span",2),i.Tb(4,"select",3),i.ec("change",function(e){return t.onRoleChange(e.target.value)}),i.Tb(5,"option",4),i.Gc(6,"All"),i.Sb(),i.Tb(7,"option",5),i.Gc(8,"User"),i.Sb(),i.Tb(9,"option",6),i.Gc(10,"Hotel Admin"),i.Sb(),i.Tb(11,"option",7),i.Gc(12,"Hotel Agent"),i.Sb(),i.Tb(13,"option",8),i.Gc(14,"Agent"),i.Sb(),i.Tb(15,"option",9),i.Gc(16,"Admin "),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(17,"div",0),i.Tb(18,"div",10),i.Ec(19,h,53,8,"div",11),i.Sb(),i.Tb(20,"div",12),i.Tb(21,"div",13),i.Tb(22,"form",14),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(23,"div",15),i.Tb(24,"div",16),i.Tb(25,"div",17),i.Pb(26,"i",18),i.Gc(27,"\xa0 Search"),i.Sb(),i.Sb(),i.Tb(28,"input",19),i.ec("ngModelChange",function(e){return t.userQuery=e}),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(29,"div",10),i.Tb(30,"table",20),i.Tb(31,"thead"),i.Tb(32,"tr"),i.Tb(33,"th",21),i.Gc(34,"Name"),i.Sb(),i.Tb(35,"th"),i.Gc(36,"Phone "),i.Pb(37,"br"),i.Gc(38,"Email"),i.Sb(),i.Tb(39,"th"),i.Gc(40,"Registration time"),i.Sb(),i.Tb(41,"th"),i.Gc(42,"Staus"),i.Sb(),i.Pb(43,"th"),i.Sb(),i.Sb(),i.Tb(44,"tbody"),i.Ec(45,m,16,9,"tr",22),i.Sb(),i.Tb(46,"tfoot"),i.Tb(47,"tr"),i.Tb(48,"td",23),i.Ec(49,S,1,2,"pagination",24),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(19),i.oc("ngIf",t.user),i.Bb(9),i.oc("ngModel",t.userQuery),i.Bb(17),i.oc("ngForOf",null==t.users?null:t.users.content),i.Bb(4),i.oc("ngIf",null!=t.users))},directives:[u.q,u.w,a.p,u.x,u.n,u.o,u.b,u.m,u.p,a.o,a.n,l.a],pipes:[a.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),T=n("d26D"),y=function(e){return e.ROLE_ADMIN="Admin",e.ROLE_AGENT="Agent",e.ROLE_SERVICE_ADMIN="Service Admin",e.ROLE_SERVICE_AGENT="Service Agent",e.ROLE_USER="User",e}({});function P(e,t){if(1&e&&(i.Tb(0,"option",8),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.oc("value",n.key),i.Bb(1),i.Ic(" ",n.value," ")}}var G=function(e){return{disabled:e}};function w(e,t){if(1&e&&(i.Tb(0,"div",9),i.Tb(1,"button",10),i.Gc(2," Submit "),i.Sb(),i.Sb()),2&e){var n=i.gc();i.Bb(1),i.oc("ngClass",i.sc(1,G,n.form.invalid))}}var B=function(){function e(e){this.builder=e,this.role=new i.n,this.roleEnum=y}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.createForm=function(){this.form=this.builder.group({role:["",u.v.required]})},e.prototype.submit=function(){this.form.valid&&(this.role.emit(this.form.value),this.form.reset())},e.\u0275fac=function(t){return new(t||e)(i.Ob(u.d))},e.\u0275cmp=i.Ib({type:e,selectors:[["assign-user-form"]],inputs:{hotel:"hotel",user:"user"},outputs:{role:"role"},decls:18,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],[1,"form-control"],["for","role"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex flex-row-reverse bd-highlight",4,"ngIf"],[3,"value"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit","type","submit",1,"btn","btn-success","mx-1",3,"ngClass"]],template:function(e,t){1&e&&(i.Tb(0,"form",0),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(1,"div",1),i.Tb(2,"label",2),i.Gc(3,"Hotel Name *"),i.Sb(),i.Tb(4,"label",3),i.Gc(5),i.Sb(),i.Sb(),i.Tb(6,"div",1),i.Tb(7,"label",2),i.Gc(8,"User Name *"),i.Sb(),i.Tb(9,"label",3),i.Gc(10),i.Sb(),i.Sb(),i.Tb(11,"div",1),i.Tb(12,"label",4),i.Gc(13,"Role "),i.Sb(),i.Tb(14,"select",5),i.Ec(15,P,2,2,"option",6),i.hc(16,"keyvalue"),i.Sb(),i.Sb(),i.Ec(17,w,3,3,"div",7),i.Sb()),2&e&&(i.oc("formGroup",t.form),i.Bb(5),i.Ic(" ",null==t.hotel?null:t.hotel.name," "),i.Bb(5),i.Ic(" ",null==t.user?null:t.user.name," "),i.Bb(5),i.oc("ngForOf",i.ic(16,5,t.roleEnum)),i.Bb(2),i.oc("ngIf",(null==t.hotel?null:t.hotel.id)&&(null==t.user?null:t.user.id)))},directives:[u.x,u.n,u.g,u.u,u.m,u.f,a.o,a.p,u.q,u.w,a.n],pipes:[a.j],styles:[""]}),e}(),I=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},E=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function x(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",21),i.Tb(1,"div",22),i.Tb(2,"h4",7),i.Gc(3,"Assign user"),i.Sb(),i.Tb(4,"assign-user-form",23),i.ec("role",function(e){return i.zc(n),i.gc().onSaveRole(e)}),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=i.gc();i.Bb(4),i.oc("hotel",r.hotel)("user",r.user)}}function U(e,t){if(1&e&&(i.Tb(0,"span"),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Ic(" ",n.name," ")}}function O(e,t){if(1&e&&(i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Sb(),i.Tb(3,"td"),i.Gc(4),i.Sb(),i.Tb(5,"td"),i.Ec(6,U,2,1,"span",20),i.Sb(),i.Sb()),2&e){var n=t.$implicit;i.Bb(2),i.Ic(" ",n.name," "),i.Bb(2),i.Ic(" ",n.phoneNumber," "),i.Bb(2),i.oc("ngForOf",null==n?null:n.roles)}}function C(e,t){if(1&e&&(i.Tb(0,"div",24),i.Tb(1,"h3",7),i.Gc(2),i.Sb(),i.Tb(3,"table",14),i.Tb(4,"thead"),i.Tb(5,"tr"),i.Tb(6,"th"),i.Gc(7,"Name"),i.Sb(),i.Tb(8,"th"),i.Gc(9,"Phone, Email"),i.Sb(),i.Tb(10,"th"),i.Gc(11,"Staus"),i.Sb(),i.Sb(),i.Sb(),i.Tb(12,"tbody"),i.Ec(13,O,7,3,"tr",20),i.Sb(),i.Sb(),i.Sb()),2&e){var n=i.gc();i.Bb(2),i.Ic("",n.hotel.name," - User list"),i.Bb(11),i.oc("ngForOf",n.hotelUser)}}function A(e,t){if(1&e&&(i.Tb(0,"span",28),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.oc("ngClass",t.index%2==0?"badge-success":"badge-info"),i.Bb(1),i.Ic(" ",n.name," ")}}function N(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Pb(3,"br"),i.Ec(4,A,2,2,"span",25),i.Sb(),i.Tb(5,"td"),i.Gc(6),i.Pb(7,"br"),i.Gc(8),i.Sb(),i.Tb(9,"td"),i.Gc(10),i.Sb(),i.Tb(11,"td"),i.Tb(12,"button",26),i.ec("click",function(){i.zc(n);var e=t.$implicit;return i.gc(2).onSelectUser(e.id)}),i.Pb(13,"i",27),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=t.$implicit;i.Bb(2),i.Ic(" ",r.name," "),i.Bb(2),i.oc("ngForOf",null==r?null:r.roles),i.Bb(2),i.Ic(" ",r.phoneNumber," "),i.Bb(2),i.Ic(" ",r.email," "),i.Bb(2),i.Hc(r.enabled?"ACTIVE":"INACTIVE")}}function M(e,t){if(1&e&&(i.Tb(0,"tbody"),i.Ec(1,N,14,5,"tr",20),i.Sb()),2&e){var n=i.gc();i.Bb(1),i.oc("ngForOf",n.userPage.content)}}function k(e,t){if(1&e){var n=i.Ub();i.Tb(0,"pagination",29),i.ec("getPage",function(e){i.zc(n);var t=i.gc();return t.getUserPage(t.userQuery,t.role,e)}),i.Sb()}if(2&e){var r=i.gc();i.oc("page",r.userPage)("short",r.short)}}function H(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Sb(),i.Tb(3,"td"),i.Gc(4),i.Sb(),i.Tb(5,"td"),i.Gc(6),i.Sb(),i.Tb(7,"td"),i.Tb(8,"button",26),i.ec("click",function(){i.zc(n);var e=t.$implicit;return i.gc().onSelectHotel(e.id)}),i.Pb(9,"i",27),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=t.$implicit;i.Bb(2),i.Hc(r.name),i.Bb(2),i.Hc(r.phoneNumber),i.Bb(2),i.Hc(r.enabled)}}function R(e,t){if(1&e){var n=i.Ub();i.Tb(0,"pagination",29),i.ec("getPage",function(e){return i.zc(n),i.gc().getAdminHotelPage(e)}),i.Sb()}if(2&e){var r=i.gc();i.oc("page",r.hotelPage)("short",r.short)}}var F=function(){function e(e,t){this.hotelService=e,this.userService=t,this.loading=!1,this.short=!0}return e.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.getUserPage()},e.prototype.getAdminHotelPage=function(e){return void 0===e&&(e=0),I(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return localStorage.getItem("hotelId"),[4,this.hotelService.getAdminHotelPage(e,this.hotelName).subscribe(function(e){t.hotelPage=e})];case 1:return n.sent(),[2]}})})},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),I(this,void 0,void 0,function(){var r=this;return E(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.getAdminHotelUser=function(e){return I(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return[4,this.userService.getHotelUsers(e).subscribe(function(e){t.hotelUser=e})];case 1:return n.sent(),[2]}})})},e.prototype.onSelectUser=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onSelectHotel=function(e){var t=this.hotelPage.content.find(function(t){return t.id===e});this.hotel=t,this.getAdminHotelUser(e)},e.prototype.onSaveRole=function(e){this.userService.assignHotel(this.user.id,this.hotel.id,e.role).subscribe(function(e){console.log("Assign user success")})},e.\u0275fac=function(t){return new(t||e)(i.Ob(T.a),i.Ob(b.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-assign-user"]],decls:56,vars:8,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],["class","offset-md-3 col-md-4 p-2",4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border"],[4,"ngIf"],["colspan","4"],[3,"page","short","getPage",4,"ngIf"],[1,"form-group","mb-0"],["type","text","id","hotelName","name","hotelName","placeholder","Hotel name",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"offset-md-3","col-md-4","p-2"],[1,"p-4","shadow-sm"],[3,"hotel","user","role"],[1,"col-md-4"],["class","badge badge-pill",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"badge","badge-pill",3,"ngClass"],[3,"page","short","getPage"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"span",1),i.Gc(2," Assign User "),i.Sb(),i.Sb(),i.Tb(3,"div",0),i.Tb(4,"div",2),i.Ec(5,x,5,2,"div",3),i.Ec(6,C,14,2,"div",4),i.Sb(),i.Sb(),i.Tb(7,"div",0),i.Tb(8,"div",5),i.Tb(9,"div",6),i.Tb(10,"h3",7),i.Gc(11,"User list"),i.Sb(),i.Tb(12,"form",8),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(13,"div",9),i.Tb(14,"div",10),i.Tb(15,"div",11),i.Pb(16,"i",12),i.Gc(17,"\xa0 Search"),i.Sb(),i.Sb(),i.Tb(18,"input",13),i.ec("ngModelChange",function(e){return t.userQuery=e}),i.Sb(),i.Sb(),i.Sb(),i.Tb(19,"table",14),i.Tb(20,"thead"),i.Tb(21,"tr"),i.Tb(22,"th"),i.Gc(23,"Name"),i.Sb(),i.Tb(24,"th"),i.Gc(25,"Phone, Email"),i.Sb(),i.Tb(26,"th"),i.Gc(27,"Staus"),i.Sb(),i.Pb(28,"th"),i.Sb(),i.Sb(),i.Ec(29,M,2,1,"tbody",15),i.Tb(30,"tfoot"),i.Tb(31,"tr"),i.Tb(32,"td",16),i.Ec(33,k,1,2,"pagination",17),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(34,"div",6),i.Tb(35,"h3",7),i.Gc(36,"Hotel list"),i.Sb(),i.Tb(37,"form",8),i.ec("ngSubmit",function(){return t.getAdminHotelPage()}),i.Tb(38,"div",18),i.Tb(39,"input",19),i.ec("ngModelChange",function(e){return t.hotelName=e}),i.Sb(),i.Sb(),i.Sb(),i.Tb(40,"table",14),i.Tb(41,"thead"),i.Tb(42,"tr"),i.Tb(43,"th"),i.Gc(44,"Name"),i.Sb(),i.Tb(45,"th"),i.Gc(46,"Phone"),i.Sb(),i.Tb(47,"th"),i.Gc(48,"Enabled"),i.Sb(),i.Pb(49,"th"),i.Sb(),i.Sb(),i.Tb(50,"tbody"),i.Ec(51,H,10,3,"tr",20),i.Sb(),i.Tb(52,"tfoot"),i.Tb(53,"tr"),i.Tb(54,"td",16),i.Ec(55,R,1,2,"pagination",17),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(5),i.oc("ngIf",t.user||t.hotel),i.Bb(1),i.oc("ngIf",t.hotelUser),i.Bb(12),i.oc("ngModel",t.userQuery),i.Bb(11),i.oc("ngIf",t.userPage),i.Bb(4),i.oc("ngIf",null!=t.userPage),i.Bb(6),i.oc("ngModel",t.hotelName),i.Bb(12),i.oc("ngForOf",null==t.hotelPage?null:t.hotelPage.content),i.Bb(4),i.oc("ngIf",null!=t.hotelPage))},directives:[a.p,u.x,u.n,u.o,u.b,u.m,u.p,a.o,B,a.n,l.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Q(e,t){1&e&&(i.Tb(0,"small",16),i.Gc(1," Name required "),i.Sb())}function z(e,t){if(1&e&&(i.Tb(0,"small",16),i.Tb(1,"div",17),i.Gc(2," Phone number required "),i.Sb(),i.Tb(3,"div",17),i.Gc(4," Phone number format 01934953023 "),i.Sb(),i.Sb()),2&e){var n=i.gc();i.Bb(1),i.oc("hidden",!n.form.controls.phoneNumber.errors.required),i.Bb(2),i.oc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}function $(e,t){1&e&&(i.Tb(0,"small",16),i.Gc(1," Commission Percent required "),i.Sb())}function L(e,t){if(1&e){var n=i.Ub();i.Tb(0,"button",18),i.ec("click",function(){i.zc(n);var e=i.gc();return e.onRemoveAgent(e.user.id)}),i.Gc(1," Remove this agent "),i.Sb()}}var q=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},j=function(){function e(e){this.builder=e,this.create=new i.n,this.removeAgent=new i.n,this.exists=!1,this.createForm()}return e.prototype.ngOnChanges=function(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(_({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commissionPercent:this.user.commissionPercent})))},e.prototype.createForm=function(){this.form=this.builder.group({name:["",u.v.required],phoneNumber:["",[u.v.required,u.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commissionPercent:["",u.v.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.exists){var e=_(_({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}},e.prototype.onRemoveAgent=function(e){this.removeAgent.emit(e),this.onClear()},e.prototype.onClear=function(){this.form.reset(),this.exists=!1},e.\u0275fac=function(t){return new(t||e)(i.Ob(u.d))},e.\u0275cmp=i.Ib({type:e,selectors:[["admin-agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[i.zb],decls:27,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commissionPercent"],["id","commissionPercent","placeholder","Commission Percent","formControlName","commissionPercent",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"form",0),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(1,"div",1),i.Tb(2,"div",2),i.Tb(3,"label",3),i.Gc(4,"Name *"),i.Sb(),i.Pb(5,"input",4),i.Ec(6,Q,2,0,"small",5),i.Sb(),i.Tb(7,"div",2),i.Tb(8,"label",6),i.Gc(9,"Phone *"),i.Sb(),i.Pb(10,"input",7),i.Ec(11,z,5,2,"small",5),i.Sb(),i.Tb(12,"div",2),i.Tb(13,"label",8),i.Gc(14,"Email"),i.Sb(),i.Pb(15,"input",9),i.Sb(),i.Tb(16,"div",2),i.Tb(17,"label",10),i.Gc(18,"Commission Percent *"),i.Sb(),i.Pb(19,"input",11),i.Ec(20,$,2,0,"small",5),i.Sb(),i.Sb(),i.Tb(21,"div",12),i.Tb(22,"button",13),i.Gc(23),i.Sb(),i.Ec(24,L,2,0,"button",14),i.Tb(25,"button",15),i.ec("click",function(){return t.onClear()}),i.Gc(26," Clear "),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.oc("formGroup",t.form),i.Bb(6),i.oc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),i.Bb(5),i.oc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),i.Bb(9),i.oc("ngIf",t.form.controls.commissionPercent.errors&&t.form.controls.commissionPercent.touched),i.Bb(2),i.oc("ngClass",i.uc(7,q,t.form.invalid,t.exists,!t.exists)),i.Bb(1),i.Ic(" ",t.exists?"Update":"Create"," User "),i.Bb(1),i.oc("ngIf",t.exists))},directives:[u.x,u.n,u.g,u.b,u.m,u.f,a.p,u.j,a.n],styles:[""]}),e}(),V=n("HF3I"),D=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},X=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function J(e,t){1&e&&i.Pb(0,"loading")}function K(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Sb(),i.Tb(3,"td"),i.Gc(4),i.Sb(),i.Tb(5,"td"),i.Gc(6),i.Sb(),i.Tb(7,"td"),i.Gc(8),i.Sb(),i.Tb(9,"td"),i.Tb(10,"button",18),i.ec("click",function(){i.zc(n);var e=t.$implicit;return i.gc(2).onSelect(e.id)}),i.Pb(11,"i",19),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=t.$implicit;i.Bb(2),i.Hc(r.name),i.Bb(2),i.Hc(r.phoneNumber),i.Bb(2),i.Hc(r.commissionPercent),i.Bb(2),i.Hc(r.email)}}function W(e,t){if(1&e){var n=i.Ub();i.Tb(0,"table",14),i.Tb(1,"thead"),i.Tb(2,"tr"),i.Tb(3,"th"),i.Gc(4,"Name"),i.Sb(),i.Tb(5,"th"),i.Gc(6,"Phone"),i.Sb(),i.Tb(7,"th"),i.Gc(8,"Commission Percent"),i.Sb(),i.Tb(9,"th"),i.Gc(10,"Email"),i.Sb(),i.Pb(11,"th"),i.Sb(),i.Sb(),i.Tb(12,"tbody"),i.Ec(13,K,12,4,"tr",15),i.Sb(),i.Tb(14,"tfoot"),i.Tb(15,"tr"),i.Tb(16,"td",16),i.Tb(17,"pagination",17),i.ec("getPage",function(e){return i.zc(n),i.gc().getUserPage(e)}),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=i.gc();i.Bb(13),i.oc("ngForOf",null==r.userPage?null:r.userPage.content),i.Bb(4),i.oc("page",r.userPage)}}var Z=function(){function e(e){this.userService=e,this.role="Agent",this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),D(this,void 0,void 0,function(){var r=this;return X(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onCreate=function(e){return D(this,void 0,void 0,function(){var t=this;return X(this,function(n){switch(n.label){case 0:return[4,this.userService.createAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery,t.role)})];case 1:return n.sent(),[2]}})})},e.prototype.onSelect=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onRemoveAgent=function(e){return D(this,void 0,void 0,function(){var t=this;return X(this,function(n){switch(n.label){case 0:return console.log("On leave ",e),[4,this.userService.removeAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery,t.role)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Ob(b.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-admin-agent"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","table border",4,"ngIf"],[3,"user","create","removeAgent"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","getPage"],[1,"btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil-square-o"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"span",1),i.Gc(2,"Agents"),i.Sb(),i.Sb(),i.Tb(3,"div",0),i.Tb(4,"div",2),i.Tb(5,"div",3),i.Tb(6,"h3",4),i.Gc(7,"Agent list"),i.Sb(),i.Tb(8,"form",5),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(9,"div",6),i.Tb(10,"div",7),i.Tb(11,"div",8),i.Pb(12,"i",9),i.Gc(13,"\xa0 Search"),i.Sb(),i.Sb(),i.Tb(14,"input",10),i.ec("ngModelChange",function(e){return t.userQuery=e}),i.Sb(),i.Sb(),i.Sb(),i.Ec(15,J,1,0,"loading",11),i.Ec(16,W,18,2,"table",12),i.Sb(),i.Tb(17,"div",3),i.Tb(18,"h3",4),i.Gc(19,"Add Agent"),i.Sb(),i.Tb(20,"admin-agent-form",13),i.ec("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Bb(14),i.oc("ngModel",t.userQuery),i.Bb(1),i.oc("ngIf",t.loading),i.Bb(1),i.oc("ngIf",!t.loading),i.Bb(4),i.oc("user",t.user))},directives:[u.x,u.n,u.o,u.b,u.m,u.p,a.p,j,V.a,a.o,l.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),Y=n("WGvi"),ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},te=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},ne=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function re(e,t){1&e&&i.Pb(0,"loading")}function oe(e,t){if(1&e&&(i.Tb(0,"span"),i.Gc(1),i.Sb()),2&e){var n=t.$implicit;i.Bb(1),i.Ic(" ",n.name," ")}}function ie(e,t){if(1&e){var n=i.Ub();i.Tb(0,"tr"),i.Tb(1,"td"),i.Gc(2),i.Sb(),i.Tb(3,"td"),i.Gc(4),i.Sb(),i.Tb(5,"td"),i.Gc(6),i.Sb(),i.Tb(7,"td"),i.Ec(8,oe,2,1,"span",16),i.Sb(),i.Tb(9,"td",17),i.Tb(10,"button",18),i.ec("click",function(){i.zc(n);var e=t.$implicit;return i.gc(2).onEdit(e.id)}),i.Pb(11,"i",19),i.Sb(),i.Sb(),i.Sb()}if(2&e){var r=t.$implicit;i.Bb(2),i.Hc(r.name),i.Bb(2),i.Hc(r.phoneNumber),i.Bb(2),i.Hc(r.email),i.Bb(2),i.oc("ngForOf",null==r?null:r.roles)}}function ce(e,t){if(1&e&&(i.Tb(0,"tbody"),i.Ec(1,ie,12,4,"tr",16),i.Sb()),2&e){var n=i.gc();i.Bb(1),i.oc("ngForOf",n.userPage.content)}}function be(e,t){if(1&e){var n=i.Ub();i.Tb(0,"pagination",20),i.ec("getPage",function(e){i.zc(n);var t=i.gc();return t.getUserPage(t.userQuery,t.role,e)}),i.Sb()}if(2&e){var r=i.gc();i.oc("page",r.userPage)}}function se(e,t){if(1&e){var n=i.Ub();i.Tb(0,"div",3),i.Tb(1,"change-password-form",21),i.ec("create",function(e){return i.zc(n),i.gc().onChangePassword(e)}),i.Sb(),i.Sb()}if(2&e){var r=i.gc();i.Bb(1),i.oc("user",r.user)}}function ue(e,t){1&e&&(i.Tb(0,"div",3),i.Tb(1,"div",22),i.Gc(2," Congratulation! Password changed successfully "),i.Sb(),i.Sb())}var ae=[{path:"add",component:c},{path:"assign",component:F},{path:"admin-agent",component:Z},{path:"change-password",component:function(){function e(e){this.userService=e,this.loading=!1,this.successMessage=!1}return e.prototype.ngOnInit=function(){this.getUserPage()},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),te(this,void 0,void 0,function(){var r=this;return ne(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onEdit=function(e){this.successMessage=!1;var t=this.userPage.content.find(function(t){return t.id===e});this.user=ee({},t)},e.prototype.onChangePassword=function(e){return te(this,void 0,void 0,function(){var t=this;return ne(this,function(n){switch(n.label){case 0:return console.log(e.id,e.password),[4,this.userService.changeUserPasswordByAdmin(e.id,e.password).subscribe(function(e){t.user=null,t.successMessage=!0,console.log(e)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Ob(b.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-change-password"]],decls:35,vars:6,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[4,"ngIf"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border","table-responsive-sm"],["colspan","5"],[3,"page","getPage",4,"ngIf"],["class","col-md-6",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[3,"page","getPage"],[3,"user","create"],["role","alert",1,"alert","alert-success"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"span",1),i.Gc(2," Change password "),i.Sb(),i.Sb(),i.Tb(3,"div",0),i.Tb(4,"div",2),i.Tb(5,"div",3),i.Tb(6,"h3",4),i.Gc(7,"User List"),i.Sb(),i.Ec(8,re,1,0,"loading",5),i.Tb(9,"form",6),i.ec("ngSubmit",function(){return t.submit()}),i.Tb(10,"div",7),i.Tb(11,"div",8),i.Tb(12,"div",9),i.Pb(13,"i",10),i.Gc(14,"\xa0 Search"),i.Sb(),i.Sb(),i.Tb(15,"input",11),i.ec("ngModelChange",function(e){return t.userQuery=e}),i.Sb(),i.Sb(),i.Sb(),i.Tb(16,"table",12),i.Tb(17,"thead"),i.Tb(18,"tr"),i.Tb(19,"th"),i.Gc(20,"Name"),i.Sb(),i.Tb(21,"th"),i.Gc(22,"Phone"),i.Sb(),i.Tb(23,"th"),i.Gc(24,"Email"),i.Sb(),i.Tb(25,"th"),i.Gc(26,"Role"),i.Sb(),i.Pb(27,"th"),i.Sb(),i.Sb(),i.Ec(28,ce,2,1,"tbody",5),i.Tb(29,"tfoot"),i.Tb(30,"tr"),i.Tb(31,"td",13),i.Ec(32,be,1,1,"pagination",14),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Ec(33,se,2,1,"div",15),i.Ec(34,ue,3,0,"div",15),i.Sb(),i.Sb()),2&e&&(i.Bb(8),i.oc("ngIf",t.loading),i.Bb(7),i.oc("ngModel",t.userQuery),i.Bb(13),i.oc("ngIf",(null==t.userPage?null:t.userPage.content.length)>0),i.Bb(4),i.oc("ngIf",null!=t.userPage),i.Bb(1),i.oc("ngIf",t.user),i.Bb(1),i.oc("ngIf",t.successMessage))},directives:[a.p,u.x,u.n,u.o,u.b,u.m,u.p,V.a,a.o,l.a,Y.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}()},{path:"",component:v}],le=function(){function e(){}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(ae)]]}),e}()}}]);