(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"5ya6":function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return vt}),n.d(e,"ServiceAgentModule",function(){return Pt});var o=n("iInd"),i=n("KZX/"),r=n("haEQ"),c=n("8Y7J"),a=n("SVse"),b=n("HF3I"),l=n("uEz7");function s(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Qb(6,"td"),c.Fc(7),c.Pb(),c.Qb(8,"td"),c.Fc(9),c.Pb(),c.Qb(10,"td",7),c.Fc(11),c.ec(12,"currency"),c.Pb(),c.Pb()),2&t){var n=e.$implicit;c.zb(2),c.Gc(c.gc(3,5,n.date,"MMM d, y, h:mm:ss a")),c.zb(3),c.Gc(n.explanation),c.zb(2),c.Gc(n.debit),c.zb(2),c.Gc(n.credit),c.zb(2),c.Hc(" ",c.ic(12,8,n.balance,"BDT ","symbol","4.2-2")," ")}}function u(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,s,13,13,"tr",11),c.Pb()),2&t){var n=c.dc(2);c.zb(1),c.lc("ngForOf",n.hotelAgentLedgerPage.content)}}function d(t,e){1&t&&(c.Qb(0,"tr"),c.Qb(1,"td",9),c.Mb(2,"loading"),c.Pb(),c.Pb())}function g(t,e){if(1&t){var n=c.Rb();c.Qb(0,"pagination",12),c.bc("getPage",function(t){return c.wc(n),c.dc(2).getMyLedger(t)}),c.Pb()}if(2&t){var o=c.dc(2);c.lc("page",o.hotelAgentLedgerPage)}}function f(t,e){if(1&t&&(c.Qb(0,"div",5),c.Qb(1,"table",6),c.Qb(2,"thead"),c.Qb(3,"tr"),c.Qb(4,"th"),c.Fc(5,"Date"),c.Pb(),c.Qb(6,"th"),c.Fc(7,"Explanation"),c.Pb(),c.Qb(8,"th"),c.Fc(9,"Debit"),c.Pb(),c.Qb(10,"th"),c.Fc(11,"Credit"),c.Pb(),c.Qb(12,"th",7),c.Fc(13,"Balance"),c.Pb(),c.Pb(),c.Pb(),c.Dc(14,u,2,1,"tbody",8),c.Qb(15,"tfoot"),c.Dc(16,d,3,0,"tr",8),c.Qb(17,"tr"),c.Qb(18,"td",9),c.Dc(19,g,1,1,"pagination",10),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(14),c.lc("ngIf",n.hotelAgentLedgerPage),c.zb(2),c.lc("ngIf",n.loading),c.zb(3),c.lc("ngIf",null!=n.hotelAgentLedgerPage)}}var h=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyLedger()},t.prototype.getMyLedger=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){return this.accountingService.getServiceAgentMyLedger(t).subscribe(function(t){e.hotelAgentLedgerPage=t}),[2]})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.\u0275fac=function(e){return new(e||t)(c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-hotel-agent-ledger"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"table","border","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngIf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"page","getPage"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"My ledger"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Dc(5,f,20,3,"div",4),c.Pb(),c.Pb()),2&t&&(c.zb(5),c.lc("ngIf",(null==e.hotelAgentLedgerPage||null==e.hotelAgentLedgerPage.content?null:e.hotelAgentLedgerPage.content.length)>0))},directives:[a.q,a.p,b.a,l.a],pipes:[a.f,a.d],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),p=n("/e7+"),m=n("FJeW"),v=n("Sa+r"),P=n("ITiG"),Q=n("0sMf"),y=n("yBZE"),k=n("53Co");function F(t,e){if(1&t){var n=c.Rb();c.Qb(0,"span"),c.Qb(1,"button",13),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc(2).onSelectCategory(t)}),c.Fc(2),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit,i=c.dc(2);c.zb(1),c.lc("ngClass",o==i.category?"btn-primary":"btn-secondary"),c.zb(1),c.Hc(" ",o," ")}}var D=function(t){return{disabled:t}};function M(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",14),c.Qb(1,"div",15),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc(2).onRoomSelect(t.id,t.available)}),c.Fc(2),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit;c.zb(1),c.lc("ngClass",c.pc(2,D,!o.available)),c.zb(1),c.Hc(" ",o.roomNumber," ")}}function w(t,e){if(1&t&&(c.Qb(0,"div"),c.Qb(1,"div",10),c.Dc(2,F,3,2,"span",11),c.Pb(),c.Qb(3,"div",1),c.Dc(4,M,3,4,"div",12),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(2),c.lc("ngForOf",n.categoryList),c.zb(2),c.lc("ngForOf",n.filteredRoomList)}}function S(t,e){if(1&t&&c.Mb(0,"loading",16),2&t){var n=c.dc();c.lc("message",n.message)}}var z=function(){function t(t,e){this.roomService=t,this.util=e,this.roomSelected=new c.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges()},t.prototype.ngOnChanges=function(t){t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.getAvailableRoom()},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1},this.getAvailableRoom()},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAvailableRoom()},t.prototype.getAvailableRoom=function(t){return void 0===t&&(t=null),e=this,void 0,o=function(){var e,n,o=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(i){switch(i.label){case 0:return e=this.util.getDateString(this.daterange.checkinDate),n=this.util.getDateString(this.daterange.checkoutDate),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getServiceAgentAvailableRoomListByHotelId(e,n,t).subscribe(function(t){o.showRoomListLoading=!1,o.roomList=t,o.filteredRoomList=t,o.category="All",o.categoryList=["All"],o.roomList.forEach(function(t){o.categoryList.includes(t.category.name)||o.categoryList.push(t.category.name)})})];case 1:return i.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onRoomSelect=function(t,e){if(e){var n={room:this.roomList.find(function(e){return e.id===t}),checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(n)}},t.\u0275fac=function(e){return new(e||t)(c.Lb(y.a),c.Lb(p.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["service-agent-room-list"]],inputs:{reloadRoomList:"reloadRoomList"},outputs:{roomSelected:"roomSelected"},features:[c.xb],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"row","mt-1"],[4,"ngFor","ngForOf"],["class","col-3 col-md-2 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-3","col-md-2","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"div",4),c.Qb(5,"div",5),c.Mb(6,"i",6),c.Pb(),c.Pb(),c.Qb(7,"input",7),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Dc(8,w,5,2,"div",8),c.Dc(9,S,1,1,"ng-template",null,9,c.Ec),c.Pb()),2&t){var n=c.vc(10);c.zb(7),c.lc("options",e.options),c.zb(1),c.lc("ngIf",!e.showRoomListLoading)("ngIfElse",n)}},directives:[k.b,a.q,a.p,a.o,b.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 0 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}(),B=n("s7LF");function x(t,e){1&t&&(c.Qb(0,"small",12),c.Fc(1," Name required "),c.Pb())}function I(t,e){if(1&t&&(c.Qb(0,"small",12),c.Qb(1,"div",13),c.Fc(2," Phone number required "),c.Pb(),c.Qb(3,"div",13),c.Fc(4," Phone number format 01934953023 "),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(1),c.lc("hidden",!n.form.controls.phoneNumber.errors.required),c.zb(2),c.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var C=function(t){return{disabled:t}},L=function(){function t(t){this.builder=t,this.user=new c.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",B.v.required],phoneNumber:["",[B.v.required,B.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(e){return new(e||t)(c.Lb(B.d))},t.\u0275cmp=c.Fb({type:t,selectors:[["sell-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(c.Qb(0,"h4"),c.Fc(1,"User Info"),c.Pb(),c.Qb(2,"form",0),c.bc("ngSubmit",function(){return e.submit()}),c.Qb(3,"div",1),c.Qb(4,"div",2),c.Qb(5,"label",3),c.Fc(6,"Name *"),c.Pb(),c.Mb(7,"input",4),c.Dc(8,x,2,0,"small",5),c.Pb(),c.Qb(9,"div",2),c.Qb(10,"label",6),c.Fc(11,"Phone *"),c.Pb(),c.Mb(12,"input",7),c.Dc(13,I,5,2,"small",5),c.Pb(),c.Qb(14,"div",2),c.Qb(15,"label",8),c.Fc(16,"Email"),c.Pb(),c.Mb(17,"input",9),c.Pb(),c.Pb(),c.Qb(18,"div",10),c.Qb(19,"button",11),c.Fc(20," Submit "),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(2),c.lc("formGroup",e.form),c.zb(6),c.lc("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),c.zb(5),c.lc("ngIf",e.form.controls.phoneNumber.errors&&e.form.controls.phoneNumber.touched),c.zb(6),c.lc("ngClass",c.pc(4,C,e.form.invalid)))},directives:[B.x,B.n,B.g,B.b,B.m,B.f,a.q,B.j,a.o],styles:[""]}),t}(),R=function(){return(R=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function A(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",9),c.Qb(1,"h4",10),c.Fc(2),c.Qb(3,"button",11),c.bc("click",function(){return c.wc(n),c.dc().clear()}),c.Fc(4," clear "),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(2),c.Hc(" ",o.errorMessage," ")}}function O(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div",12),c.Qb(1,"h4",10),c.Fc(2),c.Qb(3,"button",11),c.bc("click",function(){return c.wc(n),c.dc().clear()}),c.Fc(4," clear "),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=c.dc();c.zb(2),c.Hc(" ",o.message," ")}}function G(t,e){1&t&&(c.Qb(0,"th",30),c.Fc(1,"Commission"),c.Pb())}function H(t,e){if(1&t){var n=c.Rb();c.Qb(0,"td"),c.Qb(1,"input",38),c.bc("ngModelChange",function(t){return c.wc(n),c.dc().$implicit.commission=t}),c.Pb(),c.Pb()}if(2&t){var o=c.dc().$implicit;c.zb(1),c.lc("ngModel",o.commission)}}function T(t,e){if(1&t){var n=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td",30),c.Fc(6),c.Pb(),c.Qb(7,"td",30),c.Fc(8),c.Pb(),c.Qb(9,"td",30),c.Fc(10),c.Pb(),c.Qb(11,"td",30),c.Qb(12,"input",35),c.bc("ngModelChange",function(t){return c.wc(n),e.$implicit.advance=t})("keyup",function(){c.wc(n);var t=e.index;return c.dc(2).updateSubBooking(t)}),c.Pb(),c.Pb(),c.Qb(13,"td",30),c.Fc(14),c.Pb(),c.Dc(15,H,2,1,"td",8),c.Qb(16,"td"),c.Qb(17,"button",36),c.bc("click",function(){c.wc(n);var t=e.index;return c.dc(2).onRemove(t)}),c.Mb(18,"i",37),c.Pb(),c.Pb(),c.Pb()}if(2&t){var o=e.$implicit,i=c.dc(2);c.zb(2),c.Gc(o.date),c.zb(2),c.Gc("N/A"==o.room.roomNumber?o.room.category.name:o.room.roomNumber),c.zb(2),c.Gc(o.room.price),c.zb(2),c.Gc(o.room.discount),c.zb(2),c.Hc("",o.room.price-o.discount," BDT"),c.zb(2),c.lc("ngModel",o.advance),c.zb(2),c.Hc("",null==o?null:o.due," BDT"),c.zb(1),c.lc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function N(t,e){1&t&&c.Mb(0,"td")}function E(t,e){1&t&&c.Mb(0,"td")}function _(t,e){1&t&&c.Mb(0,"td")}function $(t,e){if(1&t){var n=c.Rb();c.Qb(0,"sell-form",39),c.bc("user",function(t){return c.wc(n),c.dc(2).onCreateUser(t)}),c.Pb()}}function q(t,e){if(1&t){var n=c.Rb();c.Qb(0,"div"),c.Qb(1,"h3",10),c.Fc(2,"New Booking"),c.Pb(),c.Qb(3,"div",13),c.Qb(4,"div",14),c.Qb(5,"input",15),c.bc("ngModelChange",function(t){return c.wc(n),c.dc().sendHotelSMS=t}),c.Pb(),c.Qb(6,"label",16),c.Fc(7,"Send Hotel SMS"),c.Pb(),c.Pb(),c.Qb(8,"div",17),c.Qb(9,"input",18),c.bc("ngModelChange",function(t){return c.wc(n),c.dc().sendCustomerSMS=t}),c.Pb(),c.Qb(10,"label",19),c.Fc(11,"Send Guest SMS"),c.Pb(),c.Pb(),c.Qb(12,"div",20),c.Qb(13,"input",21),c.bc("ngModelChange",function(t){return c.wc(n),c.dc().changeSimilar=t}),c.Pb(),c.Qb(14,"label",22),c.Fc(15," Auto Change Similar Category "),c.Pb(),c.Pb(),c.Qb(16,"div",23),c.Qb(17,"div",24),c.Qb(18,"span",25),c.Fc(19,"Ref. By"),c.Pb(),c.Pb(),c.Qb(20,"input",26),c.bc("ngModelChange",function(t){return c.wc(n),c.dc().refBy=t}),c.Pb(),c.Pb(),c.Pb(),c.Qb(21,"div",27),c.Qb(22,"div",28),c.Qb(23,"h5"),c.Fc(24,"Booking List"),c.Pb(),c.Pb(),c.Pb(),c.Qb(25,"table",29),c.Qb(26,"thead"),c.Qb(27,"tr"),c.Qb(28,"th"),c.Fc(29,"Date"),c.Pb(),c.Qb(30,"th"),c.Fc(31,"Room No."),c.Pb(),c.Qb(32,"th",30),c.Fc(33,"Per night"),c.Pb(),c.Qb(34,"th",30),c.Fc(35,"Discount"),c.Pb(),c.Qb(36,"th",30),c.Fc(37,"Payable"),c.Pb(),c.Qb(38,"th",30),c.Fc(39,"Advance"),c.Pb(),c.Qb(40,"th",30),c.Fc(41,"Due"),c.Pb(),c.Dc(42,G,2,0,"th",31),c.Mb(43,"th"),c.Pb(),c.Pb(),c.Qb(44,"tbody"),c.Dc(45,T,19,8,"tr",32),c.Pb(),c.Qb(46,"tfoot"),c.Qb(47,"tr"),c.Qb(48,"th",33),c.Fc(49,"Total"),c.Pb(),c.Qb(50,"th",30),c.Fc(51),c.Pb(),c.Mb(52,"td"),c.Dc(53,N,1,0,"td",8),c.Pb(),c.Qb(54,"tr"),c.Qb(55,"th",33),c.Fc(56,"Total Advance"),c.Pb(),c.Qb(57,"th",30),c.Fc(58),c.Pb(),c.Mb(59,"td"),c.Dc(60,E,1,0,"td",8),c.Pb(),c.Qb(61,"tr"),c.Qb(62,"th",33),c.Fc(63,"Total due"),c.Pb(),c.Qb(64,"th",30),c.Fc(65),c.Pb(),c.Mb(66,"td"),c.Dc(67,_,1,0,"td",8),c.Pb(),c.Pb(),c.Pb(),c.Dc(68,$,1,0,"sell-form",34),c.Pb()}if(2&t){var o=c.dc();c.zb(5),c.lc("ngModel",o.sendHotelSMS),c.zb(4),c.lc("ngModel",o.sendCustomerSMS),c.zb(4),c.lc("ngModel",o.changeSimilar),c.zb(7),c.lc("ngModel",o.refBy),c.zb(22),c.lc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.zb(3),c.lc("ngForOf",o.subBookings),c.zb(6),c.Hc("",null==o.booking?null:o.booking.total," BDT"),c.zb(2),c.lc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.zb(5),c.Hc("",null==o.booking?null:o.booking.totalAdvance," BDT"),c.zb(2),c.lc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.zb(5),c.Hc("",null==o.booking?null:o.booking.totalDue," BDT"),c.zb(2),c.lc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.zb(1),c.lc("ngIf",!o.sendingInfo)}}var j=function(){function t(t,e,n,o){this.utilService=t,this.userService=e,this.bookingService=n,this.router=o,this.subBookings=[],this.refBy="",this.message="",this.errorMessage="",this.sendingInfo=!1,this.reloadRoomList=!1,this.changeSimilar=!0,this.sendCustomerSMS=!0,this.sendHotelSMS=!1}return t.prototype.ngOnInit=function(){this.subBookings=[],this.booking={total:0,totalAdvance:0,totalDue:0}},t.prototype.onRoomSelect=function(t){var e=this;this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(n){var o=new m.a(n,t.room);o.room.discount>0&&(o.discount=o.room.discount),e.isContain(o)||(e.subBookings.push(o),e.updateSubBooking(e.subBookings.length-1),e.subBookings.sort(e.utilService.dynamicSortObject("date")),e.subBookings.sort(e.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.isContain=function(t){return this.subBookings.find(function(e){return e.room.id===t.room.id&&e.date===t.date})},t.prototype.onCreateUser=function(t){var e=R({id:0},t);console.log(e),this.createBooking(e)},t.prototype.onRemove=function(t){this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.createBooking=function(t){var e=this,n=new v.a(t,this.subBookings),o=R({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,sendCustomerSMS:this.sendCustomerSMS,sendHotelSMS:this.sendHotelSMS,refBy:this.refBy},n);this.message="generating booking",this.sendingInfo=!0,this.bookingService.createServiceAgentBooking(o).subscribe(function(t){e.message="Booking complete, Thank you.",e.sendingInfo=!1,e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])},function(t){e.errorMessage="Booking error",e.message="",console.log("Booking error")})},t.prototype.updateSubBooking=function(t){var e=this.subBookings[t];e.payablePrice=e.room.price-e.discount,e.due=e.payablePrice-e.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var e=0,n=0,o=0;if(this.changeSimilar){var i=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==i.room.category.id&&(t.discount=i.discount,t.advance=i.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){e+=t.payablePrice,n+=t.advance,o+=t.due}),this.booking.total=e,this.booking.totalAdvance=n,this.booking.totalDue=o},t.prototype.clear=function(){this.message="",this.errorMessage="",this.ngOnInit()},t.\u0275fac=function(e){return new(e||t)(c.Lb(p.a),c.Lb(P.a),c.Lb(Q.a),c.Lb(o.b))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-sell-room"]],decls:11,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-4"],[3,"reloadRoomList","roomSelected"],[1,"col-md-8"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"text-center"],[1,"btn","btn-sm","btn-warning",3,"click"],["role","alert",1,"alert","alert-success"],[1,"form-inline"],[1,"form-group","form-check"],["type","checkbox","id","sendHotelSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendHotelSMS",1,"form-check-label"],[1,"form-group","form-check","mx-md-4"],["type","checkbox","id","sendCustomerSMS",1,"form-check-input",3,"ngModel","ngModelChange"],["for","sendCustomerSMS",1,"form-check-label"],[1,"form-check"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"ml-auto","input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","id","refBy",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],[1,"table","mb-4","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right"],[3,"user",4,"ngIf"],["type","number","name","advance",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange"],[3,"user"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Sell Room"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"service-agent-room-list",4),c.bc("roomSelected",function(t){return e.onRoomSelect(t)}),c.Pb(),c.Pb(),c.Qb(7,"div",5),c.Dc(8,A,5,1,"div",6),c.Dc(9,O,5,1,"div",7),c.Dc(10,q,69,13,"div",8),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(6),c.lc("reloadRoomList",e.reloadRoomList),c.zb(2),c.lc("ngIf",e.errorMessage.length>0),c.zb(1),c.lc("ngIf",e.message.length>0),c.zb(1),c.lc("ngIf",e.subBookings.length>0&&!e.sendingInfo))},directives:[z,a.q,B.a,B.m,B.p,B.b,a.p,B.r,L],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),J=function(){return(J=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},U=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},Y=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function X(t,e){if(1&t){var n=c.Rb();c.Qb(0,"a",11),c.bc("click",function(){c.wc(n);var t=e.$implicit;return c.dc(2).onSelectBooking(t.id)}),c.Mb(1,"i",12),c.Fc(2),c.ec(3,"date"),c.Pb()}if(2&t){var o=e.$implicit;c.zb(2),c.Jc(" ",o.id,". ",o.user.name," [",c.gc(3,3,null==o?null:o.created,"d MMM,yy"),"] ")}}function Z(t,e){if(1&t&&(c.Qb(0,"ul",9),c.Qb(1,"li",6),c.Qb(2,"h5"),c.Fc(3,"My Bookings"),c.Pb(),c.Qb(4,"small"),c.Fc(5,"Choose a booking from below list"),c.Pb(),c.Pb(),c.Dc(6,X,4,6,"a",10),c.Pb()),2&t){var n=c.dc();c.zb(6),c.lc("ngForOf",null==n.bookingPage?null:n.bookingPage.content)}}function K(t,e){if(1&t){var n=c.Rb();c.Qb(0,"pagination",13),c.bc("getPage",function(t){return c.wc(n),c.dc().onSelectBooking(t)}),c.Pb()}if(2&t){var o=c.dc();c.lc("page",o.bookingPage)("short",o.short)}}function V(t,e){1&t&&(c.Qb(0,"th",19),c.Fc(1," Commi. "),c.Pb())}function W(t,e){if(1&t&&(c.Qb(0,"td",19),c.Fc(1),c.Pb()),2&t){var n=c.dc().$implicit;c.zb(1),c.Hc(" ",n.commission," ")}}function tt(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.ec(3,"date"),c.Pb(),c.Qb(4,"td"),c.Fc(5),c.Pb(),c.Qb(6,"td",19),c.Fc(7),c.Pb(),c.Qb(8,"td",19),c.Fc(9),c.Pb(),c.Qb(10,"td",19),c.Fc(11),c.Pb(),c.Qb(12,"td",19),c.Fc(13),c.Pb(),c.Qb(14,"td",19),c.Fc(15),c.Pb(),c.Dc(16,W,2,1,"td",20),c.Pb()),2&t){var n=e.$implicit,o=c.dc(3);c.zb(2),c.Gc(c.gc(3,9,null==n?null:n.date,"d MMM,yy")),c.zb(3),c.Ic(" ",null==n||null==n.room?null:n.room.roomNumber," [",null==n||null==n.room.category?null:n.room.category.name,"] "),c.zb(2),c.Hc("",null==n||null==n.room?null:n.room.price," BDT"),c.zb(2),c.Gc(n.discount),c.zb(2),c.Gc(n.payablePrice),c.zb(2),c.Gc(null==n?null:n.advance),c.zb(2),c.Gc(null==n?null:n.due),c.zb(1),c.lc("ngIf",(null==o.booking.refBy?null:o.booking.refBy.length)>0)}}function et(t,e){if(1&t&&(c.Qb(0,"tbody"),c.Dc(1,tt,17,12,"tr",23),c.Pb()),2&t){var n=c.dc(2);c.zb(1),c.lc("ngForOf",n.booking.subBookingList)}}function nt(t,e){1&t&&c.Mb(0,"td")}function ot(t,e){1&t&&c.Mb(0,"td")}function it(t,e){1&t&&c.Mb(0,"td")}function rt(t,e){if(1&t&&(c.Qb(0,"div",14),c.Qb(1,"div",3),c.Qb(2,"div",15),c.Qb(3,"h3"),c.Fc(4,"Customer Info"),c.Pb(),c.Qb(5,"table"),c.Qb(6,"tr"),c.Qb(7,"th"),c.Fc(8,"Name :"),c.Pb(),c.Qb(9,"th"),c.Fc(10),c.Pb(),c.Pb(),c.Qb(11,"tr"),c.Qb(12,"th"),c.Fc(13,"Phone :"),c.Pb(),c.Qb(14,"th"),c.Fc(15),c.Pb(),c.Pb(),c.Qb(16,"tr"),c.Qb(17,"th"),c.Fc(18,"Email :"),c.Pb(),c.Qb(19,"th"),c.Fc(20),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Mb(21,"div",16),c.Qb(22,"div",16),c.Qb(23,"table"),c.Qb(24,"tr"),c.Qb(25,"td"),c.Fc(26,"Booking Id"),c.Pb(),c.Qb(27,"td"),c.Fc(28,":"),c.Pb(),c.Qb(29,"th"),c.Fc(30),c.Pb(),c.Pb(),c.Qb(31,"tr"),c.Qb(32,"td"),c.Fc(33,"Date"),c.Pb(),c.Qb(34,"td"),c.Fc(35,":"),c.Pb(),c.Qb(36,"td"),c.Qb(37,"strong"),c.Fc(38),c.ec(39,"date"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(40,"div",3),c.Mb(41,"div",14),c.Qb(42,"div",17),c.Fc(43),c.Pb(),c.Pb(),c.Qb(44,"div",3),c.Qb(45,"table",18),c.Qb(46,"thead"),c.Qb(47,"tr"),c.Qb(48,"th"),c.Fc(49,"Date"),c.Pb(),c.Qb(50,"th"),c.Fc(51,"Room number"),c.Pb(),c.Qb(52,"th",19),c.Fc(53,"Per night"),c.Pb(),c.Qb(54,"th",19),c.Fc(55,"Discount"),c.Pb(),c.Qb(56,"th",19),c.Fc(57,"Payable"),c.Pb(),c.Qb(58,"th",19),c.Fc(59,"Advance"),c.Pb(),c.Qb(60,"th",19),c.Fc(61,"Due"),c.Pb(),c.Dc(62,V,2,0,"th",20),c.Pb(),c.Pb(),c.Dc(63,et,2,1,"tbody",21),c.Qb(64,"tfoot"),c.Qb(65,"tr"),c.Qb(66,"th",22),c.Fc(67,"Total"),c.Pb(),c.Qb(68,"th",19),c.Fc(69),c.Pb(),c.Mb(70,"td"),c.Dc(71,nt,1,0,"td",21),c.Pb(),c.Qb(72,"tr"),c.Qb(73,"th",22),c.Fc(74,"Total Advance"),c.Pb(),c.Qb(75,"th",19),c.Fc(76),c.Pb(),c.Mb(77,"td"),c.Dc(78,ot,1,0,"td",21),c.Pb(),c.Qb(79,"tr"),c.Qb(80,"th",22),c.Fc(81,"Total due"),c.Pb(),c.Qb(82,"th",19),c.Fc(83),c.Pb(),c.Mb(84,"td"),c.Dc(85,it,1,0,"td",21),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(10),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.name),c.zb(5),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),c.zb(5),c.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.email),c.zb(10),c.Gc(null==n.booking?null:n.booking.id),c.zb(8),c.Hc(" ",c.gc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),c.zb(5),c.Hc("Ref. By : ",n.booking.refBy,""),c.zb(19),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(1),c.lc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),c.zb(6),c.Hc("",null==n.booking?null:n.booking.total," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.zb(5),c.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),c.zb(2),c.lc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var ct=function(){function t(t){this.bookingService=t,this.short=!0}return t.prototype.ngOnInit=function(){this.getServiceAgentBookings()},t.prototype.getServiceAgentBookings=function(t){return void 0===t&&(t=0),U(this,void 0,void 0,function(){var e=this;return Y(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getServiceAgentBookings(t).subscribe(function(t){e.bookingPage=t})];case 1:return n.sent(),[2]}})})},t.prototype.onSelectBooking=function(t){return U(this,void 0,void 0,function(){var e;return Y(this,function(n){return e=this.bookingPage.content.find(function(e){return e.id==t}),this.booking=J({},e),[2]})})},t.\u0275fac=function(e){return new(e||t)(c.Lb(Q.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-my-sells"]],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3","my-4"],["class","list-group",4,"ngIf"],[1,"list-group-item"],[3,"page","short","getPage",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[3,"page","short","getPage"],[1,"col-md-9"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"col-md-3"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"My bookings"),c.Pb(),c.Pb(),c.Qb(3,"div",2),c.Qb(4,"div",3),c.Qb(5,"div",4),c.Dc(6,Z,7,1,"ul",5),c.Qb(7,"li",6),c.Dc(8,K,1,2,"pagination",7),c.Pb(),c.Pb(),c.Dc(9,rt,86,17,"div",8),c.Pb(),c.Pb()),2&t&&(c.zb(6),c.lc("ngIf",(null==e.bookingPage||null==e.bookingPage.content?null:e.bookingPage.content.length)>0),c.zb(2),c.lc("ngIf",null!=e.bookingPage),c.zb(1),c.lc("ngIf",e.booking))},directives:[a.q,a.p,l.a],pipes:[a.f],styles:[""]}),t}(),at=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyBalance()},t.prototype.getMyBalance=function(){return t=this,void 0,n=function(){var t=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(e){return this.accountingService.getServiceAgentBalance().subscribe(function(e){t.balance=e.response}),[2]})},new((e=void 0)||(e=Promise))(function(o,i){function r(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,c)}a((n=n.apply(t,[])).next())});var t,e,n},t.\u0275fac=function(e){return new(e||t)(c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-my-balance"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"text-center","balance-text"],[1,"balance-text-amount"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"My balance"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Fc(5," My balance is : "),c.Qb(6,"span",3),c.Fc(7),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(7),c.Hc(" BDT ",e.balance," /= "))},styles:[".balance-text[_ngcontent-%COMP%]{font-size:24px}.balance-text-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:600}"]}),t}(),bt=n("kU/X"),lt=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},st=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ut(t,e){1&t&&(c.Qb(0,"th"),c.Fc(1,"Checkin Date"),c.Pb())}function dt(t,e){if(1&t&&(c.Qb(0,"td"),c.Fc(1),c.ec(2,"date"),c.Pb()),2&t){var n=c.dc().$implicit;c.zb(1),c.Hc(" ",c.gc(2,1,n.date,"d MMM,y")," ")}}var gt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function ft(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Fc(2),c.Pb(),c.Qb(3,"td"),c.Fc(4),c.Pb(),c.Qb(5,"td"),c.Fc(6),c.Pb(),c.Qb(7,"td"),c.Fc(8),c.Pb(),c.Qb(9,"td"),c.Fc(10),c.Pb(),c.Dc(11,dt,3,4,"td",16),c.Qb(12,"td",17),c.Fc(13),c.Pb(),c.Qb(14,"td",17),c.Fc(15),c.Pb(),c.Qb(16,"td",17),c.Fc(17),c.Pb(),c.Qb(18,"td"),c.Fc(19),c.Pb(),c.Qb(20,"td",17),c.Fc(21),c.Pb(),c.Qb(22,"td",20),c.Fc(23),c.Pb(),c.Pb()),2&t){var n=e.$implicit,o=c.dc(2);c.zb(2),c.Gc(n.date),c.zb(2),c.Gc(n.hotelName),c.zb(2),c.Ic(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.zb(2),c.Ic("",n.customerName,"[",n.customerPhone,"]"),c.zb(2),c.Ic("",n.roomNumber," [",n.category,"]"),c.zb(1),c.lc("ngIf","Booking"===o.reportHead),c.zb(2),c.Gc(n.price),c.zb(2),c.Gc(n.advance),c.zb(2),c.Gc(n.due),c.zb(2),c.Gc(n.ref),c.zb(2),c.Gc(n.commission),c.zb(1),c.lc("ngClass",c.qc(16,gt,"Paid"==n.status,"Unpaid"==n.status)),c.zb(1),c.Hc(" ",n.status," ")}}function ht(t,e){1&t&&c.Mb(0,"td")}function pt(t,e){if(1&t&&(c.Qb(0,"table",15),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th"),c.Fc(4,"Check in Date"),c.Pb(),c.Qb(5,"th"),c.Fc(6,"Hotel Name"),c.Pb(),c.Qb(7,"th"),c.Fc(8,"Sold by"),c.Pb(),c.Qb(9,"th"),c.Fc(10,"Customer"),c.Pb(),c.Qb(11,"th"),c.Fc(12,"Room No."),c.Pb(),c.Dc(13,ut,2,0,"th",16),c.Qb(14,"th",17),c.Fc(15,"Rent"),c.Pb(),c.Qb(16,"th",17),c.Fc(17,"Advance"),c.Pb(),c.Qb(18,"th",17),c.Fc(19,"Due"),c.Pb(),c.Qb(20,"th"),c.Fc(21,"Ref"),c.Pb(),c.Qb(22,"th",17),c.Fc(23,"Commission"),c.Pb(),c.Qb(24,"th"),c.Fc(25,"Status"),c.Pb(),c.Pb(),c.Pb(),c.Qb(26,"tbody"),c.Dc(27,ft,24,19,"tr",18),c.Pb(),c.Qb(28,"tfoot"),c.Qb(29,"tr"),c.Mb(30,"td"),c.Mb(31,"td"),c.Mb(32,"td"),c.Qb(33,"th"),c.Fc(34,"Total"),c.Pb(),c.Dc(35,ht,1,0,"td",16),c.Mb(36,"th"),c.Qb(37,"th",17),c.Fc(38),c.Pb(),c.Qb(39,"th",17),c.Fc(40),c.Pb(),c.Qb(41,"th",17),c.Fc(42),c.Pb(),c.Mb(43,"th",19),c.Pb(),c.Pb(),c.Pb()),2&t){var n=c.dc();c.zb(13),c.lc("ngIf","Booking"===n.reportHead),c.zb(14),c.lc("ngForOf",n.reportList),c.zb(8),c.lc("ngIf","Booking"===n.reportHead),c.zb(3),c.Gc(n.total.totalrent),c.zb(2),c.Gc(n.total.totalAdvance),c.zb(2),c.Gc(n.total.totalDue)}}function mt(t,e){1&t&&(c.Qb(0,"h3",21),c.Mb(1,"i",22),c.Fc(2," No data found"),c.Pb())}var vt=[{path:"sell",component:j},{path:"my-ledger",component:h},{path:"my-sells",component:ct},{path:"my-balance",component:at},{path:"report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.mode="Sell",this.daterange={},this.reportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkoutDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getServiceAgentBookingReport(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getServiceAgentReserveReport(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getServiceAgentBookingReport=function(t,e){return lt(this,void 0,void 0,function(){var n=this;return st(this,function(o){switch(o.label){case 0:return[4,this.reportService.getServiceAgentBookingReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.getServiceAgentReserveReport=function(t,e){return lt(this,void 0,void 0,function(){var n=this;return st(this,function(o){switch(o.label){case 0:return[4,this.reportService.getServiceAgentReserveReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.reportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(c.Lb(bt.a),c.Lb(p.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-service-agent-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Qb(0,"div",0),c.Qb(1,"span",1),c.Fc(2,"Hotel Agent report"),c.Pb(),c.Pb(),c.Qb(3,"div",0),c.Qb(4,"div",2),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Mb(9,"i",7),c.Pb(),c.Pb(),c.Qb(10,"input",8),c.bc("selected",function(t){return e.selectedDate(t)}),c.Pb(),c.Pb(),c.Pb(),c.Qb(11,"div",3),c.Qb(12,"div",9),c.Qb(13,"div",5),c.Qb(14,"div",6),c.Fc(15,"Type"),c.Pb(),c.Pb(),c.Qb(16,"select",10),c.bc("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Qb(17,"option",11),c.Fc(18," By checkin date "),c.Pb(),c.Qb(19,"option",12),c.Fc(20," By sell's date "),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Dc(21,pt,44,6,"table",13),c.Dc(22,mt,3,0,"ng-template",null,14,c.Ec),c.Pb()),2&t){var n=c.vc(23);c.zb(10),c.lc("options",e.options),c.zb(6),c.lc("ngModel",e.mode),c.zb(5),c.lc("ngIf",e.reportList.length>0)("ngIfElse",n)}},directives:[k.b,B.u,B.m,B.p,B.q,B.w,a.q,a.p,a.o],pipes:[a.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}()}],Pt=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[i.a,o.e.forChild(vt)]]}),t}()}}]);