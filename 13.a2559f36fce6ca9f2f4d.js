(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{wXy8:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return Ct}),n.d(t,"AdminBookingModule",function(){return St});var o=n("0sMf"),i=n("/e7+"),r=n("Sa+r"),c=n("FJeW"),a=n("8Y7J"),l=n("iInd"),b=n("G0yt"),s=n("SVse"),u=n("/YPm"),d=n("yBZE"),m=n("53Co"),f=n("HF3I"),g=function(){return(g=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,t){if(1&e){var n=a.Rb();a.Qb(0,"span"),a.Qb(1,"button",16),a.bc("click",function(){a.wc(n);var e=t.$implicit;return a.dc(2).onSelectCategory(e)}),a.Fc(2),a.Pb(),a.Pb()}if(2&e){var o=t.$implicit,i=a.dc(2);a.zb(1),a.lc("ngClass",o==i.category?"btn-primary":"btn-secondary"),a.zb(1),a.Hc(" ",o," ")}}var p=function(e,t){return{disabled:e,selected:t}};function v(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",17),a.Qb(1,"div",18),a.bc("click",function(){a.wc(n);var e=t.$implicit;return a.dc(2).onRoomSelect(e.id,e.available)}),a.Fc(2),a.Pb(),a.Pb()}if(2&e){var o=t.$implicit;a.zb(1),a.lc("ngClass",a.qc(2,p,!o.available,o.selected)),a.zb(1),a.Hc(" ",o.roomNumber," ")}}function y(e,t){if(1&e&&(a.Qb(0,"div"),a.Qb(1,"div",11),a.Qb(2,"div",12),a.Qb(3,"h4"),a.Fc(4),a.Pb(),a.Pb(),a.Dc(5,h,3,2,"span",13),a.Pb(),a.Qb(6,"div",14),a.Dc(7,v,3,5,"div",15),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(4),a.Gc(n.hotel.name),a.zb(1),a.lc("ngForOf",n.categoryList),a.zb(2),a.lc("ngForOf",n.filteredRoomList)}}function P(e,t){if(1&e&&a.Mb(0,"loading",19),2&e){var n=a.dc();a.lc("message",n.message)}}var k=function(){function e(e,t){this.roomService=e,this.util=t,this.showHotels=new a.n,this.roomSelected=new a.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return e.prototype.ngOnInit=function(){this.setDateRanges(),this.hotel&&this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.ngOnChanges=function(e){var t=this;if(e.unSelect&&e.unSelect.currentValue&&this.roomList&&this.roomList.length>0){var n=this.roomList.find(function(e){return e.id===t.unSelect}),o=g(g({},n),{selected:!1});this.roomList.splice(this.roomList.findIndex(function(e){return e.id==t.unSelect}),1,o)}e.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.reload(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-60),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},e.prototype.selectedDate=function(e){this.daterange.checkinDate=e.start._d,this.daterange.checkoutDate=e.end._d,this.daterange.label=e.label,this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},e.prototype.reload=function(e,t,n){this.getAdminAvailableRoomList(e,t,n)},e.prototype.getAdminAvailableRoomList=function(e,t,n,o){return void 0===o&&(o=null),i=this,void 0,c=function(){var i,r,c=this;return function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(a){switch(a.label){case 0:return i=this.util.getDateString(t),r=this.util.getDateString(n),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getAdminAvailableRoomListByHotelId(e,i,r,o).subscribe(function(e){c.showRoomListLoading=!1,c.roomList=e,c.filteredRoomList=e,c.category="All",c.categoryList=["All"],c.roomList.forEach(function(e){c.categoryList.includes(e.category.name)||c.categoryList.push(e.category.name)})})];case 1:return a.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{a(c.next(e))}catch(n){t(n)}}function o(e){try{a(c.throw(e))}catch(n){t(n)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,o)}a((c=c.apply(i,[])).next())});var i,r,c},e.prototype.onSelectCategory=function(e){this.category=e,this.filteredRoomList="All"==e?this.roomList:this.roomList.filter(function(t){return t.category.name==e})},e.prototype.onRoomSelect=function(e,t){if(t){var n=this.roomList.find(function(t){return t.id===e}),o=g({selected:!0},n);this.roomList.splice(this.roomList.findIndex(function(t){return t.id==e}),1,o);var i={room:n,checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(i)}},e.prototype.onHotelList=function(){this.showHotels.emit(!0)},e.\u0275fac=function(t){return new(t||e)(a.Lb(d.a),a.Lb(i.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["admin-available-room-list"]],inputs:{hotel:"hotel",unSelect:"unSelect",reloadRoomList:"reloadRoomList"},outputs:{showHotels:"showHotels",roomSelected:"roomSelected"},features:[a.xb],decls:13,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"btn","btn-sm","btn-info",3,"click"],[1,"row","mt-1"],[1,"col-12"],[4,"ngFor","ngForOf"],[1,"row","m-0"],["class","col-md-2 col-4 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-4","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"div",3),a.Qb(4,"div",4),a.Qb(5,"div",5),a.Mb(6,"i",6),a.Pb(),a.Pb(),a.Qb(7,"input",7),a.bc("selected",function(e){return t.selectedDate(e)}),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Dc(8,y,8,3,"div",8),a.Dc(9,P,1,1,"ng-template",null,9,a.Ec),a.Qb(11,"button",10),a.bc("click",function(){return t.onHotelList()}),a.Fc(12," Back to hotel list "),a.Pb(),a.Pb()),2&e){var n=a.vc(10);a.zb(7),a.lc("options",t.options),a.zb(1),a.lc("ngIf",!t.showRoomListLoading)("ngIfElse",n)}},directives:[m.b,s.q,s.p,s.o,f.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 10px 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}.selected[_ngcontent-%COMP%]{background-color:#90ee90;color:#fff}"]}),e}(),Q=n("s7LF");function D(e,t){1&e&&(a.Qb(0,"small",12),a.Fc(1," Name required "),a.Pb())}function w(e,t){if(1&e&&(a.Qb(0,"small",12),a.Qb(1,"div",13),a.Fc(2," Phone number required "),a.Pb(),a.Qb(3,"div",13),a.Fc(4," Phone number format 01934953023 "),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(1),a.lc("hidden",!n.form.controls.phoneNumber.errors.required),a.zb(2),a.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var C=function(e){return{disabled:e}},S=function(){function e(e){this.builder=e,this.user=new a.n}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.createForm=function(){this.form=this.builder.group({name:["",Q.v.required],phoneNumber:["",[Q.v.required,Q.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},e.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},e.\u0275fac=function(t){return new(t||e)(a.Lb(Q.d))},e.\u0275cmp=a.Fb({type:e,selectors:[["admin-user-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(e,t){1&e&&(a.Qb(0,"h4"),a.Fc(1,"User Info"),a.Pb(),a.Qb(2,"form",0),a.bc("ngSubmit",function(){return t.submit()}),a.Qb(3,"div",1),a.Qb(4,"div",2),a.Qb(5,"label",3),a.Fc(6,"Name *"),a.Pb(),a.Mb(7,"input",4),a.Dc(8,D,2,0,"small",5),a.Pb(),a.Qb(9,"div",2),a.Qb(10,"label",6),a.Fc(11,"Phone *"),a.Pb(),a.Mb(12,"input",7),a.Dc(13,w,5,2,"small",5),a.Pb(),a.Qb(14,"div",2),a.Qb(15,"label",8),a.Fc(16,"Email"),a.Pb(),a.Mb(17,"input",9),a.Pb(),a.Pb(),a.Qb(18,"div",10),a.Qb(19,"button",11),a.Fc(20," Submit "),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(2),a.lc("formGroup",t.form),a.zb(6),a.lc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),a.zb(5),a.lc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),a.zb(6),a.lc("ngClass",a.pc(4,C,t.form.invalid)))},directives:[Q.x,Q.n,Q.g,Q.b,Q.m,Q.f,s.q,Q.j,s.o],styles:[""]}),e}(),B=function(){return(B=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function F(e,t){if(1&e){var n=a.Rb();a.Qb(0,"admin-hotel-list",5),a.bc("hotel",function(e){return a.wc(n),a.dc().onHotel(e)}),a.Pb()}}function x(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",6),a.Qb(1,"div",7),a.Qb(2,"div",8),a.Qb(3,"div",9),a.bc("click",function(){return a.wc(n),a.vc(7).toggle()}),a.Qb(4,"div",10),a.Mb(5,"i",11),a.Pb(),a.Pb(),a.Qb(6,"input",12,13),a.bc("ngModelChange",function(e){return a.wc(n),a.dc().dd=e})("dateSelect",function(){a.wc(n);var e=a.dc();return e.getAdminBookingList(e.hotelId,e.dd)})("click",function(){return a.wc(n),a.vc(7).toggle()}),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(6),a.lc("ngModel",o.dd)("minDate",o.minDate)("maxDate",o.maxDate)}}var M=function(e,t,n,o,i){return{"bg-lightgray":e,"bg-yellow":t,"bg-green":n,"bg-red":o,"bg-white":i}};function R(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",17),a.Qb(1,"div",18),a.bc("click",function(){a.wc(n);var e=t.$implicit,o=a.dc(2);return o.onRoomClick(e.id,e.bookingId,o.dd)}),a.Fc(2),a.Mb(3,"br"),a.Pb(),a.Pb()}if(2&e){var o=t.$implicit;a.zb(1),a.lc("ngClass",a.tc(2,M,"ROOM_BLOCKED"===o.status,"ROOM_BOOKED"===o.status,"ROOM_RESERVED"===o.status,"ROOM_SOLD"===o.status,"ROOM_FREE"===o.status)),a.zb(1),a.Hc(" ",o.roomNumber," ")}}function I(e,t){if(1&e&&(a.Qb(0,"div",14),a.Qb(1,"div",15),a.Qb(2,"h4"),a.Fc(3),a.Pb(),a.Pb(),a.Dc(4,R,4,8,"div",16),a.Pb()),2&e){var n=a.dc();a.zb(3),a.Gc(n.hotel.name),a.zb(1),a.lc("ngForOf",n.roomList)}}function z(e,t){1&e&&(a.Qb(0,"div",19),a.Qb(1,"div",20),a.Mb(2,"div",21),a.Fc(3," Blocked "),a.Pb(),a.Qb(4,"div",20),a.Mb(5,"div",22),a.Fc(6," Reserved "),a.Pb(),a.Qb(7,"div",20),a.Mb(8,"div",23),a.Fc(9," Sold "),a.Pb(),a.Qb(10,"div",20),a.Mb(11,"div",24),a.Fc(12," Free "),a.Pb(),a.Pb())}function O(e,t){if(1&e){var n=a.Rb();a.Qb(0,"button",25),a.bc("click",function(){return a.wc(n),a.dc().onHotelList()}),a.Mb(1,"i",26),a.Fc(2," Back to hotel list\n"),a.Pb()}}var L=function(){function e(e){this.roomService=e,this.roomSelected=new a.n,this.loading=!1,this.showRoomList=!1}return e.prototype.ngOnChanges=function(e){e.reload&&this.dd&&this.getAdminBookingList(this.hotelId,this.dd)},e.prototype.ngOnInit=function(){var e=new Date;this.dd={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},this.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()-60},this.maxDate={year:e.getFullYear(),month:e.getMonth()+4,day:e.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12)},e.prototype.getAdminBookingList=function(e,t){return n=this,void 0,i=function(){var n=this;return function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.roomService.getAdminBookingList(e,this.makeDateString(t)).subscribe(function(e){n.roomList=e,n.loading=!1})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(e,t){function r(e){try{a(i.next(e))}catch(n){t(n)}}function c(e){try{a(i.throw(e))}catch(n){t(n)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(r,c)}a((i=i.apply(n,[])).next())});var n,o,i},e.prototype.onRoomClick=function(e,t,n){if(t>0){var o=this.roomList.find(function(t){return t.id==e});this.status=o.status;var i=B({date:n.year+"-"+(n.month+1)+"-"+n.day},o);this.roomSelected.emit(i)}},e.prototype.onHotel=function(e){this.hotelId=e.id,this.hotel=e,this.getAdminBookingList(e.id,this.dd),this.showRoomList=!0},e.prototype.onHotelList=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},e.prototype.makeDateString=function(e){return e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)},e.\u0275fac=function(t){return new(t||e)(a.Lb(d.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["admin-room-status-date"]],inputs:{reload:"reload"},outputs:{roomSelected:"roomSelected"},features:[a.xb],decls:5,vars:5,consts:[[3,"hotel",4,"ngIf"],["class","row my-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row border m-0 py-2",4,"ngIf"],["class","btn btn-sm btn-info mt-1",3,"click",4,"ngIf"],[3,"hotel"],[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"row"],[1,"col-12"],["class","col-md-2 col-sm-3 col-3 p-1",4,"ngFor","ngForOf"],[1,"col-md-2","col-sm-3","col-3","p-1"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-2"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-green"],[1,"foo","bg-red"],[1,"foo","bg-white"],[1,"btn","btn-sm","btn-info","mt-1",3,"click"],[1,"fa","fa-chevron-left"]],template:function(e,t){1&e&&(a.Dc(0,F,1,0,"admin-hotel-list",0),a.Dc(1,x,8,3,"div",1),a.Dc(2,I,5,2,"div",2),a.Dc(3,z,13,0,"div",3),a.Dc(4,O,3,0,"button",4)),2&e&&(a.lc("ngIf",!t.showRoomList),a.zb(1),a.lc("ngIf",t.showRoomList),a.zb(1),a.lc("ngIf",t.showRoomList),a.zb(1),a.lc("ngIf",null==t.roomList?null:t.roomList.length),a.zb(1),a.lc("ngIf",t.showRoomList))},directives:[s.q,u.a,b.i,Q.b,Q.m,Q.p,s.p,s.o],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:10px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),e}(),A=n("Xtf6"),N=n("V9jR"),T=function(){return(T=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},H=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function c(e){try{l(o.next(e))}catch(t){r(t)}}function a(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((o=o.apply(e,t||[])).next())})},E=function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function _(e,t){if(1&e){var n=a.Rb();a.Qb(0,"admin-hotel-list",14),a.bc("hotel",function(e){return a.wc(n),a.dc(2).onHotel(e)}),a.Pb()}}function V(e,t){if(1&e){var n=a.Rb();a.Qb(0,"admin-available-room-list",15),a.bc("showHotels",function(e){return a.wc(n),a.dc(2).onShowHotels(e)})("roomSelected",function(e){return a.wc(n),a.dc(2).onRoomSelect(e)}),a.Pb()}if(2&e){var o=a.dc(2);a.lc("hotel",o.hotel)("unSelect",o.unSelect)("reloadRoomList",o.reloadRoomList)}}function q(e,t){1&e&&(a.Qb(0,"th",39),a.Fc(1," Commission "),a.Pb())}function G(e,t){if(1&e){var n=a.Rb();a.Qb(0,"td"),a.Qb(1,"input",47),a.bc("ngModelChange",function(e){return a.wc(n),a.dc().$implicit.commission=e}),a.Pb(),a.Pb()}if(2&e){var o=a.dc().$implicit;a.zb(1),a.lc("ngModel",o.commission)}}function j(e,t){if(1&e){var n=a.Rb();a.Qb(0,"tr"),a.Qb(1,"td"),a.Fc(2),a.Pb(),a.Qb(3,"td"),a.Fc(4),a.Pb(),a.Qb(5,"td"),a.Fc(6),a.Pb(),a.Qb(7,"td",39),a.Fc(8),a.Pb(),a.Qb(9,"td",39),a.Fc(10),a.Pb(),a.Qb(11,"td"),a.Qb(12,"input",43),a.bc("ngModelChange",function(e){return a.wc(n),t.$implicit.discount=e})("keyup",function(){a.wc(n);var e=t.index;return a.dc(4).updateSubBooking(e)}),a.Pb(),a.Pb(),a.Qb(13,"td",39),a.Fc(14),a.ec(15,"number"),a.Pb(),a.Qb(16,"td",39),a.Qb(17,"input",44),a.bc("ngModelChange",function(e){return a.wc(n),t.$implicit.advance=e})("keyup",function(){a.wc(n);var e=t.index;return a.dc(4).updateSubBooking(e)}),a.Pb(),a.Pb(),a.Qb(18,"td",39),a.Fc(19),a.Pb(),a.Dc(20,G,2,1,"td",36),a.Qb(21,"td"),a.Qb(22,"button",45),a.bc("click",function(){a.wc(n);var e=t.index;return a.dc(4).onRemove(e)}),a.Mb(23,"i",46),a.Pb(),a.Pb(),a.Pb()}if(2&e){var o=t.$implicit,i=a.dc(4);a.zb(2),a.Gc(o.room.category.hotel.name),a.zb(2),a.Gc(o.date),a.zb(2),a.Ic("",o.room.roomNumber," [",o.room.category.name,"]"),a.zb(2),a.Gc(o.room.price),a.zb(2),a.Hc("",o.room.vatService," %"),a.zb(2),a.lc("ngModel",o.discount),a.zb(2),a.Hc(" ",a.gc(15,11,o.payablePrice,"1.1-2")," "),a.zb(3),a.lc("ngModel",o.advance),a.zb(2),a.Gc(null==o?null:o.due),a.zb(1),a.lc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function $(e,t){1&e&&a.Mb(0,"td")}function U(e,t){1&e&&a.Mb(0,"td")}function J(e,t){1&e&&a.Mb(0,"td")}function K(e,t){1&e&&a.Mb(0,"td")}function Y(e,t){if(1&e&&(a.Qb(0,"table",38),a.Qb(1,"thead"),a.Qb(2,"tr"),a.Qb(3,"th"),a.Fc(4,"Hotel"),a.Pb(),a.Qb(5,"th"),a.Fc(6,"Date"),a.Pb(),a.Qb(7,"th"),a.Fc(8,"Room No."),a.Pb(),a.Qb(9,"th",39),a.Fc(10,"Per night"),a.Pb(),a.Qb(11,"th",39),a.Fc(12,"Vat & Service"),a.Pb(),a.Qb(13,"th",39),a.Fc(14,"Discount"),a.Pb(),a.Qb(15,"th",39),a.Fc(16,"Payable"),a.Pb(),a.Qb(17,"th",39),a.Fc(18,"Advance"),a.Pb(),a.Qb(19,"th",39),a.Fc(20,"Due"),a.Pb(),a.Dc(21,q,2,0,"th",40),a.Mb(22,"th"),a.Pb(),a.Pb(),a.Qb(23,"tbody"),a.Dc(24,j,24,14,"tr",41),a.Pb(),a.Qb(25,"tfoot"),a.Qb(26,"tr"),a.Qb(27,"th",42),a.Fc(28,"Vat and Service Charge"),a.Pb(),a.Qb(29,"th",39),a.Fc(30),a.Pb(),a.Mb(31,"td"),a.Dc(32,$,1,0,"td",36),a.Pb(),a.Qb(33,"tr"),a.Qb(34,"th",42),a.Fc(35,"Total"),a.Pb(),a.Qb(36,"th",39),a.Fc(37),a.Pb(),a.Mb(38,"td"),a.Dc(39,U,1,0,"td",36),a.Pb(),a.Qb(40,"tr"),a.Qb(41,"th",42),a.Fc(42,"Total Advance"),a.Pb(),a.Qb(43,"th",39),a.Fc(44),a.Pb(),a.Mb(45,"td"),a.Dc(46,J,1,0,"td",36),a.Pb(),a.Qb(47,"tr"),a.Qb(48,"th",42),a.Fc(49,"Total due"),a.Pb(),a.Qb(50,"th",39),a.Fc(51),a.Pb(),a.Mb(52,"td"),a.Dc(53,K,1,0,"td",36),a.Pb(),a.Pb(),a.Pb()),2&e){var n=a.dc(3);a.zb(21),a.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),a.zb(3),a.lc("ngForOf",n.subBookings),a.zb(6),a.Hc("",null==n.booking?null:n.booking.totalVatService," BDT"),a.zb(2),a.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),a.zb(5),a.Hc("",null==n.booking?null:n.booking.total," BDT"),a.zb(2),a.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),a.zb(5),a.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),a.zb(2),a.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),a.zb(5),a.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),a.zb(2),a.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function W(e,t){if(1&e&&(a.Qb(0,"option",55),a.Fc(1),a.Pb()),2&e){var n=t.$implicit;a.lc("value",n.key),a.zb(1),a.Hc(" ",n.value," ")}}function X(e,t){if(1&e){var n=a.Rb();a.Ob(0),a.Qb(1,"h4"),a.Fc(2,"Payment Info"),a.Pb(),a.Qb(3,"div",48),a.Qb(4,"div",49),a.Qb(5,"label",50),a.Fc(6,"Payment Method"),a.Pb(),a.Qb(7,"select",51),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(3).booking.paymentMethod=e}),a.Dc(8,W,2,2,"option",52),a.ec(9,"keyvalue"),a.Pb(),a.Pb(),a.Qb(10,"div",49),a.Qb(11,"label",53),a.Fc(12,"Reference"),a.Pb(),a.Qb(13,"input",54),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(3).booking.paymentRef=e}),a.Pb(),a.Pb(),a.Pb(),a.Nb()}if(2&e){var o=a.dc(3);a.zb(7),a.lc("ngModel",o.booking.paymentMethod),a.zb(1),a.lc("ngForOf",a.fc(9,3,o.paymentMethods)),a.zb(5),a.lc("ngModel",o.booking.paymentRef)}}function Z(e,t){if(1&e){var n=a.Rb();a.Qb(0,"admin-user-form",56),a.bc("user",function(e){return a.wc(n),a.dc(3).onCreateUser(e)}),a.Pb()}}var ee=function(e,t){return{"btn-primary active":e,"btn-light":t}};function te(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",16),a.Qb(1,"div",17),a.Qb(2,"label",18),a.Qb(3,"input",19),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(2).mode=e}),a.Pb(),a.Fc(4," Sell "),a.Pb(),a.Qb(5,"label",20),a.Qb(6,"input",21),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(2).mode=e}),a.Pb(),a.Fc(7," Reserve "),a.Pb(),a.Pb(),a.Qb(8,"h3",22),a.Fc(9,"New Booking"),a.Pb(),a.Qb(10,"div",23),a.Mb(11,"div",24),a.Qb(12,"div",25),a.Qb(13,"div",26),a.Qb(14,"input",27),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(2).changeSimilar=e}),a.Pb(),a.Qb(15,"label",28),a.Fc(16," Auto Change Similar Category "),a.Pb(),a.Pb(),a.Pb(),a.Qb(17,"div",25),a.Qb(18,"div",29),a.Qb(19,"div",30),a.Qb(20,"div",31),a.Fc(21,"Ref. By"),a.Pb(),a.Pb(),a.Qb(22,"input",32),a.bc("ngModelChange",function(e){return a.wc(n),a.dc(2).refBy=e}),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(23,"div",33),a.Qb(24,"div",34),a.Qb(25,"h5"),a.Fc(26,"Booking List"),a.Pb(),a.Pb(),a.Pb(),a.Dc(27,Y,54,10,"table",35),a.Dc(28,X,14,5,"ng-container",36),a.Dc(29,Z,1,0,"admin-user-form",37),a.Pb()}if(2&e){var o=a.dc(2);a.zb(2),a.lc("ngClass",a.qc(10,ee,"Sell"==o.mode,"Sell"!=o.mode)),a.zb(1),a.lc("ngModel",o.mode),a.zb(2),a.lc("ngClass",a.qc(13,ee,"Reserve"==o.mode,"Reserve"!=o.mode)),a.zb(1),a.lc("ngModel",o.mode),a.zb(8),a.lc("ngModel",o.changeSimilar),a.zb(8),a.lc("ngModel",o.refBy),a.zb(5),a.lc("ngIf",!o.sendingInfo)("ngIfElse",o.sending),a.zb(1),a.lc("ngIf",!o.sendingInfo),a.zb(1),a.lc("ngIf",!o.sendingInfo)}}function ne(e,t){if(1&e&&(a.Qb(0,"div",9),a.Qb(1,"div",10),a.Dc(2,_,1,0,"admin-hotel-list",11),a.Dc(3,V,1,3,"admin-available-room-list",12),a.Pb(),a.Dc(4,te,30,16,"div",13),a.Pb()),2&e){var n=a.dc();a.zb(2),a.lc("ngIf",!n.showRoomList),a.zb(1),a.lc("ngIf",n.showRoomList),a.zb(1),a.lc("ngIf",n.subBookings.length>0)}}function oe(e,t){if(1&e&&a.Mb(0,"booking-info",64),2&e){var n=a.dc(3);a.lc("booking",n.reservation)}}function ie(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",65),a.Qb(1,"a",66),a.Mb(2,"i",67),a.Fc(3," Print"),a.Pb(),a.Qb(4,"button",68),a.bc("click",function(){a.wc(n);var e=a.dc(3);return e.onCancelBooking(e.reservation.id)}),a.Fc(5," Cancel Booking "),a.Pb(),a.Pb()}if(2&e){var o=a.dc(3);a.zb(1),a.nc("routerLink","/dashboard/printTicket/",o.reservation.id,"")}}function re(e,t){if(1&e){var n=a.Rb();a.Qb(0,"booking-form",69),a.bc("onBooking",function(e){return a.wc(n),a.dc(3).onConfirmRerservation(e)})("cancelBooking",function(e){return a.wc(n),a.dc(3).onCancelRerservation(e)}),a.Pb()}if(2&e){var o=a.dc(3);a.lc("booking",o.reservation)}}var ce=function(e,t){return{"bg-danger":e,"bg-primary":t}};function ae(e,t){if(1&e&&(a.Qb(0,"div",16),a.Qb(1,"div",60),a.Fc(2),a.Pb(),a.Dc(3,oe,1,1,"booking-info",61),a.Dc(4,ie,6,1,"div",62),a.Dc(5,re,1,1,"booking-form",63),a.Pb()),2&e){var n=a.dc(2);a.zb(1),a.lc("ngClass",a.qc(5,ce,"ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus),"ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))),a.zb(1),a.Hc(" ","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),a.zb(1),a.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),a.zb(1),a.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),a.zb(1),a.lc("ngIf","ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))}}function le(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",57),a.Qb(1,"div",58),a.Qb(2,"admin-room-status-date",59),a.bc("roomSelected",function(e){return a.wc(n),a.dc().onRoomSelectFromRoomStatus(e)}),a.Pb(),a.Pb(),a.Dc(3,ae,6,8,"div",13),a.Pb()}if(2&e){var o=a.dc();a.zb(3),a.lc("ngIf",o.reservation)}}var be=function(){function e(e,t,n){this.utilService=e,this.bookingService=t,this.router=n,this.subBookings=[],this.reloadRoomList=!1,this.showRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.message="",this.paymentMethods=r.b,this.active=1,this.mode="Sell"}return e.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0},this.booking.paymentMethod="CASH"},e.prototype.onHotel=function(e){this.hotel=e,this.hotelId=e.id,this.showRoomList=!0},e.prototype.onShowHotels=function(e){this.showRoomList=!e,localStorage.removeItem("hotelId")},e.prototype.onRoomSelect=function(e){var t=this;this.utilService.getDatesBetween(e.checkInDate,e.checkOutDate).forEach(function(n){var o=new c.a(n,e.room);o.room.discount>0&&(o.discount=o.room.discount),t.isContain(o)||(t.subBookings.push(o),t.updateSubBooking(t.subBookings.length-1),t.subBookings.sort(t.utilService.dynamicSortObject("date")),t.subBookings.sort(t.utilService.dynamicSortObject("room.roomNumber")))})},e.prototype.onCreateUser=function(e){var t=T({id:0},e);this.createBooking(t)},e.prototype.createBooking=function(e){var t=this,n=new r.a(e,this.subBookings),o=T({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy,paymentMethod:this.booking.paymentMethod,paymentRef:this.booking.paymentRef},n);switch(this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createAdminBooking(o).subscribe(function(e){t.message="Booking generated, Thank you.",t.sendingInfo=!1,t.booking.subBookingList=[],t.subBookings=[],t.ngOnInit(),t.reloadRoomList=!t.reloadRoomList,t.router.navigate(["/dashboard/printTicket",e.id])});break;case"Reserve":this.bookingService.reserveAdminBooking(o).subscribe(function(e){t.message="Booking complete, Thank you.",t.sendingInfo=!1,t.reloadRoomList=!t.reloadRoomList,t.ngOnInit(),t.router.navigate(["/dashboard/printTicket",e.id])})}},e.prototype.onReload=function(){this.reloadRoomList=!this.reloadRoomList},e.prototype.isContain=function(e){return this.subBookings.find(function(t){return t.room.id===e.room.id&&t.date===e.date&&t.room.category.hotel.id===e.room.category.hotel.id})},e.prototype.onRemove=function(e){this.unSelect=this.subBookings[e].room.id,this.subBookings.splice(e,1),this.updateBooking(e)},e.prototype.updateSubBooking=function(e){var t=this.subBookings[e];t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance,this.updateBooking(e)},e.prototype.updateBooking=function(e){var t=0,n=0,o=0,i=0;if(this.changeSimilar){var r=this.subBookings[e];this.subBookings.forEach(function(e){e.room.category.id==r.room.category.id&&(e.discount=r.discount,e.advance=r.advance,e.payablePrice=Math.round((e.room.price-e.discount)*(1+e.room.vatService/100)),e.due=e.payablePrice-e.advance)})}this.subBookings.forEach(function(e){t+=e.payablePrice,n+=e.advance,o+=e.due,i+=e.room.vatService/100*(e.room.price-e.discount)}),this.booking.totalVatService=i,this.booking.total=t,this.booking.totalAdvance=n,this.booking.totalDue=o},e.prototype.onRoomSelectFromRoomStatus=function(e){return H(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getAdminBooking(e.bookingId).subscribe(function(e){t.reservation=e})];case 1:return n.sent(),[2]}})})},e.prototype.onConfirmRerservation=function(e){return H(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return confirm("Are you sure to confirm reservation with id : "+e.id)?[4,this.bookingService.confirmAdminReservation(e).subscribe(function(e){t.reservation=null,console.log(e),console.log("Confirm Reservation Done")})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.onCancelRerservation=function(e){return H(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return console.log("onCancelRerservation ",e),confirm("Are you sure to cancel reservation with id : "+e)?[4,this.bookingService.cancelAdminReservation(e).subscribe(function(e){t.reservation=null,console.log("Cancel Reservation done")})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.onCancelBooking=function(e){return H(this,void 0,void 0,function(){var t=this;return E(this,function(n){return confirm("Are you sure to cancel booking with id : "+e)&&(console.log("cancel booking : ",e),this.bookingService.cancelAdminBooking(e).subscribe(function(e){console.log(e),console.log("Booking canceled"),t.reservation=null})),[2]})})},e.prototype.getMySells=function(){return H(this,void 0,void 0,function(){return E(this,function(e){return[2]})})},e.\u0275fac=function(t){return new(t||e)(a.Lb(i.a),a.Lb(o.a),a.Lb(l.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-admin-sell-room"]],decls:15,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0","py-2"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","border"],[1,"btn",3,"ngClass"],["type","radio","value","Sell","name","mode","id","mode_sell","autocomplete","off",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","value","Reserve","name","mode","id","mode_reservation","autocomplete","off",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control","sized-form",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border table-responsive-sm",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"user",4,"ngIf"],[1,"table","mb-4","border","table-responsive-sm"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"text-right"],["type","number","name","totalDiscount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","advance",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],[1,"form-row"],[1,"form-group","col-md-3"],["for","paymentMethod"],["id","paymentMethod",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","reference"],["type","text","id","reference",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[3,"user"],[1,"mt-2","row"],[1,"col-md-4"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight mb-4",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"fa","fa-print"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Sell room"),a.Pb(),a.Pb(),a.Qb(3,"div",2),a.Qb(4,"ul",3,4),a.bc("activeIdChange",function(e){return t.active=e}),a.Qb(6,"li",5),a.Qb(7,"a",6),a.Fc(8,"Sell room"),a.Pb(),a.Dc(9,ne,5,3,"ng-template",7),a.Pb(),a.Qb(10,"li",5),a.Qb(11,"a",6),a.Fc(12,"Room status"),a.Pb(),a.Dc(13,le,4,1,"ng-template",7),a.Pb(),a.Pb(),a.Mb(14,"div",8),a.Pb()),2&e){var n=a.vc(5);a.zb(4),a.lc("activeId",t.active),a.zb(2),a.lc("ngbNavItem",1),a.zb(4),a.lc("ngbNavItem",2),a.zb(4),a.lc("ngbNavOutlet",n)}},directives:[b.k,b.m,b.n,b.l,b.o,s.q,u.a,k,s.o,Q.s,Q.b,Q.m,Q.p,Q.a,s.p,Q.r,Q.u,Q.q,Q.w,S,L,A.a,l.d,N.a],pipes:[s.g,s.k],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control.sized-form[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}"]}),e}(),se=n("3whx"),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function de(e,t){if(1&e){var n=a.Rb();a.Qb(0,"a",10),a.bc("click",function(){a.wc(n);var e=t.$implicit;return a.dc(2).onSelectBooking(e.id)}),a.Fc(1),a.ec(2,"date"),a.Pb()}if(2&e){var o=t.$implicit;a.zb(1),a.Jc(" [",o.id,"] ",o.user.name," - ",a.gc(2,3,o.created,"MMM d, y, h:mm:ss a")," ")}}function me(e,t){if(1&e&&(a.Qb(0,"ul",7),a.Qb(1,"li",8),a.Qb(2,"h5"),a.Fc(3,"Booking List"),a.Pb(),a.Qb(4,"small"),a.Fc(5,"Choose a booking from below list"),a.Pb(),a.Pb(),a.Dc(6,de,3,6,"a",9),a.Pb()),2&e){var n=a.dc();a.zb(6),a.lc("ngForOf",n.offlineBookings)}}function fe(e,t){1&e&&a.Mb(0,"loading")}function ge(e,t){if(1&e){var n=a.Rb();a.Qb(0,"tr"),a.Qb(1,"td"),a.Fc(2),a.Pb(),a.Qb(3,"td"),a.Fc(4),a.ec(5,"date"),a.Pb(),a.Qb(6,"td"),a.Fc(7),a.Pb(),a.Qb(8,"td",15),a.Fc(9),a.Pb(),a.Qb(10,"td",15),a.Fc(11),a.Pb(),a.Qb(12,"td",15),a.Fc(13),a.Pb(),a.Qb(14,"td"),a.Qb(15,"button",22),a.bc("click",function(){a.wc(n);var e=t.index;return a.dc(3).removeRoom(e)}),a.Mb(16,"i",23),a.Pb(),a.Pb(),a.Pb()}if(2&e){var o=t.$implicit;a.zb(2),a.Gc(null==o||null==o.room.category||null==o.room.category.hotel?null:o.room.category.hotel.name),a.zb(2),a.Gc(a.gc(5,7,null==o?null:o.date,"d MMM,yy")),a.zb(3),a.Ic(" ",null==o||null==o.room?null:o.room.roomNumber," [",null==o||null==o.room.category?null:o.room.category.name,"] "),a.zb(2),a.Hc("",null==o||null==o.room?null:o.room.price," BDT"),a.zb(2),a.Hc("",null==o?null:o.discount," BDT"),a.zb(2),a.Hc("",null==o?null:o.payablePrice," BDT")}}function he(e,t){if(1&e&&(a.Qb(0,"tbody"),a.Dc(1,ge,17,10,"tr",21),a.Pb()),2&e){var n=a.dc(2);a.zb(1),a.lc("ngForOf",n.booking.subBookingList)}}function pe(e,t){if(1&e){var n=a.Rb();a.Qb(0,"button",24),a.bc("click",function(){a.wc(n);var e=a.dc(2);return e.onConfirmBooking(e.booking.id)}),a.Mb(1,"i",25),a.Fc(2," Confirm booking "),a.Pb()}}function ve(e,t){if(1&e){var n=a.Rb();a.Qb(0,"button",26),a.bc("click",function(){a.wc(n);var e=a.dc(2);return e.onDeleteBooking(e.booking.id)}),a.Mb(1,"i",27),a.Fc(2," Delete booking "),a.Pb()}}function ye(e,t){1&e&&a.Mb(0,"loading")}function Pe(e,t){if(1&e&&(a.Qb(0,"div",11),a.Qb(1,"div",2),a.Qb(2,"div",12),a.Qb(3,"h3"),a.Fc(4,"Customer Info"),a.Pb(),a.Qb(5,"table"),a.Qb(6,"tr"),a.Qb(7,"th"),a.Fc(8,"Name :"),a.Pb(),a.Qb(9,"th"),a.Fc(10),a.Pb(),a.Pb(),a.Qb(11,"tr"),a.Qb(12,"th"),a.Fc(13,"Phone :"),a.Pb(),a.Qb(14,"th"),a.Fc(15),a.Pb(),a.Pb(),a.Qb(16,"tr"),a.Qb(17,"th"),a.Fc(18,"Email :"),a.Pb(),a.Qb(19,"th"),a.Fc(20),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Mb(21,"div",13),a.Qb(22,"div",12),a.Qb(23,"h3"),a.Fc(24,"Hotel Info"),a.Pb(),a.Qb(25,"table"),a.Qb(26,"tr"),a.Qb(27,"th"),a.Fc(28,"Name :"),a.Pb(),a.Qb(29,"td"),a.Fc(30),a.Pb(),a.Pb(),a.Qb(31,"tr"),a.Qb(32,"th"),a.Fc(33,"Phone :"),a.Pb(),a.Qb(34,"td"),a.Fc(35),a.Pb(),a.Pb(),a.Qb(36,"tr"),a.Qb(37,"th"),a.Fc(38,"Address:"),a.Pb(),a.Qb(39,"td"),a.Fc(40),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(41,"div",2),a.Qb(42,"table",14),a.Qb(43,"thead"),a.Qb(44,"tr"),a.Qb(45,"th"),a.Fc(46,"Hotel"),a.Pb(),a.Qb(47,"th"),a.Fc(48,"Date"),a.Pb(),a.Qb(49,"th"),a.Fc(50,"Room number"),a.Pb(),a.Qb(51,"th",15),a.Fc(52,"Per night"),a.Pb(),a.Qb(53,"th",15),a.Fc(54,"Discount"),a.Pb(),a.Qb(55,"th",15),a.Fc(56,"Payable"),a.Pb(),a.Mb(57,"th",15),a.Pb(),a.Pb(),a.Dc(58,he,2,1,"tbody",5),a.Qb(59,"tfoot"),a.Qb(60,"tr"),a.Qb(61,"th",16),a.Fc(62,"Sub total"),a.Pb(),a.Qb(63,"th",15),a.Fc(64),a.Pb(),a.Mb(65,"td"),a.Pb(),a.Qb(66,"tr"),a.Qb(67,"th",16),a.Fc(68,"Discount"),a.Pb(),a.Qb(69,"th",15),a.Fc(70),a.Pb(),a.Mb(71,"td"),a.Pb(),a.Qb(72,"tr"),a.Qb(73,"th",16),a.Fc(74,"Promotional Discount"),a.Pb(),a.Qb(75,"th",15),a.Fc(76),a.Pb(),a.Mb(77,"td"),a.Pb(),a.Qb(78,"tr"),a.Qb(79,"th",16),a.Fc(80,"Total"),a.Pb(),a.Qb(81,"th",15),a.Fc(82),a.Pb(),a.Mb(83,"td"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(84,"div",17),a.Dc(85,pe,3,0,"button",18),a.Dc(86,ve,3,0,"button",19),a.Dc(87,ye,1,0,"ng-template",null,20,a.Ec),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(10),a.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.name),a.zb(5),a.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),a.zb(5),a.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.email),a.zb(10),a.Gc(null==n.booking?null:n.booking.hotels[0].name),a.zb(5),a.Gc(null==n.booking?null:n.booking.hotels[0].phoneNumber),a.zb(5),a.Gc(null==n.booking?null:n.booking.hotels[0].address.commaSeperatedString),a.zb(18),a.lc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),a.zb(6),a.Hc("",null==n.booking?null:n.booking.subtotal," BDT"),a.zb(6),a.Hc("",null==n.booking?null:n.booking.totalDiscount," BDT"),a.zb(6),a.Hc("",null==n.booking?null:n.booking.promotionDiscount," BDT"),a.zb(6),a.Hc("",null==n.booking?null:n.booking.total," BDT"),a.zb(3),a.lc("ngIf",null!=(null==n.booking?null:n.booking.subBookingList)&&n.booking.subBookingList.length>0),a.zb(1),a.lc("ngIf",!n.loading)}}var ke=function(){function e(e){this.bookingService=e,this.loading=!1}return e.prototype.ngOnInit=function(){this.getOfflineBookings()},e.prototype.onSelectBooking=function(e){var t=this.offlineBookings.find(function(t){return t.id===e});this.booking=ue({},t)},e.prototype.getOfflineBookings=function(){return e=this,void 0,n=function(){var e=this;return function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(t){switch(t.label){case 0:return this.loading=!0,[4,this.bookingService.getOfflineBookings().subscribe(function(t){e.offlineBookings=t,e.loading=!1})];case 1:return t.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(o,i){function r(e){try{a(n.next(e))}catch(t){i(t)}}function c(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,c)}a((n=n.apply(e,[])).next())});var e,t,n},e.prototype.onConfirmBooking=function(e){var t=this;console.log("CON",e),this.loading=!0,this.bookingService.confirmOfflineBookings(e).subscribe(function(e){console.log(e),t.booking=null,t.loading=!1,t.getOfflineBookings()})},e.prototype.onDeleteBooking=function(e){var t=this;this.loading=!0,this.bookingService.deleteOfflineBookings(e).subscribe(function(e){t.booking=null,t.loading=!1,t.getOfflineBookings()})},e.\u0275fac=function(t){return new(t||e)(a.Lb(o.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-offline-bookings"]],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],["class","list-group",4,"ngIf"],[4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"col-md-9"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my-4","p-2"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["colspan","5",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],["class","btn btn-sm btn-success mx-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mx-2",3,"click",4,"ngIf"],["loadMessage",""],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-sm","btn-danger","mx-2",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Offline bookings"),a.Pb(),a.Pb(),a.Qb(3,"div",0),a.Qb(4,"div",2),a.Qb(5,"div",3),a.Dc(6,me,7,1,"ul",4),a.Dc(7,fe,1,0,"loading",5),a.Pb(),a.Dc(8,Pe,89,13,"div",6),a.Pb(),a.Pb()),2&e&&(a.zb(6),a.lc("ngIf",!t.loading),a.zb(1),a.lc("ngIf",t.loading),a.zb(1),a.lc("ngIf",t.booking))},directives:[s.q,s.p,f.a],pipes:[s.f],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.15rem 1.25rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}(),Qe=n("YBP9"),De=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function c(e){try{l(o.next(e))}catch(t){r(t)}}function a(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((o=o.apply(e,t||[])).next())})},we=function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function Ce(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",9),a.Qb(1,"button",10),a.bc("click",function(){a.wc(n);var e=a.dc(2);return e.onCancelBooking(e.booking.id)}),a.Mb(2,"i",11),a.Fc(3," Cancel booking "),a.Pb(),a.Pb()}}function Se(e,t){if(1&e&&(a.Qb(0,"div",6),a.Mb(1,"admin-booking-details",7),a.Dc(2,Ce,4,0,"div",8),a.Pb()),2&e){var n=a.dc();a.zb(1),a.lc("booking",n.booking),a.zb(1),a.lc("ngIf",null!=(null==n.booking?null:n.booking.subBookingList)&&n.booking.subBookingList.length>0)}}var Be=function(){function e(e,t){this.utilService=e,this.bookingService=t,this.showRoomList=!1,this.reload=!1}return e.prototype.ngOnInit=function(){},e.prototype.onHotel=function(e){this.hotelId=e.id,this.showRoomList=!0},e.prototype.onShowHotels=function(e){this.showRoomList=!e},e.prototype.onRoomSelect=function(e){this.getAdminBooking(e.bookingId)},e.prototype.getAdminBooking=function(e){return De(this,void 0,void 0,function(){var t=this;return we(this,function(n){switch(n.label){case 0:return null!=this.booking&&this.booking.id==e?[3,2]:[4,this.bookingService.getAdminBooking(e).subscribe(function(e){t.booking=e})];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.onCancelBooking=function(e){return De(this,void 0,void 0,function(){var t=this;return we(this,function(n){switch(n.label){case 0:return confirm("Are you sure to cancel booking with booking id "+e)?[4,this.bookingService.cancelAdminBooking(e).subscribe(function(e){console.log(e),t.booking=null,t.reload=!t.reload})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.\u0275fac=function(t){return new(t||e)(a.Lb(i.a),a.Lb(o.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-cancel-bookings"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4","mb-5"],[3,"reload","roomSelected"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[3,"booking"],["class","d-flex flex-row-reverse bd-highlight mb-5",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Cancel Bookings"),a.Pb(),a.Pb(),a.Qb(3,"div",0),a.Qb(4,"div",2),a.Qb(5,"div",3),a.Qb(6,"admin-room-status-date",4),a.bc("roomSelected",function(e){return t.onRoomSelect(e)}),a.Pb(),a.Pb(),a.Dc(7,Se,3,2,"div",5),a.Pb(),a.Pb()),2&e&&(a.zb(6),a.lc("reload",t.reload),a.zb(1),a.lc("ngIf",t.booking))},directives:[L,s.q,Qe.a],styles:[""]}),e}(),Fe=n("LLt/"),xe=n("s1VS"),Me=n("Ji7U"),Re=n("LK+K"),Ie=n("1OyB"),ze=n("vuIU"),Oe=n("7o/Q"),Le=n("D0XW"),Ae=function(){function e(t,n){Object(Ie.a)(this,e),this.dueTime=t,this.scheduler=n}return Object(ze.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ne(e,this.dueTime,this.scheduler))}}]),e}(),Ne=function(e){Object(Me.a)(n,e);var t=Object(Re.a)(n);function n(e,o,i){var r;return Object(Ie.a)(this,n),(r=t.call(this,e)).dueTime=o,r.scheduler=i,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return Object(ze.a)(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Te,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(Oe.a);function Te(e){e.debouncedNext()}var He=n("/uUt"),Ee=n("lJxs"),_e=function(e){return e.SHIP="Ship",e.HOTEL="Hotel",e.AIR="Air",e.BUS="Bus",e}({}),Ve=function(){return(Ve=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function qe(e,t){if(1&e&&(a.Qb(0,"div",46),a.Fc(1),a.Pb()),2&e){var n=a.dc();a.zb(1),a.Hc(" ",n.errorMessage,"\n")}}function Ge(e,t){if(1&e&&a.Mb(0,"ngb-highlight",47),2&e){var n=t.term;a.lc("result",t.result.name)("term",n)}}function je(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Guest name required"),a.Pb())}function $e(e,t){if(1&e&&(a.Qb(0,"small",49),a.Qb(1,"div",50),a.Fc(2," Phone required "),a.Pb(),a.Qb(3,"div",50),a.Fc(4," Phone patter should be 01945564841 "),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(1),a.lc("hidden",!n.form.controls.guestPhone.errors.required),a.zb(2),a.lc("hidden",!n.form.controls.guestPhone.errors.pattern)}}function Ue(e,t){if(1&e&&(a.Qb(0,"option",51),a.Fc(1),a.Pb()),2&e){var n=t.$implicit;a.lc("value",n.key),a.zb(1),a.Hc(" ",n.value," ")}}function Je(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Service name"),a.Pb())}function Ke(e,t){if(1&e&&(a.Qb(0,"option",51),a.Fc(1),a.Pb()),2&e){var n=t.$implicit;a.lc("value",n.name),a.zb(1),a.Hc(" ",n.name," ")}}function Ye(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Service category"),a.Pb())}function We(e,t){if(1&e&&(a.Qb(0,"div",5),a.Qb(1,"label",52),a.Fc(2,"Service category*"),a.Pb(),a.Qb(3,"select",53),a.Qb(4,"option",16),a.Fc(5,"Select a service category"),a.Pb(),a.Dc(6,Ke,2,2,"option",17),a.Pb(),a.Dc(7,Ye,2,0,"small",8),a.Pb()),2&e){var n=a.dc();a.zb(6),a.lc("ngForOf",n.serviceCategoryList),a.zb(1),a.lc("ngIf",n.form.controls.category.errors&&n.form.controls.category.touched)}}function Xe(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Start from required"),a.Pb())}function Ze(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Reference required"),a.Pb())}function et(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Quantity required"),a.Pb())}function tt(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Rate required"),a.Pb())}function nt(e,t){if(1&e&&(a.Qb(0,"div",21),a.Qb(1,"label",54),a.Fc(2,"Price"),a.Pb(),a.Qb(3,"label",55),a.Fc(4),a.ec(5,"currency"),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(4),a.Gc(a.gc(5,1,n.price,"\u09f3"))}}function ot(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Discount required"),a.Pb())}function it(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",56),a.Mb(1,"div",57),a.Qb(2,"div",58),a.Fc(3,"Discount"),a.Pb(),a.Qb(4,"div",21),a.Qb(5,"input",59),a.bc("change",function(){return a.wc(n),a.dc().updateTotal()}),a.Pb(),a.Dc(6,ot,2,0,"small",8),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(6),a.lc("ngIf",o.form.controls.discount.errors&&o.form.controls.discount.touched)}}function rt(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"VAT in percent required"),a.Pb())}function ct(e,t){if(1&e&&(a.Qb(0,"div",21),a.Qb(1,"label",55),a.Fc(2),a.ec(3,"currency"),a.Pb(),a.Pb()),2&e){var n=a.dc(2);a.zb(2),a.Gc(a.gc(3,1,n.subTotal,"\u09f3"))}}function at(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",32),a.Qb(1,"div",58),a.Fc(2,"Vat "),a.Pb(),a.Qb(3,"div",21),a.Qb(4,"input",60),a.bc("change",function(){return a.wc(n),a.dc().updateTotal()}),a.Pb(),a.Dc(5,rt,2,0,"small",8),a.Pb(),a.Qb(6,"div",58),a.Fc(7,"Sub total"),a.Pb(),a.Dc(8,ct,4,4,"div",39),a.Pb()}if(2&e){var o=a.dc();a.zb(5),a.lc("ngIf",o.form.controls.vatPercent.errors&&o.form.controls.vatPercent.touched),a.zb(3),a.lc("ngIf",o.subTotal>0)}}function lt(e,t){if(1&e&&(a.Qb(0,"div",58),a.Qb(1,"label",55),a.Fc(2),a.ec(3,"currency"),a.Pb(),a.Pb()),2&e){var n=a.dc(2);a.zb(2),a.Gc(a.gc(3,1,n.payable,"\u09f3"))}}function bt(e,t){if(1&e&&(a.Qb(0,"div",32),a.Mb(1,"div",57),a.Qb(2,"div",58),a.Fc(3,"Total Payable"),a.Pb(),a.Dc(4,lt,4,4,"div",61),a.Pb()),2&e){var n=a.dc();a.zb(4),a.lc("ngIf",n.payable>0)}}function st(e,t){if(1&e&&(a.Qb(0,"option",51),a.Fc(1),a.Pb()),2&e){var n=t.$implicit;a.lc("value",n.key),a.zb(1),a.Hc(" ",n.value," ")}}function ut(e,t){1&e&&(a.Qb(0,"small",48),a.Fc(1,"Advance required"),a.Pb())}function dt(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",56),a.Qb(1,"div",21),a.Qb(2,"label",62),a.Fc(3,"Payment Method"),a.Pb(),a.Qb(4,"select",63),a.Dc(5,st,2,2,"option",17),a.ec(6,"keyvalue"),a.Pb(),a.Pb(),a.Qb(7,"div",21),a.Qb(8,"label",33),a.Fc(9,"Reference"),a.Pb(),a.Mb(10,"input",64),a.Pb(),a.Qb(11,"div",58),a.Fc(12,"Advance"),a.Pb(),a.Qb(13,"div",21),a.Qb(14,"input",65),a.bc("change",function(){return a.wc(n),a.dc().updateTotal()}),a.Pb(),a.Dc(15,ut,2,0,"small",8),a.Pb(),a.Pb()}if(2&e){var o=a.dc();a.zb(5),a.lc("ngForOf",a.fc(6,2,o.paymentMethods)),a.zb(10),a.lc("ngIf",o.form.controls.advance.errors&&o.form.controls.advance.touched)}}function mt(e,t){if(1&e&&(a.Qb(0,"div",32),a.Mb(1,"div",57),a.Qb(2,"div",58),a.Fc(3,"Due"),a.Pb(),a.Qb(4,"div",21),a.Qb(5,"label",55),a.Fc(6),a.ec(7,"currency"),a.Pb(),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(6),a.Gc(a.gc(7,1,n.due,"\u09f3"))}}function ft(e,t){if(1&e){var n=a.Rb();a.Qb(0,"button",45),a.bc("click",function(){return a.wc(n),a.dc().onDelete()}),a.Fc(1,"Delete"),a.Pb()}}function gt(e,t){if(1&e&&(a.Qb(0,"div",49),a.Fc(1),a.Pb()),2&e){var n=a.dc();a.zb(1),a.Hc(" ",n.getFormValidationErrors()," ")}}var ht={HOTEL:[{name:"Sea View Resort & Sports ",categories:[{name:"Deluxe Double "},{name:"Regular Double "},{name:"Regular Couple "},{name:"Premium Double   "},{name:"Premium Couple  "},{name:"Tent"}]},{name:"Mermaid Resort",categories:[{name:"Double Bed"}]},{name:"Hotel Sea Cox",categories:[{name:"Standard Couple (Non AC Room)"},{name:"Standard Couple (AC Room)"},{name:"Standard Three Bed (AC Room)"},{name:"Standard Four Bed (Non AC Room)"},{name:"Honeymoon Suite Couple (AC Room)"},{name:"Super Deluxe Couple Sea View (AC Room)"},{name:"Super Deluxe Four Bed (AC Room)"},{name:"Deluxe Couple (AC Room)"},{name:"Royal Suite Connecting Sea View (AC Room) "},{name:"Executive Suite Connecting (AC Room) "},{name:"Standard Triple (Non AC Room)"}]},{name:"The Cox Beach Resort",categories:[{name:"VIP Couple Deluxe AC"},{name:"Couple Bed AC"},{name:"3 Bed Deluxe AC"},{name:"Family Deluxe"},{name:"4 Bed Deluxe AC"},{name:"Couple Bed Non AC"}]},{name:"Grand Sajek Resort",categories:[{name:"Couple Bed "},{name:"Double Bed"}]},{name:"Muscat Holiday Resort",categories:[{name:"Couple Non Ac"},{name:"Couple Bed Ac"},{name:"Three Bed Non Ac"},{name:"Three Bed AC"},{name:"6 Bed Non Ac Room"},{name:"6 Bed Ac Room"},{name:"8 Bed Non Ac Room"},{name:"8 Bed Ac Room"}]},{name:"Tareng Resort ",categories:[{name:"Double Bed"},{name:"Couple Room"}]},{name:"Himalay Resort",categories:[{name:"Double Bed "}]},{name:"Shwapno Chura Resort",categories:[{name:"Double Bed "}]},{name:"Royal Sajek Resort",categories:[{name:"Double Bed"}]},{name:"Hotel Hill View",categories:[{name:" Family Deluxe Non AC"},{name:"Three Bed AC"},{name:"Three Bed Non AC"},{name:"Twin Bed Non-Ac"},{name:"Deluxe Couple AC"},{name:"Deluxe Couple Non AC"},{name:"Twin Bed Ac"},{name:"Family Deluxe Ac"}]},{name:"Sajek Megh Bilash Resort",categories:[{name:"Double Bed "},{name:"Couple Bed"}]},{name:"Dream Sajek Resort",categories:[{name:"Double Bed Room"}]},{name:"Hotel Auster echo",categories:[{name:"Couple Bed Ac (Hill View)"},{name:"Couple Bed Non-Ac (Hill View)"},{name:"Double Bed Ac"},{name:"Double Bed Non-Ac"},{name:"Three Bed Ac"},{name:"Three Bed Non-Ac"},{name:"Connecting Room Non-Ac (6 Pax)"},{name:"Suite Room"},{name:"Couple Bed Ac (Sea View)"},{name:"Couple Bed Non-Ac (Sea View)"}]},{name:"Sayeman Beach Resort",categories:[{name:"Panaroma Ocean Suite"},{name:"Super Deluxe King"},{name:"Infinity Sea View"},{name:"Junior Suite"},{name:"Infinity Sea View"},{name:"Infinity Sea View "}]},{name:"Sea Probal Beach Resort",categories:[{name:"Double Bedroom"}]},{name:"Shahajalal Resort",categories:[{name:"DoubleCouple"},{name:" Premium Couple Bed"},{name:"Premium Double"}]},{name:"Hotel Pink Shore",categories:[{name:"Deluxe King Suite (Hill View)"},{name:"Deluxe King Suite (Sea View)"},{name:"Deluxe Triple Suite (Hill View)"},{name:"Standard Double Suite (Hill View)"}]},{name:"Hotel Square Park",categories:[{name:"Twin Double Ac"},{name:"Single Twin Bed Ac"},{name:"Single Twin Bed Non-Ac"},{name:"Single Bed Non-Ac"},{name:"Single Bed Ac"},{name:"Three Bed Non-Ac"},{name:"Couple Bed Ac"},{name:"Couple Bed Non-Ac"},{name:"Twin Double Non AC"}]},{name:"Meghadree Eco Resort",categories:[{name:"Double Bed"},{name:"Semi Double Bed"}]},{name:"Paharika Resort",categories:[{name:"Couple Bed"},{name:"Double Bed"},{name:"3 Bed"}]},{name:"Best Western Heritage",categories:[{name:"Deluxe Double Sea View"},{name:"Deluxe Double Hill View"},{name:"Superior Double"},{name:"Superior Twin"}]},{name:"Moynamoti Resort",categories:[{name:"Deluxe Double"},{name:"Deluxe Couple"}]},{name:"Rajendra Eco Resort",categories:[]}],SHIP:[{name:"MV Bay Cruise",categories:[{name:"Krishnachura"},{name:"Hasnahena"},{name:"Raganigandha"}]},{name:"Keari Sindabad",categories:[{name:"Main Deck"},{name:"Open Deck"},{name:"Bridge Deck"}]},{name:"Keari Cruise and Dine",categories:[{name:"Pearl Loung"},{name:"Coral Loung"},{name:"Exclusive "}]},{name:"The Atlantic Cruise",categories:[{name:"Economy"},{name:"Open Deck"},{name:"Royal Loung"},{name:"Luxury Loung"}]},{name:"MV Bay One",categories:[{name:"VVIP Cabin"},{name:"Bunker Cabin"},{name:"Royal Class"},{name:"Bunker Bed"},{name:"Presidencial Suite"},{name:"Luxury Seat "},{name:"Economy Class"}]},{name:"MV Karnafuly Express",categories:[{name:"Lavender"},{name:"Marigold"},{name:"Gladiolous"},{name:"Lilack Loung"},{name:"Crishanthamam Loung"},{name:"Single Cabin"},{name:"Twin Cabin"},{name:"VIP Cabin"},{name:"VVIP Cabin"}]}],BUS:[{name:"Relax Transport",categories:[{name:"E-Class Non AC"},{name:"E-Class AC"},{name:"B-Class AC"}]},{name:"Saintmartin Paribahan BD",categories:[{name:"E-Class Non AC"},{name:"E-Class AC"},{name:"B-Class Non AC"},{name:"B-Class AC"}]},{name:"President Travels",categories:[{name:"B-Class AC"}]},{name:"Saintmartin Hyundai",categories:[{name:"E-Class AC"},{name:"B-Class AC"}]}],AIR:[{name:"Biman Bangladesh Airlines",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"US-Bangla Airlines",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Regent Airways",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Novoair",categories:[{name:"Economy Class"},{name:"Business Class"}]},{name:"Other",categories:[{name:"Economy Class"},{name:"Business Class"}]}]},pt=function(){function e(e,t){var n=this;this.fb=e,this.util=t,this.create=new a.n,this.searchService=function(e){return e.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.a;return function(n){return n.lift(new Ae(e,t))}}(200),Object(He.a)(),Object(Ee.a)(function(e){return(e.length<2?[]:ht[n.form.controls.bookingType.value].filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}).slice(0,10)).map(function(e){return e.name})}))},this.errorMessage="",this.exists=!1,this.mouseoverShifting=!1,this.enumBookingType=_e,this.paymentMethods=r.b,this.serviceCategoryList=[],this.price=0,this.subTotal=0,this.payable=0,this.due=0,this.createForm()}return e.prototype.ngOnChanges=function(e){},e.prototype.createForm=function(){this.form=this.fb.group({bookingType:["SHIP",Q.v.required],name:["",Q.v.required],category:["",Q.v.required],startDate:["",Q.v.required],endDate:[""],startFrom:[""],destination:[""],quantity:["",Q.v.required],rate:["",Q.v.required],discount:["",Q.v.required],vatPercent:["",Q.v.required],advance:["",Q.v.required],reference:["",Q.v.required],paymentMethod:["CASH",Q.v.required],paymentRef:[""],guestName:["",Q.v.required],guestPhone:["",[Q.v.required,Q.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],guestEmail:[""]})},e.prototype.submit=function(){if(this.form.valid){var e=this.form.value,t=this.util.makeDateString(e.startDate),n=void 0;e.endDate&&(n=this.util.makeDateString(e.endDate));var o=Ve(Ve({},this.form.value),{startDate:t,endDate:n});this.create.emit(o),this.clear()}},e.prototype.onSelectServiceType=function(e){this.form.controls.name.setValue(""),this.form.controls.category.setValue("")},e.prototype.onSelectServiceName=function(e){this.form.controls.category.setValue(""),this.serviceCategoryList=[];var t=e.item,n=ht[this.form.controls.bookingType.value].find(function(e){return e.name==t});console.log(n.categories),this.serviceCategoryList=n.categories},e.prototype.updateTotal=function(){var e=this.form.value;this.price=e.rate*e.quantity,this.subTotal=this.price-e.discount,this.payable=this.subTotal+this.subTotal*e.vatPercent/100,this.due=this.payable-e.advance},e.prototype.clear=function(){this.exists=!1,this.errorMessage="",this.form.reset()},e.prototype.getFormValidationErrors=function(){var e=this,t="";return Object.keys(this.form.controls).forEach(function(n){var o=e.form.get(n).errors;null!=o&&Object.keys(o).forEach(function(e){t+=n+" : "+e+"; "})}),t},e.\u0275fac=function(t){return new(t||e)(a.Lb(Q.d),a.Lb(i.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["manual-booking-form"]],outputs:{create:"create"},features:[a.xb],decls:85,vars:24,consts:[[1,"form-head"],["class","alert alert-danger",4,"ngIf"],["rt",""],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group","row"],[1,"col-sm-4"],["for","guestName",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestName","formControlName","guestName","placeholder","Guest Name",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","guestPhone",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestPhone","maxlength","11","formControlName","guestPhone","placeholder","Guest phone number",1,"form-control","form-control-sm"],["class","text-danger",4,"ngIf"],["for","guestEmail",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","guestEmail","formControlName","guestEmail","placeholder","Guest Email",1,"form-control","form-control-sm"],["for","bookingType",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","bookingType","formControlName","bookingType",1,"form-control","form-control-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","name",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","name","type","text","formControlName","name",1,"form-control","form-control-sm",3,"ngbTypeahead","editable","selectItem"],["class","col-sm-4",4,"ngIf"],[1,"col-sm-3"],["for","startDate",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","startDate",1,"form-control","form-control-sm",3,"click"],["startDate","ngbDatepicker"],["for","endDate",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","endDate",1,"form-control","form-control-sm",3,"click"],["endDate","ngbDatepicker"],["for","startFrom",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","name","formControlName","startFrom","placeholder","Start From",1,"form-control","form-control-sm"],["for","destination",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","name","formControlName","destination","placeholder","Destination",1,"form-control","form-control-sm"],[1,"row"],["for","reference",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","reference","formControlName","reference","placeholder","reference",1,"form-control","form-control-sm",3,"change"],["for","quantity",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","quantity","formControlName","quantity","placeholder","Quantity",1,"form-control","form-control-sm",3,"change"],["for","rate",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["type","text","id","rate","formControlName","rate","placeholder","Rate",1,"form-control","form-control-sm",3,"change"],["class","col-sm-3",4,"ngIf"],["class","row mb-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"mouseenter"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],[1,"alert","alert-danger"],[3,"result","term"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"hidden"],[3,"value"],["for","category",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","category","formControlName","category",1,"form-control","form-control-sm"],["for","price",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],[1,"form-control","form-control-sm","text-right"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"col-sm-3","text-right"],["type","text","id","discount","formControlName","discount","placeholder","Discount",1,"form-control","form-control-sm","text-right",3,"change"],["type","text","id","rate","formControlName","vatPercent","placeholder","VAT in percent",1,"form-control","form-control-sm",3,"change"],["class","col-sm-3 text-right",4,"ngIf"],["for","paymentMethod",1,"d-none","d-sm-block","col-form-label","col-form-label-sm"],["id","paymentMethod","formControlName","paymentMethod",1,"form-control","form-control-sm"],["type","text","id","reference","formControlName","paymentRef",1,"form-control","form-control-sm"],["type","text","id","advance","formControlName","advance","placeholder","Advance",1,"form-control","form-control-sm","text-right",3,"change"]],template:function(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",0),a.Fc(1," Create manual booking\n"),a.Pb(),a.Dc(2,qe,2,1,"div",1),a.Dc(3,Ge,1,2,"ng-template",null,2,a.Ec),a.Qb(5,"form",3),a.bc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),a.Qb(6,"div",4),a.Qb(7,"div",5),a.Qb(8,"label",6),a.Fc(9,"Guest Name*"),a.Pb(),a.Mb(10,"input",7),a.Dc(11,je,2,0,"small",8),a.Pb(),a.Qb(12,"div",5),a.Qb(13,"label",9),a.Fc(14,"Guest Phone*"),a.Pb(),a.Mb(15,"input",10),a.Dc(16,$e,5,2,"small",11),a.Pb(),a.Qb(17,"div",5),a.Qb(18,"label",12),a.Fc(19,"Guest Email"),a.Pb(),a.Mb(20,"input",13),a.Pb(),a.Pb(),a.Qb(21,"div",4),a.Qb(22,"div",5),a.Qb(23,"label",14),a.Fc(24,"Service Type*"),a.Pb(),a.Qb(25,"select",15),a.bc("change",function(e){return t.onSelectServiceType(e.target.value)}),a.Qb(26,"option",16),a.Fc(27,"Select a service Type"),a.Pb(),a.Dc(28,Ue,2,2,"option",17),a.ec(29,"keyvalue"),a.Pb(),a.Pb(),a.Qb(30,"div",5),a.Qb(31,"label",18),a.Fc(32,"Service Name*"),a.Pb(),a.Qb(33,"input",19),a.bc("selectItem",function(e){return t.onSelectServiceName(e)}),a.Pb(),a.Dc(34,Je,2,0,"small",8),a.Pb(),a.Dc(35,We,8,2,"div",20),a.Pb(),a.Qb(36,"div",4),a.Qb(37,"div",21),a.Qb(38,"label",22),a.Fc(39,"Start / Check in Date *"),a.Pb(),a.Qb(40,"input",23,24),a.bc("click",function(){return a.wc(n),a.vc(41).toggle()}),a.Pb(),a.Pb(),a.Qb(42,"div",21),a.Qb(43,"label",25),a.Fc(44,"End Date/Check out Date"),a.Pb(),a.Qb(45,"input",26,27),a.bc("click",function(){return a.wc(n),a.vc(46).toggle()}),a.Pb(),a.Pb(),a.Qb(47,"div",21),a.Qb(48,"label",28),a.Fc(49,"Place / Start From"),a.Pb(),a.Mb(50,"input",29),a.Dc(51,Xe,2,0,"small",8),a.Pb(),a.Qb(52,"div",21),a.Qb(53,"label",30),a.Fc(54,"Destination"),a.Pb(),a.Mb(55,"input",31),a.Pb(),a.Pb(),a.Qb(56,"div",32),a.Qb(57,"div",21),a.Qb(58,"label",33),a.Fc(59,"Booking id / Reference"),a.Pb(),a.Qb(60,"input",34),a.bc("change",function(){return t.updateTotal()}),a.Pb(),a.Dc(61,Ze,2,0,"small",8),a.Pb(),a.Qb(62,"div",21),a.Qb(63,"label",35),a.Fc(64,"Quantity"),a.Pb(),a.Qb(65,"input",36),a.bc("change",function(){return t.updateTotal()}),a.Pb(),a.Dc(66,et,2,0,"small",8),a.Pb(),a.Qb(67,"div",21),a.Qb(68,"label",37),a.Fc(69,"Rate"),a.Pb(),a.Qb(70,"input",38),a.bc("change",function(){return t.updateTotal()}),a.Pb(),a.Dc(71,tt,2,0,"small",8),a.Pb(),a.Dc(72,nt,6,4,"div",39),a.Pb(),a.Dc(73,it,7,1,"div",40),a.Dc(74,at,9,2,"div",41),a.Dc(75,bt,5,1,"div",41),a.Dc(76,dt,16,4,"div",40),a.Dc(77,mt,8,4,"div",41),a.Qb(78,"div",42),a.Qb(79,"button",43),a.bc("mouseenter",function(){return t.mouseoverShifting=!0}),a.Fc(80),a.Pb(),a.Dc(81,ft,2,0,"button",44),a.Qb(82,"button",45),a.bc("click",function(){return t.clear()}),a.Fc(83,"Clear"),a.Pb(),a.Pb(),a.Dc(84,gt,2,1,"div",11),a.Pb()}2&e&&(a.zb(2),a.lc("ngIf",t.errorMessage.length>0),a.zb(3),a.lc("formGroup",t.form),a.zb(6),a.lc("ngIf",t.form.controls.guestName.errors&&t.form.controls.guestName.touched),a.zb(5),a.lc("ngIf",t.form.controls.guestPhone.errors&&t.form.controls.guestPhone.touched),a.zb(12),a.lc("ngForOf",a.fc(29,22,t.enumBookingType)),a.zb(5),a.lc("ngbTypeahead",t.searchService)("editable",!1),a.zb(1),a.lc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),a.zb(1),a.lc("ngIf",(null==t.form||null==t.form.value||null==t.form.value.name?null:t.form.value.name.length)>0),a.zb(16),a.lc("ngIf",t.form.controls.startFrom.errors&&t.form.controls.startFrom.touched),a.zb(10),a.lc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),a.zb(5),a.lc("ngIf",t.form.controls.quantity.errors&&t.form.controls.quantity.touched),a.zb(5),a.lc("ngIf",t.form.controls.rate.errors&&t.form.controls.rate.touched),a.zb(1),a.lc("ngIf",t.price>0),a.zb(1),a.lc("ngIf",t.price>0),a.zb(1),a.lc("ngIf",t.price>0),a.zb(1),a.lc("ngIf",t.subTotal>0),a.zb(1),a.lc("ngIf",t.payable>0),a.zb(1),a.lc("ngIf",t.payable>0),a.zb(3),a.Gc(t.exists?"Update":"Save"),a.zb(1),a.lc("ngIf",t.exists),a.zb(3),a.lc("ngIf",t.mouseoverShifting))},directives:[s.q,Q.x,Q.n,Q.g,Q.b,Q.m,Q.f,Q.j,Q.u,Q.q,Q.w,s.p,b.u,b.i,b.h],pipes:[s.k,s.d],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#3f87c7}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.hotel-button-reverse[_ngcontent-%COMP%]:hover{background-color:#3f87c7}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff;background-color:#1b2445}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}"]}),e}(),vt=n("sMOk"),yt=n("lWB2"),Pt=function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function c(e){try{l(o.next(e))}catch(t){r(t)}}function a(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((o=o.apply(e,t||[])).next())})},kt=function(e,t){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function Qt(e,t){if(1&e){var n=a.Rb();a.Qb(0,"manual-booking-form",7),a.bc("create",function(e){return a.wc(n),a.dc().onCreate(e)}),a.Pb()}}function Dt(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",8),a.Qb(1,"div",9),a.Qb(2,"button",10),a.bc("click",function(){return a.wc(n),a.dc().adjustDay(-1)}),a.Mb(3,"i",11),a.Fc(4," Prev"),a.Pb(),a.Pb(),a.Qb(5,"div",9),a.Qb(6,"div",12),a.Qb(7,"div",13),a.Qb(8,"div",14),a.Fc(9,"Date"),a.Pb(),a.Pb(),a.Qb(10,"input",15,16),a.bc("click",function(){return a.wc(n),a.vc(11).toggle()})("ngModelChange",function(e){return a.wc(n),a.dc().date=e})("dateSelect",function(){return a.wc(n),a.dc().adjustDay(0)}),a.Pb(),a.Qb(12,"div",17),a.Qb(13,"button",18),a.bc("click",function(){return a.wc(n),a.vc(11).toggle()}),a.Mb(14,"i",19),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(15,"div",9),a.Qb(16,"button",10),a.bc("click",function(){return a.wc(n),a.dc().adjustDay(1)}),a.Fc(17," Next "),a.Mb(18,"i",20),a.Pb(),a.Pb(),a.Pb(),a.Ob(19),a.Qb(20,"manual-booking-list",21),a.bc("details",function(e){return a.wc(n),a.dc().onDetails(e)}),a.Pb(),a.Nb()}if(2&e){var o=a.dc();a.zb(10),a.lc("ngModel",o.date),a.zb(10),a.lc("manualBookingList",o.manualBookingList)("manual",!0)}}function wt(e,t){if(1&e){var n=a.Rb();a.Qb(0,"manual-booking-details",22),a.bc("clear",function(){return a.wc(n),a.dc().clear()})("due",function(e){return a.wc(n),a.dc().onCollectDue(e)}),a.Pb()}if(2&e){var o=a.dc();a.lc("manualBooking",o.manualBooking)("accounts",!0)}}var Ct=[{path:"sell-rooms",component:be},{path:"offline-bookings",component:ke},{path:"cancel-bookings",component:Be},{path:"manual-bookings",component:function(){function e(e,t,n){this.manualBookingService=e,this.auth=t,this.util=n,this.activeNav=2,this.manualBookingList=[]}return e.prototype.ngOnInit=function(){this.userId=this.auth.getUserId(),this.date=this.util.convertJsDateToNgbDate(new Date),this.getMyBookingsDay(this.userId,this.util.makeDateString(this.date))},e.prototype.getMyBookingsDay=function(e,t){return Pt(this,void 0,void 0,function(){var n,o;return kt(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.manualBookingList=[],n=this,[4,this.manualBookingService.getForDayAndCreateBy(e,t).toPromise()];case 1:return n.manualBookingList=i.sent(),[3,3];case 2:return o=i.sent(),console.log(o),[3,3];case 3:return[2]}})})},e.prototype.adjustDay=function(e){var t=new Date(this.date.year,this.date.month-1,this.date.day+e);this.date=this.util.convertJsDateToNgbDate(t),this.getMyBookingsDay(this.userId,this.util.makeDateString(this.date))},e.prototype.onCreate=function(e){return Pt(this,void 0,void 0,function(){var t;return kt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.manualBookingService.create(e).toPromise()];case 1:return n.sent(),this.activeNav=2,this.getMyBookingsDay(this.userId,this.util.makeDateString(this.date)),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}})})},e.prototype.onCollectDue=function(e){return Pt(this,void 0,void 0,function(){var t;return kt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.manualBookingService.collectDue(this.manualBooking.id,e.amount,e.method).toPromise()];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}})})},e.prototype.onDetails=function(e){this.manualBooking=this.manualBookingList.find(function(t){return t.id==e}),this.activeNav=3},e.prototype.clear=function(){this.manualBooking=null,this.activeNav=2},e.\u0275fac=function(t){return new(t||e)(a.Lb(xe.a),a.Lb(Fe.a),a.Lb(i.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-manual-booking"]],decls:16,vars:5,consts:[[1,"container"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[3,"create"],[1,"row"],[1,"col-auto"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[3,"manualBookingList","manual","details"],[3,"manualBooking","accounts","clear","due"]],template:function(e,t){if(1&e&&(a.Qb(0,"div",0),a.Qb(1,"ul",1,2),a.bc("activeIdChange",function(e){return t.activeNav=e}),a.Qb(3,"li",3),a.Qb(4,"a",4),a.Fc(5,"Create"),a.Pb(),a.Dc(6,Qt,1,0,"ng-template",5),a.Pb(),a.Qb(7,"li",3),a.Qb(8,"a",4),a.Fc(9,"List"),a.Pb(),a.Dc(10,Dt,21,3,"ng-template",5),a.Pb(),a.Qb(11,"li",3),a.Qb(12,"a",4),a.Fc(13,"Details"),a.Pb(),a.Dc(14,wt,1,2,"ng-template",5),a.Pb(),a.Pb(),a.Mb(15,"div",6),a.Pb()),2&e){var n=a.vc(2);a.zb(1),a.lc("activeId",t.activeNav),a.zb(2),a.lc("ngbNavItem",1),a.zb(4),a.lc("ngbNavItem",2),a.zb(4),a.lc("ngbNavItem",3),a.zb(4),a.lc("ngbNavOutlet",n)}},directives:[b.k,b.m,b.n,b.l,b.o,pt,b.i,Q.b,Q.m,Q.p,vt.a,yt.a],styles:[".btn-web[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]{color:#fff;background-color:#3f87c7}.hotel-button-reverse[_ngcontent-%COMP%], .hotel-button[_ngcontent-%COMP%]:hover{background-color:#f7a71a}.hotel-button-reverse[_ngcontent-%COMP%]{color:#fff}.hotel-button-reverse[_ngcontent-%COMP%]:hover{background-color:#3f87c7}.form-head[_ngcontent-%COMP%], td.form-head[_ngcontent-%COMP%]{width:inherit;font-size:20px!important;line-height:22px;padding:5px;color:#fff;background-color:#1b2445}.form-head-link[_ngcontent-%COMP%], td.form-head-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-size:16px}.col-form-label-sm[_ngcontent-%COMP%]{padding:0;font-size:12px}"]}),e}()}],St=function(){function e(){}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[se.a,l.e.forChild(Ct)]]}),e}()}}]);