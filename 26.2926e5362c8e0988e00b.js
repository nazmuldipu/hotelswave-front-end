(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{fyiT:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return S}),n.d(t,"ServiceAdminUsersModule",function(){return y});var r=n("tyNb"),o=n("MKLO"),i=n("ITiG"),c=n("fXoL"),u=n("3Pt+"),s=n("ofXK"),b=n("uEz7"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){1&e&&(c.Tb(0,"small",14),c.Gc(1," Name required "),c.Sb())}function f(e,t){if(1&e&&(c.Tb(0,"small",14),c.Tb(1,"div",15),c.Gc(2," Phone number required "),c.Sb(),c.Tb(3,"div",15),c.Gc(4," Phone number format 01934953023 "),c.Sb(),c.Sb()),2&e){var n=c.gc();c.Bb(1),c.oc("hidden",!n.form.controls.phoneNumber.errors.required),c.Bb(2),c.oc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}function m(e,t){if(1&e){var n=c.Ub();c.Tb(0,"button",16),c.ec("click",function(){c.zc(n);var e=c.gc();return e.onRemoveAgent(e.user.id)}),c.Gc(1," Remove this agent "),c.Sb()}}var p=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},h=function(){function e(e){this.builder=e,this.create=new c.n,this.removeAgent=new c.n,this.exists=!1,this.createForm()}return e.prototype.ngOnChanges=function(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(a({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email})))},e.prototype.createForm=function(){this.form=this.builder.group({name:["",u.v.required],phoneNumber:["",[u.v.required,u.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},e.prototype.submit=function(){if(this.form.valid){if(this.exists){var e=a(a({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}},e.prototype.onRemoveAgent=function(e){this.removeAgent.emit(e),this.onClear()},e.prototype.onClear=function(){this.form.reset(),this.exists=!1},e.\u0275fac=function(t){return new(t||e)(c.Ob(u.d))},e.\u0275cmp=c.Ib({type:e,selectors:[["agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[c.zb],decls:22,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(c.Tb(0,"form",0),c.ec("ngSubmit",function(){return t.submit()}),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"label",3),c.Gc(4,"Name *"),c.Sb(),c.Pb(5,"input",4),c.Ec(6,l,2,0,"small",5),c.Sb(),c.Tb(7,"div",2),c.Tb(8,"label",6),c.Gc(9,"Phone *"),c.Sb(),c.Pb(10,"input",7),c.Ec(11,f,5,2,"small",5),c.Sb(),c.Tb(12,"div",2),c.Tb(13,"label",8),c.Gc(14,"Email"),c.Sb(),c.Pb(15,"input",9),c.Sb(),c.Sb(),c.Tb(16,"div",10),c.Tb(17,"button",11),c.Gc(18),c.Sb(),c.Ec(19,m,2,0,"button",12),c.Tb(20,"button",13),c.ec("click",function(){return t.onClear()}),c.Gc(21," Clear "),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.oc("formGroup",t.form),c.Bb(6),c.oc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),c.Bb(5),c.oc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),c.Bb(6),c.oc("ngClass",c.uc(6,p,t.form.invalid,t.exists,!t.exists)),c.Bb(1),c.Ic(" ",t.exists?"Update":"Create"," User "),c.Bb(1),c.oc("ngIf",t.exists))},directives:[u.x,u.n,u.g,u.b,u.m,u.f,s.p,u.j,s.n],styles:[""]}),e}(),d=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,u)}s((r=r.apply(e,t||[])).next())})},g=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function v(e,t){if(1&e){var n=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Gc(6),c.Sb(),c.Tb(7,"td"),c.Tb(8,"button",16),c.ec("click",function(){c.zc(n);var e=t.$implicit;return c.gc().onSelect(e.id)}),c.Pb(9,"i",17),c.Sb(),c.Sb(),c.Sb()}if(2&e){var r=t.$implicit;c.Bb(2),c.Hc(r.name),c.Bb(2),c.Hc(r.phoneNumber),c.Bb(2),c.Hc(r.email)}}var S=[{path:"",component:function(){function e(e){this.userService=e,this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage(this.userQuery)},e.prototype.getUserPage=function(e,t){return void 0===t&&(t=0),d(this,void 0,void 0,function(){var n=this;return g(this,function(r){return this.userService.getServiceAdminAgents(e,t).subscribe(function(e){n.userPage=e}),[2]})})},e.prototype.submit=function(){this.getUserPage(this.userQuery)},e.prototype.onCreate=function(e){return d(this,void 0,void 0,function(){var t=this;return g(this,function(n){switch(n.label){case 0:return[4,this.userService.createSerivceAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery)})];case 1:return n.sent(),[2]}})})},e.prototype.onSelect=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onRemoveAgent=function(e){return d(this,void 0,void 0,function(){var t=this;return g(this,function(n){switch(n.label){case 0:return console.log("On leave ",e),[4,this.userService.removeServiceAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(c.Ob(i.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-add-agent"]],decls:35,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","4"],[3,"page","getPage"],[3,"user","create","removeAgent"],[1,"btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil-square-o"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Agents"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"h3",4),c.Gc(7,"Agent list"),c.Sb(),c.Tb(8,"form",5),c.ec("ngSubmit",function(){return t.submit()}),c.Tb(9,"div",6),c.Tb(10,"div",7),c.Tb(11,"div",8),c.Pb(12,"i",9),c.Gc(13,"\xa0 Search"),c.Sb(),c.Sb(),c.Tb(14,"input",10),c.ec("ngModelChange",function(e){return t.userQuery=e}),c.Sb(),c.Sb(),c.Sb(),c.Tb(15,"table",11),c.Tb(16,"thead"),c.Tb(17,"tr"),c.Tb(18,"th"),c.Gc(19,"Name"),c.Sb(),c.Tb(20,"th"),c.Gc(21,"Phone"),c.Sb(),c.Tb(22,"th"),c.Gc(23,"Email"),c.Sb(),c.Pb(24,"th"),c.Sb(),c.Sb(),c.Tb(25,"tbody"),c.Ec(26,v,10,3,"tr",12),c.Sb(),c.Tb(27,"tfoot"),c.Tb(28,"tr"),c.Tb(29,"td",13),c.Tb(30,"pagination",14),c.ec("getPage",function(e){return t.getUserPage(e)}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(31,"div",3),c.Tb(32,"h3",4),c.Gc(33,"Add Agent"),c.Sb(),c.Tb(34,"agent-form",15),c.ec("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.Bb(14),c.oc("ngModel",t.userQuery),c.Bb(12),c.oc("ngForOf",null==t.userPage?null:t.userPage.content),c.Bb(4),c.oc("page",t.userPage),c.Bb(4),c.oc("user",t.user))},directives:[u.x,u.n,u.o,u.b,u.m,u.p,s.o,b.a,h],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}()}],y=function(){function e(){}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(S)]]}),e}()}}]);