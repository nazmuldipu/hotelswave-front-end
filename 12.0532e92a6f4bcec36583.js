(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{U6ZW:function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return yt}),n.d(e,"AdminReportModule",function(){return kt});var o=n("tyNb"),i=n("3whx"),r=n("kU/X"),a=n("/e7+"),c=n("fXoL"),s=n("1kSV"),b=n("3Pt+"),l=n("ofXK"),u=n("HF3I"),d=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},h=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function p(t,e){if(1&t&&(c.Tb(0,"div"),c.Pb(1,"loading",32),c.Sb()),2&t){var n=c.gc();c.Bb(1),c.oc("message",n.message)}}function g(t,e){1&t&&(c.Tb(0,"th"),c.Gc(1,"Reservation Date"),c.Sb())}function f(t,e){if(1&t&&(c.Tb(0,"td"),c.Gc(1),c.hc(2,"date"),c.Sb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ic(" ",c.jc(2,1,n.date,"d MMM,y")," ")}}var v=function(t,e){return{"bg-primary":t,"bg-danger":e}};function S(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Gc(6),c.Sb(),c.Tb(7,"td"),c.Gc(8),c.Sb(),c.Ec(9,f,3,4,"td",29),c.Tb(10,"td",35),c.Gc(11),c.Sb(),c.Tb(12,"td",35),c.Gc(13),c.Sb(),c.Tb(14,"td",35),c.Gc(15),c.Sb(),c.Tb(16,"td"),c.Gc(17),c.Sb(),c.Tb(18,"td",35),c.Gc(19),c.Sb(),c.Tb(20,"td",38),c.Gc(21),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=c.gc(2);c.Bb(2),c.Hc(n.hotelName),c.Bb(2),c.Jc(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.Bb(2),c.Jc("",n.customerName,"[",n.customerPhone,"]"),c.Bb(2),c.Jc("",n.roomNumber," [",n.category,"]"),c.Bb(1),c.oc("ngIf","Booking"===o.reportHead),c.Bb(2),c.Hc(n.price),c.Bb(2),c.Hc(n.advance),c.Bb(2),c.Hc(n.due),c.Bb(2),c.Hc(n.ref),c.Bb(2),c.Hc(n.commission),c.Bb(1),c.oc("ngClass",c.tc(15,v,"Paid"==n.status,"Unpaid"==n.status)),c.Bb(1),c.Ic(" ",n.status," ")}}function m(t,e){1&t&&c.Pb(0,"td")}function T(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"h3",33),c.Gc(2),c.Sb(),c.Tb(3,"table",34),c.Tb(4,"thead"),c.Tb(5,"tr"),c.Tb(6,"th"),c.Gc(7,"Hotel Name"),c.Sb(),c.Tb(8,"th"),c.Gc(9,"Sold by"),c.Sb(),c.Tb(10,"th"),c.Gc(11,"Customer"),c.Sb(),c.Tb(12,"th"),c.Gc(13,"Room No."),c.Sb(),c.Ec(14,g,2,0,"th",29),c.Tb(15,"th",35),c.Gc(16,"Rent"),c.Sb(),c.Tb(17,"th",35),c.Gc(18,"Advance"),c.Sb(),c.Tb(19,"th",35),c.Gc(20,"Due"),c.Sb(),c.Tb(21,"th"),c.Gc(22,"Ref"),c.Sb(),c.Tb(23,"th",35),c.Gc(24,"Commission"),c.Sb(),c.Tb(25,"th"),c.Gc(26,"Status"),c.Sb(),c.Sb(),c.Sb(),c.Tb(27,"tbody"),c.Ec(28,S,22,18,"tr",36),c.Sb(),c.Tb(29,"tfoot"),c.Tb(30,"tr"),c.Tb(31,"th"),c.Gc(32,"Total"),c.Sb(),c.Pb(33,"td"),c.Pb(34,"td"),c.Ec(35,m,1,0,"td",29),c.Pb(36,"th"),c.Tb(37,"th",35),c.Gc(38),c.Sb(),c.Tb(39,"th",35),c.Gc(40),c.Sb(),c.Tb(41,"th",35),c.Gc(42),c.Sb(),c.Pb(43,"th",37),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(2),c.Jc(" ",n.reportHead," report for date of : ",n.getDate()," "),c.Bb(12),c.oc("ngIf","Booking"===n.reportHead),c.Bb(14),c.oc("ngForOf",n.serviceAdminBookingReportList),c.Bb(7),c.oc("ngIf","Booking"===n.reportHead),c.Bb(3),c.Hc(n.total.totalrent),c.Bb(2),c.Hc(n.total.totalAdvance),c.Bb(2),c.Hc(n.total.totalDue)}}function y(t,e){1&t&&(c.Tb(0,"h4",33),c.Pb(1,"i",39),c.Gc(2," No record yet"),c.Sb())}var k=function(){function t(t,e){this.reportService=t,this.utilService=e,this.savedList=[],this.serviceAdminBookingReportList=[],this.reportType="Reservation",this.filterValue="all",this.reportHead="",this.loading=!1}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDate(),this.getAdminReservationReport(this.date)},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.getDate=function(){return this.date.day+"-"+this.date.month+"-"+this.date.year},t.prototype.onLoad=function(){switch(this.reportType){case"Reservation":this.getAdminReservationReport(this.date);break;case"Booking":this.getAdminBookingReport(this.date)}},t.prototype.onTypeChange=function(t){this.reportType=t,this.onLoad()},t.prototype.onPrint=function(){window.print()},t.prototype.onFilterChange=function(t){switch(this.filterValue=t,t){case"all":this.serviceAdminBookingReportList=this.savedList;break;case"hotelswave":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Admin"===t.role});break;case"hotelAdmin":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Service Admin"===t.role});break;case"hotelAgent":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Service Agent"===t.role});break;case"hotelswaveAgent":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Agent"===t.role});break;case"user":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role});break;case"superSell":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role||"Agent"===t.role||"Admin"==t.role})}this.calculateServiceAdminBookingReportList()},t.prototype.getAdminReservationReport=function(t){return d(this,void 0,void 0,function(){var e=this;return h(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReport(this.utilService.makeDateString(t)).subscribe(function(t){e.savedList=t,e.onFilterChange(e.filterValue),e.reportHead="Reservation",e.loading=!1})];case 1:return n.sent(),[2]}})})},t.prototype.getAdminBookingReport=function(t){return d(this,void 0,void 0,function(){var e=this;return h(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReport(this.utilService.makeDateString(t)).subscribe(function(t){e.savedList=t,e.savedList.sort(e.utilService.dynamicSortObject("date")),e.savedList.sort(e.utilService.dynamicSortObject("roomNumber")),e.onFilterChange(e.filterValue),e.reportHead="Booking",e.loading=!1})];case 1:return n.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.serviceAdminBookingReportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-booking-report"]],decls:55,vars:5,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],[1,"row","d-print-none"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reservation"],["value","Booking"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","hotelswave"],["value","hotelAdmin"],["value","hotelAgent"],["value","hotelswaveAgent"],["value","superSell"],["value","user"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[3,"message"],[1,"text-center"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Booking report"),c.Sb(),c.Sb(),c.Tb(3,"div",2),c.Tb(4,"div",3),c.Tb(5,"div",4),c.Tb(6,"div",5),c.Tb(7,"div",6),c.Tb(8,"div",7),c.Gc(9,"Date"),c.Sb(),c.Sb(),c.Tb(10,"input",8,9),c.ec("ngModelChange",function(t){return e.date=t})("dateSelect",function(){return e.onLoad()})("click",function(){return c.zc(n),c.yc(11).toggle()}),c.Sb(),c.Tb(12,"div",10),c.Tb(13,"button",11),c.ec("click",function(){return c.zc(n),c.yc(11).toggle()}),c.Pb(14,"i",12),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(15,"div",4),c.Tb(16,"div",5),c.Tb(17,"div",6),c.Tb(18,"div",7),c.Gc(19,"Type"),c.Sb(),c.Sb(),c.Tb(20,"select",13),c.ec("ngModelChange",function(t){return e.reportType=t})("change",function(t){return e.onTypeChange(t.target.value)}),c.Tb(21,"option",14),c.Gc(22," By checkin date "),c.Sb(),c.Tb(23,"option",15),c.Gc(24," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(25,"div",16),c.Tb(26,"div",5),c.Tb(27,"div",6),c.Tb(28,"div",7),c.Gc(29,"Filter"),c.Sb(),c.Sb(),c.Tb(30,"select",17),c.ec("change",function(t){return e.onFilterChange(t.target.value)}),c.Tb(31,"option",18),c.Gc(32," All "),c.Sb(),c.Tb(33,"option",19),c.Gc(34," Hotelswave "),c.Sb(),c.Tb(35,"option",20),c.Gc(36," Hotel Admin "),c.Sb(),c.Tb(37,"option",21),c.Gc(38," Hotel Agent "),c.Sb(),c.Tb(39,"option",22),c.Gc(40," Hotelswave Agent "),c.Sb(),c.Tb(41,"option",23),c.Gc(42," Super Sell "),c.Sb(),c.Tb(43,"option",24),c.Gc(44," User "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(45,"div",4),c.Tb(46,"button",25),c.ec("click",function(){return e.onPrint()}),c.Pb(47,"i",26),c.Gc(48," Print "),c.Sb(),c.Sb(),c.Sb(),c.Tb(49,"div",27),c.Tb(50,"div",28),c.Ec(51,p,2,1,"div",29),c.Ec(52,T,44,8,"div",30),c.Ec(53,y,3,0,"ng-template",null,31,c.Fc),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=c.yc(54);c.Bb(10),c.oc("ngModel",e.date),c.Bb(10),c.oc("ngModel",e.reportType),c.Bb(31),c.oc("ngIf",e.loading),c.Bb(1),c.oc("ngIf",e.serviceAdminBookingReportList.length>0&&!e.loading)("ngIfElse",o)}},directives:[s.g,b.b,b.m,b.p,b.u,b.q,b.w,l.p,u.a,l.o,l.n],pipes:[l.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),B=n("/YPm"),D=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},G=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function w(t,e){if(1&t&&(c.Tb(0,"div"),c.Pb(1,"loading",36),c.Sb()),2&t){var n=c.gc(2);c.Bb(1),c.oc("message",n.message)}}function R(t,e){1&t&&(c.Tb(0,"th"),c.Gc(1,"Checkin Date"),c.Sb())}function A(t,e){if(1&t&&(c.Tb(0,"td"),c.Gc(1),c.hc(2,"date"),c.Sb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ic(" ",c.jc(2,1,n.date,"d MMM,y")," ")}}var H=function(t,e){return{"bg-primary":t,"bg-danger":e}};function I(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Ec(3,A,3,4,"td",33),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td",40),c.Gc(9),c.Sb(),c.Tb(10,"td",40),c.Gc(11),c.Sb(),c.Tb(12,"td",40),c.Gc(13),c.Sb(),c.Tb(14,"td"),c.Gc(15),c.Sb(),c.Tb(16,"td",40),c.Gc(17),c.Sb(),c.Tb(18,"td",41),c.Gc(19),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=c.gc(3);c.Bb(2),c.Jc("",n.roomNumber,"[",n.category,"]"),c.Bb(1),c.oc("ngIf","Booking"===o.reportHead),c.Bb(2),c.Jc("",n.customerName," - ",n.customerPhone,""),c.Bb(2),c.Jc(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.Bb(2),c.Hc(n.price),c.Bb(2),c.Hc(n.advance),c.Bb(2),c.Hc(n.due),c.Bb(2),c.Hc(n.ref),c.Bb(2),c.Hc(n.commission),c.Bb(1),c.oc("ngClass",c.tc(14,H,"Paid"==n.status,"Unpaid"==n.status)),c.Bb(1),c.Ic(" ",n.status," ")}}function C(t,e){1&t&&c.Pb(0,"td")}function P(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"h3",37),c.Gc(2),c.Sb(),c.Tb(3,"table",38),c.Tb(4,"thead"),c.Tb(5,"tr"),c.Tb(6,"th"),c.Gc(7,"Room No."),c.Sb(),c.Ec(8,R,2,0,"th",33),c.Tb(9,"th"),c.Gc(10,"Guest Info"),c.Sb(),c.Tb(11,"th"),c.Gc(12,"Sold by"),c.Sb(),c.Tb(13,"th"),c.Gc(14,"Rent"),c.Sb(),c.Tb(15,"th"),c.Gc(16,"Advance"),c.Sb(),c.Tb(17,"th"),c.Gc(18,"Due"),c.Sb(),c.Tb(19,"th"),c.Gc(20,"Ref"),c.Sb(),c.Tb(21,"th"),c.Gc(22,"Commission"),c.Sb(),c.Tb(23,"th"),c.Gc(24,"Status"),c.Sb(),c.Sb(),c.Sb(),c.Tb(25,"tbody"),c.Ec(26,I,20,17,"tr",39),c.Sb(),c.Tb(27,"tfoot"),c.Tb(28,"tr"),c.Tb(29,"th"),c.Gc(30,"Total"),c.Sb(),c.Pb(31,"td"),c.Ec(32,C,1,0,"td",33),c.Pb(33,"td"),c.Tb(34,"th",40),c.Gc(35),c.Sb(),c.Tb(36,"th",40),c.Gc(37),c.Sb(),c.Tb(38,"th",40),c.Gc(39),c.Sb(),c.Pb(40,"th"),c.Tb(41,"th",40),c.Gc(42),c.Sb(),c.Pb(43,"th"),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc(2);c.Bb(2),c.Kc(" ",n.reportHead," report of ",n.hotel.name," for date of : ",n.getDate()," "),c.Bb(6),c.oc("ngIf","Booking"===n.reportHead),c.Bb(18),c.oc("ngForOf",n.serviceAdminBookingReportList),c.Bb(6),c.oc("ngIf","Booking"===n.reportHead),c.Bb(3),c.Hc(n.total.totalrent),c.Bb(2),c.Hc(n.total.totalAdvance),c.Bb(2),c.Hc(n.total.totalDue),c.Bb(3),c.Hc(n.total.totalCommission)}}function x(t,e){1&t&&(c.Tb(0,"h4",37),c.Pb(1,"i",42),c.Gc(2," No record yet "),c.Sb())}function L(t,e){if(1&t&&(c.Tb(0,"div",32),c.Ec(1,w,2,1,"div",33),c.Ec(2,P,44,10,"div",34),c.Ec(3,x,3,0,"ng-template",null,35,c.Fc),c.Sb()),2&t){var n=c.yc(4),o=c.gc();c.Bb(1),c.oc("ngIf",o.loading),c.Bb(1),c.oc("ngIf",o.serviceAdminBookingReportList.length>0&&!o.loading)("ngIfElse",n)}}function M(t,e){1&t&&(c.Tb(0,"h4",37),c.Pb(1,"i",42),c.Gc(2," Select a hotel first "),c.Sb())}var E=function(){function t(t,e){this.reportService=t,this.utilService=e,this.savedList=[],this.serviceAdminBookingReportList=[],this.reportType="Reservation",this.filterValue="all",this.reportHead="",this.loading=!1}return t.prototype.ngOnInit=function(){this.setDate()},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.getDate=function(){return this.date.day+"-"+this.date.month+"-"+this.date.year},t.prototype.onHotel=function(t){this.hotel=t,this.onLoad()},t.prototype.onLoad=function(){if(this.hotel&&this.hotel.id)switch(this.reportType){case"Reservation":this.getAdminReservationReportByHotelId(this.date,this.hotel.id);break;case"Booking":this.getAdminBookingReportByHotelId(this.date,this.hotel.id)}},t.prototype.onTypeChange=function(t){this.reportType=t,this.onLoad()},t.prototype.onPrint=function(){window.print()},t.prototype.onFilterChange=function(t){switch(this.filterValue=t,t){case"all":this.serviceAdminBookingReportList=this.savedList;break;case"hotelswave":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Admin"===t.role});break;case"hotelAdmin":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Service Admin"===t.role});break;case"hotelAgent":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Service Agent"===t.role});break;case"hotelswaveAgent":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"Agent"===t.role});break;case"user":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role});break;case"superSell":this.serviceAdminBookingReportList=this.savedList.filter(function(t){return"User"===t.role||"Agent"===t.role||"Admin"==t.role})}this.calculateServiceAdminBookingReportList()},t.prototype.getAdminReservationReportByHotelId=function(t,e){return D(this,void 0,void 0,function(){var n=this;return G(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReportByHotelId(this.utilService.makeDateString(t),e).subscribe(function(t){n.savedList=t,n.onFilterChange(n.filterValue),n.reportHead="Reservation",n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminBookingReportByHotelId=function(t,e){return D(this,void 0,void 0,function(){var n=this;return G(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReportByHotelId(this.utilService.makeDateString(t),e).subscribe(function(t){n.savedList=t,n.savedList.sort(n.utilService.dynamicSortObject("date")),n.savedList.sort(n.utilService.dynamicSortObject("roomNumber")),n.onFilterChange(n.filterValue),n.reportHead="Booking",n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0,totalCommission:0},this.serviceAdminBookingReportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due,t.total.totalCommission+=e.commission})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-hotel-report"]],decls:57,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"hotel"],[1,"col","d-print-block"],[1,"row","d-print-none"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reservation"],["value","Booking"],[1,"ml-auto","col-auto"],["id","reportType",1,"form-control",3,"change"],["value","all"],["value","hotelswave"],["value","hotelAdmin"],["value","hotelAgent"],["value","hotelswaveAgent"],["value","superSell"],["value","user"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],["class","col-12",4,"ngIf","ngIfElse"],["noHotel",""],[1,"col-12"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[3,"message"],[1,"text-center"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"text-white",3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Hotel report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"admin-hotel-list",4),c.ec("hotel",function(t){return e.onHotel(t)}),c.Sb(),c.Sb(),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Tb(9,"div",7),c.Tb(10,"div",8),c.Tb(11,"div",9),c.Tb(12,"div",10),c.Gc(13,"Date"),c.Sb(),c.Sb(),c.Tb(14,"input",11,12),c.ec("ngModelChange",function(t){return e.date=t})("dateSelect",function(){return e.onLoad()})("click",function(){return c.zc(n),c.yc(15).toggle()}),c.Sb(),c.Tb(16,"div",13),c.Tb(17,"button",14),c.ec("click",function(){return c.zc(n),c.yc(15).toggle()}),c.Pb(18,"i",15),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(19,"div",7),c.Tb(20,"div",8),c.Tb(21,"div",9),c.Tb(22,"div",10),c.Gc(23,"Type"),c.Sb(),c.Sb(),c.Tb(24,"select",16),c.ec("ngModelChange",function(t){return e.reportType=t})("change",function(t){return e.onTypeChange(t.target.value)}),c.Tb(25,"option",17),c.Gc(26," By checkin date "),c.Sb(),c.Tb(27,"option",18),c.Gc(28," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(29,"div",19),c.Tb(30,"div",8),c.Tb(31,"div",9),c.Tb(32,"div",10),c.Gc(33,"Filter"),c.Sb(),c.Sb(),c.Tb(34,"select",20),c.ec("change",function(t){return e.onFilterChange(t.target.value)}),c.Tb(35,"option",21),c.Gc(36," All "),c.Sb(),c.Tb(37,"option",22),c.Gc(38," Hotelswave "),c.Sb(),c.Tb(39,"option",23),c.Gc(40," Hotel Admin "),c.Sb(),c.Tb(41,"option",24),c.Gc(42," Hotel Agent "),c.Sb(),c.Tb(43,"option",25),c.Gc(44," Hotelswave Agent "),c.Sb(),c.Tb(45,"option",26),c.Gc(46," Super Sell "),c.Sb(),c.Tb(47,"option",27),c.Gc(48," User "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(49,"div",7),c.Tb(50,"button",28),c.ec("click",function(){return e.onPrint()}),c.Pb(51,"i",29),c.Gc(52," Print "),c.Sb(),c.Sb(),c.Sb(),c.Tb(53,"div",2),c.Ec(54,L,5,3,"div",30),c.Ec(55,M,3,0,"ng-template",null,31,c.Fc),c.Sb(),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=c.yc(56);c.Bb(14),c.oc("ngModel",e.date),c.Bb(10),c.oc("ngModel",e.reportType),c.Bb(30),c.oc("ngIf",e.hotel&&e.hotel.id)("ngIfElse",o)}},directives:[B.a,s.g,b.b,b.m,b.p,b.u,b.q,b.w,l.p,u.a,l.o,l.n],pipes:[l.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),O=n("ITiG"),F=n("B01t"),N=n("uEz7"),U=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},_=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function z(t,e){if(1&t){var n=c.Ub();c.Tb(0,"a",26),c.ec("click",function(){c.zc(n);var t=e.$implicit;return c.gc().onSelectUser(t.id)}),c.Pb(1,"i",27),c.Gc(2),c.Sb()}if(2&t){var o=e.$implicit;c.Bb(2),c.Jc(" ",o.name," - ",o.phoneNumber," ")}}function J(t,e){if(1&t){var n=c.Ub();c.Tb(0,"pagination",28),c.ec("getPage",function(t){c.zc(n);var e=c.gc();return e.getUserPage(e.userQuery,e.role,t)}),c.Sb()}if(2&t){var o=c.gc();c.oc("page",o.userPage)("short",o.short)}}function Y(t,e){if(1&t&&(c.Tb(0,"div"),c.Pb(1,"loading",29),c.Sb()),2&t){var n=c.gc();c.Bb(1),c.oc("message",n.message)}}function $(t,e){1&t&&(c.Tb(0,"th"),c.Gc(1,"Reservation Date"),c.Sb())}function V(t,e){if(1&t&&(c.Tb(0,"td"),c.Gc(1),c.hc(2,"date"),c.Sb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ic(" ",c.jc(2,1,n.date,"d MMM,y")," ")}}var j=function(t,e){return{"bg-primary":t,"bg-danger":e}};function Q(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td"),c.Gc(9),c.Sb(),c.Tb(10,"td"),c.Gc(11),c.Sb(),c.Ec(12,V,3,4,"td",23),c.Tb(13,"td",31),c.Gc(14),c.Sb(),c.Tb(15,"td",31),c.Gc(16),c.Sb(),c.Tb(17,"td",31),c.Gc(18),c.Sb(),c.Tb(19,"td"),c.Gc(20),c.Sb(),c.Tb(21,"td",31),c.Gc(22),c.Sb(),c.Tb(23,"td",34),c.Gc(24),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=c.gc(2);c.Bb(2),c.Hc(c.ic(3,16,n.date)),c.Bb(3),c.Hc(n.hotelName),c.Bb(2),c.Jc(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.Bb(2),c.Jc("",n.customerName,"[",n.customerPhone,"]"),c.Bb(2),c.Jc("",n.roomNumber,"[",n.category,"]"),c.Bb(1),c.oc("ngIf","Booking"===o.reportHead),c.Bb(2),c.Hc(n.price),c.Bb(2),c.Hc(n.advance),c.Bb(2),c.Hc(n.due),c.Bb(2),c.Hc(n.ref),c.Bb(2),c.Hc(n.commission),c.Bb(1),c.oc("ngClass",c.tc(18,j,"Paid"==n.status,"Unpaid"==n.status)),c.Bb(1),c.Ic(" ",n.status," ")}}function q(t,e){1&t&&c.Pb(0,"td")}function K(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"table",30),c.Tb(2,"thead"),c.Tb(3,"tr"),c.Tb(4,"th"),c.Gc(5,"Check in Date"),c.Sb(),c.Tb(6,"th"),c.Gc(7,"Hotel Name"),c.Sb(),c.Tb(8,"th"),c.Gc(9,"Sold by"),c.Sb(),c.Tb(10,"th"),c.Gc(11,"Customer"),c.Sb(),c.Tb(12,"th"),c.Gc(13,"Room No."),c.Sb(),c.Ec(14,$,2,0,"th",23),c.Tb(15,"th",31),c.Gc(16,"Rent"),c.Sb(),c.Tb(17,"th",31),c.Gc(18,"Advance"),c.Sb(),c.Tb(19,"th",31),c.Gc(20,"Due"),c.Sb(),c.Tb(21,"th"),c.Gc(22,"Ref"),c.Sb(),c.Tb(23,"th",31),c.Gc(24,"Commission"),c.Sb(),c.Tb(25,"th"),c.Gc(26,"Status"),c.Sb(),c.Sb(),c.Sb(),c.Tb(27,"tbody"),c.Ec(28,Q,25,21,"tr",32),c.Sb(),c.Tb(29,"tfoot"),c.Tb(30,"tr"),c.Tb(31,"th"),c.Gc(32,"Total"),c.Sb(),c.Pb(33,"td"),c.Pb(34,"td"),c.Pb(35,"td"),c.Ec(36,q,1,0,"td",23),c.Pb(37,"th"),c.Tb(38,"th",31),c.Gc(39),c.Sb(),c.Tb(40,"th",31),c.Gc(41),c.Sb(),c.Tb(42,"th",31),c.Gc(43),c.Sb(),c.Pb(44,"th",33),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(14),c.oc("ngIf","Booking"===n.reportHead),c.Bb(14),c.oc("ngForOf",n.serviceAdminBookingReportList),c.Bb(8),c.oc("ngIf","Booking"===n.reportHead),c.Bb(3),c.Hc(n.total.totalrent),c.Bb(2),c.Hc(n.total.totalAdvance),c.Bb(2),c.Hc(n.total.totalDue)}}function X(t,e){1&t&&(c.Tb(0,"h4",22),c.Pb(1,"i",35),c.Gc(2," No record yet"),c.Sb())}var W=function(){function t(t,e,n){this.reportService=t,this.userService=e,this.utilService=n,this.short=!0,this.loading=!1,this.role="Agent",this.mode="Reserve",this.daterange={},this.serviceAdminBookingReportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.getUserPage(this.userQuery,this.role)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-1),this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.loadReport(this.userId,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},t.prototype.getUserPage=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),U(this,void 0,void 0,function(){var o=this;return _(this,function(i){switch(i.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(t,e,n).subscribe(function(t){o.userPage=t,o.loading=!1},function(t){return console.log("User list loading error!",t)})];case 1:return i.sent(),[2]}})})},t.prototype.onSelectUser=function(t){this.userId=t,this.user=this.userPage.content.find(function(e){return e.id==t}),this.loadReport(t,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.onModeChange=function(t){this.mode=t,this.userId&&this.loadReport(this.userId,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.loadReport=function(t,e,n){switch(this.mode){case"Reserve":this.getAdminAgentReservationReport(t,e,n);break;case"Sell":this.getAdminAgentBookingReport(t,e,n)}},t.prototype.getAdminAgentBookingReport=function(t,e,n){return U(this,void 0,void 0,function(){var o=this;return _(this,function(i){switch(i.label){case 0:return t?[4,this.reportService.getAdminAgentBookingReportByAgentId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.serviceAdminBookingReportList=t,o.loading=!1,o.calculateServiceAdminBookingReportList()})]:[2];case 1:return i.sent(),[2]}})})},t.prototype.getAdminAgentReservationReport=function(t,e,n){return U(this,void 0,void 0,function(){var o=this;return _(this,function(i){switch(i.label){case 0:return t?[4,this.reportService.getAdminAgentReservationReportByAgentId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.serviceAdminBookingReportList=t,o.loading=!1,o.calculateServiceAdminBookingReportList()})]:[2];case 1:return i.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.serviceAdminBookingReportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(O.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-agent-report"]],decls:44,vars:11,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"col-md-2"],[1,"my-1",3,"ngSubmit"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group","mt-2"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"page","short","getPage",4,"ngIf"],[1,"col-md-10"],[1,"text-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRecord",""],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-user"],[3,"page","short","getPage"],[3,"message"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Agent report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Pb(9,"i",7),c.Sb(),c.Sb(),c.Tb(10,"input",8),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",3),c.Tb(12,"div",9),c.Tb(13,"div",5),c.Tb(14,"div",6),c.Gc(15,"Type"),c.Sb(),c.Sb(),c.Tb(16,"select",10),c.ec("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Tb(17,"option",11),c.Gc(18," By checkin date "),c.Sb(),c.Tb(19,"option",12),c.Gc(20," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",2),c.Tb(22,"div",13),c.Tb(23,"form",14),c.ec("ngSubmit",function(){return e.submit()}),c.Tb(24,"div",9),c.Tb(25,"div",5),c.Tb(26,"div",6),c.Pb(27,"i",15),c.Sb(),c.Sb(),c.Tb(28,"input",16),c.ec("ngModelChange",function(t){return e.userQuery=t}),c.Sb(),c.Sb(),c.Sb(),c.Tb(29,"ul",17),c.Tb(30,"li",18),c.Tb(31,"h5"),c.Gc(32,"Agent List"),c.Sb(),c.Tb(33,"small"),c.Gc(34,"Choose a agent from below list"),c.Sb(),c.Sb(),c.Ec(35,z,3,2,"a",19),c.Ec(36,J,1,2,"pagination",20),c.Sb(),c.Sb(),c.Tb(37,"div",21),c.Tb(38,"h3",22),c.Gc(39),c.Sb(),c.Ec(40,Y,2,1,"div",23),c.Ec(41,K,45,6,"div",24),c.Ec(42,X,3,0,"ng-template",null,25,c.Fc),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.yc(43);c.Bb(10),c.oc("options",e.options),c.Bb(6),c.oc("ngModel",e.mode),c.Bb(12),c.oc("ngModel",e.userQuery),c.Bb(7),c.oc("ngForOf",null==e.userPage?null:e.userPage.content),c.Bb(1),c.oc("ngIf",null!=e.userPage),c.Bb(3),c.Kc(" ",null==e.user?null:e.user.name," - ",null==e.user?null:e.user.phoneNumber," ",e.mode," report"),c.Bb(1),c.oc("ngIf",e.loading),c.Bb(1),c.oc("ngIf",e.serviceAdminBookingReportList.length>0&&!e.loading)("ngIfElse",n)}},directives:[F.b,b.u,b.m,b.p,b.q,b.w,b.x,b.n,b.o,b.b,l.o,l.p,N.a,u.a,l.n],pipes:[l.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}(),Z=n("0sMf"),tt=n("YBP9"),et=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},nt=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function ot(t,e){1&t&&c.Pb(0,"loading")}function it(t,e){if(1&t){var n=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.hc(5,"date"),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td",19),c.Gc(9),c.Sb(),c.Tb(10,"td",19),c.Gc(11),c.Sb(),c.Tb(12,"td",19),c.Gc(13),c.Sb(),c.Tb(14,"td",19),c.Tb(15,"a",22),c.ec("click",function(){c.zc(n);var t=e.$implicit;return c.gc(2).onBookingDetails(t.bookingId)}),c.Gc(16),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=e.$implicit,i=e.index;c.Bb(2),c.Hc(i+1),c.Bb(2),c.Hc(c.ic(5,8,o.date)),c.Bb(3),c.Jc(" ",o.company," ",o.role?"["+o.role+"]":""," "),c.Bb(2),c.Hc(o.hotelswaveCommission),c.Bb(2),c.Hc(o.hotelswaveAgentCommission),c.Bb(2),c.Hc(o.price),c.Bb(3),c.Hc(o.bookingId)}}function rt(t,e){if(1&t&&(c.Tb(0,"table",18),c.Tb(1,"thead"),c.Tb(2,"tr"),c.Tb(3,"th"),c.Gc(4,"Sl."),c.Sb(),c.Tb(5,"th"),c.Gc(6,"Date"),c.Sb(),c.Tb(7,"th"),c.Gc(8,"Sold by"),c.Sb(),c.Tb(9,"th",19),c.Gc(10,"Hotelswave Commission"),c.Sb(),c.Tb(11,"th",19),c.Gc(12,"Hotelswave Agent Commission"),c.Sb(),c.Tb(13,"th",19),c.Gc(14,"Price"),c.Sb(),c.Tb(15,"th",19),c.Gc(16,"Bookign ID"),c.Sb(),c.Sb(),c.Sb(),c.Tb(17,"tbody"),c.Ec(18,it,17,10,"tr",20),c.Sb(),c.Tb(19,"tfoot"),c.Tb(20,"tr"),c.Pb(21,"th"),c.Tb(22,"th"),c.Gc(23,"Total"),c.Sb(),c.Pb(24,"th"),c.Tb(25,"th",19),c.Gc(26),c.Sb(),c.Tb(27,"th",19),c.Gc(28),c.Sb(),c.Tb(29,"th",19),c.Gc(30),c.Sb(),c.Pb(31,"th",21),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(18),c.oc("ngForOf",n.reportList),c.Bb(8),c.Hc(n.total.totalHotelswaveCommission),c.Bb(2),c.Hc(n.total.toatalHotelswaveAgentCommission),c.Bb(2),c.Hc(n.total.totalPrice)}}function at(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",9),c.Pb(1,"admin-booking-details",23),c.Tb(2,"button",24),c.ec("click",function(){return c.zc(n),c.gc().onCloseBooking()}),c.Gc(3,"Close"),c.Sb(),c.Sb()}if(2&t){var o=c.gc();c.Bb(1),c.oc("booking",o.booking)}}var ct=function(){function t(t,e,n){this.reportService=t,this.bookingService=e,this.utilService=n,this.loading=!1,this.mode="Reserve",this.reportList=[],this.daterange={}}return t.prototype.ngOnInit=function(){this.total={totalHotelswaveCommission:0,toatalHotelswaveAgentCommission:0,totalPrice:0},this.setDateRanges(),this.onLoad()},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onLoad()},t.prototype.onLoad=function(){switch(this.mode){case"Reserve":this.getAdminCommissionReportByCheckIn(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Sell":this.getAdminCommissionReportBySells(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminCommissionReportBySells=function(t,e){return et(this,void 0,void 0,function(){var n=this;return nt(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminCommissionReportBySells(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCommissionReportByCheckIn=function(t,e){return et(this,void 0,void 0,function(){var n=this;return nt(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminCommissionReportByCheckIn(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList(),n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onBookingDetails=function(t){return et(this,void 0,void 0,function(){var e=this;return nt(this,function(n){switch(n.label){case 0:return console.log("Details: ",t),[4,this.bookingService.getAdminBooking(t).subscribe(function(t){e.booking=t})];case 1:return n.sent(),[2]}})})},t.prototype.onCloseBooking=function(){this.booking=null},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalHotelswaveCommission:0,toatalHotelswaveAgentCommission:0,totalPrice:0},this.reportList.forEach(function(e){t.total.totalHotelswaveCommission+=e.hotelswaveCommission,t.total.toatalHotelswaveAgentCommission+=e.hotelswaveAgentCommission,t.total.totalPrice+=e.price})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(Z.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-commission-report"]],decls:26,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"col","text-center"],[4,"ngIf"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[3,"click"],[3,"booking"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Commission report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Pb(9,"i",7),c.Sb(),c.Sb(),c.Tb(10,"input",8),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",9),c.Tb(12,"div",10),c.Tb(13,"div",5),c.Tb(14,"div",6),c.Gc(15,"Type"),c.Sb(),c.Sb(),c.Tb(16,"select",11),c.ec("ngModelChange",function(t){return e.mode=t})("change",function(){return e.onLoad()}),c.Tb(17,"option",12),c.Gc(18," By checkin date "),c.Sb(),c.Tb(19,"option",13),c.Gc(20," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",2),c.Tb(22,"div",14),c.Ec(23,ot,1,0,"loading",15),c.Ec(24,rt,32,4,"table",16),c.Sb(),c.Ec(25,at,4,1,"div",17),c.Sb(),c.Sb()),2&t&&(c.Bb(10),c.oc("options",e.options),c.Bb(6),c.oc("ngModel",e.mode),c.Bb(7),c.oc("ngIf",e.loading),c.Bb(1),c.oc("ngIf",!e.loading),c.Bb(1),c.oc("ngIf",e.booking))},directives:[F.b,b.u,b.m,b.p,b.q,b.w,l.p,u.a,l.o,tt.a],pipes:[l.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}a[_ngcontent-%COMP%]{cursor:pointer;color:#00f!important;font-weight:600}"]}),t}(),st=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},bt=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};function lt(t,e){1&t&&(c.Tb(0,"div",17),c.Pb(1,"loading"),c.Sb())}function ut(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Gc(6),c.Sb(),c.Tb(7,"td",20),c.Gc(8),c.Sb(),c.Tb(9,"td",20),c.Gc(10),c.Sb(),c.Tb(11,"td",20),c.Gc(12),c.Sb(),c.Tb(13,"td",20),c.Gc(14),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=e.index;c.Bb(2),c.Hc(o+1),c.Bb(2),c.Kc("",n.date.year,"-",n.date.monthValue,"-",n.date.dayOfMonth,""),c.Bb(2),c.Ic(" ",n.hotelName," "),c.Bb(2),c.Hc(n.totalNumberOfRooms),c.Bb(2),c.Hc(n.totalRent),c.Bb(2),c.Hc(n.totalAdvance),c.Bb(2),c.Hc(n.totalDue)}}function dt(t,e){if(1&t&&(c.Tb(0,"div",18),c.Tb(1,"table",19),c.Tb(2,"thead"),c.Tb(3,"tr"),c.Tb(4,"th"),c.Gc(5,"Sl."),c.Sb(),c.Tb(6,"th"),c.Gc(7,"Date"),c.Sb(),c.Tb(8,"th"),c.Gc(9,"Hotel Name"),c.Sb(),c.Tb(10,"th",20),c.Gc(11,"Number of Rooms"),c.Sb(),c.Tb(12,"th",20),c.Gc(13,"Rent"),c.Sb(),c.Tb(14,"th",20),c.Gc(15,"Advance"),c.Sb(),c.Tb(16,"th",20),c.Gc(17,"Due"),c.Sb(),c.Sb(),c.Sb(),c.Tb(18,"tbody"),c.Ec(19,ut,15,9,"tr",21),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(19),c.oc("ngForOf",n.reportList)}}var ht=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},pt=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},gt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function ft(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Gc(6),c.Sb(),c.Tb(7,"td",22),c.Gc(8),c.Sb(),c.Tb(9,"td",22),c.Gc(10),c.Sb(),c.Tb(11,"td",22),c.Gc(12),c.Sb(),c.Tb(13,"td",22),c.Gc(14),c.Sb(),c.Tb(15,"td",24),c.Gc(16),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=e.index;c.Bb(2),c.Hc(o+1),c.Bb(2),c.Kc("",n.date.year,"-",n.date.monthValue,"-",n.date.dayOfMonth,""),c.Bb(2),c.Ic(" ",n.hotelName," "),c.Bb(2),c.Hc(n.totalNumberOfRooms),c.Bb(2),c.Hc(n.totalRent),c.Bb(2),c.Hc(n.totalAdvance),c.Bb(2),c.Hc(n.totalDue),c.Bb(1),c.oc("ngClass",c.tc(11,gt,"Paid"==n.status,"Unpaid"==n.status)),c.Bb(1),c.Hc(n.status)}}function vt(t,e){if(1&t&&(c.Tb(0,"table",21),c.Tb(1,"thead"),c.Tb(2,"tr"),c.Tb(3,"th"),c.Gc(4,"Sl."),c.Sb(),c.Tb(5,"th"),c.Gc(6,"Date"),c.Sb(),c.Tb(7,"th"),c.Gc(8,"Hotel Name"),c.Sb(),c.Tb(9,"th",22),c.Gc(10,"Number of Rooms"),c.Sb(),c.Tb(11,"th",22),c.Gc(12,"Rent"),c.Sb(),c.Tb(13,"th",22),c.Gc(14,"Advance"),c.Sb(),c.Tb(15,"th",22),c.Gc(16,"Due"),c.Sb(),c.Tb(17,"th",22),c.Gc(18,"Status"),c.Sb(),c.Sb(),c.Sb(),c.Tb(19,"tbody"),c.Ec(20,ft,17,14,"tr",23),c.Sb(),c.Sb()),2&t){var n=c.gc(2);c.Bb(20),c.oc("ngForOf",n.reportList)}}function St(t,e){1&t&&(c.Tb(0,"h3",18),c.Pb(1,"i",25),c.Gc(2," No data found"),c.Sb())}function mt(t,e){if(1&t&&(c.Tb(0,"div",17),c.Tb(1,"h3",18),c.Gc(2),c.hc(3,"date"),c.hc(4,"date"),c.Sb(),c.Ec(5,vt,21,1,"table",19),c.Ec(6,St,3,0,"ng-template",null,20,c.Fc),c.Sb()),2&t){var n=c.yc(7),o=c.gc();c.Bb(2),c.Kc(" ",null==o.hotel?null:o.hotel.name," booking report from ",c.ic(3,5,o.daterange.checkinDate)," to ",c.ic(4,7,o.daterange.checkoutDate)," "),c.Bb(3),c.oc("ngIf",o.reportList.length>0)("ngIfElse",n)}}function Tt(t,e){1&t&&(c.Tb(0,"h3",18),c.Pb(1,"i",25),c.Gc(2," No hotel selected yet"),c.Sb())}var yt=[{path:"booking-report",component:k},{path:"booking-range-report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.reportList=[],this.daterange={},this.mode="Reserve",this.loading=!1}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+2),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getAdminBookingReportRange(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRange(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminBookingReportRange=function(t,e){return st(this,void 0,void 0,function(){var n=this;return bt(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminBookingReportRange(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.loading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminReservationReportRange=function(t,e){return st(this,void 0,void 0,function(){var n=this;return bt(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.reportService.getAdminReservationReportRange(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.loading=!1})];case 1:return o.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-booking-range-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto","mb-2"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-auto"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"row","mb-5"],["class","col text-center",4,"ngIf"],["class","col",4,"ngIf"],[1,"col","text-center"],[1,"col"],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Booking range report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Pb(9,"i",7),c.Sb(),c.Sb(),c.Tb(10,"input",8),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",9),c.Tb(12,"div",10),c.Tb(13,"div",5),c.Tb(14,"div",6),c.Gc(15,"Type"),c.Sb(),c.Sb(),c.Tb(16,"select",11),c.ec("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Tb(17,"option",12),c.Gc(18," By checkin date "),c.Sb(),c.Tb(19,"option",13),c.Gc(20," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",14),c.Ec(22,lt,2,0,"div",15),c.Ec(23,dt,20,1,"div",16),c.Sb(),c.Sb()),2&t&&(c.Bb(10),c.oc("options",e.options),c.Bb(6),c.oc("ngModel",e.mode),c.Bb(6),c.oc("ngIf",e.loading),c.Bb(1),c.oc("ngIf",!e.loading))},directives:[F.b,b.u,b.m,b.p,b.q,b.w,l.p,u.a,l.o],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}()},{path:"hotel-report",component:E},{path:"hotel-range-report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.daterange={},this.mode="Sell",this.reportList=[]}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkinDate.getDate()+11),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onHotel=function(t){this.hotel=t,this.hotelId=t.id,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){if(this.hotelId)switch(this.mode=t,this.mode){case"Sell":this.getAdminBookingReportByHotelId(this.hotelId,this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getAdminReservationReportRangeByHotelId(this.hotelId,this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getAdminReservationReportRangeByHotelId=function(t,e,n){return ht(this,void 0,void 0,function(){var o=this;return pt(this,function(i){switch(i.label){case 0:return[4,this.reportService.getAdminReservationReportRangeByHotelId(t,this.utilService.getDateString(e),this.utilService.getDateString(n)).subscribe(function(t){o.reportList=t})];case 1:return i.sent(),[2]}})})},t.prototype.getAdminBookingReportByHotelId=function(t,e,n){return ht(this,void 0,void 0,function(){var o,i,r=this;return pt(this,function(a){switch(a.label){case 0:return o=this.utilService.getDateString(e),i=this.utilService.getDateString(n),[4,this.reportService.getAdminBookingReportRangeByHotelId(t,o,i).subscribe(function(t){r.reportList=t})];case 1:return a.sent(),[2]}})})},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a),c.Ob(a.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-hotel-range-report"]],decls:27,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],[1,"col-md-3","d-print-none"],[3,"hotel"],["class","col d-print-block",4,"ngIf","ngIfElse"],["noHotelYet",""],[1,"col","d-print-block"],[1,"text-center"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"text-white",3,"ngClass"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Hotel Booking range report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Pb(9,"i",7),c.Sb(),c.Sb(),c.Tb(10,"input",8),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",3),c.Tb(12,"div",9),c.Tb(13,"div",5),c.Tb(14,"div",6),c.Gc(15,"Type"),c.Sb(),c.Sb(),c.Tb(16,"select",10),c.ec("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Tb(17,"option",11),c.Gc(18," By checkin date "),c.Sb(),c.Tb(19,"option",12),c.Gc(20," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",2),c.Tb(22,"div",13),c.Tb(23,"admin-hotel-list",14),c.ec("hotel",function(t){return e.onHotel(t)}),c.Sb(),c.Sb(),c.Ec(24,mt,8,9,"div",15),c.Ec(25,Tt,3,0,"ng-template",null,16,c.Fc),c.Sb(),c.Sb()),2&t){var n=c.yc(26);c.Bb(10),c.oc("options",e.options),c.Bb(6),c.oc("ngModel",e.mode),c.Bb(8),c.oc("ngIf",e.hotelId)("ngIfElse",n)}},directives:[F.b,b.u,b.m,b.p,b.q,b.w,B.a,l.p,l.o,l.n],pipes:[l.f],styles:["td[_ngcontent-%COMP%]{padding:3px;font-size:14px}"]}),t}()},{path:"agent-report",component:W},{path:"commission-report",component:ct}],kt=function(){function t(){}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.a,o.e.forChild(yt)]]}),t}()}}]);