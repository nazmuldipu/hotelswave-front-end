(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{YTJ0:function(t,e,o){"use strict";o.r(e),o.d(e,"ROUTES",function(){return Rt}),o.d(e,"RoomsModule",function(){return At});var i=o("tyNb"),n=o("3whx"),r=o("3M1h"),c=o("d26D"),a=o("yBZE"),s=o("fXoL"),l=o("ofXK"),b=o("HF3I"),u=o("7rPp"),m=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},f=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function d(t,e){if(1&t&&(s.Tb(0,"li",7),s.Pb(1,"loading",10),s.Sb()),2&t){var o=s.gc(2);s.Bb(1),s.oc("message",o.message)}}function h(t,e){if(1&t){var o=s.Ub();s.Tb(0,"a",11),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectCategory(t.id)}),s.Pb(1,"i",12),s.Gc(2),s.Sb()}if(2&t){var i=e.$implicit;s.Bb(2),s.Ic(" ",i.name," ")}}function g(t,e){if(1&t&&(s.Tb(0,"ul",6),s.Tb(1,"li",7),s.Tb(2,"h5"),s.Gc(3,"Category list"),s.Sb(),s.Tb(4,"small"),s.Gc(5,"Choose a category from below list"),s.Sb(),s.Sb(),s.Ec(6,d,2,1,"li",8),s.Ec(7,h,3,1,"a",9),s.Sb()),2&t){var o=s.gc();s.Bb(6),s.oc("ngIf",o.showCategoryLoading),s.Bb(1),s.oc("ngForOf",o.categories)}}function p(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",13),s.Tb(1,"room-form",14),s.ec("create",function(t){return s.zc(o),s.gc().onCreate(t)})("update",function(t){return s.zc(o),s.gc().onUpdate(t)}),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(1),s.oc("hotel",i.hotel)("category",i.category)("room",i.room)}}var v=function(){function t(t,e,o,i,n){this.hotelService=t,this.categoryService=e,this.roomService=o,this.router=i,this.activeRoute=n,this.showCategory=!1,this.showCategoryLoading=!1,this.hotelId=n.snapshot.params.hotelId}return t.prototype.ngOnInit=function(){this.hotelId&&(this.getAdminCategories(this.hotelId),this.getAdminHotel(this.hotelId))},t.prototype.getAdminHotel=function(t){return m(this,void 0,void 0,function(){var t=this;return f(this,function(e){return this.hotelService.getAdminHotel(this.hotelId).subscribe(function(e){t.hotel=e}),[2]})})},t.prototype.getAdminCategories=function(t){return m(this,void 0,void 0,function(){var e=this;return f(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onCreate=function(t){var e=this;this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;this.roomService.updateAdminRoom(this.hotel.id,t.id,t).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(r.a),s.Ob(a.a),s.Ob(i.b),s.Ob(i.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-add-by-hotel-id"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Add Rooms"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Ec(6,g,8,2,"ul",4),s.Sb(),s.Ec(7,p,2,3,"div",5),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",e.showCategory),s.Bb(1),s.oc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[l.p,l.o,b.a,u.a],styles:[""]}),t}(),S=o("/YPm"),y=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},T=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function w(t,e){if(1&t){var o=s.Ub();s.Tb(0,"admin-hotel-list",8),s.ec("hotel",function(t){return s.zc(o),s.gc().onSelectHotel(t)}),s.Sb()}}function I(t,e){1&t&&(s.Tb(0,"a",9),s.Pb(1,"i",10),s.Gc(2," Room list "),s.Sb())}function k(t,e){if(1&t&&(s.Tb(0,"li",12),s.Pb(1,"loading",17),s.Sb()),2&t){var o=s.gc(2);s.Bb(1),s.oc("message",o.message)}}var B=function(t){return{active:t}};function G(t,e){if(1&t){var o=s.Ub();s.Tb(0,"a",18),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectCategory(t.id)}),s.Pb(1,"i",19),s.Gc(2),s.Sb()}if(2&t){var i=e.$implicit,n=s.gc(2);s.oc("ngClass",s.sc(2,B,i.id==(null==n.category?null:n.category.id))),s.Bb(2),s.Ic(" ",i.name," ")}}function D(t,e){if(1&t){var o=s.Ub();s.Tb(0,"ul",11),s.Tb(1,"li",12),s.Tb(2,"h5"),s.Gc(3),s.Sb(),s.Tb(4,"small"),s.Gc(5,"Choose a category from below list"),s.Sb(),s.Sb(),s.Ec(6,k,2,1,"li",13),s.Ec(7,G,3,4,"a",14),s.Tb(8,"a",15),s.ec("click",function(){return s.zc(o),s.gc().onBacktoHotel()}),s.Pb(9,"i",16),s.Gc(10," Hotel list "),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(3),s.Ic("",null==i.hotel?null:i.hotel.name," Category list"),s.Bb(3),s.oc("ngIf",i.showCategoryLoading),s.Bb(1),s.oc("ngForOf",i.categories)}}function C(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",20),s.Tb(1,"room-form",21),s.ec("create",function(t){return s.zc(o),s.gc().onCreate(t)})("update",function(t){return s.zc(o),s.gc().onUpdate(t)}),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(1),s.oc("hotel",i.hotel)("category",i.category)("room",i.room)}}var x=function(){function t(t,e,o,i,n){this.hotelService=t,this.categoryService=e,this.roomService=o,this.activeRoute=i,this.router=n,this.showCategory=!1,this.showCategoryLoading=!1,this.showHotelLoading=!1,this.short=!0,this.id=i.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&this.getAdminRoom(this.id)},t.prototype.getAdminRoom=function(t){return y(this,void 0,void 0,function(){var e=this;return T(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t,e.category=e.room.category,e.hotel=e.room.category.hotel})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCategories=function(t){return y(this,void 0,void 0,function(){var e=this;return T(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.getAdminCategories(t.id),this.getAdminHotel(t.id)},t.prototype.getAdminHotel=function(t){return y(this,void 0,void 0,function(){var e=this;return T(this,function(o){switch(o.label){case 0:return[4,this.hotelService.getAdminHotel(t).subscribe(function(t){e.hotel=t})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onBacktoHotel=function(){this.categories=null,this.category=null,this.showCategory=!1,localStorage.removeItem("hotelId")},t.prototype.onCreate=function(t){var e=this;this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;this.roomService.updateAdminRoom(this.hotel.id,this.room.id,t).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(r.a),s.Ob(a.a),s.Ob(i.a),s.Ob(i.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-add"]],decls:10,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","list-group-item list-group-item-action list-group-item-info text-center","routerLink","/dashboard/admin/rooms",4,"ngIf"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[3,"hotel"],["routerLink","/dashboard/admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-list"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Add Rooms"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Ec(6,w,1,0,"admin-hotel-list",4),s.Ec(7,I,3,0,"a",5),s.Ec(8,D,11,3,"ul",6),s.Sb(),s.Ec(9,C,2,3,"div",7),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",!e.showCategory),s.Bb(1),s.oc("ngIf",!e.showCategory),s.Bb(1),s.oc("ngIf",e.showCategory),s.Bb(1),s.oc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[l.p,S.a,i.d,l.o,b.a,l.n,u.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem 1.25rem}"]}),t}(),P=o("LLt/"),L=o("4+Eq"),R=o("eIep"),A=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},H=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function O(t,e){if(1&t&&s.Pb(0,"img",37),2&t){var o=s.gc();s.oc("src",o.imageUrl,s.Bc)}}function E(t,e){if(1&t&&(s.Tb(0,"div",38),s.Gc(1),s.Sb()),2&t){var o=s.gc();s.Bb(1),s.Ic(" ",o.errorMessage," ")}}function M(t,e){if(1&t){var o=s.Ub();s.Tb(0,"p"),s.Tb(1,"input",39),s.ec("change",function(t){return s.zc(o),s.gc().fileChange(t)}),s.Sb(),s.Sb()}}function F(t,e){1&t&&(s.Tb(0,"div"),s.Gc(1," Uploaded "),s.Pb(2,"i",40),s.Sb())}function q(t,e){if(1&t){var o=s.Ub();s.Tb(0,"button",41),s.ec("click",function(){return s.zc(o),s.gc().startUpload()}),s.Gc(1," Upload "),s.Sb()}}function U(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div"),s.Tb(1,"button",43),s.ec("click",function(){s.zc(o);var t=s.gc().$implicit;return s.gc().deleteImage(t)}),s.Tb(2,"span"),s.Gc(3,"\xd7"),s.Sb(),s.Sb(),s.Tb(4,"div",44),s.Pb(5,"img",37),s.Sb(),s.Sb()}if(2&t){var i=s.gc().$implicit;s.Bb(5),s.oc("src",i,s.Bc)}}function z(t,e){if(1&t&&(s.Tb(0,"div",42),s.Ec(1,U,6,1,"div",31),s.Sb()),2&t){var o=e.$implicit;s.Bb(1),s.oc("ngIf",o.length)}}var N=function(){function t(t,e,o,i){this.roomService=t,this.auth=e,this.activatedRoute=o,this.ng2ImgMax=i,this.errorMessage="",this.roomImagesUrl=[],this.id=o.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&(this.getAdminRoom(this.id),this.loadRoomImages())},t.prototype.getAdminRoom=function(t){return A(this,void 0,void 0,function(){var e=this;return H(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t})];case 1:return o.sent(),[2]}})})},t.prototype.loadRoomImages=function(){return A(this,void 0,void 0,function(){var t=this;return H(this,function(e){switch(e.label){case 0:return[4,this.roomService.getRoomImageUrls(this.id).subscribe(function(e){t.roomImagesUrl=[],e.forEach(function(e){t.roomImagesUrl.push(t.roomService.imageUrl+e)})},function(t){console.log(t)})];case 1:return e.sent(),[2]}})})},t.prototype.previewFile=function(t){var e=this,o=new FileReader;o.onload=function(t){e.imageUrl=t.target.result},o.readAsDataURL(t.target.files[0])},t.prototype.fileChange=function(t){this.previewFile(t),this.fileList=t.target.files,this.progressPercentage=0,this.errorMessage=""},t.prototype.startUpload=function(){var t=this;if(this.fileList.length>0){var e=new FormData,o=this.fileList[0];this.ng2ImgMax.resizeImage(o,800,600).pipe(Object(R.a)(function(i){return console.log("size : ",i.size),e.append("image",i,o.name),t.roomService.uploadRoomImage(t.id,e)})).subscribe(function(e){t.imageUrl="",t.fileList=null,t.progressPercentage=100,t.loadRoomImages()},function(e){console.log(e),t.errorMessage=e._body})}},t.prototype.deleteImage=function(t){var e=this,o=new URL(t).pathname.split("/"),i=parseInt(o[o.length-1]);this.roomService.deleteRoomImage(o[o.length-3],i).subscribe(function(t){e.roomImagesUrl.splice(i,1,"")},function(t){console.log("Image could not delete")})},t.prototype.resizeImage=function(t,e,o){return this.ng2ImgMax.resizeImage(t,e,o)},t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a),s.Ob(P.a),s.Ob(i.a),s.Ob(L.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-details"]],decls:161,vars:36,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["for","floorNumber"],[1,"form-group","col-md-3"],["for","price"],["for","discount"],["for","agentDiscount"],["for","vatService"],["id","vatService",1,"form-control"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/admin/rooms",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-3 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-3","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Room details"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Tb(6,"div",4),s.Tb(7,"label",5),s.Gc(8,"Hotel Name"),s.Sb(),s.Tb(9,"label",6),s.Gc(10),s.Sb(),s.Sb(),s.Tb(11,"div",4),s.Tb(12,"label",7),s.Gc(13,"Category Name"),s.Sb(),s.Tb(14,"label",6),s.Gc(15),s.Sb(),s.Sb(),s.Tb(16,"div",8),s.Tb(17,"div",9),s.Tb(18,"label",10),s.Gc(19,"Room Number *"),s.Sb(),s.Tb(20,"label",6),s.Gc(21),s.Sb(),s.Sb(),s.Tb(22,"div",9),s.Tb(23,"label",11),s.Gc(24,"Floor Number *"),s.Sb(),s.Tb(25,"label",6),s.Gc(26),s.Sb(),s.Sb(),s.Sb(),s.Tb(27,"div",8),s.Tb(28,"div",9),s.Tb(29,"label",10),s.Gc(30,"Number of Beds *"),s.Sb(),s.Tb(31,"label",6),s.Gc(32),s.Sb(),s.Sb(),s.Tb(33,"div",9),s.Tb(34,"label",11),s.Gc(35,"Room Size (Square feet) *"),s.Sb(),s.Tb(36,"label",6),s.Gc(37),s.Sb(),s.Sb(),s.Sb(),s.Tb(38,"div",8),s.Tb(39,"div",12),s.Tb(40,"label",13),s.Gc(41,"Price *"),s.Sb(),s.Tb(42,"label",6),s.Gc(43),s.Sb(),s.Sb(),s.Tb(44,"div",12),s.Tb(45,"label",14),s.Gc(46,"Discount *"),s.Sb(),s.Tb(47,"label",6),s.Gc(48),s.Sb(),s.Sb(),s.Tb(49,"div",12),s.Tb(50,"label",15),s.Gc(51,"Agent Discount *"),s.Sb(),s.Tb(52,"label",6),s.Gc(53),s.Sb(),s.Sb(),s.Tb(54,"div",12),s.Tb(55,"label",16),s.Gc(56,"VatService charge *"),s.Sb(),s.Tb(57,"label",17),s.Gc(58),s.Sb(),s.Sb(),s.Sb(),s.Tb(59,"div",18),s.Tb(60,"h3",19),s.Gc(61,"Facilities"),s.Sb(),s.Tb(62,"div",20),s.Tb(63,"div",21),s.Tb(64,"label",22),s.Pb(65,"i",23),s.Gc(66," Front Face "),s.Sb(),s.Sb(),s.Tb(67,"div",21),s.Tb(68,"label",22),s.Pb(69,"i",23),s.Gc(70," Back Face "),s.Sb(),s.Sb(),s.Tb(71,"div",21),s.Tb(72,"label",22),s.Pb(73,"i",23),s.Gc(74," High Commode "),s.Sb(),s.Sb(),s.Tb(75,"div",21),s.Tb(76,"label",22),s.Pb(77,"i",23),s.Gc(78," Breakfast "),s.Sb(),s.Sb(),s.Tb(79,"div",21),s.Tb(80,"label",22),s.Pb(81,"i",23),s.Gc(82," Internet "),s.Sb(),s.Sb(),s.Tb(83,"div",21),s.Tb(84,"label",22),s.Pb(85,"i",23),s.Gc(86," Air Condition "),s.Sb(),s.Sb(),s.Tb(87,"div",21),s.Tb(88,"label",22),s.Pb(89,"i",23),s.Gc(90," TV "),s.Sb(),s.Sb(),s.Tb(91,"div",21),s.Tb(92,"label",22),s.Pb(93,"i",23),s.Gc(94," Geyser "),s.Sb(),s.Sb(),s.Tb(95,"div",21),s.Tb(96,"label",22),s.Pb(97,"i",23),s.Gc(98," HillView "),s.Sb(),s.Sb(),s.Tb(99,"div",21),s.Tb(100,"label",22),s.Pb(101,"i",23),s.Gc(102," Sea View "),s.Sb(),s.Sb(),s.Tb(103,"div",21),s.Tb(104,"label",22),s.Pb(105,"i",23),s.Gc(106," Telephone "),s.Sb(),s.Sb(),s.Tb(107,"div",21),s.Tb(108,"label",22),s.Pb(109,"i",23),s.Gc(110," Bath Towel "),s.Sb(),s.Sb(),s.Tb(111,"div",21),s.Tb(112,"label",22),s.Pb(113,"i",23),s.Gc(114," Table And Chair "),s.Sb(),s.Sb(),s.Tb(115,"div",21),s.Tb(116,"label",22),s.Pb(117,"i",23),s.Gc(118," In Middle "),s.Sb(),s.Sb(),s.Tb(119,"div",21),s.Tb(120,"label",22),s.Pb(121,"i",23),s.Gc(122," Kitchen "),s.Sb(),s.Sb(),s.Tb(123,"div",21),s.Tb(124,"label",22),s.Pb(125,"i",23),s.Gc(126," BathTub "),s.Sb(),s.Sb(),s.Tb(127,"div",21),s.Tb(128,"label",22),s.Pb(129,"i",23),s.Gc(130," Balcony "),s.Sb(),s.Sb(),s.Tb(131,"div",21),s.Tb(132,"label",22),s.Pb(133,"i",23),s.Gc(134," Extra Beds "),s.Sb(),s.Sb(),s.Tb(135,"div",21),s.Tb(136,"label",22),s.Pb(137,"i",23),s.Gc(138," Pets Allowed "),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(139,"div",24),s.Tb(140,"a",25),s.Gc(141,"Edit"),s.Sb(),s.Sb(),s.Sb(),s.Tb(142,"div",3),s.Tb(143,"div",26),s.Tb(144,"div",27),s.Ec(145,O,1,1,"img",28),s.Sb(),s.Tb(146,"div",29),s.Ec(147,E,2,1,"div",30),s.Tb(148,"div"),s.Gc(149," Please select a image to upload "),s.Pb(150,"br"),s.Gc(151," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),s.Sb(),s.Ec(152,M,2,0,"p",31),s.Ec(153,F,3,0,"div",31),s.Tb(154,"div"),s.Ec(155,q,2,0,"button",32),s.Tb(156,"a",33),s.Gc(157," Back "),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Tb(158,"div",34),s.Tb(159,"div",35),s.Ec(160,z,2,1,"div",36),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(10),s.Ic(" ",null==e.room||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name," "),s.Bb(5),s.Ic(" ",null==e.room||null==e.room.category?null:e.room.category.name," "),s.Bb(6),s.Hc(null==e.room?null:e.room.roomNumber),s.Bb(5),s.Hc(null==e.room?null:e.room.floorNumber),s.Bb(6),s.Hc(null==e.room?null:e.room.numberOfBed),s.Bb(5),s.Hc(null==e.room?null:e.room.roomSize),s.Bb(6),s.Hc(null==e.room?null:e.room.price),s.Bb(5),s.Hc(null==e.room?null:e.room.discount),s.Bb(5),s.Hc(null==e.room?null:e.room.agentDiscount),s.Bb(5),s.Hc(null==e.room?null:e.room.vatService),s.Bb(7),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.frontFace?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.backFace?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.highCommode?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.breakfast?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.internet?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.airConditioned?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tv?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.geyser?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.hillView?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.seaView?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.telephone?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTowel?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tableAndChair?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.inMiddle?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.kitchen?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTub?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.balcony?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.extraBeds?"fa-check-square-o":"fa-square-o"),s.Bb(4),s.oc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.petsAllowed?"fa-check-square-o":"fa-square-o"),s.Bb(3),s.qc("routerLink","/dashboard/admin/rooms/add/",null==e.room?null:e.room.id,""),s.Bb(5),s.oc("ngIf",e.imageUrl),s.Bb(2),s.oc("ngIf",e.errorMessage.length>0),s.Bb(5),s.oc("ngIf",e.roomImagesUrl.length<5),s.Bb(1),s.oc("ngIf",100==e.progressPercentage),s.Bb(2),s.oc("ngIf",e.fileList),s.Bb(5),s.oc("ngForOf",e.roomImagesUrl))},directives:[l.n,i.d,l.p,l.o],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;width:100%}"]}),t}(),_=o("YXrq"),$=o("/e7+"),j=o("B01t"),V=o("3Pt+"),Y=o("1kSV");function J(t,e){if(1&t&&(s.Tb(0,"div",23),s.Gc(1),s.Sb()),2&t){var o=s.gc();s.Bb(1),s.Ic(" ",o.message," ")}}var X=function(t){return{disabled:t}},K=function(){function t(t,e){this.builder=t,this.util=e,this.create=new s.n,this.mouseoverShifting=!1,this.message="",this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",V.v.required],startDate:["",V.v.required],endDate:["",V.v.required],amount:["",V.v.required],changeSimilar:!1})},t.prototype.submit=function(){var t=this.util.getDateFromDateObj(this.form.controls.startDate.value),e=this.util.getDateFromDateObj(this.form.controls.endDate.value);this.message=t>e?"Date error, Start date cannot be after end date":"",this.form.valid&&e>t&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.\u0275fac=function(e){return new(e||t)(s.Ob(V.d),s.Ob($.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["discount-form"]],inputs:{room:"room"},outputs:{create:"create"},features:[s.zb],decls:34,vars:6,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],["role","alert",1,"alert","alert-warning"]],template:function(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"h3",3),s.Gc(4,"Adjust room discount map"),s.Sb(),s.Ec(5,J,2,1,"div",4),s.Tb(6,"form",5),s.ec("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),s.Tb(7,"div",6),s.Tb(8,"label",7),s.Gc(9,"Room number"),s.Sb(),s.Tb(10,"label",8),s.Gc(11),s.Sb(),s.Sb(),s.Tb(12,"div",6),s.Tb(13,"label",9),s.Gc(14,"Start date"),s.Sb(),s.Tb(15,"input",10,11),s.ec("click",function(){return s.zc(o),s.yc(16).toggle()}),s.Sb(),s.Sb(),s.Tb(17,"div",6),s.Tb(18,"label",12),s.Gc(19,"End date"),s.Sb(),s.Tb(20,"input",13,14),s.ec("click",function(){return s.zc(o),s.yc(21).toggle()}),s.Sb(),s.Sb(),s.Tb(22,"div",6),s.Tb(23,"label",15),s.Gc(24,"Amount"),s.Sb(),s.Pb(25,"input",16),s.Sb(),s.Tb(26,"div",17),s.Pb(27,"input",18),s.Tb(28,"label",19),s.Gc(29," Change similar "),s.Sb(),s.Sb(),s.Tb(30,"div",20),s.Tb(31,"span",21),s.ec("mouseenter",function(){return e.mouseoverShifting=!0}),s.Tb(32,"button",22),s.Gc(33," Submit "),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()}2&t&&(s.Bb(5),s.oc("ngIf",e.message.length),s.Bb(1),s.oc("formGroup",e.form),s.Bb(5),s.Ic(" ",null==e.room?null:e.room.roomNumber," "),s.Bb(21),s.oc("ngClass",s.sc(4,X,e.form.invalid)))},directives:[l.p,V.x,V.n,V.g,V.b,Y.g,V.m,V.f,V.r,V.a,l.n],styles:[""],changeDetection:0}),t}(),Z=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},Q=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function W(t,e){if(1&t){var o=s.Ub();s.Tb(0,"admin-hotel-list",16),s.ec("hotel",function(t){return s.zc(o),s.gc().onSelectHotel(t)}),s.Sb()}}function tt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"span"),s.Tb(1,"button",24),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectCategory(t)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var i=e.$implicit,n=s.gc(2);s.Bb(1),s.oc("ngClass",i==n.category?"btn-primary":"btn-secondary"),s.Bb(1),s.Ic(" ",i," ")}}function et(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",25),s.Tb(1,"div",26),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectRoom(t.id)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var i=e.$implicit;s.Bb(2),s.Ic(" ",i.roomNumber," ")}}function ot(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",17),s.Tb(1,"h4"),s.Gc(2),s.Sb(),s.Tb(3,"div",18),s.Ec(4,tt,3,2,"span",19),s.Sb(),s.Tb(5,"div",20),s.Tb(6,"h4"),s.Gc(7),s.Sb(),s.Sb(),s.Ec(8,et,3,1,"div",21),s.Tb(9,"a",22),s.ec("click",function(){return s.zc(o),s.gc().onBacktoHotel()}),s.Pb(10,"i",23),s.Gc(11," Hotel list "),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(2),s.Ic(" ",i.hotel.name," "),s.Bb(2),s.oc("ngForOf",i.categoryList),s.Bb(3),s.Ic("",i.category," room list"),s.Bb(1),s.oc("ngForOf",i.filteredRoomList)}}function it(t,e){if(1&t){var o=s.Ub();s.Tb(0,"discount-form",27),s.ec("create",function(t){return s.zc(o),s.gc().onCreate(t)}),s.Sb()}if(2&t){var i=s.gc();s.oc("room",i.room)}}function nt(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.hc(3,"date"),s.Sb(),s.Tb(4,"td"),s.Gc(5),s.Sb(),s.Tb(6,"td"),s.Gc(7),s.Sb(),s.Tb(8,"td"),s.Gc(9),s.Sb(),s.Sb()),2&t){var o=e.$implicit,i=s.gc(3);s.Bb(2),s.Hc(s.jc(3,4,o.key,"d MMM,yy : EEE")),s.Bb(3),s.Hc(i.room.price),s.Bb(2),s.Hc(o.value),s.Bb(2),s.Hc(i.room.price-o.value)}}function rt(t,e){if(1&t&&(s.Tb(0,"tbody"),s.Ec(1,nt,10,7,"tr",19),s.hc(2,"keyvalue"),s.Sb()),2&t){var o=s.gc(2);s.Bb(1),s.oc("ngForOf",s.ic(2,1,o.discountMap))}}function ct(t,e){1&t&&(s.Tb(0,"tr"),s.Tb(1,"td",30),s.Pb(2,"i",31),s.Gc(3," Discount map loading "),s.Sb(),s.Sb())}function at(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div"),s.Tb(1,"h3"),s.Gc(2),s.Sb(),s.Tb(3,"button",28),s.ec("click",function(){return s.zc(o),s.gc().onAdjustDiscountMap()}),s.Gc(4," Adjust Discount Map "),s.Sb(),s.Tb(5,"table",29),s.Tb(6,"thead"),s.Tb(7,"tr"),s.Tb(8,"th"),s.Gc(9,"Date"),s.Sb(),s.Tb(10,"th"),s.Gc(11,"Room Price"),s.Sb(),s.Tb(12,"th"),s.Gc(13,"Discount"),s.Sb(),s.Tb(14,"th"),s.Gc(15,"Payable"),s.Sb(),s.Sb(),s.Sb(),s.Ec(16,rt,3,3,"tbody",15),s.Ec(17,ct,4,0,"tr",15),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(2),s.Ic("Discount map for Room number : ",i.room.roomNumber,""),s.Bb(14),s.oc("ngIf",i.discountMap),s.Bb(1),s.oc("ngIf",!i.discountMap)}}var st=function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),Z(this,void 0,void 0,function(){var e=this;return Q(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return Z(this,void 0,void 0,function(){var e=this;return Q(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id==t}),this.discountMap=null,this.roomService.getAdminDiscountMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.discountMap=t})},t.prototype.onAdjustDiscountMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminDiscountMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.amount,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(a.a),s.Ob($.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-discount-map"]],decls:18,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create"],[1,"btn","btn-warning","my-2",3,"click"],[1,"table","border","table-hover"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Room discount map"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Ec(6,W,1,0,"admin-hotel-list",4),s.Ec(7,ot,12,4,"div",5),s.Sb(),s.Tb(8,"div",6),s.Ec(9,it,1,1,"discount-form",7),s.Tb(10,"div",8),s.Tb(11,"div",9),s.Tb(12,"div",10),s.Tb(13,"div",11),s.Tb(14,"div",12),s.Pb(15,"i",13),s.Sb(),s.Sb(),s.Tb(16,"input",14),s.ec("selected",function(t){return e.selectedDate(t)}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Ec(17,at,18,3,"div",15),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",!e.showRoomList),s.Bb(1),s.oc("ngIf",e.showRoomList),s.Bb(2),s.oc("ngIf",e.showForm),s.Bb(7),s.oc("options",e.options),s.Bb(1),s.oc("ngIf",e.room))},directives:[l.p,j.b,S.a,l.o,l.n,K],pipes:[l.j,l.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),lt=o("uEz7"),bt=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},ut=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function mt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",12),s.Gc(1),s.Tb(2,"button",13),s.ec("click",function(){return s.zc(o),s.gc().clear()}),s.Gc(3,"Clear"),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(1),s.Ic(" ",i.message," ")}}function ft(t,e){if(1&t){var o=s.Ub();s.Tb(0,"tr"),s.Tb(1,"td"),s.Tb(2,"a",18),s.Gc(3),s.Sb(),s.Sb(),s.Tb(4,"td"),s.Gc(5),s.Sb(),s.Tb(6,"td"),s.Gc(7),s.Sb(),s.Tb(8,"td"),s.Gc(9),s.Sb(),s.Tb(10,"td"),s.Gc(11),s.Sb(),s.Tb(12,"td"),s.Gc(13),s.Sb(),s.Tb(14,"td"),s.Tb(15,"a",19),s.Gc(16,"Images"),s.Sb(),s.Tb(17,"a",20),s.Gc(18,"Details"),s.Sb(),s.Tb(19,"a",21),s.Gc(20,"Edit"),s.Sb(),s.Tb(21,"button",22),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onDelete(t.id,t.roomNumber)}),s.Gc(22," Delete "),s.Sb(),s.Sb(),s.Sb()}if(2&t){var i=e.$implicit;s.Bb(2),s.qc("routerLink","/dashboard/admin/rooms/details/",i.id,""),s.Bb(1),s.Ic(" ",i.roomNumber," "),s.Bb(2),s.Hc(i.floorNumber),s.Bb(2),s.Hc(i.price),s.Bb(2),s.Hc(i.discount),s.Bb(2),s.Hc(i.agentDiscount),s.Bb(2),s.Hc(i.category.name),s.Bb(2),s.qc("routerLink","/dashboard/admin/rooms/details/",i.id,""),s.Bb(2),s.qc("routerLink","/dashboard/admin/rooms/details/",i.id,""),s.Bb(2),s.qc("routerLink","/dashboard/admin/rooms/add/",i.id,"")}}function dt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"pagination",23),s.ec("getPage",function(t){s.zc(o);var e=s.gc(2);return e.getAdminRoomPage(e.hotel.id,t)}),s.Sb()}if(2&t){var i=s.gc(2);s.oc("page",i.roomPage)}}function ht(t,e){if(1&t&&(s.Tb(0,"table",14),s.Tb(1,"thead"),s.Tb(2,"tr"),s.Tb(3,"th"),s.Gc(4,"Room number"),s.Sb(),s.Tb(5,"th"),s.Gc(6,"Floor"),s.Sb(),s.Tb(7,"th"),s.Gc(8,"Price"),s.Sb(),s.Tb(9,"th"),s.Gc(10,"Discount"),s.Sb(),s.Tb(11,"th"),s.Gc(12,"Agent dis."),s.Sb(),s.Tb(13,"th"),s.Gc(14,"Category"),s.Sb(),s.Pb(15,"th"),s.Sb(),s.Sb(),s.Tb(16,"tbody"),s.Ec(17,ft,23,10,"tr",15),s.Sb(),s.Tb(18,"tfoot"),s.Tb(19,"tr"),s.Tb(20,"td",16),s.Ec(21,dt,1,1,"pagination",17),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t){var o=s.gc();s.Bb(17),s.oc("ngForOf",null==o.roomPage?null:o.roomPage.content),s.Bb(4),s.oc("ngIf",null!=o.roomPage)}}function gt(t,e){if(1&t&&(s.Tb(0,"div"),s.Pb(1,"loading",24),s.Sb()),2&t){var o=s.gc();s.Bb(1),s.oc("message",o.message)}}var pt=function(){function t(t,e){this.hotelService=t,this.roomService=e,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage()},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),bt(this,void 0,void 0,function(){var e=this;return ut(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1,e.message=""})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.getAdminRoomPage(t.id)},t.prototype.getAdminRoomPage=function(t,e){return void 0===e&&(e=0),bt(this,void 0,void 0,function(){var o=this;return ut(this,function(i){switch(i.label){case 0:return this.message="Room list loading",this.showRoomLoading=!0,[4,this.roomService.getAdminRoomPageByHotelId(t,e).subscribe(function(t){o.roomPage=t,o.showRoomLoading=!1,o.message=""})];case 1:return i.sent(),[2]}})})},t.prototype.onDelete=function(t,e){return bt(this,void 0,void 0,function(){var o=this;return ut(this,function(i){switch(i.label){case 0:return confirm('Are you sure to delete room number "'+e+'" with id '+t)?[4,this.roomService.deleteAdminRoom(t).subscribe(function(t){"success"==t.response?(o.message="Room deleted successfully",o.getAdminRoomPage(o.hotel.id)):o.message="Room deleted Failed"})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.clear=function(){this.message=""},t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(a.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-list"]],decls:16,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel"],["routerLink","/dashboard/admin/rooms/add",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-plus"],[1,"col-md-9"],[1,"text-center"],["class","alert alert-success","role","alert",4,"ngIf"],["class","table border",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","7"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],[1,"btn","btn-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-success","btn-sm","mx-1",3,"routerLink"],["target","_blank",1,"btn","btn-warning","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[3,"page","getPage"],[3,"message"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Room List"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Tb(6,"admin-hotel-list",4),s.ec("hotel",function(t){return e.onSelectHotel(t)}),s.Sb(),s.Tb(7,"a",5),s.Pb(8,"i",6),s.Gc(9," Add room "),s.Sb(),s.Sb(),s.Tb(10,"div",7),s.Tb(11,"h3",8),s.Gc(12),s.Sb(),s.Ec(13,mt,4,1,"div",9),s.Ec(14,ht,22,2,"table",10),s.Ec(15,gt,2,1,"div",11),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(12),s.Ic("",null==e.hotel?null:e.hotel.name," Room List"),s.Bb(1),s.oc("ngIf",e.message.length>0),s.Bb(1),s.oc("ngIf",null!=(null==e.roomPage?null:e.roomPage.content)),s.Bb(1),s.oc("ngIf",e.showRoomLoading))},directives:[S.a,i.d,l.p,l.o,lt.a,b.a],styles:[""]}),t}();function vt(t,e){if(1&t&&(s.Tb(0,"option",23),s.Gc(1),s.Sb()),2&t){var o=e.$implicit;s.oc("value",o.key),s.Bb(1),s.Ic(" ",o.value," ")}}var St=function(t){return{disabled:t}},yt=function(){function t(t){this.builder=t,this.create=new s.n,this.mouseoverShifting=!1,this.statusEnum=_.a,this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",V.v.required],startDate:["",V.v.required],endDate:["",V.v.required],satus:["",V.v.required],changeSimilar:!1})},t.prototype.submit=function(){this.form.valid&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.\u0275fac=function(e){return new(e||t)(s.Ob(V.d))},t.\u0275cmp=s.Ib({type:t,selectors:[["status-form"]],inputs:{room:"room"},outputs:{create:"create"},features:[s.zb],decls:35,vars:8,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","satus"],["id","satus","formControlName","satus",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],[3,"value"]],template:function(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"h3",3),s.Gc(4,"Adjust room status map"),s.Sb(),s.Tb(5,"form",4),s.ec("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),s.Tb(6,"div",5),s.Tb(7,"label",6),s.Gc(8,"Room number"),s.Sb(),s.Tb(9,"label",7),s.Gc(10),s.Sb(),s.Sb(),s.Tb(11,"div",5),s.Tb(12,"label",8),s.Gc(13,"Start date"),s.Sb(),s.Tb(14,"input",9,10),s.ec("click",function(){return s.zc(o),s.yc(15).toggle()}),s.Sb(),s.Sb(),s.Tb(16,"div",5),s.Tb(17,"label",11),s.Gc(18,"End date"),s.Sb(),s.Tb(19,"input",12,13),s.ec("click",function(){return s.zc(o),s.yc(20).toggle()}),s.Sb(),s.Sb(),s.Tb(21,"div",5),s.Tb(22,"label",14),s.Gc(23,"Status"),s.Sb(),s.Tb(24,"select",15),s.Ec(25,vt,2,2,"option",16),s.hc(26,"keyvalue"),s.Sb(),s.Sb(),s.Tb(27,"div",17),s.Pb(28,"input",18),s.Tb(29,"label",19),s.Gc(30," Change similar "),s.Sb(),s.Sb(),s.Tb(31,"div",20),s.Tb(32,"span",21),s.ec("mouseenter",function(){return e.mouseoverShifting=!0}),s.Tb(33,"button",22),s.Gc(34," Submit "),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()}2&t&&(s.Bb(5),s.oc("formGroup",e.form),s.Bb(5),s.Ic(" ",null==e.room?null:e.room.roomNumber," "),s.Bb(15),s.oc("ngForOf",s.ic(26,4,e.statusEnum)),s.Bb(8),s.oc("ngClass",s.sc(6,St,e.form.invalid)))},directives:[V.x,V.n,V.g,V.b,Y.g,V.m,V.f,V.u,l.o,V.a,l.n,V.q,V.w],pipes:[l.j],styles:[""]}),t}(),Tt=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function c(t){try{s(i.next(t))}catch(e){r(e)}}function a(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((i=i.apply(t,e||[])).next())})},wt=function(t,e){var o,i,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){c.label=r[1];break}if(6===r[0]&&c.label<n[1]){c.label=n[1],n=r;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(r);break}n[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function It(t,e){if(1&t){var o=s.Ub();s.Tb(0,"admin-hotel-list",16),s.ec("hotel",function(t){return s.zc(o),s.gc().onSelectHotel(t)}),s.Sb()}}function kt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"span"),s.Tb(1,"button",24),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectCategory(t)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var i=e.$implicit,n=s.gc(2);s.Bb(1),s.oc("ngClass",i==n.category?"btn-primary":"btn-secondary"),s.Bb(1),s.Ic(" ",i," ")}}function Bt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",25),s.Tb(1,"div",26),s.ec("click",function(){s.zc(o);var t=e.$implicit;return s.gc(2).onSelectRoom(t.id)}),s.Gc(2),s.Sb(),s.Sb()}if(2&t){var i=e.$implicit;s.Bb(2),s.Ic(" ",i.roomNumber," ")}}function Gt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div",17),s.Tb(1,"h4"),s.Gc(2),s.Sb(),s.Tb(3,"div",18),s.Ec(4,kt,3,2,"span",19),s.Sb(),s.Tb(5,"div",20),s.Tb(6,"h4"),s.Gc(7),s.Sb(),s.Sb(),s.Ec(8,Bt,3,1,"div",21),s.Tb(9,"a",22),s.ec("click",function(){return s.zc(o),s.gc().onBacktoHotel()}),s.Pb(10,"i",23),s.Gc(11," Hotel list "),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(2),s.Ic(" ",i.hotel.name," "),s.Bb(2),s.oc("ngForOf",i.categoryList),s.Bb(3),s.Ic("",i.category," Room list"),s.Bb(1),s.oc("ngForOf",i.filteredRoomList)}}function Dt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"status-form",27),s.ec("create",function(t){return s.zc(o),s.gc().onCreate(t)}),s.Sb()}if(2&t){var i=s.gc();s.oc("room",i.room)}}function Ct(t,e){if(1&t&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Gc(2),s.hc(3,"date"),s.Sb(),s.Tb(4,"td"),s.Gc(5),s.Sb(),s.Sb()),2&t){var o=e.$implicit;s.Bb(2),s.Hc(s.jc(3,2,o.key,"d MMM,yy : EEE")),s.Bb(3),s.Hc(o.value)}}function xt(t,e){if(1&t&&(s.Tb(0,"tbody"),s.Ec(1,Ct,6,5,"tr",19),s.hc(2,"keyvalue"),s.Sb()),2&t){var o=s.gc(2);s.Bb(1),s.oc("ngForOf",s.ic(2,1,o.statusMap))}}function Pt(t,e){1&t&&(s.Tb(0,"tr"),s.Tb(1,"td",30),s.Pb(2,"i",31),s.Gc(3," Status map loading "),s.Sb(),s.Sb())}function Lt(t,e){if(1&t){var o=s.Ub();s.Tb(0,"div"),s.Tb(1,"h3"),s.Gc(2),s.Sb(),s.Tb(3,"button",28),s.ec("click",function(){return s.zc(o),s.gc().onAdjustStatusMap()}),s.Gc(4," Adjust Status Map "),s.Sb(),s.Tb(5,"table",29),s.Tb(6,"thead"),s.Tb(7,"tr"),s.Tb(8,"th"),s.Gc(9,"Date"),s.Sb(),s.Tb(10,"th"),s.Gc(11,"Room Satus"),s.Sb(),s.Sb(),s.Sb(),s.Ec(12,xt,3,3,"tbody",15),s.Ec(13,Pt,4,0,"tr",15),s.Sb(),s.Sb()}if(2&t){var i=s.gc();s.Bb(2),s.Ic("Status map for Room number : ",i.room.roomNumber,""),s.Bb(10),s.oc("ngIf",i.statusMap),s.Bb(1),s.oc("ngIf",!i.statusMap)}}var Rt=[{path:"add",component:x},{path:"add/:id",component:x},{path:"add/byHotelId/:hotelId",component:v},{path:"details/:id",component:N},{path:"discount-map",component:st},{path:"status-map",component:function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),Tt(this,void 0,void 0,function(){var e=this;return wt(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return Tt(this,void 0,void 0,function(){var e=this;return wt(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id==t}),this.statusMap=null,this.roomService.getAdminStatusMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.statusMap=t})},t.prototype.onAdjustStatusMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminStatusMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.satus,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(a.a),s.Ob($.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-status-map"]],decls:18,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create"],[1,"btn","btn-warning","my-2",3,"click"],[1,"table","border"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"span",1),s.Gc(2,"Room status map"),s.Sb(),s.Sb(),s.Tb(3,"div",0),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Ec(6,It,1,0,"admin-hotel-list",4),s.Ec(7,Gt,12,4,"div",5),s.Sb(),s.Tb(8,"div",6),s.Ec(9,Dt,1,1,"status-form",7),s.Tb(10,"div",8),s.Tb(11,"div",9),s.Tb(12,"div",10),s.Tb(13,"div",11),s.Tb(14,"div",12),s.Pb(15,"i",13),s.Sb(),s.Sb(),s.Tb(16,"input",14),s.ec("selected",function(t){return e.selectedDate(t)}),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Ec(17,Lt,14,3,"div",15),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(6),s.oc("ngIf",!e.showRoomList),s.Bb(1),s.oc("ngIf",e.showRoomList),s.Bb(2),s.oc("ngIf",e.showForm),s.Bb(7),s.oc("options",e.options),s.Bb(1),s.oc("ngIf",e.room))},directives:[l.p,j.b,S.a,l.o,l.n,yt],pipes:[l.j,l.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}()},{path:":id",component:pt},{path:"",component:pt}],At=function(){function t(){}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.a,i.e.forChild(Rt)]]}),t}()}}]);