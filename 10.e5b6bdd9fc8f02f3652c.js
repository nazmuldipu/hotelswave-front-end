(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/YPm":function(t,e,o){"use strict";o.d(e,"a",function(){return m});var n=o("8Y7J"),i=o("d26D"),r=o("s7LF"),c=o("SVse"),a=o("uEz7"),l=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},s=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function b(t,e){if(1&t){var o=n.Rb();n.Qb(0,"a",7),n.bc("click",function(){n.wc(o);var t=e.$implicit;return n.dc().onSelectHotel(t.id)}),n.Mb(1,"i",8),n.Fc(2),n.Pb()}if(2&t){var i=e.$implicit;n.zb(2),n.Hc(" ",i.name," ")}}function u(t,e){if(1&t){var o=n.Rb();n.Qb(0,"pagination",9),n.bc("getPage",function(t){return n.wc(o),n.dc().getAdminHotelPage(t)}),n.Pb()}if(2&t){var i=n.dc();n.lc("page",i.hotelPage)("short",i.short)}}var m=function(){function t(t){this.hotelService=t,this.hotel=new n.n,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage()},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),l(this,void 0,void 0,function(){var e,o=this;return s(this,function(n){switch(n.label){case 0:return e=localStorage.getItem("hotelId"),[4,this.hotelService.getAdminHotelPage(t,this.hotelName).subscribe(function(t){o.hotelPage=t,e&&o.getAdminHotel(+e)})];case 1:return n.sent(),[2]}})})},t.prototype.getAdminHotel=function(t){return l(this,void 0,void 0,function(){var e,o=this;return s(this,function(n){switch(n.label){case 0:return null!=(e=this.hotelPage.content.find(function(e){return e.id===t}))?[3,2]:[4,this.hotelService.getAdminHotel(t).subscribe(function(t){o.hotel.emit(t)})];case 1:return n.sent(),[3,3];case 2:console.log("amdin hotel "+e.name),this.hotel.emit(e),n.label=3;case 3:return[2]}})})},t.prototype.onSelectHotel=function(t){localStorage.setItem("hotelId",t.toString());var e=this.hotelPage.content.find(function(e){return e.id===t});this.hotel.emit(e)},t.\u0275fac=function(e){return new(e||t)(n.Lb(i.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["admin-hotel-list"]],outputs:{hotel:"hotel"},decls:11,vars:3,consts:[[1,"list-group"],[1,"list-group-item"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"form-group","mb-0"],["type","text","id","hotelName","name","hotelName","placeholder","Hotel name",1,"form-control",3,"ngModel","ngModelChange"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"page","short","getPage",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-building"],[3,"page","short","getPage"]],template:function(t,e){1&t&&(n.Qb(0,"ul",0),n.Qb(1,"li",1),n.Qb(2,"h5"),n.Fc(3,"Hotel List"),n.Pb(),n.Qb(4,"small"),n.Fc(5,"Choose a hotel from below list"),n.Pb(),n.Pb(),n.Qb(6,"form",2),n.bc("ngSubmit",function(){return e.getAdminHotelPage()}),n.Qb(7,"div",3),n.Qb(8,"input",4),n.bc("ngModelChange",function(t){return e.hotelName=t}),n.Pb(),n.Pb(),n.Pb(),n.Dc(9,b,3,1,"a",5),n.Dc(10,u,1,2,"pagination",6),n.Pb()),2&t&&(n.zb(8),n.lc("ngModel",e.hotelName),n.zb(1),n.lc("ngForOf",null==e.hotelPage?null:e.hotelPage.content),n.zb(1),n.lc("ngIf",null!=e.hotelPage))},directives:[r.x,r.n,r.o,r.b,r.m,r.p,c.p,c.q,a.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem 1.25rem}"]}),t}()},"3whx":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o("KZX/"),i=o("8Y7J"),r=function(){function t(){}return t.\u0275mod=i.Jb({type:t}),t.\u0275inj=i.Ib({factory:function(e){return new(e||t)},imports:[[n.a],n.a]}),t}()},YTJ0:function(t,e,o){"use strict";o.r(e),o.d(e,"ROUTES",function(){return Rt}),o.d(e,"RoomsModule",function(){return Mt});var n=o("iInd"),i=o("3whx"),r=o("3M1h"),c=o("d26D"),a=o("yBZE"),l=o("8Y7J"),s=o("SVse"),b=o("HF3I"),u=o("7rPp"),m=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},d=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function f(t,e){if(1&t&&(l.Qb(0,"li",7),l.Mb(1,"loading",10),l.Pb()),2&t){var o=l.dc(2);l.zb(1),l.lc("message",o.message)}}function h(t,e){if(1&t){var o=l.Rb();l.Qb(0,"a",11),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectCategory(t.id)}),l.Mb(1,"i",12),l.Fc(2),l.Pb()}if(2&t){var n=e.$implicit;l.zb(2),l.Hc(" ",n.name," ")}}function g(t,e){if(1&t&&(l.Qb(0,"ul",6),l.Qb(1,"li",7),l.Qb(2,"h5"),l.Fc(3,"Category list"),l.Pb(),l.Qb(4,"small"),l.Fc(5,"Choose a category from below list"),l.Pb(),l.Pb(),l.Dc(6,f,2,1,"li",8),l.Dc(7,h,3,1,"a",9),l.Pb()),2&t){var o=l.dc();l.zb(6),l.lc("ngIf",o.showCategoryLoading),l.zb(1),l.lc("ngForOf",o.categories)}}function p(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",13),l.Qb(1,"room-form",14),l.bc("create",function(t){return l.wc(o),l.dc().onCreate(t)})("update",function(t){return l.wc(o),l.dc().onUpdate(t)}),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(1),l.lc("hotel",n.hotel)("category",n.category)("room",n.room)}}var v=function(){function t(t,e,o,n,i){this.hotelService=t,this.categoryService=e,this.roomService=o,this.router=n,this.activeRoute=i,this.showCategory=!1,this.showCategoryLoading=!1,this.hotelId=i.snapshot.params.hotelId}return t.prototype.ngOnInit=function(){this.hotelId&&(this.getAdminCategories(this.hotelId),this.getAdminHotel(this.hotelId))},t.prototype.getAdminHotel=function(t){return m(this,void 0,void 0,function(){var t=this;return d(this,function(e){return this.hotelService.getAdminHotel(this.hotelId).subscribe(function(e){t.hotel=e}),[2]})})},t.prototype.getAdminCategories=function(t){return m(this,void 0,void 0,function(){var e=this;return d(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onCreate=function(t){var e=this;this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;this.roomService.updateAdminRoom(this.hotel.id,t.id,t).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(r.a),l.Lb(a.a),l.Lb(n.b),l.Lb(n.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-add-by-hotel-id"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Add Rooms"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Dc(6,g,8,2,"ul",4),l.Pb(),l.Dc(7,p,2,3,"div",5),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("ngIf",e.showCategory),l.zb(1),l.lc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[s.q,s.p,b.a,u.a],styles:[""]}),t}(),P=o("/YPm"),y=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},Q=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function w(t,e){if(1&t){var o=l.Rb();l.Qb(0,"admin-hotel-list",8),l.bc("hotel",function(t){return l.wc(o),l.dc().onSelectHotel(t)}),l.Pb()}}function F(t,e){1&t&&(l.Qb(0,"a",9),l.Mb(1,"i",10),l.Fc(2," Room list "),l.Pb())}function D(t,e){if(1&t&&(l.Qb(0,"li",12),l.Mb(1,"loading",17),l.Pb()),2&t){var o=l.dc(2);l.zb(1),l.lc("message",o.message)}}var k=function(t){return{active:t}};function S(t,e){if(1&t){var o=l.Rb();l.Qb(0,"a",18),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectCategory(t.id)}),l.Mb(1,"i",19),l.Fc(2),l.Pb()}if(2&t){var n=e.$implicit,i=l.dc(2);l.lc("ngClass",l.pc(2,k,n.id==(null==i.category?null:i.category.id))),l.zb(2),l.Hc(" ",n.name," ")}}function z(t,e){if(1&t){var o=l.Rb();l.Qb(0,"ul",11),l.Qb(1,"li",12),l.Qb(2,"h5"),l.Fc(3),l.Pb(),l.Qb(4,"small"),l.Fc(5,"Choose a category from below list"),l.Pb(),l.Pb(),l.Dc(6,D,2,1,"li",13),l.Dc(7,S,3,4,"a",14),l.Qb(8,"a",15),l.bc("click",function(){return l.wc(o),l.dc().onBacktoHotel()}),l.Mb(9,"i",16),l.Fc(10," Hotel list "),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(3),l.Hc("",null==n.hotel?null:n.hotel.name," Category list"),l.zb(3),l.lc("ngIf",n.showCategoryLoading),l.zb(1),l.lc("ngForOf",n.categories)}}function I(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",20),l.Qb(1,"room-form",21),l.bc("create",function(t){return l.wc(o),l.dc().onCreate(t)})("update",function(t){return l.wc(o),l.dc().onUpdate(t)}),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(1),l.lc("hotel",n.hotel)("category",n.category)("room",n.room)}}var x=function(){function t(t,e,o,n,i){this.hotelService=t,this.categoryService=e,this.roomService=o,this.activeRoute=n,this.router=i,this.showCategory=!1,this.showCategoryLoading=!1,this.showHotelLoading=!1,this.short=!0,this.id=n.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&this.getAdminRoom(this.id)},t.prototype.getAdminRoom=function(t){return y(this,void 0,void 0,function(){var e=this;return Q(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t,e.category=e.room.category,e.hotel=e.room.category.hotel})];case 1:return o.sent(),[2]}})})},t.prototype.getAdminCategories=function(t){return y(this,void 0,void 0,function(){var e=this;return Q(this,function(o){switch(o.label){case 0:return this.message="Category list loading",this.showCategoryLoading=!0,[4,this.categoryService.getCategoryListByHotelId(t).subscribe(function(t){e.categories=t,e.showCategory=!0,e.showCategoryLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.getAdminCategories(t.id),this.getAdminHotel(t.id)},t.prototype.getAdminHotel=function(t){return y(this,void 0,void 0,function(){var e=this;return Q(this,function(o){switch(o.label){case 0:return[4,this.hotelService.getAdminHotel(t).subscribe(function(t){e.hotel=t})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var e=this.categories.find(function(e){return e.id===t});this.category=e},t.prototype.onBacktoHotel=function(){this.categories=null,this.category=null,this.showCategory=!1,localStorage.removeItem("hotelId")},t.prototype.onCreate=function(t){var e=this;this.roomService.saveAdminRoom(t,this.hotel.id).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.prototype.onUpdate=function(t){var e=this;this.roomService.updateAdminRoom(this.hotel.id,this.room.id,t).subscribe(function(t){e.router.navigate(["/dashboard/admin/rooms"])})},t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(r.a),l.Lb(a.a),l.Lb(n.a),l.Lb(n.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-add"]],decls:10,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","list-group-item list-group-item-action list-group-item-info text-center","routerLink","/dashboard/admin/rooms",4,"ngIf"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[3,"hotel"],["routerLink","/dashboard/admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-list"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Add Rooms"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Dc(6,w,1,0,"admin-hotel-list",4),l.Dc(7,F,3,0,"a",5),l.Dc(8,z,11,3,"ul",6),l.Pb(),l.Dc(9,I,2,3,"div",7),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("ngIf",!e.showCategory),l.zb(1),l.lc("ngIf",!e.showCategory),l.zb(1),l.lc("ngIf",e.showCategory),l.zb(1),l.lc("ngIf",null!=e.hotel&&e.hotel.id&&e.category&&e.category.id))},directives:[s.q,P.a,n.d,s.p,b.a,s.o,u.a],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.25rem 1.25rem}"]}),t}(),C=o("LLt/"),L=o("R/zX"),R=o("eIep"),M=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},H=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function A(t,e){if(1&t&&l.Mb(0,"img",37),2&t){var o=l.dc();l.lc("src",o.imageUrl,l.yc)}}function q(t,e){if(1&t&&(l.Qb(0,"div",38),l.Fc(1),l.Pb()),2&t){var o=l.dc();l.zb(1),l.Hc(" ",o.errorMessage," ")}}function O(t,e){if(1&t){var o=l.Rb();l.Qb(0,"p"),l.Qb(1,"input",39),l.bc("change",function(t){return l.wc(o),l.dc().fileChange(t)}),l.Pb(),l.Pb()}}function N(t,e){1&t&&(l.Qb(0,"div"),l.Fc(1," Uploaded "),l.Mb(2,"i",40),l.Pb())}function G(t,e){if(1&t){var o=l.Rb();l.Qb(0,"button",41),l.bc("click",function(){return l.wc(o),l.dc().startUpload()}),l.Fc(1," Upload "),l.Pb()}}function E(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div"),l.Qb(1,"button",43),l.bc("click",function(){l.wc(o);var t=l.dc().$implicit;return l.dc().deleteImage(t)}),l.Qb(2,"span"),l.Fc(3,"\xd7"),l.Pb(),l.Pb(),l.Qb(4,"div",44),l.Mb(5,"img",37),l.Pb(),l.Pb()}if(2&t){var n=l.dc().$implicit;l.zb(5),l.lc("src",n,l.yc)}}function U(t,e){if(1&t&&(l.Qb(0,"div",42),l.Dc(1,E,6,1,"div",31),l.Pb()),2&t){var o=e.$implicit;l.zb(1),l.lc("ngIf",o.length)}}var _=function(){function t(t,e,o,n){this.roomService=t,this.auth=e,this.activatedRoute=o,this.ng2ImgMax=n,this.errorMessage="",this.roomImagesUrl=[],this.id=o.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&(this.getAdminRoom(this.id),this.loadRoomImages())},t.prototype.getAdminRoom=function(t){return M(this,void 0,void 0,function(){var e=this;return H(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoom(t).subscribe(function(t){e.room=t})];case 1:return o.sent(),[2]}})})},t.prototype.loadRoomImages=function(){return M(this,void 0,void 0,function(){var t=this;return H(this,function(e){switch(e.label){case 0:return[4,this.roomService.getRoomImageUrls(this.id).subscribe(function(e){t.roomImagesUrl=[],e.forEach(function(e){t.roomImagesUrl.push(t.roomService.imageUrl+e)})},function(t){console.log(t)})];case 1:return e.sent(),[2]}})})},t.prototype.previewFile=function(t){var e=this,o=new FileReader;o.onload=function(t){e.imageUrl=t.target.result},o.readAsDataURL(t.target.files[0])},t.prototype.fileChange=function(t){this.previewFile(t),this.fileList=t.target.files,this.progressPercentage=0,this.errorMessage=""},t.prototype.startUpload=function(){var t=this;if(this.fileList.length>0){var e=new FormData,o=this.fileList[0];this.ng2ImgMax.resizeImage(o,800,600).pipe(Object(R.a)(function(n){return console.log("size : ",n.size),e.append("image",n,o.name),t.roomService.uploadRoomImage(t.id,e)})).subscribe(function(e){t.imageUrl="",t.fileList=null,t.progressPercentage=100,t.loadRoomImages()},function(e){console.log(e),t.errorMessage=e._body})}},t.prototype.deleteImage=function(t){var e=this,o=new URL(t).pathname.split("/"),n=parseInt(o[o.length-1]);this.roomService.deleteRoomImage(o[o.length-3],n).subscribe(function(t){e.roomImagesUrl.splice(n,1,"")},function(t){console.log("Image could not delete")})},t.prototype.resizeImage=function(t,e,o){return this.ng2ImgMax.resizeImage(t,e,o)},t.\u0275fac=function(e){return new(e||t)(l.Lb(a.a),l.Lb(C.a),l.Lb(n.a),l.Lb(L.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-details"]],decls:161,vars:36,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["for","floorNumber"],[1,"form-group","col-md-3"],["for","price"],["for","discount"],["for","agentDiscount"],["for","vatService"],["id","vatService",1,"form-control"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/admin/rooms",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-3 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-3","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Room details"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"label",5),l.Fc(8,"Hotel Name"),l.Pb(),l.Qb(9,"label",6),l.Fc(10),l.Pb(),l.Pb(),l.Qb(11,"div",4),l.Qb(12,"label",7),l.Fc(13,"Category Name"),l.Pb(),l.Qb(14,"label",6),l.Fc(15),l.Pb(),l.Pb(),l.Qb(16,"div",8),l.Qb(17,"div",9),l.Qb(18,"label",10),l.Fc(19,"Room Number *"),l.Pb(),l.Qb(20,"label",6),l.Fc(21),l.Pb(),l.Pb(),l.Qb(22,"div",9),l.Qb(23,"label",11),l.Fc(24,"Floor Number *"),l.Pb(),l.Qb(25,"label",6),l.Fc(26),l.Pb(),l.Pb(),l.Pb(),l.Qb(27,"div",8),l.Qb(28,"div",9),l.Qb(29,"label",10),l.Fc(30,"Number of Beds *"),l.Pb(),l.Qb(31,"label",6),l.Fc(32),l.Pb(),l.Pb(),l.Qb(33,"div",9),l.Qb(34,"label",11),l.Fc(35,"Room Size (Square feet) *"),l.Pb(),l.Qb(36,"label",6),l.Fc(37),l.Pb(),l.Pb(),l.Pb(),l.Qb(38,"div",8),l.Qb(39,"div",12),l.Qb(40,"label",13),l.Fc(41,"Price *"),l.Pb(),l.Qb(42,"label",6),l.Fc(43),l.Pb(),l.Pb(),l.Qb(44,"div",12),l.Qb(45,"label",14),l.Fc(46,"Discount *"),l.Pb(),l.Qb(47,"label",6),l.Fc(48),l.Pb(),l.Pb(),l.Qb(49,"div",12),l.Qb(50,"label",15),l.Fc(51,"Agent Discount *"),l.Pb(),l.Qb(52,"label",6),l.Fc(53),l.Pb(),l.Pb(),l.Qb(54,"div",12),l.Qb(55,"label",16),l.Fc(56,"VatService charge *"),l.Pb(),l.Qb(57,"label",17),l.Fc(58),l.Pb(),l.Pb(),l.Pb(),l.Qb(59,"div",18),l.Qb(60,"h3",19),l.Fc(61,"Facilities"),l.Pb(),l.Qb(62,"div",20),l.Qb(63,"div",21),l.Qb(64,"label",22),l.Mb(65,"i",23),l.Fc(66," Front Face "),l.Pb(),l.Pb(),l.Qb(67,"div",21),l.Qb(68,"label",22),l.Mb(69,"i",23),l.Fc(70," Back Face "),l.Pb(),l.Pb(),l.Qb(71,"div",21),l.Qb(72,"label",22),l.Mb(73,"i",23),l.Fc(74," High Commode "),l.Pb(),l.Pb(),l.Qb(75,"div",21),l.Qb(76,"label",22),l.Mb(77,"i",23),l.Fc(78," Breakfast "),l.Pb(),l.Pb(),l.Qb(79,"div",21),l.Qb(80,"label",22),l.Mb(81,"i",23),l.Fc(82," Internet "),l.Pb(),l.Pb(),l.Qb(83,"div",21),l.Qb(84,"label",22),l.Mb(85,"i",23),l.Fc(86," Air Condition "),l.Pb(),l.Pb(),l.Qb(87,"div",21),l.Qb(88,"label",22),l.Mb(89,"i",23),l.Fc(90," TV "),l.Pb(),l.Pb(),l.Qb(91,"div",21),l.Qb(92,"label",22),l.Mb(93,"i",23),l.Fc(94," Geyser "),l.Pb(),l.Pb(),l.Qb(95,"div",21),l.Qb(96,"label",22),l.Mb(97,"i",23),l.Fc(98," HillView "),l.Pb(),l.Pb(),l.Qb(99,"div",21),l.Qb(100,"label",22),l.Mb(101,"i",23),l.Fc(102," Sea View "),l.Pb(),l.Pb(),l.Qb(103,"div",21),l.Qb(104,"label",22),l.Mb(105,"i",23),l.Fc(106," Telephone "),l.Pb(),l.Pb(),l.Qb(107,"div",21),l.Qb(108,"label",22),l.Mb(109,"i",23),l.Fc(110," Bath Towel "),l.Pb(),l.Pb(),l.Qb(111,"div",21),l.Qb(112,"label",22),l.Mb(113,"i",23),l.Fc(114," Table And Chair "),l.Pb(),l.Pb(),l.Qb(115,"div",21),l.Qb(116,"label",22),l.Mb(117,"i",23),l.Fc(118," In Middle "),l.Pb(),l.Pb(),l.Qb(119,"div",21),l.Qb(120,"label",22),l.Mb(121,"i",23),l.Fc(122," Kitchen "),l.Pb(),l.Pb(),l.Qb(123,"div",21),l.Qb(124,"label",22),l.Mb(125,"i",23),l.Fc(126," BathTub "),l.Pb(),l.Pb(),l.Qb(127,"div",21),l.Qb(128,"label",22),l.Mb(129,"i",23),l.Fc(130," Balcony "),l.Pb(),l.Pb(),l.Qb(131,"div",21),l.Qb(132,"label",22),l.Mb(133,"i",23),l.Fc(134," Extra Beds "),l.Pb(),l.Pb(),l.Qb(135,"div",21),l.Qb(136,"label",22),l.Mb(137,"i",23),l.Fc(138," Pets Allowed "),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(139,"div",24),l.Qb(140,"a",25),l.Fc(141,"Edit"),l.Pb(),l.Pb(),l.Pb(),l.Qb(142,"div",3),l.Qb(143,"div",26),l.Qb(144,"div",27),l.Dc(145,A,1,1,"img",28),l.Pb(),l.Qb(146,"div",29),l.Dc(147,q,2,1,"div",30),l.Qb(148,"div"),l.Fc(149," Please select a image to upload "),l.Mb(150,"br"),l.Fc(151," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),l.Pb(),l.Dc(152,O,2,0,"p",31),l.Dc(153,N,3,0,"div",31),l.Qb(154,"div"),l.Dc(155,G,2,0,"button",32),l.Qb(156,"a",33),l.Fc(157," Back "),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(158,"div",34),l.Qb(159,"div",35),l.Dc(160,U,2,1,"div",36),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(10),l.Hc(" ",null==e.room||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name," "),l.zb(5),l.Hc(" ",null==e.room||null==e.room.category?null:e.room.category.name," "),l.zb(6),l.Gc(null==e.room?null:e.room.roomNumber),l.zb(5),l.Gc(null==e.room?null:e.room.floorNumber),l.zb(6),l.Gc(null==e.room?null:e.room.numberOfBed),l.zb(5),l.Gc(null==e.room?null:e.room.roomSize),l.zb(6),l.Gc(null==e.room?null:e.room.price),l.zb(5),l.Gc(null==e.room?null:e.room.discount),l.zb(5),l.Gc(null==e.room?null:e.room.agentDiscount),l.zb(5),l.Gc(null==e.room?null:e.room.vatService),l.zb(7),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.frontFace?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.backFace?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.highCommode?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.breakfast?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.internet?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.airConditioned?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tv?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.geyser?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.hillView?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.seaView?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.telephone?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTowel?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.tableAndChair?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.inMiddle?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.kitchen?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.bathTub?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.balcony?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.extraBeds?"fa-check-square-o":"fa-square-o"),l.zb(4),l.lc("ngClass",null!=e.room&&null!=e.room.facilities&&e.room.facilities.petsAllowed?"fa-check-square-o":"fa-square-o"),l.zb(3),l.nc("routerLink","/dashboard/admin/rooms/add/",null==e.room?null:e.room.id,""),l.zb(5),l.lc("ngIf",e.imageUrl),l.zb(2),l.lc("ngIf",e.errorMessage.length>0),l.zb(5),l.lc("ngIf",e.roomImagesUrl.length<5),l.zb(1),l.lc("ngIf",100==e.progressPercentage),l.zb(2),l.lc("ngIf",e.fileList),l.zb(5),l.lc("ngForOf",e.roomImagesUrl))},directives:[s.o,n.d,s.q,s.p],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;width:100%}"]}),t}(),B=o("YXrq"),$=o("/e7+"),T=o("53Co"),j=o("s7LF"),V=o("G0yt");function Y(t,e){if(1&t&&(l.Qb(0,"div",23),l.Fc(1),l.Pb()),2&t){var o=l.dc();l.zb(1),l.Hc(" ",o.message," ")}}var J=function(t){return{disabled:t}},X=function(){function t(t,e){this.builder=t,this.util=e,this.create=new l.n,this.mouseoverShifting=!1,this.message="",this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",j.v.required],startDate:["",j.v.required],endDate:["",j.v.required],amount:["",j.v.required],changeSimilar:!1})},t.prototype.submit=function(){var t=this.util.getDateFromDateObj(this.form.controls.startDate.value),e=this.util.getDateFromDateObj(this.form.controls.endDate.value);this.message=t>e?"Date error, Start date cannot be after end date":"",this.form.valid&&e>t&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.\u0275fac=function(e){return new(e||t)(l.Lb(j.d),l.Lb($.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["discount-form"]],inputs:{room:"room"},outputs:{create:"create"},features:[l.xb],decls:34,vars:6,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],["role","alert",1,"alert","alert-warning"]],template:function(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"h3",3),l.Fc(4,"Adjust room discount map"),l.Pb(),l.Dc(5,Y,2,1,"div",4),l.Qb(6,"form",5),l.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),l.Qb(7,"div",6),l.Qb(8,"label",7),l.Fc(9,"Room number"),l.Pb(),l.Qb(10,"label",8),l.Fc(11),l.Pb(),l.Pb(),l.Qb(12,"div",6),l.Qb(13,"label",9),l.Fc(14,"Start date"),l.Pb(),l.Qb(15,"input",10,11),l.bc("click",function(){return l.wc(o),l.vc(16).toggle()}),l.Pb(),l.Pb(),l.Qb(17,"div",6),l.Qb(18,"label",12),l.Fc(19,"End date"),l.Pb(),l.Qb(20,"input",13,14),l.bc("click",function(){return l.wc(o),l.vc(21).toggle()}),l.Pb(),l.Pb(),l.Qb(22,"div",6),l.Qb(23,"label",15),l.Fc(24,"Amount"),l.Pb(),l.Mb(25,"input",16),l.Pb(),l.Qb(26,"div",17),l.Mb(27,"input",18),l.Qb(28,"label",19),l.Fc(29," Change similar "),l.Pb(),l.Pb(),l.Qb(30,"div",20),l.Qb(31,"span",21),l.bc("mouseenter",function(){return e.mouseoverShifting=!0}),l.Qb(32,"button",22),l.Fc(33," Submit "),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()}2&t&&(l.zb(5),l.lc("ngIf",e.message.length),l.zb(1),l.lc("formGroup",e.form),l.zb(5),l.Hc(" ",null==e.room?null:e.room.roomNumber," "),l.zb(21),l.lc("ngClass",l.pc(4,J,e.form.invalid)))},directives:[s.q,j.x,j.n,j.g,j.b,V.i,j.m,j.f,j.r,j.a,s.o],styles:[""],changeDetection:0}),t}(),K=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},Z=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function W(t,e){if(1&t){var o=l.Rb();l.Qb(0,"admin-hotel-list",16),l.bc("hotel",function(t){return l.wc(o),l.dc().onSelectHotel(t)}),l.Pb()}}function tt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"span"),l.Qb(1,"button",24),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectCategory(t)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var n=e.$implicit,i=l.dc(2);l.zb(1),l.lc("ngClass",n==i.category?"btn-primary":"btn-secondary"),l.zb(1),l.Hc(" ",n," ")}}function et(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",25),l.Qb(1,"div",26),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectRoom(t.id)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var n=e.$implicit;l.zb(2),l.Hc(" ",n.roomNumber," ")}}function ot(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",17),l.Qb(1,"h4"),l.Fc(2),l.Pb(),l.Qb(3,"div",18),l.Dc(4,tt,3,2,"span",19),l.Pb(),l.Qb(5,"div",20),l.Qb(6,"h4"),l.Fc(7),l.Pb(),l.Pb(),l.Dc(8,et,3,1,"div",21),l.Qb(9,"a",22),l.bc("click",function(){return l.wc(o),l.dc().onBacktoHotel()}),l.Mb(10,"i",23),l.Fc(11," Hotel list "),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(2),l.Hc(" ",n.hotel.name," "),l.zb(2),l.lc("ngForOf",n.categoryList),l.zb(3),l.Hc("",n.category," room list"),l.zb(1),l.lc("ngForOf",n.filteredRoomList)}}function nt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"discount-form",27),l.bc("create",function(t){return l.wc(o),l.dc().onCreate(t)}),l.Pb()}if(2&t){var n=l.dc();l.lc("room",n.room)}}function it(t,e){if(1&t&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Fc(2),l.ec(3,"date"),l.Pb(),l.Qb(4,"td"),l.Fc(5),l.Pb(),l.Qb(6,"td"),l.Fc(7),l.Pb(),l.Qb(8,"td"),l.Fc(9),l.Pb(),l.Pb()),2&t){var o=e.$implicit,n=l.dc(3);l.zb(2),l.Gc(l.gc(3,4,o.key,"d MMM,yy : EEE")),l.zb(3),l.Gc(n.room.price),l.zb(2),l.Gc(o.value),l.zb(2),l.Gc(n.room.price-o.value)}}function rt(t,e){if(1&t&&(l.Qb(0,"tbody"),l.Dc(1,it,10,7,"tr",19),l.ec(2,"keyvalue"),l.Pb()),2&t){var o=l.dc(2);l.zb(1),l.lc("ngForOf",l.fc(2,1,o.discountMap))}}function ct(t,e){1&t&&(l.Qb(0,"tr"),l.Qb(1,"td",30),l.Mb(2,"i",31),l.Fc(3," Discount map loading "),l.Pb(),l.Pb())}function at(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div"),l.Qb(1,"h3"),l.Fc(2),l.Pb(),l.Qb(3,"button",28),l.bc("click",function(){return l.wc(o),l.dc().onAdjustDiscountMap()}),l.Fc(4," Adjust Discount Map "),l.Pb(),l.Qb(5,"table",29),l.Qb(6,"thead"),l.Qb(7,"tr"),l.Qb(8,"th"),l.Fc(9,"Date"),l.Pb(),l.Qb(10,"th"),l.Fc(11,"Room Price"),l.Pb(),l.Qb(12,"th"),l.Fc(13,"Discount"),l.Pb(),l.Qb(14,"th"),l.Fc(15,"Payable"),l.Pb(),l.Pb(),l.Pb(),l.Dc(16,rt,3,3,"tbody",15),l.Dc(17,ct,4,0,"tr",15),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(2),l.Hc("Discount map for Room number : ",n.room.roomNumber,""),l.zb(14),l.lc("ngIf",n.discountMap),l.zb(1),l.lc("ngIf",!n.discountMap)}}var lt=function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),K(this,void 0,void 0,function(){var e=this;return Z(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return K(this,void 0,void 0,function(){var e=this;return Z(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id==t}),this.discountMap=null,this.roomService.getAdminDiscountMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.discountMap=t})},t.prototype.onAdjustDiscountMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminDiscountMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.amount,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(a.a),l.Lb($.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-discount-map"]],decls:18,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create"],[1,"btn","btn-warning","my-2",3,"click"],[1,"table","border","table-hover"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Room discount map"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Dc(6,W,1,0,"admin-hotel-list",4),l.Dc(7,ot,12,4,"div",5),l.Pb(),l.Qb(8,"div",6),l.Dc(9,nt,1,1,"discount-form",7),l.Qb(10,"div",8),l.Qb(11,"div",9),l.Qb(12,"div",10),l.Qb(13,"div",11),l.Qb(14,"div",12),l.Mb(15,"i",13),l.Pb(),l.Pb(),l.Qb(16,"input",14),l.bc("selected",function(t){return e.selectedDate(t)}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Dc(17,at,18,3,"div",15),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("ngIf",!e.showRoomList),l.zb(1),l.lc("ngIf",e.showRoomList),l.zb(2),l.lc("ngIf",e.showForm),l.zb(7),l.lc("options",e.options),l.zb(1),l.lc("ngIf",e.room))},directives:[s.q,T.b,P.a,s.p,s.o,X],pipes:[s.k,s.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),st=o("uEz7"),bt=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},ut=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function mt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",12),l.Fc(1),l.Qb(2,"button",13),l.bc("click",function(){return l.wc(o),l.dc().clear()}),l.Fc(3,"Clear"),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(1),l.Hc(" ",n.message," ")}}function dt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"tr"),l.Qb(1,"td"),l.Qb(2,"a",18),l.Fc(3),l.Pb(),l.Pb(),l.Qb(4,"td"),l.Fc(5),l.Pb(),l.Qb(6,"td"),l.Fc(7),l.Pb(),l.Qb(8,"td"),l.Fc(9),l.Pb(),l.Qb(10,"td"),l.Fc(11),l.Pb(),l.Qb(12,"td"),l.Fc(13),l.Pb(),l.Qb(14,"td"),l.Qb(15,"a",19),l.Fc(16,"Images"),l.Pb(),l.Qb(17,"a",20),l.Fc(18,"Details"),l.Pb(),l.Qb(19,"a",21),l.Fc(20,"Edit"),l.Pb(),l.Qb(21,"button",22),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onDelete(t.id,t.roomNumber)}),l.Fc(22," Delete "),l.Pb(),l.Pb(),l.Pb()}if(2&t){var n=e.$implicit;l.zb(2),l.nc("routerLink","/dashboard/admin/rooms/details/",n.id,""),l.zb(1),l.Hc(" ",n.roomNumber," "),l.zb(2),l.Gc(n.floorNumber),l.zb(2),l.Gc(n.price),l.zb(2),l.Gc(n.discount),l.zb(2),l.Gc(n.agentDiscount),l.zb(2),l.Gc(n.category.name),l.zb(2),l.nc("routerLink","/dashboard/admin/rooms/details/",n.id,""),l.zb(2),l.nc("routerLink","/dashboard/admin/rooms/details/",n.id,""),l.zb(2),l.nc("routerLink","/dashboard/admin/rooms/add/",n.id,"")}}function ft(t,e){if(1&t){var o=l.Rb();l.Qb(0,"pagination",23),l.bc("getPage",function(t){l.wc(o);var e=l.dc(2);return e.getAdminRoomPage(e.hotel.id,t)}),l.Pb()}if(2&t){var n=l.dc(2);l.lc("page",n.roomPage)}}function ht(t,e){if(1&t&&(l.Qb(0,"table",14),l.Qb(1,"thead"),l.Qb(2,"tr"),l.Qb(3,"th"),l.Fc(4,"Room number"),l.Pb(),l.Qb(5,"th"),l.Fc(6,"Floor"),l.Pb(),l.Qb(7,"th"),l.Fc(8,"Price"),l.Pb(),l.Qb(9,"th"),l.Fc(10,"Discount"),l.Pb(),l.Qb(11,"th"),l.Fc(12,"Agent dis."),l.Pb(),l.Qb(13,"th"),l.Fc(14,"Category"),l.Pb(),l.Mb(15,"th"),l.Pb(),l.Pb(),l.Qb(16,"tbody"),l.Dc(17,dt,23,10,"tr",15),l.Pb(),l.Qb(18,"tfoot"),l.Qb(19,"tr"),l.Qb(20,"td",16),l.Dc(21,ft,1,1,"pagination",17),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&t){var o=l.dc();l.zb(17),l.lc("ngForOf",null==o.roomPage?null:o.roomPage.content),l.zb(4),l.lc("ngIf",null!=o.roomPage)}}function gt(t,e){if(1&t&&(l.Qb(0,"div"),l.Mb(1,"loading",24),l.Pb()),2&t){var o=l.dc();l.zb(1),l.lc("message",o.message)}}var pt=function(){function t(t,e){this.hotelService=t,this.roomService=e,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage()},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),bt(this,void 0,void 0,function(){var e=this;return ut(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1,e.message=""})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.getAdminRoomPage(t.id)},t.prototype.getAdminRoomPage=function(t,e){return void 0===e&&(e=0),bt(this,void 0,void 0,function(){var o=this;return ut(this,function(n){switch(n.label){case 0:return this.message="Room list loading",this.showRoomLoading=!0,[4,this.roomService.getAdminRoomPageByHotelId(t,e).subscribe(function(t){o.roomPage=t,o.showRoomLoading=!1,o.message=""})];case 1:return n.sent(),[2]}})})},t.prototype.onDelete=function(t,e){return bt(this,void 0,void 0,function(){var o=this;return ut(this,function(n){switch(n.label){case 0:return confirm('Are you sure to delete room number "'+e+'" with id '+t)?[4,this.roomService.deleteAdminRoom(t).subscribe(function(t){"success"==t.response?(o.message="Room deleted successfully",o.getAdminRoomPage(o.hotel.id)):o.message="Room deleted Failed"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.clear=function(){this.message=""},t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(a.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-list"]],decls:16,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel"],["routerLink","/dashboard/admin/rooms/add",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-plus"],[1,"col-md-9"],[1,"text-center"],["class","alert alert-success","role","alert",4,"ngIf"],["class","table border",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","7"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],[1,"btn","btn-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-success","btn-sm","mx-1",3,"routerLink"],["target","_blank",1,"btn","btn-warning","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[3,"page","getPage"],[3,"message"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Room List"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"admin-hotel-list",4),l.bc("hotel",function(t){return e.onSelectHotel(t)}),l.Pb(),l.Qb(7,"a",5),l.Mb(8,"i",6),l.Fc(9," Add room "),l.Pb(),l.Pb(),l.Qb(10,"div",7),l.Qb(11,"h3",8),l.Fc(12),l.Pb(),l.Dc(13,mt,4,1,"div",9),l.Dc(14,ht,22,2,"table",10),l.Dc(15,gt,2,1,"div",11),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(12),l.Hc("",null==e.hotel?null:e.hotel.name," Room List"),l.zb(1),l.lc("ngIf",e.message.length>0),l.zb(1),l.lc("ngIf",null!=(null==e.roomPage?null:e.roomPage.content)),l.zb(1),l.lc("ngIf",e.showRoomLoading))},directives:[P.a,n.d,s.q,s.p,st.a,b.a],styles:[""]}),t}();function vt(t,e){if(1&t&&(l.Qb(0,"option",23),l.Fc(1),l.Pb()),2&t){var o=e.$implicit;l.lc("value",o.key),l.zb(1),l.Hc(" ",o.value," ")}}var Pt=function(t){return{disabled:t}},yt=function(){function t(t){this.builder=t,this.create=new l.n,this.mouseoverShifting=!1,this.statusEnum=B.a,this.createForm()}return t.prototype.ngOnChanges=function(){this.room&&this.room.id&&this.form.patchValue({roomId:this.room.id})},t.prototype.createForm=function(){this.form=this.builder.group({roomId:["",j.v.required],startDate:["",j.v.required],endDate:["",j.v.required],satus:["",j.v.required],changeSimilar:!1})},t.prototype.submit=function(){this.form.valid&&(this.create.emit(this.form.value),this.form.reset(),this.form.patchValue({roomId:this.room.id}))},t.\u0275fac=function(e){return new(e||t)(l.Lb(j.d))},t.\u0275cmp=l.Fb({type:t,selectors:[["status-form"]],inputs:{room:"room"},outputs:{create:"create"},features:[l.xb],decls:35,vars:8,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","satus"],["id","satus","formControlName","satus",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],[3,"value"]],template:function(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"h3",3),l.Fc(4,"Adjust room status map"),l.Pb(),l.Qb(5,"form",4),l.bc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),l.Qb(6,"div",5),l.Qb(7,"label",6),l.Fc(8,"Room number"),l.Pb(),l.Qb(9,"label",7),l.Fc(10),l.Pb(),l.Pb(),l.Qb(11,"div",5),l.Qb(12,"label",8),l.Fc(13,"Start date"),l.Pb(),l.Qb(14,"input",9,10),l.bc("click",function(){return l.wc(o),l.vc(15).toggle()}),l.Pb(),l.Pb(),l.Qb(16,"div",5),l.Qb(17,"label",11),l.Fc(18,"End date"),l.Pb(),l.Qb(19,"input",12,13),l.bc("click",function(){return l.wc(o),l.vc(20).toggle()}),l.Pb(),l.Pb(),l.Qb(21,"div",5),l.Qb(22,"label",14),l.Fc(23,"Status"),l.Pb(),l.Qb(24,"select",15),l.Dc(25,vt,2,2,"option",16),l.ec(26,"keyvalue"),l.Pb(),l.Pb(),l.Qb(27,"div",17),l.Mb(28,"input",18),l.Qb(29,"label",19),l.Fc(30," Change similar "),l.Pb(),l.Pb(),l.Qb(31,"div",20),l.Qb(32,"span",21),l.bc("mouseenter",function(){return e.mouseoverShifting=!0}),l.Qb(33,"button",22),l.Fc(34," Submit "),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()}2&t&&(l.zb(5),l.lc("formGroup",e.form),l.zb(5),l.Hc(" ",null==e.room?null:e.room.roomNumber," "),l.zb(15),l.lc("ngForOf",l.fc(26,4,e.statusEnum)),l.zb(8),l.lc("ngClass",l.pc(6,Pt,e.form.invalid)))},directives:[j.x,j.n,j.g,j.b,V.i,j.m,j.f,j.u,s.p,j.a,s.o,j.q,j.w],pipes:[s.k],styles:[""]}),t}(),Qt=function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{l(n.next(t))}catch(e){r(e)}}function a(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}l((n=n.apply(t,e||[])).next())})},wt=function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function Ft(t,e){if(1&t){var o=l.Rb();l.Qb(0,"admin-hotel-list",16),l.bc("hotel",function(t){return l.wc(o),l.dc().onSelectHotel(t)}),l.Pb()}}function Dt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"span"),l.Qb(1,"button",24),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectCategory(t)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var n=e.$implicit,i=l.dc(2);l.zb(1),l.lc("ngClass",n==i.category?"btn-primary":"btn-secondary"),l.zb(1),l.Hc(" ",n," ")}}function kt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",25),l.Qb(1,"div",26),l.bc("click",function(){l.wc(o);var t=e.$implicit;return l.dc(2).onSelectRoom(t.id)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var n=e.$implicit;l.zb(2),l.Hc(" ",n.roomNumber," ")}}function St(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div",17),l.Qb(1,"h4"),l.Fc(2),l.Pb(),l.Qb(3,"div",18),l.Dc(4,Dt,3,2,"span",19),l.Pb(),l.Qb(5,"div",20),l.Qb(6,"h4"),l.Fc(7),l.Pb(),l.Pb(),l.Dc(8,kt,3,1,"div",21),l.Qb(9,"a",22),l.bc("click",function(){return l.wc(o),l.dc().onBacktoHotel()}),l.Mb(10,"i",23),l.Fc(11," Hotel list "),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(2),l.Hc(" ",n.hotel.name," "),l.zb(2),l.lc("ngForOf",n.categoryList),l.zb(3),l.Hc("",n.category," Room list"),l.zb(1),l.lc("ngForOf",n.filteredRoomList)}}function zt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"status-form",27),l.bc("create",function(t){return l.wc(o),l.dc().onCreate(t)}),l.Pb()}if(2&t){var n=l.dc();l.lc("room",n.room)}}function It(t,e){if(1&t&&(l.Qb(0,"tr"),l.Qb(1,"td"),l.Fc(2),l.ec(3,"date"),l.Pb(),l.Qb(4,"td"),l.Fc(5),l.Pb(),l.Pb()),2&t){var o=e.$implicit;l.zb(2),l.Gc(l.gc(3,2,o.key,"d MMM,yy : EEE")),l.zb(3),l.Gc(o.value)}}function xt(t,e){if(1&t&&(l.Qb(0,"tbody"),l.Dc(1,It,6,5,"tr",19),l.ec(2,"keyvalue"),l.Pb()),2&t){var o=l.dc(2);l.zb(1),l.lc("ngForOf",l.fc(2,1,o.statusMap))}}function Ct(t,e){1&t&&(l.Qb(0,"tr"),l.Qb(1,"td",30),l.Mb(2,"i",31),l.Fc(3," Status map loading "),l.Pb(),l.Pb())}function Lt(t,e){if(1&t){var o=l.Rb();l.Qb(0,"div"),l.Qb(1,"h3"),l.Fc(2),l.Pb(),l.Qb(3,"button",28),l.bc("click",function(){return l.wc(o),l.dc().onAdjustStatusMap()}),l.Fc(4," Adjust Status Map "),l.Pb(),l.Qb(5,"table",29),l.Qb(6,"thead"),l.Qb(7,"tr"),l.Qb(8,"th"),l.Fc(9,"Date"),l.Pb(),l.Qb(10,"th"),l.Fc(11,"Room Satus"),l.Pb(),l.Pb(),l.Pb(),l.Dc(12,xt,3,3,"tbody",15),l.Dc(13,Ct,4,0,"tr",15),l.Pb(),l.Pb()}if(2&t){var n=l.dc();l.zb(2),l.Hc("Status map for Room number : ",n.room.roomNumber,""),l.zb(10),l.lc("ngIf",n.statusMap),l.zb(1),l.lc("ngIf",!n.statusMap)}}var Rt=[{path:"add",component:x},{path:"add/:id",component:x},{path:"add/byHotelId/:hotelId",component:v},{path:"details/:id",component:_},{path:"discount-map",component:lt},{path:"status-map",component:function(){function t(t,e,o){this.hotelService=t,this.roomService=e,this.util=o,this.showForm=!1,this.showRoomList=!1,this.showHotelLoading=!1,this.showRoomLoading=!1,this.short=!0}return t.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30),this.setDateRanges()},t.prototype.setDateRanges=function(){this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.getAdminHotelPage=function(t){return void 0===t&&(t=0),Qt(this,void 0,void 0,function(){var e=this;return wt(this,function(o){switch(o.label){case 0:return this.message="Hotel list loading",this.showHotelLoading=!0,[4,this.hotelService.getAdminHotelPage(t).subscribe(function(t){e.hotelPage=t,e.showHotelLoading=!1})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectHotel=function(t){this.hotel=t,this.hotelId=t.id,this.getAdminRoomList(t.id)},t.prototype.getAdminRoomList=function(t){return Qt(this,void 0,void 0,function(){var e=this;return wt(this,function(o){switch(o.label){case 0:return[4,this.roomService.getAdminRoomListByHotelId(t).subscribe(function(t){e.roomList=t,e.showRoomList=!0,e.filteredRoomList=t,e.category="All",e.categoryList=["All"],e.roomList.forEach(function(t){e.categoryList.includes(t.category.name)||e.categoryList.push(t.category.name)})})];case 1:return o.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onBacktoHotel=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.room&&this.room.id&&this.onSelectRoom(this.room.id)},t.prototype.onSelectRoom=function(t){var e=this;this.room=this.roomList.find(function(e){return e.id==t}),this.statusMap=null,this.roomService.getAdminStatusMap(t,this.util.getDateString(this.startDate),this.util.getDateString(this.endDate)).subscribe(function(t){e.statusMap=t})},t.prototype.onAdjustStatusMap=function(){this.showForm=!0},t.prototype.onCreate=function(t){var e=this;this.roomService.updateAdminStatusMap(t.roomId,this.util.makeDateString(t.startDate),this.util.makeDateString(t.endDate),t.satus,t.changeSimilar).subscribe(function(t){e.showForm=!1})},t.\u0275fac=function(e){return new(e||t)(l.Lb(c.a),l.Lb(a.a),l.Lb($.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-status-map"]],decls:18,vars:5,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[3,"hotel",4,"ngIf"],["class","row m-0 mt-2",4,"ngIf"],[1,"col-md-9"],[3,"room","create",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf"],[3,"hotel"],[1,"row","m-0","mt-2"],[1,"col-12","p-0","mt-1"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["class","col-md-2 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"click"],[1,"fa","fa-chevron-left"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"],[3,"room","create"],[1,"btn","btn-warning","my-2",3,"click"],[1,"table","border"],["colspan","4",1,"text-center"],[1,"fa","fa-refresh"]],template:function(t,e){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Room status map"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Dc(6,Ft,1,0,"admin-hotel-list",4),l.Dc(7,St,12,4,"div",5),l.Pb(),l.Qb(8,"div",6),l.Dc(9,zt,1,1,"status-form",7),l.Qb(10,"div",8),l.Qb(11,"div",9),l.Qb(12,"div",10),l.Qb(13,"div",11),l.Qb(14,"div",12),l.Mb(15,"i",13),l.Pb(),l.Pb(),l.Qb(16,"input",14),l.bc("selected",function(t){return e.selectedDate(t)}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Dc(17,Lt,14,3,"div",15),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("ngIf",!e.showRoomList),l.zb(1),l.lc("ngIf",e.showRoomList),l.zb(2),l.lc("ngIf",e.showForm),l.zb(7),l.lc("options",e.options),l.zb(1),l.lc("ngIf",e.room))},directives:[s.q,T.b,P.a,s.p,s.o,yt],pipes:[s.k,s.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.2rem}.room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}()},{path:":id",component:pt},{path:"",component:pt}],Mt=function(){function t(){}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},imports:[[i.a,n.e.forChild(Rt)]]}),t}()}}]);