(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{SfbY:function(t,o,e){"use strict";e.r(o),e.d(o,"ROUTES",function(){return Co}),e.d(o,"ServiceAdminRoomsModule",function(){return Po});var n=e("3M1h"),r=e("d26D"),i=e("yBZE"),c=e("fXoL"),a=e("tyNb"),b=e("ofXK"),l=e("HF3I"),s=e("7rPp"),u=function(t,o,e,n){return new(e||(e=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(o){i(o)}}function a(t){try{b(n.throw(t))}catch(o){i(o)}}function b(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(c,a)}b((n=n.apply(t,o||[])).next())})},d=function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function m(t,o){if(1&t&&(c.Tb(0,"li",7),c.Pb(1,"loading",12),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("message",e.message)}}function f(t,o){if(1&t){var e=c.Ub();c.Tb(0,"a",13),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc(2).onSelectCategory(t.id)}),c.Pb(1,"i",14),c.Gc(2),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(2),c.Ic(" ",n.name," ")}}function g(t,o){if(1&t&&(c.Tb(0,"ul",6),c.Tb(1,"li",7),c.Tb(2,"h5"),c.Gc(3,"Category list"),c.Sb(),c.Tb(4,"small"),c.Gc(5,"Choose a category from below list"),c.Sb(),c.Sb(),c.Ec(6,m,2,1,"li",8),c.Ec(7,f,3,1,"a",9),c.Tb(8,"a",10),c.Pb(9,"i",11),c.Gc(10," Room list "),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(6),c.oc("ngIf",e.showCategoryLoading),c.Bb(1),c.oc("ngForOf",e.categoryList)}}function h(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",15),c.Tb(1,"room-form",16),c.ec("create",function(t){return c.zc(e),c.gc().onCreate(t)})("update",function(t){return c.zc(e),c.gc().onUpdate(t)}),c.Sb(),c.Sb()}if(2&t){var n=c.gc();c.Bb(1),c.oc("hotel",n.hotel)("category",n.category)("room",n.room)}}var p=function(){function t(t,o,e,n,r){this.hotelService=t,this.categoryService=o,this.roomService=e,this.activeRoute=n,this.router=r,this.showCategoryLoading=!1,this.message="Category loading ",this.id=n.snapshot.params.id}return t.prototype.ngOnInit=function(){this.getMyHotel(),this.getMyCategories(),this.id&&this.getServiceAdminRoom(this.id)},t.prototype.getMyHotel=function(){return u(this,void 0,void 0,function(){var t=this;return d(this,function(o){switch(o.label){case 0:return[4,this.hotelService.getServiceAdminHotel().subscribe(function(o){t.hotel=o})];case 1:return o.sent(),[2]}})})},t.prototype.getMyCategories=function(){return u(this,void 0,void 0,function(){var t=this;return d(this,function(o){switch(o.label){case 0:return[4,this.categoryService.getServiceAdminCategoryList().subscribe(function(o){t.categoryList=o})];case 1:return o.sent(),[2]}})})},t.prototype.getServiceAdminRoom=function(t){return u(this,void 0,void 0,function(){var o=this;return d(this,function(e){switch(e.label){case 0:return[4,this.roomService.getServiceRoom(t).subscribe(function(t){o.room=t,o.category=o.room.category,o.hotel=o.room.category.hotel})];case 1:return e.sent(),[2]}})})},t.prototype.onSelectCategory=function(t){var o=this.categoryList.find(function(o){return o.id===t});this.category=o},t.prototype.onCreate=function(t){var o=this;this.roomService.saveServiceAdminRoom(t).subscribe(function(t){o.router.navigate(["/dashboard/service-admin/rooms"])})},t.prototype.onUpdate=function(t){var o=this;t.id=this.room.id,this.roomService.saveServiceAdminRoom(t).subscribe(function(t){o.router.navigate(["/dashboard/service-admin/rooms"])})},t.\u0275fac=function(o){return new(o||t)(c.Ob(r.a),c.Ob(n.a),c.Ob(i.a),c.Ob(a.a),c.Ob(a.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-add"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["routerLink","/dashboard/service-admin/rooms",1,"list-group-item","list-group-item-action","list-group-item-info","text-center"],[1,"fa","fa-chevron-left"],[3,"message"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-page"],[1,"col-md-9"],[3,"hotel","category","room","create","update"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Add Rooms"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Ec(6,g,11,2,"ul",4),c.Sb(),c.Ec(7,h,2,3,"div",5),c.Sb(),c.Sb()),2&t&&(c.Bb(6),c.oc("ngIf",(null==o.categoryList?null:o.categoryList.length)>0),c.Bb(1),c.oc("ngIf",null!=o.hotel&&o.hotel.id&&o.category&&o.category.id))},directives:[b.p,b.o,a.d,l.a,s.a],styles:[""]}),t}(),v=e("4+Eq"),S=e("eIep"),T=e("LLt/"),y=function(t,o,e,n){return new(e||(e=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(o){i(o)}}function a(t){try{b(n.throw(t))}catch(o){i(o)}}function b(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(c,a)}b((n=n.apply(t,o||[])).next())})},k=function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function B(t,o){if(1&t&&c.Pb(0,"img",35),2&t){var e=c.gc();c.oc("src",e.imageUrl,c.Bc)}}function w(t,o){if(1&t&&(c.Tb(0,"div",36),c.Gc(1),c.Sb()),2&t){var e=c.gc();c.Bb(1),c.Ic(" ",e.errorMessage," ")}}function I(t,o){if(1&t){var e=c.Ub();c.Tb(0,"p"),c.Tb(1,"input",37),c.ec("change",function(t){return c.zc(e),c.gc().fileChange(t)}),c.Sb(),c.Sb()}}function G(t,o){1&t&&(c.Tb(0,"div"),c.Gc(1," Uploaded "),c.Pb(2,"i",38),c.Sb())}function D(t,o){if(1&t){var e=c.Ub();c.Tb(0,"button",39),c.ec("click",function(){return c.zc(e),c.gc().startUpload()}),c.Gc(1," Upload "),c.Sb()}}function x(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div"),c.Tb(1,"button",41),c.ec("click",function(){c.zc(e);var t=c.gc().$implicit;return c.gc().deleteImage(t)}),c.Tb(2,"span"),c.Gc(3,"\xd7"),c.Sb(),c.Sb(),c.Tb(4,"div",42),c.Pb(5,"img",35),c.Sb(),c.Sb()}if(2&t){var n=c.gc().$implicit;c.Bb(5),c.oc("src",n,c.Bc)}}function C(t,o){if(1&t&&(c.Tb(0,"div",40),c.Ec(1,x,6,1,"div",29),c.Sb()),2&t){var e=o.$implicit;c.Bb(1),c.oc("ngIf",e.length)}}var P=function(){function t(t,o,e,n){this.roomService=t,this.auth=o,this.activatedRoute=e,this.ng2ImgMax=n,this.errorMessage="",this.roomImagesUrl=[],this.id=e.snapshot.params.id}return t.prototype.ngOnInit=function(){this.id&&(this.getServiceAdminRoom(this.id),this.loadRoomImages(this.id))},t.prototype.getServiceAdminRoom=function(t){return y(this,void 0,void 0,function(){var o=this;return k(this,function(e){switch(e.label){case 0:return[4,this.roomService.getServiceRoom(t).subscribe(function(t){o.room=t})];case 1:return e.sent(),[2]}})})},t.prototype.loadRoomImages=function(t){return y(this,void 0,void 0,function(){var o=this;return k(this,function(e){switch(e.label){case 0:return[4,this.roomService.getRoomImageUrls(t).subscribe(function(t){o.roomImagesUrl=[],t.forEach(function(t){o.roomImagesUrl.push(o.roomService.imageUrl+t)})},function(t){console.log(t)})];case 1:return e.sent(),[2]}})})},t.prototype.previewFile=function(t){var o=this,e=new FileReader;e.onload=function(t){o.imageUrl=t.target.result},e.readAsDataURL(t.target.files[0])},t.prototype.fileChange=function(t){this.previewFile(t),this.fileList=t.target.files,this.progressPercentage=0,this.errorMessage=""},t.prototype.startUpload=function(){var t=this;if(this.fileList.length>0){var o=new FormData,e=this.fileList[0];this.ng2ImgMax.resizeImage(e,800,600).pipe(Object(S.a)(function(n){return console.log("size : ",n.size),o.append("image",n,e.name),t.roomService.uploadServiceAdminRoomImage(t.id,o)})).subscribe(function(o){t.imageUrl="",t.fileList=null,t.progressPercentage=100,t.loadRoomImages(t.id)},function(o){console.log(o),t.errorMessage=o._body})}},t.prototype.deleteImage=function(t){var o=this,e=new URL(t).pathname.split("/"),n=parseInt(e[e.length-1]);this.roomService.deleteServiceAdminRoomImage(e[e.length-3],n).subscribe(function(t){o.roomImagesUrl.splice(n,1,"")},function(t){console.log("Image could not delete")})},t.prototype.resizeImage=function(t,o,e){return this.ng2ImgMax.resizeImage(t,o,e)},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a),c.Ob(T.a),c.Ob(a.a),c.Ob(v.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-details"]],decls:156,vars:35,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","hotelName"],[1,"form-control"],["for","categoryName"],[1,"form-row"],[1,"form-group","col-md-6"],["for","roomNumber"],["for","floorNumber"],[1,"form-group","col-md-4"],["for","price"],["for","discount"],["for","agentDiscount"],[1,"border","p-2","my-3"],[1,"text-center"],[1,"form-row","align-items-center"],[1,"col-6","col-md-4"],[1,"form-check-label"],[1,"fa",3,"ngClass"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/service-admin/rooms",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-6 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-6","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Room details"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"label",5),c.Gc(8,"Hotel Name"),c.Sb(),c.Tb(9,"label",6),c.Gc(10),c.Sb(),c.Sb(),c.Tb(11,"div",4),c.Tb(12,"label",7),c.Gc(13,"Category Name"),c.Sb(),c.Tb(14,"label",6),c.Gc(15),c.Sb(),c.Sb(),c.Tb(16,"div",8),c.Tb(17,"div",9),c.Tb(18,"label",10),c.Gc(19,"Room Number *"),c.Sb(),c.Tb(20,"label",6),c.Gc(21),c.Sb(),c.Sb(),c.Tb(22,"div",9),c.Tb(23,"label",11),c.Gc(24,"Floor Number *"),c.Sb(),c.Tb(25,"label",6),c.Gc(26),c.Sb(),c.Sb(),c.Sb(),c.Tb(27,"div",8),c.Tb(28,"div",9),c.Tb(29,"label",10),c.Gc(30,"Number of Beds *"),c.Sb(),c.Tb(31,"label",6),c.Gc(32),c.Sb(),c.Sb(),c.Tb(33,"div",9),c.Tb(34,"label",11),c.Gc(35,"Room Size (Square feet) *"),c.Sb(),c.Tb(36,"label",6),c.Gc(37),c.Sb(),c.Sb(),c.Sb(),c.Tb(38,"div",8),c.Tb(39,"div",12),c.Tb(40,"label",13),c.Gc(41,"Price *"),c.Sb(),c.Tb(42,"label",6),c.Gc(43),c.Sb(),c.Sb(),c.Tb(44,"div",12),c.Tb(45,"label",14),c.Gc(46,"Discount *"),c.Sb(),c.Tb(47,"label",6),c.Gc(48),c.Sb(),c.Sb(),c.Tb(49,"div",12),c.Tb(50,"label",15),c.Gc(51,"Agent Discount *"),c.Sb(),c.Tb(52,"label",6),c.Gc(53),c.Sb(),c.Sb(),c.Sb(),c.Tb(54,"div",16),c.Tb(55,"h3",17),c.Gc(56,"Facilities"),c.Sb(),c.Tb(57,"div",18),c.Tb(58,"div",19),c.Tb(59,"label",20),c.Pb(60,"i",21),c.Gc(61," Front Face "),c.Sb(),c.Sb(),c.Tb(62,"div",19),c.Tb(63,"label",20),c.Pb(64,"i",21),c.Gc(65," Back Face "),c.Sb(),c.Sb(),c.Tb(66,"div",19),c.Tb(67,"label",20),c.Pb(68,"i",21),c.Gc(69," High Commode "),c.Sb(),c.Sb(),c.Tb(70,"div",19),c.Tb(71,"label",20),c.Pb(72,"i",21),c.Gc(73," Breakfast "),c.Sb(),c.Sb(),c.Tb(74,"div",19),c.Tb(75,"label",20),c.Pb(76,"i",21),c.Gc(77," Internet "),c.Sb(),c.Sb(),c.Tb(78,"div",19),c.Tb(79,"label",20),c.Pb(80,"i",21),c.Gc(81," Air Condition "),c.Sb(),c.Sb(),c.Tb(82,"div",19),c.Tb(83,"label",20),c.Pb(84,"i",21),c.Gc(85," TV "),c.Sb(),c.Sb(),c.Tb(86,"div",19),c.Tb(87,"label",20),c.Pb(88,"i",21),c.Gc(89," Geyser "),c.Sb(),c.Sb(),c.Tb(90,"div",19),c.Tb(91,"label",20),c.Pb(92,"i",21),c.Gc(93," HillView "),c.Sb(),c.Sb(),c.Tb(94,"div",19),c.Tb(95,"label",20),c.Pb(96,"i",21),c.Gc(97," Sea View "),c.Sb(),c.Sb(),c.Tb(98,"div",19),c.Tb(99,"label",20),c.Pb(100,"i",21),c.Gc(101," Telephone "),c.Sb(),c.Sb(),c.Tb(102,"div",19),c.Tb(103,"label",20),c.Pb(104,"i",21),c.Gc(105," Bath Towel "),c.Sb(),c.Sb(),c.Tb(106,"div",19),c.Tb(107,"label",20),c.Pb(108,"i",21),c.Gc(109," Table And Chair "),c.Sb(),c.Sb(),c.Tb(110,"div",19),c.Tb(111,"label",20),c.Pb(112,"i",21),c.Gc(113," In Middle "),c.Sb(),c.Sb(),c.Tb(114,"div",19),c.Tb(115,"label",20),c.Pb(116,"i",21),c.Gc(117," Kitchen "),c.Sb(),c.Sb(),c.Tb(118,"div",19),c.Tb(119,"label",20),c.Pb(120,"i",21),c.Gc(121," BathTub "),c.Sb(),c.Sb(),c.Tb(122,"div",19),c.Tb(123,"label",20),c.Pb(124,"i",21),c.Gc(125," Balcony "),c.Sb(),c.Sb(),c.Tb(126,"div",19),c.Tb(127,"label",20),c.Pb(128,"i",21),c.Gc(129," Extra Beds "),c.Sb(),c.Sb(),c.Tb(130,"div",19),c.Tb(131,"label",20),c.Pb(132,"i",21),c.Gc(133," Pets Allowed "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(134,"div",22),c.Tb(135,"a",23),c.Gc(136," Edit "),c.Sb(),c.Sb(),c.Sb(),c.Tb(137,"div",3),c.Tb(138,"div",24),c.Tb(139,"div",25),c.Ec(140,B,1,1,"img",26),c.Sb(),c.Tb(141,"div",27),c.Ec(142,w,2,1,"div",28),c.Tb(143,"div"),c.Gc(144," Please select a image to upload "),c.Pb(145,"br"),c.Gc(146," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),c.Sb(),c.Ec(147,I,2,0,"p",29),c.Ec(148,G,3,0,"div",29),c.Tb(149,"div"),c.Ec(150,D,2,0,"button",30),c.Tb(151,"a",31),c.Gc(152," Back "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(153,"div",32),c.Tb(154,"div",33),c.Ec(155,C,2,1,"div",34),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(10),c.Ic(" ",null==o.room||null==o.room.category||null==o.room.category.hotel?null:o.room.category.hotel.name," "),c.Bb(5),c.Ic(" ",null==o.room||null==o.room.category?null:o.room.category.name," "),c.Bb(6),c.Hc(null==o.room?null:o.room.roomNumber),c.Bb(5),c.Hc(null==o.room?null:o.room.floorNumber),c.Bb(6),c.Hc(null==o.room?null:o.room.numberOfBed),c.Bb(5),c.Hc(null==o.room?null:o.room.roomSize),c.Bb(6),c.Hc(null==o.room?null:o.room.price),c.Bb(5),c.Hc(null==o.room?null:o.room.discount),c.Bb(5),c.Hc(null==o.room?null:o.room.agentDiscount),c.Bb(7),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.frontFace?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.backFace?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.highCommode?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.breakfast?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.internet?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.airConditioned?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.tv?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.geyser?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.hillView?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.seaView?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.telephone?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.bathTowel?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.tableAndChair?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.inMiddle?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.kitchen?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.bathTub?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.balcony?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.extraBeds?"fa-check-square-o":"fa-square-o"),c.Bb(4),c.oc("ngClass",null!=o.room&&null!=o.room.facilities&&o.room.facilities.petsAllowed?"fa-check-square-o":"fa-square-o"),c.Bb(3),c.qc("routerLink","/dashboard/service-admin/rooms/add/",null==o.room?null:o.room.id,""),c.Bb(5),c.oc("ngIf",o.imageUrl),c.Bb(2),c.oc("ngIf",o.errorMessage.length>0),c.Bb(5),c.oc("ngIf",o.roomImagesUrl.length<5),c.Bb(1),c.oc("ngIf",100==o.progressPercentage),c.Bb(2),c.oc("ngIf",o.fileList),c.Bb(5),c.oc("ngForOf",o.roomImagesUrl))},directives:[b.n,a.d,b.p,b.o],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;width:100%}"]}),t}();function O(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",3),c.Tb(1,"div",4),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc().onSelectRoom(t.id,t.roomNumber,t.price)}),c.Gc(2),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(2),c.Ic(" ",n.roomNumber," ")}}var M=function(){function t(t){this.roomService=t,this.selectRoom=new c.n}return t.prototype.ngOnInit=function(){this.getServiceAdminRoomNumbers()},t.prototype.getServiceAdminRoomNumbers=function(){return t=this,void 0,e=function(){var t=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(o){switch(o.label){case 0:return[4,this.roomService.getServiceAdminRoomNumbers().subscribe(function(o){t.roomList=o})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(n,r){function i(t){try{a(e.next(t))}catch(o){r(o)}}function c(t){try{a(e.throw(t))}catch(o){r(o)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(i,c)}a((e=e.apply(t,[])).next())});var t,o,e},t.prototype.onSelectRoom=function(t,o,e){this.selectRoom.emit({roomId:t,roomNumber:o,price:e})},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["service-admin-all-room-numbers"]],outputs:{selectRoom:"selectRoom"},decls:5,vars:1,consts:[[1,"container"],[1,"row","m-0","mt-4"],["class","col-md-1 col-sm-3 col-4 p-1",4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-3","col-4","p-1"],[1,"room-map-box",3,"click"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"h4"),c.Gc(2,"All room list"),c.Sb(),c.Tb(3,"div",1),c.Ec(4,O,3,1,"div",2),c.Sb(),c.Sb()),2&t&&(c.Bb(4),c.oc("ngForOf",o.roomList))},directives:[b.o],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}"]}),t}(),R=e("3Pt+"),E=e("1kSV");function L(t,o){if(1&t&&(c.Tb(0,"span"),c.Gc(1),c.Sb()),2&t){var e=o.$implicit;c.Bb(1),c.Ic("",e,", ")}}var F=function(t){return{disabled:t}},N=function(){function t(t){this.builder=t,this.create=new c.n,this.close=new c.n,this.mouseoverShifting=!1,this.createForm()}return t.prototype.ngOnChanges=function(t){t.roomIds&&(this.form.patchValue({roomIds:this.roomIds}),console.log(this.form.value))},t.prototype.createForm=function(){this.form=this.builder.group({roomIds:this.builder.array(this.roomIds||[]),startDate:["",R.v.required],endDate:["",R.v.required],amount:["",R.v.required],changeSimilar:!1})},t.prototype.submit=function(){if(this.form.valid){var t=this.form.get("roomIds");t.reset(),this.roomIds.forEach(function(o){t.push(new R.e(o))}),this.form.get("roomIds").setValue(this.roomIds),this.create.emit(this.form.value),this.form.reset()}},t.prototype.onClose=function(){this.close.emit(!1)},t.\u0275fac=function(o){return new(o||t)(c.Ob(R.d))},t.\u0275cmp=c.Ib({type:t,selectors:[["room-discount-form"]],inputs:{roomIds:"roomIds",roomNumbers:"roomNumbers"},outputs:{create:"create",close:"close"},features:[c.zb],decls:35,vars:5,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],[4,"ngFor","ngForOf"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","amount"],["type","number","id","amount","formControlName","amount",1,"form-control"],[1,"form-group","form-check"],["type","checkbox","id","changeSimilar","formControlName","changeSimilar",1,"form-check-input"],["for","changeSimilar",1,"form-check-label"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"]],template:function(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"h3",3),c.Gc(4,"Adjust room discount map"),c.Sb(),c.Tb(5,"form",4),c.ec("ngSubmit",function(){return o.submit()})("mouseleave",function(){return o.mouseoverShifting=!1}),c.Tb(6,"div",5),c.Tb(7,"label",6),c.Gc(8,"Room numbers"),c.Sb(),c.Tb(9,"label",7),c.Ec(10,L,2,1,"span",8),c.Sb(),c.Sb(),c.Tb(11,"div",5),c.Tb(12,"label",9),c.Gc(13,"Start date"),c.Sb(),c.Tb(14,"input",10,11),c.ec("click",function(){return c.zc(e),c.yc(15).toggle()}),c.Sb(),c.Sb(),c.Tb(16,"div",5),c.Tb(17,"label",12),c.Gc(18,"End date"),c.Sb(),c.Tb(19,"input",13,14),c.ec("click",function(){return c.zc(e),c.yc(20).toggle()}),c.Sb(),c.Sb(),c.Tb(21,"div",5),c.Tb(22,"label",15),c.Gc(23,"Amount"),c.Sb(),c.Pb(24,"input",16),c.Sb(),c.Tb(25,"div",17),c.Pb(26,"input",18),c.Tb(27,"label",19),c.Gc(28," Change similar "),c.Sb(),c.Sb(),c.Tb(29,"div",20),c.Tb(30,"button",21),c.ec("click",function(){return o.onClose()}),c.Gc(31," Close "),c.Sb(),c.Tb(32,"span",22),c.ec("mouseenter",function(){return o.mouseoverShifting=!0}),c.Tb(33,"button",23),c.Gc(34," Submit "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}2&t&&(c.Bb(5),c.oc("formGroup",o.form),c.Bb(5),c.oc("ngForOf",o.roomNumbers),c.Bb(23),c.oc("ngClass",c.sc(3,F,o.form.invalid)))},directives:[R.x,R.n,R.g,b.o,R.b,E.g,R.m,R.f,R.r,R.a,b.n],styles:[""]}),t}(),A=e("/e7+"),_=e("B01t");function U(t,o){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td",12),c.Gc(5),c.Sb(),c.Tb(6,"td",12),c.Gc(7),c.Sb(),c.Tb(8,"td",12),c.Gc(9),c.Sb(),c.Sb()),2&t){var e=o.$implicit,n=c.gc(3);c.Bb(2),c.Hc(c.jc(3,4,e.key,"d MMM,yy : EEE")),c.Bb(3),c.Hc(n.price),c.Bb(2),c.Hc(e.value),c.Bb(2),c.Hc(n.price-e.value)}}function z(t,o){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,U,10,7,"tr",13),c.hc(2,"keyvalue"),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngForOf",c.ic(2,1,e.discountMap))}}function q(t,o){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"h3"),c.Gc(2),c.Sb(),c.Tb(3,"table",11),c.Tb(4,"thead"),c.Tb(5,"tr"),c.Tb(6,"th"),c.Gc(7,"Date"),c.Sb(),c.Tb(8,"th",12),c.Gc(9,"Price"),c.Sb(),c.Tb(10,"th",12),c.Gc(11,"Discount"),c.Sb(),c.Tb(12,"th",12),c.Gc(13,"Payable"),c.Sb(),c.Sb(),c.Sb(),c.Ec(14,z,3,3,"tbody",10),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(2),c.Ic("Discount map for Room number : ",e.roomNumber,""),c.Bb(12),c.oc("ngIf",e.discountMap)}}var H=function(){function t(t,o){this.roomService=t,this.utilService=o,this.showForm=new c.n,this.setDateRanges()}return t.prototype.ngOnChanges=function(t){var o=t.roomId;o.currentValue&&this.getServiceAdminDiscountMap(o.currentValue)},t.prototype.setDateRanges=function(){this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30);var t=new Date,o={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()};this.model=o,this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.roomId&&this.getServiceAdminDiscountMap(this.roomId)},t.prototype.getServiceAdminDiscountMap=function(t){return o=this,void 0,n=function(){var o,e,n=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return this.startDate||this.setDateRanges(),o=this.utilService.getDateString(this.startDate),e=this.utilService.getDateString(this.endDate),this.discountMap=null,[4,this.roomService.getServiceAdminDiscountMap(t,o,e).subscribe(function(t){n.discountMap=t})];case 1:return r.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(o){r(o)}}function c(t){try{a(n.throw(t))}catch(o){r(o)}}function a(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(i,c)}a((n=n.apply(o,[])).next())});var o,e,n},t.prototype.onAdjustStatusMap=function(){this.showForm.emit(!0)},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a),c.Ob(A.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["room-discount-map"]],inputs:{roomId:"roomId",roomNumber:"roomNumber",price:"price"},outputs:{showForm:"showForm"},features:[c.zb],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-6"],[1,"btn-sm","btn-warning",3,"click"],[4,"ngIf"],[1,"table","border","table-hover"],[1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"div",5),c.Pb(6,"i",6),c.Sb(),c.Sb(),c.Tb(7,"input",7),c.ec("selected",function(t){return o.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(8,"div",8),c.Tb(9,"button",9),c.ec("click",function(){return o.onAdjustStatusMap()}),c.Gc(10," Adjust Status Map "),c.Sb(),c.Sb(),c.Sb(),c.Ec(11,q,15,2,"div",10),c.Sb()),2&t&&(c.Bb(7),c.oc("options",o.options),c.Bb(4),c.oc("ngIf",o.roomId))},directives:[_.b,b.p,b.o],pipes:[b.j,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem}"]}),t}();function j(t,o){if(1&t){var e=c.Ub();c.Tb(0,"room-discount-form",8),c.ec("create",function(t){return c.zc(e),c.gc().onCreate(t)})("close",function(t){return c.zc(e),c.gc().onShowForm(t)}),c.Sb()}if(2&t){var n=c.gc();c.oc("roomIds",n.roomIds)("roomNumbers",n.roomNumbers)}}function $(t,o){if(1&t){var e=c.Ub();c.Tb(0,"room-discount-map",9),c.ec("showForm",function(t){return c.zc(e),c.gc().onShowForm(t)}),c.Sb()}if(2&t){var n=c.gc();c.oc("roomId",n.roomId)("roomNumber",n.roomNumber)("price",n.price)}}var V=function(){function t(t){this.roomService=t,this.roomIds=[],this.roomNumbers=[],this.showForm=!1}return t.prototype.ngOnInit=function(){},t.prototype.onSelectRoom=function(t){var o=t.roomId,e=t.roomNumber,n=t.price;this.roomIds.includes(o)?this.roomIds.splice(this.roomIds.findIndex(function(t){return t==o}),1):this.roomIds.push(o),this.roomNumbers.includes(e)?this.roomNumbers.splice(this.roomNumbers.findIndex(function(t){return t==e}),1):this.roomNumbers.push(e),this.roomId=o,this.roomNumber=e,this.price=n},t.prototype.onShowForm=function(t){this.roomIds=[],this.roomNumbers=[],this.showForm=t},t.prototype.onCreate=function(t){var o=this;this.roomService.updateServiceAdminDiscountMap(t.roomIds,t.startDate.year+"-"+t.startDate.month+"-"+t.startDate.day,t.endDate.year+"-"+t.endDate.month+"-"+t.endDate.day,t.amount,t.changeSimilar).subscribe(function(t){o.showForm=!1})},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-discount-map"]],decls:10,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-5"],[3,"selectRoom"],[1,"col-md-7"],[3,"roomIds","roomNumbers","create","close",4,"ngIf"],[3,"roomId","roomNumber","price","showForm",4,"ngIf"],[3,"roomIds","roomNumbers","create","close"],[3,"roomId","roomNumber","price","showForm"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Room discount map"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"service-admin-all-room-numbers",4),c.ec("selectRoom",function(t){return o.onSelectRoom(t)}),c.Sb(),c.Sb(),c.Tb(7,"div",5),c.Ec(8,j,1,2,"room-discount-form",6),c.Ec(9,$,1,3,"room-discount-map",7),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(8),c.oc("ngIf",o.showForm),c.Bb(1),c.oc("ngIf",!o.showForm))},directives:[M,b.p,N,H],styles:[""]}),t}(),Y=e("uEz7"),J=function(t,o,e,n){return new(e||(e=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(o){i(o)}}function a(t){try{b(n.throw(t))}catch(o){i(o)}}function b(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(c,a)}b((n=n.apply(t,o||[])).next())})},K=function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function X(t,o){if(1&t){var e=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Tb(2,"a",14),c.Gc(3),c.Sb(),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td"),c.Gc(9),c.Sb(),c.Tb(10,"td"),c.Gc(11),c.Sb(),c.Tb(12,"td"),c.Gc(13),c.Sb(),c.Tb(14,"td"),c.Tb(15,"a",15),c.Gc(16,"Images"),c.Sb(),c.Tb(17,"a",16),c.Gc(18,"Details"),c.Sb(),c.Tb(19,"a",17),c.Gc(20,"Edit"),c.Sb(),c.Tb(21,"button",18),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc(2).onDelete(t.id,t.roomNumber)}),c.Gc(22," Delete "),c.Sb(),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(2),c.qc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.Bb(1),c.Ic(" ",n.roomNumber," "),c.Bb(2),c.Hc(n.floorNumber),c.Bb(2),c.Hc(n.price),c.Bb(2),c.Hc(n.discount),c.Bb(2),c.Hc(n.agentDiscount),c.Bb(2),c.Hc(n.category.name),c.Bb(2),c.qc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.Bb(2),c.qc("routerLink","/dashboard/service-admin/rooms/details/",n.id,""),c.Bb(2),c.qc("routerLink","/dashboard/service-admin/rooms/add/",n.id,"")}}function W(t,o){if(1&t){var e=c.Ub();c.Tb(0,"pagination",19),c.ec("getPage",function(t){return c.zc(e),c.gc(2).getRoomPage(t)}),c.Sb()}if(2&t){var n=c.gc(2);c.oc("page",n.roomPage)}}function Z(t,o){if(1&t&&(c.Tb(0,"table",7),c.Tb(1,"thead"),c.Tb(2,"tr"),c.Tb(3,"th"),c.Gc(4,"Room number"),c.Sb(),c.Tb(5,"th"),c.Gc(6,"Floor"),c.Sb(),c.Tb(7,"th"),c.Gc(8,"Price"),c.Sb(),c.Tb(9,"th"),c.Gc(10,"Discount"),c.Sb(),c.Tb(11,"th"),c.Gc(12,"Agent dis."),c.Sb(),c.Tb(13,"th"),c.Gc(14,"Category"),c.Sb(),c.Pb(15,"td"),c.Sb(),c.Sb(),c.Tb(16,"tbody"),c.Ec(17,X,23,10,"tr",8),c.Sb(),c.Tb(18,"tfoot"),c.Tb(19,"tr"),c.Tb(20,"td",9),c.Tb(21,"div",10),c.Tb(22,"button",11),c.Pb(23,"i",12),c.Gc(24," Add room "),c.Sb(),c.Ec(25,W,1,1,"pagination",13),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(17),c.oc("ngForOf",null==e.roomPage?null:e.roomPage.content),c.Bb(8),c.oc("ngIf",null!=e.roomPage)}}var Q=function(){function t(t){this.roomService=t}return t.prototype.ngOnInit=function(){this.getRoomPage()},t.prototype.getRoomPage=function(t){return void 0===t&&(t=0),J(this,void 0,void 0,function(){var o=this;return K(this,function(e){switch(e.label){case 0:return[4,this.roomService.getServiceRoomPage(t).subscribe(function(t){o.roomPage=t})];case 1:return e.sent(),[2]}})})},t.prototype.onDelete=function(t,o){return J(this,void 0,void 0,function(){var e=this;return K(this,function(n){switch(n.label){case 0:return confirm('Are you sure to delete room number "'+o+'" with id '+t)?[4,this.roomService.deleteServiceAdminRoom(t).subscribe(function(t){"success"==t.response?(e.message="Room deleted successfully",e.getRoomPage()):e.message="Room deleted Failed"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-list"]],decls:10,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3"],[1,"col-md-9"],[1,"text-center"],["class","table border table-responsive-sm",4,"ngIf"],[1,"table","border","table-responsive-sm"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"d-flex","justify-content-between"],["routerLink","/dashboard/service-admin/rooms/add",1,"btn","btn-sm","btn-success"],[1,"fa","fa-plus"],[3,"page","getPage",4,"ngIf"],[2,"text-decoration","none",3,"routerLink"],[1,"btn","btn-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-success","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-warning","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[3,"page","getPage"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Room List"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Pb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"h3",5),c.Gc(8,"Room List"),c.Sb(),c.Ec(9,Z,26,2,"table",6),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(9),c.oc("ngIf",null!=(null==o.roomPage?null:o.roomPage.content)))},directives:[b.p,b.o,a.c,a.d,Y.a],styles:[""]}),t}(),tt=function(){return(tt=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)},ot=function(t,o,e,n,r){return{"bg-lightgray":t,"bg-yellow":o,"bg-green":e,"bg-red":n,"bg-white":r}};function et(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",13),c.Tb(1,"div",14),c.ec("click",function(){c.zc(e);var t=o.$implicit,n=c.gc(2);return n.onRoomClick(t.id,t.bookingId,n.dd)}),c.Gc(2),c.Pb(3,"br"),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(1),c.oc("ngClass",c.wc(2,ot,"ROOM_BLOCKED"===n.status,"ROOM_BOOKED"===n.status,"ROOM_RESERVED"===n.status,"ROOM_SOLD"===n.status,"ROOM_FREE"===n.status)),c.Bb(1),c.Ic(" ",n.roomNumber," ")}}function nt(t,o){if(1&t&&(c.Tb(0,"div",11),c.Ec(1,et,4,8,"div",12),c.Sb()),2&t){var e=c.gc();c.Bb(1),c.oc("ngForOf",e.roomList)}}function rt(t,o){1&t&&c.Pb(0,"loading")}function it(t,o){1&t&&(c.Tb(0,"div",15),c.Tb(1,"div",16),c.Pb(2,"div",17),c.Gc(3," Blocked "),c.Sb(),c.Tb(4,"div",16),c.Pb(5,"div",18),c.Gc(6," Reserved "),c.Sb(),c.Tb(7,"div",16),c.Pb(8,"div",19),c.Gc(9," Sold "),c.Sb(),c.Tb(10,"div",16),c.Pb(11,"div",20),c.Gc(12," Free "),c.Sb(),c.Sb())}var ct=function(){function t(t,o){this.roomService=t,this.util=o,this.roomSelected=new c.n,this.loading=!0}return t.prototype.ngOnInit=function(){var t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.getServiceAdminBookingList(this.dd)},t.prototype.getServiceAdminBookingList=function(t){return o=this,void 0,n=function(){var o=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(e){switch(e.label){case 0:return this.loading=!0,[4,this.roomService.getServiceAdminBookingList(this.util.makeDateString(t)).subscribe(function(t){o.roomList=t,o.loading=!1})];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(o){r(o)}}function c(t){try{a(n.throw(t))}catch(o){r(o)}}function a(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(i,c)}a((n=n.apply(o,[])).next())});var o,e,n},t.prototype.onRoomClick=function(t,o,e){if(o>0){var n=this.roomList.find(function(o){return o.id==t});this.status=n.status;var r=tt({date:e.year+"-"+e.month+"-"+e.day},n);this.roomSelected.emit(r)}},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a),c.Ob(A.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["service-admin-room-status-date"]],outputs:{roomSelected:"roomSelected"},decls:12,vars:4,consts:[[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click","dateSelect"],["date","ngbDatepicker"],["class","row m-0",4,"ngIf","ngIfElse"],["showLoading",""],["class","row border m-0 py-3",4,"ngIf"],[1,"row","m-0"],["class","col-md-1 col-sm-3 col-3 p-0",4,"ngFor","ngForOf"],[1,"col-md-1","col-sm-3","col-3","p-0"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-3"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-green"],[1,"foo","bg-red"],[1,"foo","bg-white"]],template:function(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.ec("click",function(){return c.zc(e),c.yc(7).toggle()}),c.Tb(4,"div",4),c.Pb(5,"i",5),c.Sb(),c.Sb(),c.Tb(6,"input",6,7),c.ec("ngModelChange",function(t){return o.dd=t})("click",function(){return c.zc(e),c.yc(7).toggle()})("dateSelect",function(){return o.getServiceAdminBookingList(o.dd)}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ec(8,nt,2,1,"div",8),c.Ec(9,rt,1,0,"ng-template",null,9,c.Fc),c.Ec(11,it,13,0,"div",10)}if(2&t){var n=c.yc(10);c.Bb(6),c.oc("ngModel",o.dd),c.Bb(2),c.oc("ngIf",!o.loading)("ngIfElse",n),c.Bb(3),c.oc("ngIf",null==o.roomList?null:o.roomList.length)}},directives:[E.g,R.b,R.m,R.p,b.p,b.o,b.n,l.a],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;margin-right:2px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),t}(),at=e("YXrq");function bt(t,o){if(1&t&&(c.Tb(0,"span"),c.Gc(1),c.Sb()),2&t){var e=o.$implicit;c.Bb(1),c.Ic("",e,", ")}}function lt(t,o){if(1&t&&(c.Tb(0,"option",22),c.Gc(1),c.Sb()),2&t){var e=o.$implicit;c.oc("value",e.key),c.Bb(1),c.Ic(" ",e.value," ")}}var st=function(t){return{disabled:t}},ut=function(){function t(t){this.builder=t,this.create=new c.n,this.close=new c.n,this.mouseoverShifting=!1,this.statusEnum=at.a,this.createForm()}return t.prototype.ngOnChanges=function(t){this.roomIds&&this.form.patchValue({roomIds:this.roomIds})},t.prototype.createForm=function(){this.form=this.builder.group({roomIds:this.builder.array(this.roomIds||[]),startDate:["",R.v.required],endDate:["",R.v.required],satus:["",R.v.required]})},t.prototype.submit=function(){if(this.form.valid){var t=this.form.get("roomIds");t.reset(),this.roomIds.forEach(function(o){t.push(new R.e(o))}),this.form.get("roomIds").setValue(this.roomIds),this.create.emit(this.form.value),this.form.reset()}},t.prototype.onClose=function(){this.close.emit(!1)},t.\u0275fac=function(o){return new(o||t)(c.Ob(R.d))},t.\u0275cmp=c.Ib({type:t,selectors:[["room-status-form"]],inputs:{roomIds:"roomIds",roomNumbers:"roomNumbers"},outputs:{create:"create",close:"close"},features:[c.zb],decls:33,vars:8,consts:[[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6","shadow-sm"],[1,"text-center"],[1,"mb-4",3,"formGroup","ngSubmit","mouseleave"],[1,"form-group"],["for","hotelName"],[1,"form-control"],[4,"ngFor","ngForOf"],["for","startDate"],["placeholder","yyyy-mm-dd","name","startDate","formControlName","startDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["startDate","ngbDatepicker"],["for","endDate"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","","readonly","",1,"form-control",3,"click"],["endDate","ngbDatepicker"],["for","satus"],["id","satus","formControlName","satus",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"mouseenter"],["type","submit",1,"btn","btn-warning","btn-success","mx-1",3,"ngClass"],[3,"value"]],template:function(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"h3",3),c.Gc(4,"Adjust room status map"),c.Sb(),c.Tb(5,"form",4),c.ec("ngSubmit",function(){return o.submit()})("mouseleave",function(){return o.mouseoverShifting=!1}),c.Tb(6,"div",5),c.Tb(7,"label",6),c.Gc(8,"Room number"),c.Sb(),c.Tb(9,"label",7),c.Ec(10,bt,2,1,"span",8),c.Sb(),c.Sb(),c.Tb(11,"div",5),c.Tb(12,"label",9),c.Gc(13,"Start date"),c.Sb(),c.Tb(14,"input",10,11),c.ec("click",function(){return c.zc(e),c.yc(15).toggle()}),c.Sb(),c.Sb(),c.Tb(16,"div",5),c.Tb(17,"label",12),c.Gc(18,"End date"),c.Sb(),c.Tb(19,"input",13,14),c.ec("click",function(){return c.zc(e),c.yc(20).toggle()}),c.Sb(),c.Sb(),c.Tb(21,"div",5),c.Tb(22,"label",15),c.Gc(23,"Status"),c.Sb(),c.Tb(24,"select",16),c.Ec(25,lt,2,2,"option",17),c.hc(26,"keyvalue"),c.Sb(),c.Sb(),c.Tb(27,"div",18),c.Tb(28,"button",19),c.ec("click",function(){return o.onClose()}),c.Gc(29," Close "),c.Sb(),c.Tb(30,"span",20),c.ec("mouseenter",function(){return o.mouseoverShifting=!0}),c.Tb(31,"button",21),c.Gc(32," Submit "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}2&t&&(c.Bb(5),c.oc("formGroup",o.form),c.Bb(5),c.oc("ngForOf",o.roomNumbers),c.Bb(15),c.oc("ngForOf",c.ic(26,4,o.statusEnum)),c.Bb(6),c.oc("ngClass",c.sc(6,st,o.form.invalid)))},directives:[R.x,R.n,R.g,b.o,R.b,E.g,R.m,R.f,R.u,b.n,R.q,R.w],pipes:[b.j],styles:[""]}),t}();function dt(t,o){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Sb()),2&t){var e=o.$implicit;c.Bb(2),c.Hc(c.jc(3,2,e.key,"d MMM,yy : EEE")),c.Bb(3),c.Hc(e.value)}}function mt(t,o){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,dt,6,5,"tr",12),c.hc(2,"keyvalue"),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngForOf",c.ic(2,1,e.statusMap))}}function ft(t,o){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"h3"),c.Gc(2),c.Sb(),c.Tb(3,"table",11),c.Tb(4,"thead"),c.Tb(5,"tr"),c.Tb(6,"th"),c.Gc(7,"Date"),c.Sb(),c.Tb(8,"th"),c.Gc(9,"Room Satus"),c.Sb(),c.Sb(),c.Sb(),c.Ec(10,mt,3,3,"tbody",10),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(2),c.Ic("Status map for Room number : ",e.roomNumber,""),c.Bb(8),c.oc("ngIf",e.statusMap)}}var gt=function(){function t(t,o){this.roomService=t,this.utilService=o,this.showForm=new c.n,this.setDateRanges()}return t.prototype.ngOnChanges=function(t){var o=t.roomId;o.currentValue&&this.getServiceAdminRoomMap(o.currentValue)},t.prototype.setDateRanges=function(){this.startDate=new Date,this.endDate=new Date,this.endDate.setDate(this.startDate.getDate()+30);var t=new Date,o={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()};this.model=o,this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.startDate,startDate:this.startDate,endDate:this.endDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.startDate=t.start._d,this.endDate=t.end._d,this.roomId&&this.getServiceAdminRoomMap(this.roomId)},t.prototype.getServiceAdminRoomMap=function(t){return o=this,void 0,n=function(){var o,e,n=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return this.startDate||this.setDateRanges(),o=this.utilService.getDateString(this.startDate),e=this.utilService.getDateString(this.endDate),this.statusMap=null,[4,this.roomService.getServiceAdminStatusMap(t,o,e).subscribe(function(t){n.statusMap=t})];case 1:return r.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(o){r(o)}}function c(t){try{a(n.throw(t))}catch(o){r(o)}}function a(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(i,c)}a((n=n.apply(o,[])).next())});var o,e,n},t.prototype.onAdjustStatusMap=function(){this.showForm.emit(!0)},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a),c.Ob(A.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["service-admin-room-status"]],inputs:{roomId:"roomId",roomNumber:"roomNumber"},outputs:{showForm:"showForm"},features:[c.zb],decls:12,vars:2,consts:[[1,"container-fluid"],[1,"form-row","mt-4"],[1,"form-group","col-md-6"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"col-md-6"],[1,"btn-sm","btn-warning",3,"click"],[4,"ngIf"],[1,"table","border"],[4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"div",5),c.Pb(6,"i",6),c.Sb(),c.Sb(),c.Tb(7,"input",7),c.ec("selected",function(t){return o.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(8,"div",8),c.Tb(9,"button",9),c.ec("click",function(){return o.onAdjustStatusMap()}),c.Gc(10," Adjust Status Map "),c.Sb(),c.Sb(),c.Sb(),c.Ec(11,ft,11,2,"div",10),c.Sb()),2&t&&(c.Bb(7),c.oc("options",o.options),c.Bb(4),c.oc("ngIf",o.roomId))},directives:[_.b,b.p,b.o],pipes:[b.j,b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.25rem}"]}),t}();function ht(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",5),c.Tb(1,"div",6),c.Tb(2,"service-admin-room-status-date",7),c.ec("roomSelected",function(t){return c.zc(e),c.gc().onRoomSelectFromRoomStatus(t)}),c.Sb(),c.Sb(),c.Sb()}}function pt(t,o){1&t&&c.Gc(0,"By Room")}function vt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"room-status-form",13),c.ec("create",function(t){return c.zc(e),c.gc(2).onCreate(t)})("close",function(t){return c.zc(e),c.gc(2).onShowForm(t)}),c.Sb()}if(2&t){var n=c.gc(2);c.oc("roomIds",n.roomIds)("roomNumbers",n.roomNumberList)}}function St(t,o){if(1&t){var e=c.Ub();c.Tb(0,"service-admin-room-status",14),c.ec("showForm",function(t){return c.zc(e),c.gc(2).onShowForm(t)}),c.Sb()}if(2&t){var n=c.gc(2);c.oc("roomId",n.roomId)("roomNumber",n.roomNumber)}}function Tt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",8),c.Tb(1,"div",6),c.Tb(2,"service-admin-all-room-numbers",9),c.ec("selectRoom",function(t){return c.zc(e),c.gc().onSelectRoom(t)}),c.Sb(),c.Sb(),c.Tb(3,"div",10),c.Ec(4,vt,1,2,"room-status-form",11),c.Ec(5,St,1,2,"service-admin-room-status",12),c.Sb(),c.Sb()}if(2&t){var n=c.gc();c.Bb(4),c.oc("ngIf",n.showForm),c.Bb(1),c.oc("ngIf",!n.showForm)}}var yt=function(){function t(t){this.roomService=t,this.roomIds=[],this.roomNumberList=[],this.showForm=!1}return t.prototype.ngOnInit=function(){},t.prototype.onSelectRoom=function(t){var o=t.roomId,e=t.roomNumber;this.roomIds.includes(o)?this.roomIds.splice(this.roomIds.findIndex(function(t){return t==o}),1):this.roomIds.push(o),this.roomNumberList.includes(e)?this.roomNumberList.splice(this.roomNumberList.findIndex(function(t){return t==e}),1):this.roomNumberList.push(e),this.roomId=o,this.roomNumber=e},t.prototype.onShowForm=function(t){this.showForm=t},t.prototype.onCreate=function(t){var o=this;this.roomService.updateServiceAdminStatusMap(t.roomIds,t.startDate.year+"-"+t.startDate.month+"-"+t.startDate.day,t.endDate.year+"-"+t.endDate.month+"-"+t.endDate.day,t.satus).subscribe(function(t){o.showForm=!1})},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-status-map"]],decls:10,vars:0,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],["title","By Date"],["ngbTabContent",""],["ngbTabTitle",""],[1,"row","my-2"],[1,"col-md-5"],[3,"roomSelected"],[1,"row"],[3,"selectRoom"],[1,"col-md-7"],[3,"roomIds","roomNumbers","create","close",4,"ngIf"],[3,"roomId","roomNumber","showForm",4,"ngIf"],[3,"roomIds","roomNumbers","create","close"],[3,"roomId","roomNumber","showForm"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Room Status"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"ngb-tabset"),c.Tb(5,"ngb-tab",2),c.Ec(6,ht,3,0,"ng-template",3),c.Sb(),c.Tb(7,"ngb-tab"),c.Ec(8,pt,1,0,"ng-template",4),c.Ec(9,Tt,6,2,"ng-template",3),c.Sb(),c.Sb(),c.Sb())},directives:[E.n,E.k,E.l,E.m,ct,M,b.p,ut,gt],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:15px;padding:10px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),t}(),kt=e("0sMf"),Bt=e("ITiG"),wt=e("Sa+r"),It=e("FJeW"),Gt=function(){return(Gt=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)};function Dt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"span"),c.Tb(1,"button",13),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc(2).onSelectCategory(t)}),c.Gc(2),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit,r=c.gc(2);c.Bb(1),c.oc("ngClass",n==r.category?"btn-primary":"btn-secondary"),c.Bb(1),c.Ic(" ",n," ")}}var xt=function(t,o){return{disabled:t,selected:o}};function Ct(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",14),c.Tb(1,"div",15),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc(2).onRoomSelect(t.id,t.available)}),c.Gc(2),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(1),c.oc("ngClass",c.tc(2,xt,!n.available,n.selected)),c.Bb(1),c.Ic(" ",n.roomNumber," ")}}function Pt(t,o){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"div",10),c.Ec(2,Dt,3,2,"span",11),c.Sb(),c.Tb(3,"div",1),c.Ec(4,Ct,3,5,"div",12),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(2),c.oc("ngForOf",e.categoryList),c.Bb(2),c.oc("ngForOf",e.filteredRoomList)}}function Ot(t,o){if(1&t&&c.Pb(0,"loading",16),2&t){var e=c.gc();c.oc("message",e.message)}}var Mt=function(){function t(t,o){this.roomService=t,this.util=o,this.roomSelected=new c.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges()},t.prototype.ngOnChanges=function(t){var o=this;if(this.unSelect){var e=this.roomList.find(function(t){return t.id===o.unSelect}),n=Gt(Gt({},e),{selected:!1});this.roomList.splice(this.roomList.findIndex(function(t){return t.id==o.unSelect}),1,n)}t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.getAvailableRoom()},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1},this.getAvailableRoom()},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAvailableRoom()},t.prototype.getAvailableRoom=function(t){return void 0===t&&(t=null),o=this,void 0,n=function(){var o,e,n=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(r){switch(r.label){case 0:return o=this.util.getDateString(this.daterange.checkinDate),e=this.util.getDateString(this.daterange.checkoutDate),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getServiceAvailableRoomListByHotelId(o,e,t).subscribe(function(t){n.showRoomListLoading=!1,n.roomList=t,n.filteredRoomList=t,n.category="All",n.categoryList=["All"],n.roomList.forEach(function(t){n.categoryList.includes(t.category.name)||n.categoryList.push(t.category.name)})})];case 1:return r.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(o){r(o)}}function c(t){try{a(n.throw(t))}catch(o){r(o)}}function a(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(i,c)}a((n=n.apply(o,[])).next())});var o,e,n},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(o){return o.category.name==t})},t.prototype.onRoomSelect=function(t,o){if(o){var e=this.roomList.find(function(o){return o.id===t}),n=Gt({selected:!0},e);this.roomList.splice(this.roomList.findIndex(function(o){return o.id==t}),1,n);var r={room:e,checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(r)}},t.\u0275fac=function(o){return new(o||t)(c.Ob(i.a),c.Ob(A.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["service-admin-room-list"]],inputs:{unSelect:"unSelect",reloadRoomList:"reloadRoomList"},outputs:{roomSelected:"roomSelected"},features:[c.zb],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"row","mt-1"],[4,"ngFor","ngForOf"],["class","col-3 col-md-1 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-3","col-md-1","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,o){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"div",5),c.Pb(6,"i",6),c.Sb(),c.Sb(),c.Tb(7,"input",7),c.ec("selected",function(t){return o.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ec(8,Pt,5,2,"div",8),c.Ec(9,Ot,1,1,"ng-template",null,9,c.Fc),c.Sb()),2&t){var e=c.yc(10);c.Bb(7),c.oc("options",o.options),c.Bb(1),c.oc("ngIf",!o.showRoomListLoading)("ngIfElse",e)}},directives:[_.b,b.p,b.o,b.n,l.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:3px;border:1px solid grey;border-radius:5px;text-align:center;margin:5px 2px 5px 0}.selected[_ngcontent-%COMP%]{background-color:#90ee90;color:#fff}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}();function Rt(t,o){1&t&&(c.Tb(0,"small",12),c.Gc(1," Name required "),c.Sb())}function Et(t,o){if(1&t&&(c.Tb(0,"small",12),c.Tb(1,"div",13),c.Gc(2," Phone number required "),c.Sb(),c.Tb(3,"div",13),c.Gc(4," Phone number format 01934953023 "),c.Sb(),c.Sb()),2&t){var e=c.gc();c.Bb(1),c.oc("hidden",!e.form.controls.phoneNumber.errors.required),c.Bb(2),c.oc("hidden",!e.form.controls.phoneNumber.errors.pattern)}}var Lt=function(t){return{disabled:t}},Ft=function(){function t(t){this.builder=t,this.user=new c.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",R.v.required],phoneNumber:["",[R.v.required,R.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(o){return new(o||t)(c.Ob(R.d))},t.\u0275cmp=c.Ib({type:t,selectors:[["sell-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,o){1&t&&(c.Tb(0,"h4"),c.Gc(1,"User Info"),c.Sb(),c.Tb(2,"form",0),c.ec("ngSubmit",function(){return o.submit()}),c.Tb(3,"div",1),c.Tb(4,"div",2),c.Tb(5,"label",3),c.Gc(6,"Name *"),c.Sb(),c.Pb(7,"input",4),c.Ec(8,Rt,2,0,"small",5),c.Sb(),c.Tb(9,"div",2),c.Tb(10,"label",6),c.Gc(11,"Phone *"),c.Sb(),c.Pb(12,"input",7),c.Ec(13,Et,5,2,"small",5),c.Sb(),c.Tb(14,"div",2),c.Tb(15,"label",8),c.Gc(16,"Email"),c.Sb(),c.Pb(17,"input",9),c.Sb(),c.Sb(),c.Tb(18,"div",10),c.Tb(19,"button",11),c.Gc(20," Submit "),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(2),c.oc("formGroup",o.form),c.Bb(6),c.oc("ngIf",o.form.controls.name.errors&&o.form.controls.name.touched),c.Bb(5),c.oc("ngIf",o.form.controls.phoneNumber.errors&&o.form.controls.phoneNumber.touched),c.Bb(6),c.oc("ngClass",c.sc(4,Lt,o.form.invalid)))},directives:[R.x,R.n,R.g,R.b,R.m,R.f,b.p,R.j,b.n],styles:[""]}),t}(),Nt=e("Xtf6"),At=e("V9jR"),_t=function(){return(_t=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)},Ut=function(t,o,e,n){return new(e||(e=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(o){i(o)}}function a(t){try{b(n.throw(t))}catch(o){i(o)}}function b(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(c,a)}b((n=n.apply(t,o||[])).next())})},zt=function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function qt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",16),c.Tb(1,"h4",17),c.Gc(2),c.Tb(3,"button",18),c.ec("click",function(){return c.zc(e),c.gc(2).clear()}),c.Gc(4," clear "),c.Sb(),c.Sb(),c.Sb()}if(2&t){var n=c.gc(2);c.Bb(2),c.Ic(" ",n.message," ")}}function Ht(t,o){1&t&&(c.Tb(0,"th",32),c.Gc(1," Commission "),c.Sb())}function jt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"td"),c.Tb(1,"input",41),c.ec("ngModelChange",function(t){return c.zc(e),c.gc().$implicit.commission=t}),c.Sb(),c.Sb()}if(2&t){var n=c.gc().$implicit;c.Bb(1),c.oc("ngModel",n.commission)}}function $t(t,o){if(1&t){var e=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td",32),c.Gc(6),c.Sb(),c.Tb(7,"td"),c.Tb(8,"input",37),c.ec("ngModelChange",function(t){return c.zc(e),o.$implicit.discount=t})("keyup",function(){c.zc(e);var t=o.index;return c.gc(3).updateSubBooking(t)}),c.Sb(),c.Sb(),c.Tb(9,"td",32),c.Gc(10),c.Sb(),c.Tb(11,"td",32),c.Tb(12,"input",38),c.ec("ngModelChange",function(t){return c.zc(e),o.$implicit.advance=t})("keyup",function(){c.zc(e);var t=o.index;return c.gc(3).updateSubBooking(t)}),c.Sb(),c.Sb(),c.Tb(13,"td",32),c.Gc(14),c.Sb(),c.Ec(15,jt,2,1,"td",15),c.Tb(16,"td"),c.Tb(17,"button",39),c.ec("click",function(){c.zc(e);var t=o.index;return c.gc(3).onRemove(t)}),c.Pb(18,"i",40),c.Sb(),c.Sb(),c.Sb()}if(2&t){var n=o.$implicit,r=c.gc(3);c.Bb(2),c.Hc(n.date),c.Bb(2),c.Jc("",n.room.roomNumber," [",n.room.category.name,"]"),c.Bb(2),c.Hc(n.room.price),c.Bb(2),c.oc("ngModel",n.discount),c.Bb(2),c.Ic(" ",n.room.price-n.discount," BDT "),c.Bb(2),c.oc("ngModel",n.advance),c.Bb(2),c.Ic("",null==n?null:n.due," BDT"),c.Bb(1),c.oc("ngIf",(null==r.refBy?null:r.refBy.length)>0)}}function Vt(t,o){1&t&&c.Pb(0,"td")}function Yt(t,o){1&t&&c.Pb(0,"td")}function Jt(t,o){1&t&&c.Pb(0,"td")}function Kt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"sell-form",42),c.ec("user",function(t){return c.zc(e),c.gc(3).onCreateUser(t)}),c.Sb()}}function Xt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div"),c.Tb(1,"h3",17),c.Gc(2,"New Booking"),c.Sb(),c.Tb(3,"div",19),c.Pb(4,"div",20),c.Tb(5,"div",21),c.Tb(6,"div",22),c.Tb(7,"input",23),c.ec("ngModelChange",function(t){return c.zc(e),c.gc(2).changeSimilar=t}),c.Sb(),c.Tb(8,"label",24),c.Gc(9," Auto Change Similar Category "),c.Sb(),c.Sb(),c.Sb(),c.Tb(10,"div",21),c.Tb(11,"div",25),c.Tb(12,"div",26),c.Tb(13,"div",27),c.Gc(14,"Ref. By"),c.Sb(),c.Sb(),c.Tb(15,"input",28),c.ec("ngModelChange",function(t){return c.zc(e),c.gc(2).refBy=t}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(16,"div",29),c.Tb(17,"div",30),c.Tb(18,"h5"),c.Gc(19,"Booking List"),c.Sb(),c.Sb(),c.Sb(),c.Tb(20,"table",31),c.Tb(21,"thead"),c.Tb(22,"tr"),c.Tb(23,"th"),c.Gc(24,"Date"),c.Sb(),c.Tb(25,"th"),c.Gc(26,"Room No."),c.Sb(),c.Tb(27,"th",32),c.Gc(28,"Per night"),c.Sb(),c.Tb(29,"th",32),c.Gc(30,"Discount"),c.Sb(),c.Tb(31,"th",32),c.Gc(32,"Payable"),c.Sb(),c.Tb(33,"th",32),c.Gc(34,"Advance"),c.Sb(),c.Tb(35,"th",32),c.Gc(36,"Due"),c.Sb(),c.Ec(37,Ht,2,0,"th",33),c.Pb(38,"th"),c.Sb(),c.Sb(),c.Tb(39,"tbody"),c.Ec(40,$t,19,9,"tr",34),c.Sb(),c.Tb(41,"tfoot"),c.Tb(42,"tr"),c.Tb(43,"th",35),c.Gc(44,"Total"),c.Sb(),c.Tb(45,"th",32),c.Gc(46),c.Sb(),c.Pb(47,"td"),c.Ec(48,Vt,1,0,"td",15),c.Sb(),c.Tb(49,"tr"),c.Tb(50,"th",35),c.Gc(51,"Total Advance"),c.Sb(),c.Tb(52,"th",32),c.Gc(53),c.Sb(),c.Pb(54,"td"),c.Ec(55,Yt,1,0,"td",15),c.Sb(),c.Tb(56,"tr"),c.Tb(57,"th",35),c.Gc(58,"Total due"),c.Sb(),c.Tb(59,"th",32),c.Gc(60),c.Sb(),c.Pb(61,"td"),c.Ec(62,Jt,1,0,"td",15),c.Sb(),c.Sb(),c.Sb(),c.Ec(63,Kt,1,0,"sell-form",36),c.Sb()}if(2&t){var n=c.gc(2);c.Bb(7),c.oc("ngModel",n.changeSimilar),c.Bb(8),c.oc("ngModel",n.refBy),c.Bb(22),c.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.Bb(3),c.oc("ngForOf",n.subBookings),c.Bb(6),c.Ic("",null==n.booking?null:n.booking.total," BDT"),c.Bb(2),c.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.Bb(2),c.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalDue," BDT"),c.Bb(2),c.oc("ngIf",(null==n.refBy?null:n.refBy.length)>0),c.Bb(1),c.oc("ngIf",!n.sendingInfo)}}var Wt=function(t,o){return{"btn-primary active":t,"btn-light":o}};function Zt(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",5),c.Tb(1,"div",6),c.Tb(2,"service-admin-room-list",7),c.ec("roomSelected",function(t){return c.zc(e),c.gc().onRoomSelect(t)}),c.Sb(),c.Sb(),c.Tb(3,"div",8),c.Tb(4,"div",9),c.Tb(5,"label",10),c.Tb(6,"input",11),c.ec("ngModelChange",function(t){return c.zc(e),c.gc().mode=t}),c.Sb(),c.Gc(7," Sell "),c.Sb(),c.Tb(8,"label",12),c.Tb(9,"input",13),c.ec("ngModelChange",function(t){return c.zc(e),c.gc().mode=t}),c.Sb(),c.Gc(10," Reserve "),c.Sb(),c.Sb(),c.Ec(11,qt,5,1,"div",14),c.Ec(12,Xt,64,11,"div",15),c.Sb(),c.Sb()}if(2&t){var n=c.gc();c.Bb(2),c.oc("unSelect",n.unSelect)("reloadRoomList",n.reloadRoomList),c.Bb(3),c.oc("ngClass",c.tc(8,Wt,"Sell"==n.mode,"Sell"!=n.mode)),c.Bb(1),c.oc("ngModel",n.mode),c.Bb(2),c.oc("ngClass",c.tc(11,Wt,"Reserve"==n.mode,"Reserve"!=n.mode)),c.Bb(1),c.oc("ngModel",n.mode),c.Bb(2),c.oc("ngIf",n.message.length>0),c.Bb(1),c.oc("ngIf",n.subBookings.length>0&&!n.sendingInfo)}}function Qt(t,o){1&t&&c.Gc(0,"Room status")}function to(t,o){if(1&t&&c.Pb(0,"booking-info",48),2&t){var e=c.gc(2);c.oc("booking",e.reservation)}}function oo(t,o){if(1&t){var e=c.Ub();c.Tb(0,"button",51),c.ec("click",function(){c.zc(e);var t=c.gc(3);return t.onCancelBooking(t.reservation.id)}),c.Gc(1," Cancel Booking "),c.Sb()}}function eo(t,o){if(1&t&&(c.Tb(0,"div",49),c.Ec(1,oo,2,0,"button",50),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngIf",!(null!=e.reservation&&e.reservation.paid))}}function no(t,o){if(1&t){var e=c.Ub();c.Tb(0,"booking-form",52),c.ec("onBooking",function(t){return c.zc(e),c.gc(2).onConfirmRerservation(t)})("cancelBooking",function(t){return c.zc(e),c.gc(2).onCancelRerservation(t)}),c.Sb()}if(2&t){var n=c.gc(2);c.oc("booking",n.reservation)}}var ro=function(t,o){return{"bg-danger":t,"bg-primary":o}};function io(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",19),c.Tb(1,"div",6),c.Tb(2,"service-admin-room-status-date",43),c.ec("roomSelected",function(t){return c.zc(e),c.gc().onRoomSelectFromRoomStatus(t)}),c.Sb(),c.Sb(),c.Tb(3,"div",8),c.Tb(4,"div",44),c.Gc(5),c.Sb(),c.Ec(6,to,1,1,"booking-info",45),c.Ec(7,eo,2,1,"div",46),c.Ec(8,no,1,1,"booking-form",47),c.Sb(),c.Sb()}if(2&t){var n=c.gc();c.Bb(4),c.oc("ngClass",c.tc(5,ro,"ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus),"ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))),c.Bb(1),c.Ic(" ","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),c.Bb(1),c.oc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),c.Bb(1),c.oc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),c.Bb(1),c.oc("ngIf","ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))}}var co=function(){function t(t,o,e,n){this.utilService=t,this.userService=o,this.bookingService=e,this.router=n,this.subBookings=[],this.mode="Sell",this.reloadRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.message="",this.refBy=""}return t.prototype.ngOnInit=function(){this.subBookings=[],this.booking={total:0,totalAdvance:0,totalDue:0}},t.prototype.onRoomSelect=function(t){var o=this;this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(e){var n=new It.a(e,t.room);n.room.discount>0&&(n.discount=n.room.discount),o.isContain(n)||(o.subBookings.push(n),o.updateSubBooking(o.subBookings.length-1),o.subBookings.sort(o.utilService.dynamicSortObject("date")),o.subBookings.sort(o.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.isContain=function(t){return this.subBookings.find(function(o){return o.room.id===t.room.id&&o.date===t.date})},t.prototype.onRemove=function(t){this.unSelect=this.subBookings[t].room.id,this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.onCreateUser=function(t){var o=_t({id:0},t);console.log(o),this.createBooking(o)},t.prototype.createBooking=function(t){var o=this,e=new wt.a(t,this.subBookings),n=_t({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy},e);switch(this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createServiceAdminBooking(n).subscribe(function(t){o.message="Booking complete, Thank you.",o.sendingInfo=!1,o.ngOnInit(),o.reloadRoomList=!o.reloadRoomList,o.router.navigate(["/dashboard/printTicket",t.id])});break;case"Reserve":this.bookingService.reserveServiceAdminBooking(n).subscribe(function(t){o.message="Booking complete, Thank you.",o.sendingInfo=!1,o.ngOnInit(),o.reloadRoomList=!o.reloadRoomList,o.router.navigate(["/dashboard/printTicket",t.id])})}},t.prototype.updateSubBooking=function(t){var o=this.subBookings[t];o.payablePrice=o.room.price-o.discount,o.due=o.payablePrice-o.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var o=0,e=0,n=0;if(this.changeSimilar){var r=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==r.room.category.id&&(t.discount=r.discount,t.advance=r.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){o+=t.payablePrice,e+=t.advance,n+=t.due}),this.booking.total=o,this.booking.totalAdvance=e,this.booking.totalDue=n},t.prototype.clear=function(){this.message="",this.ngOnInit()},t.prototype.onRoomSelectFromRoomStatus=function(t){return Ut(this,void 0,void 0,function(){var o=this;return zt(this,function(e){switch(e.label){case 0:return[4,this.bookingService.getServiceAdminBooking(t.bookingId).subscribe(function(t){o.reservation=t,console.log(o.reservation)})];case 1:return e.sent(),[2]}})})},t.prototype.onConfirmRerservation=function(t){return Ut(this,void 0,void 0,function(){var o=this;return zt(this,function(e){switch(e.label){case 0:return console.log("onConfirmRerservation ",t),[4,this.bookingService.confirmServiceAdminReservation(t).subscribe(function(t){o.reservation=null,console.log(t),console.log("Confirm Reservation Done")})];case 1:return e.sent(),[2]}})})},t.prototype.onCancelRerservation=function(t){return Ut(this,void 0,void 0,function(){var o=this;return zt(this,function(e){switch(e.label){case 0:return console.log("onCancelRerservation ",t),confirm("Are you sure to cancel reservation with id : "+t)?[4,this.bookingService.cancelServiceAdminReservation(t).subscribe(function(t){o.reservation=null,console.log("Cancel Reservation done")})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.onCancelBooking=function(t){return Ut(this,void 0,void 0,function(){var o=this;return zt(this,function(e){return confirm("Are you sure to cancel booking with id : "+t)&&(console.log("cancel booking : ",t),this.bookingService.cancelServiceAdminBooking(t).subscribe(function(t){o.reservation=null,console.log(t),console.log("Booking canceled")})),[2]})})},t.\u0275fac=function(o){return new(o||t)(c.Ob(A.a),c.Ob(Bt.a),c.Ob(kt.a),c.Ob(a.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-sell-rooms"]],decls:10,vars:0,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],["title","Sell room"],["ngbTabContent",""],["ngbTabTitle",""],[1,"row","py-2"],[1,"col-md-4"],[3,"unSelect","reloadRoomList","roomSelected"],[1,"col-md-8"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","border"],[1,"btn",3,"ngClass"],["type","radio","value","Sell","name","mode","id","mode_sell","autocomplete","off",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","value","Reserve","name","mode","id","mode_reservation","autocomplete","off",3,"ngModel","ngModelChange"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"text-center"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],[1,"table","mb-4","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right"],[3,"user",4,"ngIf"],["type","number","name","totalDiscount",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","advance",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange"],[3,"user"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking"],[1,"d-flex","flex-row-reverse","bd-highlight"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Sell Room"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"ngb-tabset"),c.Tb(5,"ngb-tab",2),c.Ec(6,Zt,13,14,"ng-template",3),c.Sb(),c.Tb(7,"ngb-tab"),c.Ec(8,Qt,1,0,"ng-template",4),c.Ec(9,io,9,8,"ng-template",3),c.Sb(),c.Sb(),c.Sb())},directives:[E.n,E.k,E.l,E.m,Mt,b.n,R.s,R.b,R.m,R.p,b.p,R.a,b.o,R.r,Ft,ct,Nt.a,At.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}();function ao(t,o){if(1&t&&(c.Tb(0,"h3",19),c.Gc(1),c.Sb()),2&t){var e=c.gc();c.Bb(1),c.Hc(e.message)}}function bo(t,o){if(1&t){var e=c.Ub();c.Tb(0,"a",23),c.ec("click",function(){c.zc(e);var t=o.$implicit;return c.gc(2).onSelectBooking(t.id)}),c.Pb(1,"i",24),c.Gc(2),c.hc(3,"date"),c.Sb()}if(2&t){var n=o.$implicit;c.Bb(2),c.Kc(" ",n.id,". ",n.user.name," [",c.jc(3,3,null==n?null:n.created,"d MMM,yy"),"] ")}}function lo(t,o){if(1&t&&(c.Tb(0,"ul",20),c.Tb(1,"li",21),c.Tb(2,"h5"),c.Gc(3,"Unpaid Bookings"),c.Sb(),c.Tb(4,"small"),c.Gc(5,"Choose a booking from below list"),c.Sb(),c.Sb(),c.Ec(6,bo,4,6,"a",22),c.Sb()),2&t){var e=c.gc();c.Bb(6),c.oc("ngForOf",e.bookigs)}}function so(t,o){1&t&&(c.Tb(0,"th",28),c.Gc(1," Commi. "),c.Sb())}function uo(t,o){if(1&t&&(c.Tb(0,"td",28),c.Gc(1),c.Sb()),2&t){var e=c.gc().$implicit;c.Bb(1),c.Ic(" ",e.commission," ")}}function mo(t,o){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td",28),c.Gc(7),c.Sb(),c.Tb(8,"td",28),c.Gc(9),c.Sb(),c.Tb(10,"td",28),c.Gc(11),c.Sb(),c.Tb(12,"td",28),c.Gc(13),c.Sb(),c.Tb(14,"td",28),c.Gc(15),c.Sb(),c.Ec(16,uo,2,1,"td",29),c.Sb()),2&t){var e=o.$implicit,n=c.gc(3);c.Bb(2),c.Hc(c.jc(3,9,null==e?null:e.date,"d MMM,yy")),c.Bb(3),c.Jc(" ",null==e||null==e.room?null:e.room.roomNumber," [",null==e||null==e.room.category?null:e.room.category.name,"] "),c.Bb(2),c.Ic("",null==e||null==e.room?null:e.room.price," BDT"),c.Bb(2),c.Hc(e.discount),c.Bb(2),c.Hc(e.payablePrice),c.Bb(2),c.Hc(null==e?null:e.advance),c.Bb(2),c.Hc(null==e?null:e.due),c.Bb(1),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}function fo(t,o){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,mo,17,12,"tr",35),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngForOf",e.booking.subBookingList)}}function go(t,o){1&t&&c.Pb(0,"td")}function ho(t,o){1&t&&c.Pb(0,"td")}function po(t,o){1&t&&c.Pb(0,"td")}function vo(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",5),c.Tb(1,"div",3),c.Tb(2,"div",25),c.Tb(3,"h3"),c.Gc(4,"Customer Info"),c.Sb(),c.Tb(5,"table"),c.Tb(6,"tr"),c.Tb(7,"th"),c.Gc(8,"Name :"),c.Sb(),c.Tb(9,"th"),c.Gc(10),c.Sb(),c.Sb(),c.Tb(11,"tr"),c.Tb(12,"th"),c.Gc(13,"Phone :"),c.Sb(),c.Tb(14,"th"),c.Gc(15),c.Sb(),c.Sb(),c.Tb(16,"tr"),c.Tb(17,"th"),c.Gc(18,"Email :"),c.Sb(),c.Tb(19,"th"),c.Gc(20),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Pb(21,"div",26),c.Tb(22,"div",26),c.Tb(23,"table"),c.Tb(24,"tr"),c.Tb(25,"td"),c.Gc(26,"Booking Id"),c.Sb(),c.Tb(27,"td"),c.Gc(28,":"),c.Sb(),c.Tb(29,"th"),c.Gc(30),c.Sb(),c.Sb(),c.Tb(31,"tr"),c.Tb(32,"td"),c.Gc(33,"Date"),c.Sb(),c.Tb(34,"td"),c.Gc(35,":"),c.Sb(),c.Tb(36,"td"),c.Tb(37,"strong"),c.Gc(38),c.hc(39,"date"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(40,"div",3),c.Pb(41,"div",5),c.Tb(42,"div",4),c.Gc(43),c.Sb(),c.Sb(),c.Tb(44,"div",3),c.Tb(45,"table",27),c.Tb(46,"thead"),c.Tb(47,"tr"),c.Tb(48,"th"),c.Gc(49,"Date"),c.Sb(),c.Tb(50,"th"),c.Gc(51,"Room number"),c.Sb(),c.Tb(52,"th",28),c.Gc(53,"Per night"),c.Sb(),c.Tb(54,"th",28),c.Gc(55,"Discount"),c.Sb(),c.Tb(56,"th",28),c.Gc(57,"Payable"),c.Sb(),c.Tb(58,"th",28),c.Gc(59,"Advance"),c.Sb(),c.Tb(60,"th",28),c.Gc(61,"Due"),c.Sb(),c.Ec(62,so,2,0,"th",29),c.Sb(),c.Sb(),c.Ec(63,fo,2,1,"tbody",30),c.Tb(64,"tfoot"),c.Tb(65,"tr"),c.Tb(66,"th",31),c.Gc(67,"Total"),c.Sb(),c.Tb(68,"th",28),c.Gc(69),c.Sb(),c.Pb(70,"td"),c.Ec(71,go,1,0,"td",30),c.Sb(),c.Tb(72,"tr"),c.Tb(73,"th",31),c.Gc(74,"Total Advance"),c.Sb(),c.Tb(75,"th",28),c.Gc(76),c.Sb(),c.Pb(77,"td"),c.Ec(78,ho,1,0,"td",30),c.Sb(),c.Tb(79,"tr"),c.Tb(80,"th",31),c.Gc(81,"Total due"),c.Sb(),c.Tb(82,"th",28),c.Gc(83),c.Sb(),c.Pb(84,"td"),c.Ec(85,po,1,0,"td",30),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(86,"div",32),c.Tb(87,"button",33),c.ec("click",function(){c.zc(e);var t=c.gc();return t.onPaid(t.booking.id)}),c.Pb(88,"i",34),c.Gc(89," Mark as paid "),c.Sb(),c.Sb(),c.Sb()}if(2&t){var n=c.gc();c.Bb(10),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.name),c.Bb(5),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),c.Bb(5),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.email),c.Bb(10),c.Hc(null==n.booking?null:n.booking.id),c.Bb(8),c.Ic(" ",c.jc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),c.Bb(5),c.Ic("Ref. By : ",n.booking.refBy,""),c.Bb(19),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(1),c.oc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),c.Bb(6),c.Ic("",null==n.booking?null:n.booking.total," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalDue," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var So=function(){function t(t,o){this.bookingService=t,this.util=o}return t.prototype.ngOnInit=function(){this.getUnpaidBookings(),this.message="",this.setDate()},t.prototype.setDate=function(){var t=new Date;this.date={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},t.prototype.onDateChange=function(){this.getUnpaidBookings(this.util.makeDateString(this.date))},t.prototype.getUnpaidBookings=function(t){return void 0===t&&(t=null),o=this,void 0,n=function(){var o=this;return function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(e){switch(e.label){case 0:return console.log("DD1 ",t),[4,this.bookingService.getUnpaidBookings(t).subscribe(function(t){o.bookigs=t})];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,r){function i(t){try{a(n.next(t))}catch(o){r(o)}}function c(t){try{a(n.throw(t))}catch(o){r(o)}}function a(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(i,c)}a((n=n.apply(o,[])).next())});var o,e,n},t.prototype.onSelectBooking=function(t){var o=this.bookigs.find(function(o){return o.id==t});this.booking=o,this.message=""},t.prototype.onPaid=function(t){var o=this;confirm("Are you sure to confirm as paid booking : "+t)&&(this.bookingService.serviceAdminMarkBookingPaid(t).subscribe(function(t){o.booking=null,o.message="Operation success",o.getUnpaidBookings()}),console.log("on paid ",t))},t.\u0275fac=function(o){return new(o||t)(c.Ob(kt.a),c.Ob(A.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-due-bookings"]],decls:23,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],["class","text-center",4,"ngIf"],[1,"col-md-3","my-4"],[1,"input-group","mb-2"],[1,"btn","btn-sm","btn-success","mr-1",3,"click"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","id","reportDate","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],["class","list-group",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"text-center"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","btn-success","mx-1",3,"click"],[1,"fa","fa-check-square-o"],[4,"ngFor","ngForOf"]],template:function(t,o){if(1&t){var e=c.Ub();c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Unpaid bookings"),c.Sb(),c.Sb(),c.Tb(3,"div",2),c.Tb(4,"div",3),c.Pb(5,"div",4),c.Tb(6,"div",5),c.Ec(7,ao,2,1,"h3",6),c.Sb(),c.Sb(),c.Tb(8,"div",3),c.Tb(9,"div",7),c.Tb(10,"div",8),c.Tb(11,"button",9),c.ec("click",function(){return o.getUnpaidBookings()}),c.Gc(12,"All"),c.Sb(),c.Tb(13,"div",10),c.Tb(14,"div",11),c.Gc(15,"Date"),c.Sb(),c.Sb(),c.Tb(16,"input",12,13),c.ec("ngModelChange",function(t){return o.date=t})("dateSelect",function(){return o.onDateChange()})("click",function(){return c.zc(e),c.yc(17).toggle()}),c.Sb(),c.Tb(18,"div",14),c.Tb(19,"button",15),c.ec("click",function(){return c.zc(e),c.yc(17).toggle()}),c.Pb(20,"i",16),c.Sb(),c.Sb(),c.Sb(),c.Ec(21,lo,7,1,"ul",17),c.Sb(),c.Ec(22,vo,90,17,"div",18),c.Sb(),c.Sb()}2&t&&(c.Bb(7),c.oc("ngIf",o.message.length>0),c.Bb(9),c.oc("ngModel",o.date),c.Bb(5),c.oc("ngIf",(null==o.bookigs?null:o.bookigs.length)>0),c.Bb(1),c.oc("ngIf",o.booking))},directives:[b.p,E.g,R.b,R.m,R.p,b.o],pipes:[b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),To=e("MKLO"),yo=function(t,o,e,n){return new(e||(e=Promise))(function(r,i){function c(t){try{b(n.next(t))}catch(o){i(o)}}function a(t){try{b(n.throw(t))}catch(o){i(o)}}function b(t){var o;t.done?r(t.value):(o=t.value,o instanceof e?o:new e(function(t){t(o)})).then(c,a)}b((n=n.apply(t,o||[])).next())})},ko=function(t,o){var e,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=o.call(t,c)}catch(a){i=[6,a],n=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function Bo(t,o){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.hc(5,"date"),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td",11),c.Gc(9),c.Sb(),c.Tb(10,"td",11),c.Gc(11),c.Sb(),c.Tb(12,"td",11),c.Gc(13),c.Sb(),c.Pb(14,"td"),c.Sb()),2&t){var e=o.$implicit;c.Bb(2),c.Hc(null==e||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name),c.Bb(2),c.Hc(c.jc(5,7,null==e?null:e.date,"d MMM,yy")),c.Bb(3),c.Jc(" ",null==e||null==e.room?null:e.room.roomNumber," [",null==e||null==e.room.category?null:e.room.category.name,"] "),c.Bb(2),c.Ic("",null==e||null==e.room?null:e.room.price," BDT"),c.Bb(2),c.Ic("",null==e?null:e.discount," BDT"),c.Bb(2),c.Ic("",null==e?null:e.payablePrice," BDT")}}function wo(t,o){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,Bo,15,10,"tr",15),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngForOf",e.booking.subBookingList)}}function Io(t,o){1&t&&(c.Tb(0,"tr"),c.Tb(1,"th",16),c.Gc(2,"Paid"),c.Sb(),c.Sb())}function Go(t,o){if(1&t){var e=c.Ub();c.Tb(0,"button",19),c.ec("click",function(){c.zc(e);var t=c.gc(3);return t.onCancelBooking(t.booking.id)}),c.Pb(1,"i",20),c.Gc(2," Cancel booking "),c.Sb()}}function Do(t,o){if(1&t&&(c.Tb(0,"div",17),c.Ec(1,Go,3,0,"button",18),c.Sb()),2&t){var e=c.gc(2);c.Bb(1),c.oc("ngIf",!e.booking.paid)}}function xo(t,o){if(1&t&&(c.Tb(0,"div",6),c.Tb(1,"div",7),c.Tb(2,"div",8),c.Tb(3,"h3"),c.Gc(4,"Customer Info"),c.Sb(),c.Tb(5,"table"),c.Tb(6,"tr"),c.Tb(7,"th"),c.Gc(8,"Name :"),c.Sb(),c.Tb(9,"th"),c.Gc(10),c.Sb(),c.Sb(),c.Tb(11,"tr"),c.Tb(12,"th"),c.Gc(13,"Phone :"),c.Sb(),c.Tb(14,"th"),c.Gc(15),c.Sb(),c.Sb(),c.Tb(16,"tr"),c.Tb(17,"th"),c.Gc(18,"Email :"),c.Sb(),c.Tb(19,"th"),c.Gc(20),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(21,"div",9),c.Gc(22),c.Sb(),c.Tb(23,"div",8),c.Tb(24,"h3"),c.Gc(25,"Hotel Info"),c.Sb(),c.Tb(26,"table"),c.Tb(27,"tr"),c.Tb(28,"th"),c.Gc(29,"Name :"),c.Sb(),c.Tb(30,"td"),c.Gc(31),c.Sb(),c.Sb(),c.Tb(32,"tr"),c.Tb(33,"th"),c.Gc(34,"Phone :"),c.Sb(),c.Tb(35,"td"),c.Gc(36),c.Sb(),c.Sb(),c.Tb(37,"tr"),c.Tb(38,"th"),c.Gc(39,"Address:"),c.Sb(),c.Tb(40,"td"),c.Gc(41),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(42,"div",7),c.Tb(43,"table",10),c.Tb(44,"thead"),c.Tb(45,"tr"),c.Tb(46,"th"),c.Gc(47,"Hotel"),c.Sb(),c.Tb(48,"th"),c.Gc(49,"Date"),c.Sb(),c.Tb(50,"th"),c.Gc(51,"Room number"),c.Sb(),c.Tb(52,"th",11),c.Gc(53,"Per night"),c.Sb(),c.Tb(54,"th",11),c.Gc(55,"Discount"),c.Sb(),c.Tb(56,"th",11),c.Gc(57,"Payable"),c.Sb(),c.Pb(58,"th",11),c.Sb(),c.Sb(),c.Ec(59,wo,2,1,"tbody",12),c.Tb(60,"tfoot"),c.Tb(61,"tr"),c.Tb(62,"th",13),c.Gc(63,"Sub total"),c.Sb(),c.Tb(64,"th",11),c.Gc(65),c.Sb(),c.Pb(66,"td"),c.Sb(),c.Tb(67,"tr"),c.Tb(68,"th",13),c.Gc(69,"Discount"),c.Sb(),c.Tb(70,"th",11),c.Gc(71),c.Sb(),c.Pb(72,"td"),c.Sb(),c.Tb(73,"tr"),c.Tb(74,"th",13),c.Gc(75,"Promotional Discount"),c.Sb(),c.Tb(76,"th",11),c.Gc(77),c.Sb(),c.Pb(78,"td"),c.Sb(),c.Tb(79,"tr"),c.Tb(80,"th",13),c.Gc(81,"Total"),c.Sb(),c.Tb(82,"th",11),c.Gc(83),c.Sb(),c.Pb(84,"td"),c.Sb(),c.Ec(85,Io,3,0,"tr",12),c.Sb(),c.Sb(),c.Sb(),c.Ec(86,Do,2,1,"div",14),c.Sb()),2&t){var e=c.gc();c.Bb(10),c.Hc(null==e.booking||null==e.booking.user?null:e.booking.user.name),c.Bb(5),c.Hc(null==e.booking||null==e.booking.user?null:e.booking.user.phoneNumber),c.Bb(5),c.Hc(null==e.booking||null==e.booking.user?null:e.booking.user.email),c.Bb(2),c.Ic(" Booking id : ",null==e.booking?null:e.booking.id," "),c.Bb(9),c.Hc(null==e.booking?null:e.booking.hotels[0].name),c.Bb(5),c.Hc(null==e.booking?null:e.booking.hotels[0].phoneNumber),c.Bb(5),c.Hc(null==e.booking?null:e.booking.hotels[0].address.commaSeperatedString),c.Bb(18),c.oc("ngIf",null!=e.booking&&null!=e.booking.subBookingList&&e.booking.subBookingList.length>0),c.Bb(6),c.Ic("",null==e.booking?null:e.booking.subtotal," BDT"),c.Bb(6),c.Ic("",null==e.booking?null:e.booking.totalDiscount," BDT"),c.Bb(6),c.Ic("",null==e.booking?null:e.booking.promotionDiscount," BDT"),c.Bb(6),c.Ic("",null==e.booking?null:e.booking.total," BDT"),c.Bb(2),c.oc("ngIf",e.booking.paid),c.Bb(1),c.oc("ngIf",null!=(null==e.booking?null:e.booking.subBookingList)&&e.booking.subBookingList.length>0)}}var Co=[{path:"add",component:p},{path:"add/:id",component:p},{path:"details/:id",component:P},{path:"discount-map",component:V},{path:"status-map",component:yt},{path:"sell-rooms",component:co},{path:"due-bookings",component:So},{path:"cancel-bookings",component:function(){function t(t,o){this.util=t,this.bookingService=o,this.showRoomList=!1}return t.prototype.ngOnInit=function(){},t.prototype.onHotelId=function(t){this.hotelId=t,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t},t.prototype.onRoomSelect=function(t){this.getServiceAdminBooking(t.bookingId)},t.prototype.getServiceAdminBooking=function(t){return yo(this,void 0,void 0,function(){var o=this;return ko(this,function(e){switch(e.label){case 0:return[4,this.bookingService.getServiceAdminBooking(t).subscribe(function(t){o.booking=t})];case 1:return e.sent(),[2]}})})},t.prototype.onCancelBooking=function(t){return yo(this,void 0,void 0,function(){var o=this;return ko(this,function(e){switch(e.label){case 0:return confirm("Are you sure to cancel booking with booking id "+t)?[4,this.bookingService.cancelServiceAdminBooking(t).subscribe(function(t){o.booking=null})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.\u0275fac=function(o){return new(o||t)(c.Ob(A.a),c.Ob(kt.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-cancel-bookings"]],decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4"],[3,"roomSelected"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[1,"row"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my-4","p-2","text-center"],[1,"table","table-responsive-sm","border"],[1,"text-right"],[4,"ngIf"],["colspan","5",1,"text-right"],["class","d-flex flex-row-reverse bd-highlight mb-5",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","7",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],["class","btn btn-sm btn-success mx-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"]],template:function(t,o){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Cancel Bookings"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"service-admin-room-status-date",4),c.ec("roomSelected",function(t){return o.onRoomSelect(t)}),c.Sb(),c.Sb(),c.Ec(7,xo,87,14,"div",5),c.Sb(),c.Sb()),2&t&&(c.Bb(7),c.oc("ngIf",o.booking))},directives:[ct,b.p,b.o],pipes:[b.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}()},{path:"due-bookings/:bookingId",component:So},{path:":id",component:Q},{path:"",component:Q}],Po=function(){function t(){}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(o){return new(o||t)},imports:[[To.a,a.e.forChild(Co)]]}),t}()}}]);