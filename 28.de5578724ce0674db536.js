(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"5ya6":function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return St}),n.d(e,"ServiceAgentModule",function(){return vt});var o=n("tyNb"),i=n("KZX/"),r=n("haEQ"),c=n("fXoL"),a=n("ofXK"),b=n("HF3I"),l=n("uEz7");function s(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td"),c.Gc(7),c.Sb(),c.Tb(8,"td"),c.Gc(9),c.Sb(),c.Tb(10,"td",7),c.Gc(11),c.hc(12,"currency"),c.Sb(),c.Sb()),2&t){var n=e.$implicit;c.Bb(2),c.Hc(c.jc(3,5,n.date,"MMM d, y, h:mm:ss a")),c.Bb(3),c.Hc(n.explanation),c.Bb(2),c.Hc(n.debit),c.Bb(2),c.Hc(n.credit),c.Bb(2),c.Ic(" ",c.lc(12,8,n.balance,"BDT ","symbol","4.2-2")," ")}}function u(t,e){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,s,13,13,"tr",11),c.Sb()),2&t){var n=c.gc(2);c.Bb(1),c.oc("ngForOf",n.hotelAgentLedgerPage.content)}}function g(t,e){1&t&&(c.Tb(0,"tr"),c.Tb(1,"td",9),c.Pb(2,"loading"),c.Sb(),c.Sb())}function d(t,e){if(1&t){var n=c.Ub();c.Tb(0,"pagination",12),c.ec("getPage",function(t){return c.zc(n),c.gc(2).getMyLedger(t)}),c.Sb()}if(2&t){var o=c.gc(2);c.oc("page",o.hotelAgentLedgerPage)}}function f(t,e){if(1&t&&(c.Tb(0,"div",5),c.Tb(1,"table",6),c.Tb(2,"thead"),c.Tb(3,"tr"),c.Tb(4,"th"),c.Gc(5,"Date"),c.Sb(),c.Tb(6,"th"),c.Gc(7,"Explanation"),c.Sb(),c.Tb(8,"th"),c.Gc(9,"Debit"),c.Sb(),c.Tb(10,"th"),c.Gc(11,"Credit"),c.Sb(),c.Tb(12,"th",7),c.Gc(13,"Balance"),c.Sb(),c.Sb(),c.Sb(),c.Ec(14,u,2,1,"tbody",8),c.Tb(15,"tfoot"),c.Ec(16,g,3,0,"tr",8),c.Tb(17,"tr"),c.Tb(18,"td",9),c.Ec(19,d,1,1,"pagination",10),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(14),c.oc("ngIf",n.hotelAgentLedgerPage),c.Bb(2),c.oc("ngIf",n.loading),c.Bb(3),c.oc("ngIf",null!=n.hotelAgentLedgerPage)}}var h=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyLedger()},t.prototype.getMyLedger=function(t){return void 0===t&&(t=0),e=this,void 0,o=function(){var e=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(n){return this.accountingService.getServiceAgentMyLedger(t).subscribe(function(t){e.hotelAgentLedgerPage=t}),[2]})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-hotel-agent-ledger"]],decls:6,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"table","border","table-hover","table-responsive-sm"],[1,"text-right"],[4,"ngIf"],["colspan","5"],[3,"page","getPage",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"page","getPage"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"My ledger"),c.Sb(),c.Sb(),c.Tb(3,"div",2),c.Tb(4,"div",3),c.Ec(5,f,20,3,"div",4),c.Sb(),c.Sb()),2&t&&(c.Bb(5),c.oc("ngIf",(null==e.hotelAgentLedgerPage||null==e.hotelAgentLedgerPage.content?null:e.hotelAgentLedgerPage.content.length)>0))},directives:[a.p,a.o,b.a,l.a],pipes:[a.f,a.d],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),p=n("/e7+"),m=n("FJeW"),S=n("Sa+r"),v=n("ITiG"),T=n("0sMf"),y=n("yBZE"),B=n("B01t");function k(t,e){if(1&t){var n=c.Ub();c.Tb(0,"span"),c.Tb(1,"button",13),c.ec("click",function(){c.zc(n);var t=e.$implicit;return c.gc(2).onSelectCategory(t)}),c.Gc(2),c.Sb(),c.Sb()}if(2&t){var o=e.$implicit,i=c.gc(2);c.Bb(1),c.oc("ngClass",o==i.category?"btn-primary":"btn-secondary"),c.Bb(1),c.Ic(" ",o," ")}}var G=function(t){return{disabled:t}};function w(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",14),c.Tb(1,"div",15),c.ec("click",function(){c.zc(n);var t=e.$implicit;return c.gc(2).onRoomSelect(t.id,t.available)}),c.Gc(2),c.Sb(),c.Sb()}if(2&t){var o=e.$implicit;c.Bb(1),c.oc("ngClass",c.sc(2,G,!o.available)),c.Bb(1),c.Ic(" ",o.roomNumber," ")}}function D(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"div",10),c.Ec(2,k,3,2,"span",11),c.Sb(),c.Tb(3,"div",1),c.Ec(4,w,3,4,"div",12),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(2),c.oc("ngForOf",n.categoryList),c.Bb(2),c.oc("ngForOf",n.filteredRoomList)}}function I(t,e){if(1&t&&c.Pb(0,"loading",16),2&t){var n=c.gc();c.oc("message",n.message)}}var P=function(){function t(t,e){this.roomService=t,this.util=e,this.roomSelected=new c.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges()},t.prototype.ngOnChanges=function(t){t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.getAvailableRoom()},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:this.daterange.checkinDate,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1},this.getAvailableRoom()},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAvailableRoom()},t.prototype.getAvailableRoom=function(t){return void 0===t&&(t=null),e=this,void 0,o=function(){var e,n,o=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(i){switch(i.label){case 0:return e=this.util.getDateString(this.daterange.checkinDate),n=this.util.getDateString(this.daterange.checkoutDate),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getServiceAgentAvailableRoomListByHotelId(e,n,t).subscribe(function(t){o.showRoomListLoading=!1,o.roomList=t,o.filteredRoomList=t,o.category="All",o.categoryList=["All"],o.roomList.forEach(function(t){o.categoryList.includes(t.category.name)||o.categoryList.push(t.category.name)})})];case 1:return i.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(t,i){function r(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o.throw(t))}catch(e){i(e)}}function a(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(t){t(o)})).then(r,c)}a((o=o.apply(e,[])).next())});var e,n,o},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(e){return e.category.name==t})},t.prototype.onRoomSelect=function(t,e){if(e){var n={room:this.roomList.find(function(e){return e.id===t}),checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(n)}},t.\u0275fac=function(e){return new(e||t)(c.Ob(y.a),c.Ob(p.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["service-agent-room-list"]],inputs:{reloadRoomList:"reloadRoomList"},outputs:{roomSelected:"roomSelected"},features:[c.zb],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"row","mt-1"],[4,"ngFor","ngForOf"],["class","col-md-2 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"div",5),c.Pb(6,"i",6),c.Sb(),c.Sb(),c.Tb(7,"input",7),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ec(8,D,5,2,"div",8),c.Ec(9,I,1,1,"ng-template",null,9,c.Fc),c.Sb()),2&t){var n=c.yc(10);c.Bb(7),c.oc("options",e.options),c.Bb(1),c.oc("ngIf",!e.showRoomListLoading)("ngIfElse",n)}},directives:[B.b,a.p,a.o,a.n,b.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 10px 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}"]}),t}(),x=n("3Pt+");function M(t,e){1&t&&(c.Tb(0,"small",12),c.Gc(1," Name required "),c.Sb())}function O(t,e){if(1&t&&(c.Tb(0,"small",12),c.Tb(1,"div",13),c.Gc(2," Phone number required "),c.Sb(),c.Tb(3,"div",13),c.Gc(4," Phone number format 01934953023 "),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(1),c.oc("hidden",!n.form.controls.phoneNumber.errors.required),c.Bb(2),c.oc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var C=function(t){return{disabled:t}},E=function(){function t(t){this.builder=t,this.user=new c.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",x.v.required],phoneNumber:["",[x.v.required,x.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(e){return new(e||t)(c.Ob(x.d))},t.\u0275cmp=c.Ib({type:t,selectors:[["sell-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(c.Tb(0,"h4"),c.Gc(1,"User Info"),c.Sb(),c.Tb(2,"form",0),c.ec("ngSubmit",function(){return e.submit()}),c.Tb(3,"div",1),c.Tb(4,"div",2),c.Tb(5,"label",3),c.Gc(6,"Name *"),c.Sb(),c.Pb(7,"input",4),c.Ec(8,M,2,0,"small",5),c.Sb(),c.Tb(9,"div",2),c.Tb(10,"label",6),c.Gc(11,"Phone *"),c.Sb(),c.Pb(12,"input",7),c.Ec(13,O,5,2,"small",5),c.Sb(),c.Tb(14,"div",2),c.Tb(15,"label",8),c.Gc(16,"Email"),c.Sb(),c.Pb(17,"input",9),c.Sb(),c.Sb(),c.Tb(18,"div",10),c.Tb(19,"button",11),c.Gc(20," Submit "),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(2),c.oc("formGroup",e.form),c.Bb(6),c.oc("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),c.Bb(5),c.oc("ngIf",e.form.controls.phoneNumber.errors&&e.form.controls.phoneNumber.touched),c.Bb(6),c.oc("ngClass",c.sc(4,C,e.form.invalid)))},directives:[x.x,x.n,x.g,x.b,x.m,x.f,a.p,x.j,a.n],styles:[""]}),t}(),L=function(){return(L=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function R(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",9),c.Tb(1,"h4",10),c.Gc(2),c.Tb(3,"button",11),c.ec("click",function(){return c.zc(n),c.gc().clear()}),c.Gc(4," clear "),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=c.gc();c.Bb(2),c.Ic(" ",o.errorMessage," ")}}function A(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",12),c.Tb(1,"h4",10),c.Gc(2),c.Tb(3,"button",11),c.ec("click",function(){return c.zc(n),c.gc().clear()}),c.Gc(4," clear "),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=c.gc();c.Bb(2),c.Ic(" ",o.message," ")}}function H(t,e){1&t&&(c.Tb(0,"th",25),c.Gc(1,"Commission"),c.Sb())}function N(t,e){if(1&t){var n=c.Ub();c.Tb(0,"td"),c.Tb(1,"input",33),c.ec("ngModelChange",function(t){return c.zc(n),c.gc().$implicit.commission=t}),c.Sb(),c.Sb()}if(2&t){var o=c.gc().$implicit;c.Bb(1),c.oc("ngModel",o.commission)}}function F(t,e){if(1&t){var n=c.Ub();c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td",25),c.Gc(6),c.Sb(),c.Tb(7,"td",25),c.Gc(8),c.Sb(),c.Tb(9,"td",25),c.Gc(10),c.Sb(),c.Tb(11,"td",25),c.Tb(12,"input",30),c.ec("ngModelChange",function(t){return c.zc(n),e.$implicit.advance=t})("keyup",function(){c.zc(n);var t=e.index;return c.gc(2).updateSubBooking(t)}),c.Sb(),c.Sb(),c.Tb(13,"td",25),c.Gc(14),c.Sb(),c.Ec(15,N,2,1,"td",8),c.Tb(16,"td"),c.Tb(17,"button",31),c.ec("click",function(){c.zc(n);var t=e.index;return c.gc(2).onRemove(t)}),c.Pb(18,"i",32),c.Sb(),c.Sb(),c.Sb()}if(2&t){var o=e.$implicit,i=c.gc(2);c.Bb(2),c.Hc(o.date),c.Bb(2),c.Hc("N/A"==o.room.roomNumber?o.room.category.name:o.room.roomNumber),c.Bb(2),c.Hc(o.room.price),c.Bb(2),c.Hc(o.room.discount),c.Bb(2),c.Ic("",o.room.price-o.discount," BDT"),c.Bb(2),c.oc("ngModel",o.advance),c.Bb(2),c.Ic("",null==o?null:o.due," BDT"),c.Bb(1),c.oc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function _(t,e){1&t&&c.Pb(0,"td")}function U(t,e){1&t&&c.Pb(0,"td")}function z(t,e){1&t&&c.Pb(0,"td")}function $(t,e){if(1&t){var n=c.Ub();c.Tb(0,"sell-form",34),c.ec("user",function(t){return c.zc(n),c.gc(2).onCreateUser(t)}),c.Sb()}}function j(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Tb(1,"h3",10),c.Gc(2,"New Booking"),c.Sb(),c.Tb(3,"div",2),c.Pb(4,"div",13),c.Tb(5,"div",14),c.Tb(6,"div",15),c.Tb(7,"input",16),c.ec("ngModelChange",function(t){return c.zc(n),c.gc().changeSimilar=t}),c.Sb(),c.Tb(8,"label",17),c.Gc(9," Auto Change Similar Category "),c.Sb(),c.Sb(),c.Sb(),c.Tb(10,"div",14),c.Tb(11,"div",18),c.Tb(12,"div",19),c.Tb(13,"div",20),c.Gc(14,"Ref. By"),c.Sb(),c.Sb(),c.Tb(15,"input",21),c.ec("ngModelChange",function(t){return c.zc(n),c.gc().refBy=t}),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(16,"div",22),c.Tb(17,"div",23),c.Tb(18,"h5"),c.Gc(19,"Booking List"),c.Sb(),c.Sb(),c.Sb(),c.Tb(20,"table",24),c.Tb(21,"thead"),c.Tb(22,"tr"),c.Tb(23,"th"),c.Gc(24,"Date"),c.Sb(),c.Tb(25,"th"),c.Gc(26,"Room No."),c.Sb(),c.Tb(27,"th",25),c.Gc(28,"Per night"),c.Sb(),c.Tb(29,"th",25),c.Gc(30,"Discount"),c.Sb(),c.Tb(31,"th",25),c.Gc(32,"Payable"),c.Sb(),c.Tb(33,"th",25),c.Gc(34,"Advance"),c.Sb(),c.Tb(35,"th",25),c.Gc(36,"Due"),c.Sb(),c.Ec(37,H,2,0,"th",26),c.Pb(38,"th"),c.Sb(),c.Sb(),c.Tb(39,"tbody"),c.Ec(40,F,19,8,"tr",27),c.Sb(),c.Tb(41,"tfoot"),c.Tb(42,"tr"),c.Tb(43,"th",28),c.Gc(44,"Total"),c.Sb(),c.Tb(45,"th",25),c.Gc(46),c.Sb(),c.Pb(47,"td"),c.Ec(48,_,1,0,"td",8),c.Sb(),c.Tb(49,"tr"),c.Tb(50,"th",28),c.Gc(51,"Total Advance"),c.Sb(),c.Tb(52,"th",25),c.Gc(53),c.Sb(),c.Pb(54,"td"),c.Ec(55,U,1,0,"td",8),c.Sb(),c.Tb(56,"tr"),c.Tb(57,"th",28),c.Gc(58,"Total due"),c.Sb(),c.Tb(59,"th",25),c.Gc(60),c.Sb(),c.Pb(61,"td"),c.Ec(62,z,1,0,"td",8),c.Sb(),c.Sb(),c.Sb(),c.Ec(63,$,1,0,"sell-form",29),c.Sb()}if(2&t){var o=c.gc();c.Bb(7),c.oc("ngModel",o.changeSimilar),c.Bb(8),c.oc("ngModel",o.refBy),c.Bb(22),c.oc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.Bb(3),c.oc("ngForOf",o.subBookings),c.Bb(6),c.Ic("",null==o.booking?null:o.booking.total," BDT"),c.Bb(2),c.oc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.Bb(5),c.Ic("",null==o.booking?null:o.booking.totalAdvance," BDT"),c.Bb(2),c.oc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.Bb(5),c.Ic("",null==o.booking?null:o.booking.totalDue," BDT"),c.Bb(2),c.oc("ngIf",(null==o.refBy?null:o.refBy.length)>0),c.Bb(1),c.oc("ngIf",!o.sendingInfo)}}var J=function(){function t(t,e,n,o){this.utilService=t,this.userService=e,this.bookingService=n,this.router=o,this.subBookings=[],this.refBy="",this.message="",this.errorMessage="",this.sendingInfo=!1,this.reloadRoomList=!1,this.changeSimilar=!0}return t.prototype.ngOnInit=function(){this.subBookings=[],this.booking={total:0,totalAdvance:0,totalDue:0}},t.prototype.onRoomSelect=function(t){var e=this;this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(n){var o=new m.a(n,t.room);o.room.discount>0&&(o.discount=o.room.discount),e.isContain(o)||(e.subBookings.push(o),e.updateSubBooking(e.subBookings.length-1),e.subBookings.sort(e.utilService.dynamicSortObject("date")),e.subBookings.sort(e.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.isContain=function(t){return this.subBookings.find(function(e){return e.room.id===t.room.id&&e.date===t.date})},t.prototype.onCreateUser=function(t){var e=L({id:0},t);console.log(e),this.createBooking(e)},t.prototype.onRemove=function(t){this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.createBooking=function(t){var e=this,n=new S.a(t,this.subBookings),o=L({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy},n);this.message="generating booking",this.sendingInfo=!0,this.bookingService.createServiceAgentBooking(o).subscribe(function(t){e.message="Booking complete, Thank you.",e.sendingInfo=!1,e.ngOnInit(),e.reloadRoomList=!e.reloadRoomList,e.router.navigate(["/dashboard/printTicket",t.id])},function(t){e.errorMessage="Booking error",e.message="",console.log("Booking error")})},t.prototype.updateSubBooking=function(t){var e=this.subBookings[t];e.payablePrice=e.room.price-e.discount,e.due=e.payablePrice-e.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var e=0,n=0,o=0;if(this.changeSimilar){var i=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==i.room.category.id&&(t.discount=i.discount,t.advance=i.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){e+=t.payablePrice,n+=t.advance,o+=t.due}),this.booking.total=e,this.booking.totalAdvance=n,this.booking.totalDue=o},t.prototype.clear=function(){this.message="",this.errorMessage="",this.ngOnInit()},t.\u0275fac=function(e){return new(e||t)(c.Ob(p.a),c.Ob(v.a),c.Ob(T.a),c.Ob(o.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-sell-room"]],decls:11,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-4"],[3,"reloadRoomList","roomSelected"],[1,"col-md-8"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"text-center"],[1,"btn","btn-sm","btn-warning",3,"click"],["role","alert",1,"alert","alert-success"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],[1,"table","mb-4","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right"],[3,"user",4,"ngIf"],["type","number","name","advance",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","float-right","text-right",3,"ngModel","ngModelChange"],[3,"user"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Sell Room"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"service-agent-room-list",4),c.ec("roomSelected",function(t){return e.onRoomSelect(t)}),c.Sb(),c.Sb(),c.Tb(7,"div",5),c.Ec(8,R,5,1,"div",6),c.Ec(9,A,5,1,"div",7),c.Ec(10,j,64,11,"div",8),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(6),c.oc("reloadRoomList",e.reloadRoomList),c.Bb(2),c.oc("ngIf",e.errorMessage.length>0),c.Bb(1),c.oc("ngIf",e.message.length>0),c.Bb(1),c.oc("ngIf",e.subBookings.length>0&&!e.sendingInfo))},directives:[P,a.p,x.a,x.m,x.p,x.b,a.o,x.r,E],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}.input-group-text[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),q=function(){return(q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},X=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},Y=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function K(t,e){if(1&t){var n=c.Ub();c.Tb(0,"a",11),c.ec("click",function(){c.zc(n);var t=e.$implicit;return c.gc(2).onSelectBooking(t.id)}),c.Pb(1,"i",12),c.Gc(2),c.hc(3,"date"),c.Sb()}if(2&t){var o=e.$implicit;c.Bb(2),c.Kc(" ",o.id,". ",o.user.name," [",c.jc(3,3,null==o?null:o.created,"d MMM,yy"),"] ")}}function Z(t,e){if(1&t&&(c.Tb(0,"ul",9),c.Tb(1,"li",6),c.Tb(2,"h5"),c.Gc(3,"My Bookings"),c.Sb(),c.Tb(4,"small"),c.Gc(5,"Choose a booking from below list"),c.Sb(),c.Sb(),c.Ec(6,K,4,6,"a",10),c.Sb()),2&t){var n=c.gc();c.Bb(6),c.oc("ngForOf",null==n.bookingPage?null:n.bookingPage.content)}}function Q(t,e){if(1&t){var n=c.Ub();c.Tb(0,"pagination",13),c.ec("getPage",function(t){return c.zc(n),c.gc().onSelectBooking(t)}),c.Sb()}if(2&t){var o=c.gc();c.oc("page",o.bookingPage)("short",o.short)}}function W(t,e){1&t&&(c.Tb(0,"th",19),c.Gc(1," Commi. "),c.Sb())}function V(t,e){if(1&t&&(c.Tb(0,"td",19),c.Gc(1),c.Sb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ic(" ",n.commission," ")}}function tt(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.hc(3,"date"),c.Sb(),c.Tb(4,"td"),c.Gc(5),c.Sb(),c.Tb(6,"td",19),c.Gc(7),c.Sb(),c.Tb(8,"td",19),c.Gc(9),c.Sb(),c.Tb(10,"td",19),c.Gc(11),c.Sb(),c.Tb(12,"td",19),c.Gc(13),c.Sb(),c.Tb(14,"td",19),c.Gc(15),c.Sb(),c.Ec(16,V,2,1,"td",20),c.Sb()),2&t){var n=e.$implicit,o=c.gc(3);c.Bb(2),c.Hc(c.jc(3,9,null==n?null:n.date,"d MMM,yy")),c.Bb(3),c.Jc(" ",null==n||null==n.room?null:n.room.roomNumber," [",null==n||null==n.room.category?null:n.room.category.name,"] "),c.Bb(2),c.Ic("",null==n||null==n.room?null:n.room.price," BDT"),c.Bb(2),c.Hc(n.discount),c.Bb(2),c.Hc(n.payablePrice),c.Bb(2),c.Hc(null==n?null:n.advance),c.Bb(2),c.Hc(null==n?null:n.due),c.Bb(1),c.oc("ngIf",(null==o.booking.refBy?null:o.booking.refBy.length)>0)}}function et(t,e){if(1&t&&(c.Tb(0,"tbody"),c.Ec(1,tt,17,12,"tr",23),c.Sb()),2&t){var n=c.gc(2);c.Bb(1),c.oc("ngForOf",n.booking.subBookingList)}}function nt(t,e){1&t&&c.Pb(0,"td")}function ot(t,e){1&t&&c.Pb(0,"td")}function it(t,e){1&t&&c.Pb(0,"td")}function rt(t,e){if(1&t&&(c.Tb(0,"div",14),c.Tb(1,"div",3),c.Tb(2,"div",15),c.Tb(3,"h3"),c.Gc(4,"Customer Info"),c.Sb(),c.Tb(5,"table"),c.Tb(6,"tr"),c.Tb(7,"th"),c.Gc(8,"Name :"),c.Sb(),c.Tb(9,"th"),c.Gc(10),c.Sb(),c.Sb(),c.Tb(11,"tr"),c.Tb(12,"th"),c.Gc(13,"Phone :"),c.Sb(),c.Tb(14,"th"),c.Gc(15),c.Sb(),c.Sb(),c.Tb(16,"tr"),c.Tb(17,"th"),c.Gc(18,"Email :"),c.Sb(),c.Tb(19,"th"),c.Gc(20),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Pb(21,"div",16),c.Tb(22,"div",16),c.Tb(23,"table"),c.Tb(24,"tr"),c.Tb(25,"td"),c.Gc(26,"Booking Id"),c.Sb(),c.Tb(27,"td"),c.Gc(28,":"),c.Sb(),c.Tb(29,"th"),c.Gc(30),c.Sb(),c.Sb(),c.Tb(31,"tr"),c.Tb(32,"td"),c.Gc(33,"Date"),c.Sb(),c.Tb(34,"td"),c.Gc(35,":"),c.Sb(),c.Tb(36,"td"),c.Tb(37,"strong"),c.Gc(38),c.hc(39,"date"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(40,"div",3),c.Pb(41,"div",14),c.Tb(42,"div",17),c.Gc(43),c.Sb(),c.Sb(),c.Tb(44,"div",3),c.Tb(45,"table",18),c.Tb(46,"thead"),c.Tb(47,"tr"),c.Tb(48,"th"),c.Gc(49,"Date"),c.Sb(),c.Tb(50,"th"),c.Gc(51,"Room number"),c.Sb(),c.Tb(52,"th",19),c.Gc(53,"Per night"),c.Sb(),c.Tb(54,"th",19),c.Gc(55,"Discount"),c.Sb(),c.Tb(56,"th",19),c.Gc(57,"Payable"),c.Sb(),c.Tb(58,"th",19),c.Gc(59,"Advance"),c.Sb(),c.Tb(60,"th",19),c.Gc(61,"Due"),c.Sb(),c.Ec(62,W,2,0,"th",20),c.Sb(),c.Sb(),c.Ec(63,et,2,1,"tbody",21),c.Tb(64,"tfoot"),c.Tb(65,"tr"),c.Tb(66,"th",22),c.Gc(67,"Total"),c.Sb(),c.Tb(68,"th",19),c.Gc(69),c.Sb(),c.Pb(70,"td"),c.Ec(71,nt,1,0,"td",21),c.Sb(),c.Tb(72,"tr"),c.Tb(73,"th",22),c.Gc(74,"Total Advance"),c.Sb(),c.Tb(75,"th",19),c.Gc(76),c.Sb(),c.Pb(77,"td"),c.Ec(78,ot,1,0,"td",21),c.Sb(),c.Tb(79,"tr"),c.Tb(80,"th",22),c.Gc(81,"Total due"),c.Sb(),c.Tb(82,"th",19),c.Gc(83),c.Sb(),c.Pb(84,"td"),c.Ec(85,it,1,0,"td",21),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(10),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.name),c.Bb(5),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),c.Bb(5),c.Hc(null==n.booking||null==n.booking.user?null:n.booking.user.email),c.Bb(10),c.Hc(null==n.booking?null:n.booking.id),c.Bb(8),c.Ic(" ",c.jc(39,14,null==n.booking?null:n.booking.created,"d MMM,yy")," "),c.Bb(5),c.Ic("Ref. By : ",n.booking.refBy,""),c.Bb(19),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(1),c.oc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),c.Bb(6),c.Ic("",null==n.booking?null:n.booking.total," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalAdvance," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0),c.Bb(5),c.Ic("",null==n.booking?null:n.booking.totalDue," BDT"),c.Bb(2),c.oc("ngIf",(null==n.booking.refBy?null:n.booking.refBy.length)>0)}}var ct=function(){function t(t){this.bookingService=t,this.short=!0}return t.prototype.ngOnInit=function(){this.getServiceAgentBookings()},t.prototype.getServiceAgentBookings=function(t){return void 0===t&&(t=0),X(this,void 0,void 0,function(){var e=this;return Y(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getServiceAgentBookings(t).subscribe(function(t){e.bookingPage=t})];case 1:return n.sent(),[2]}})})},t.prototype.onSelectBooking=function(t){return X(this,void 0,void 0,function(){var e;return Y(this,function(n){return e=this.bookingPage.content.find(function(e){return e.id==t}),this.booking=q({},e),[2]})})},t.\u0275fac=function(e){return new(e||t)(c.Ob(T.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-my-sells"]],decls:10,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid","mb-4"],[1,"row"],[1,"col-md-3","my-4"],["class","list-group",4,"ngIf"],[1,"list-group-item"],[3,"page","short","getPage",4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"fa","fa-hand-pointer-o"],[3,"page","short","getPage"],[1,"col-md-9"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my","p-2"],[1,"col-md-3"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngIf"],["colspan","5",1,"text-right"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"My bookings"),c.Sb(),c.Sb(),c.Tb(3,"div",2),c.Tb(4,"div",3),c.Tb(5,"div",4),c.Ec(6,Z,7,1,"ul",5),c.Tb(7,"li",6),c.Ec(8,Q,1,2,"pagination",7),c.Sb(),c.Sb(),c.Ec(9,rt,86,17,"div",8),c.Sb(),c.Sb()),2&t&&(c.Bb(6),c.oc("ngIf",(null==e.bookingPage||null==e.bookingPage.content?null:e.bookingPage.content.length)>0),c.Bb(2),c.oc("ngIf",null!=e.bookingPage),c.Bb(1),c.oc("ngIf",e.booking))},directives:[a.p,a.o,l.a],pipes:[a.f],styles:[""]}),t}(),at=function(){function t(t){this.accountingService=t}return t.prototype.ngOnInit=function(){this.getMyBalance()},t.prototype.getMyBalance=function(){return t=this,void 0,n=function(){var t=this;return function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,function(e){return this.accountingService.getServiceAgentBalance().subscribe(function(e){t.balance=e.response}),[2]})},new((e=void 0)||(e=Promise))(function(o,i){function r(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(r,c)}a((n=n.apply(t,[])).next())});var t,e,n},t.\u0275fac=function(e){return new(e||t)(c.Ob(r.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-my-balance"]],decls:9,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"text-center"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"My balance"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"h3",2),c.Gc(5," My balance is : BDT"),c.Tb(6,"u"),c.Gc(7),c.Sb(),c.Gc(8," /= "),c.Sb(),c.Sb()),2&t&&(c.Bb(7),c.Hc(e.balance))},styles:[""]}),t}(),bt=n("kU/X"),lt=function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{b(o.next(t))}catch(e){r(e)}}function a(t){try{b(o.throw(t))}catch(e){r(e)}}function b(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,a)}b((o=o.apply(t,e||[])).next())})},st=function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function ut(t,e){1&t&&(c.Tb(0,"th"),c.Gc(1,"Reservation Date"),c.Sb())}function gt(t,e){if(1&t&&(c.Tb(0,"td"),c.Gc(1),c.hc(2,"date"),c.Sb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ic(" ",c.jc(2,1,n.date,"d MMM,y")," ")}}var dt=function(t,e){return{"bg-primary":t,"bg-danger":e}};function ft(t,e){if(1&t&&(c.Tb(0,"tr"),c.Tb(1,"td"),c.Gc(2),c.Sb(),c.Tb(3,"td"),c.Gc(4),c.Sb(),c.Tb(5,"td"),c.Gc(6),c.Sb(),c.Tb(7,"td"),c.Gc(8),c.Sb(),c.Tb(9,"td"),c.Gc(10),c.Sb(),c.Ec(11,gt,3,4,"td",16),c.Tb(12,"td",17),c.Gc(13),c.Sb(),c.Tb(14,"td",17),c.Gc(15),c.Sb(),c.Tb(16,"td",17),c.Gc(17),c.Sb(),c.Tb(18,"td"),c.Gc(19),c.Sb(),c.Tb(20,"td",17),c.Gc(21),c.Sb(),c.Tb(22,"td",20),c.Gc(23),c.Sb(),c.Sb()),2&t){var n=e.$implicit,o=c.gc(2);c.Bb(2),c.Hc(n.date),c.Bb(2),c.Hc(n.hotelName),c.Bb(2),c.Jc(" ",n.company," ",n.role?"["+n.role+"]":""," "),c.Bb(2),c.Jc("",n.customerName,"[",n.customerPhone,"]"),c.Bb(2),c.Jc("",n.roomNumber," [",n.category,"]"),c.Bb(1),c.oc("ngIf","Booking"===o.reportHead),c.Bb(2),c.Hc(n.price),c.Bb(2),c.Hc(n.advance),c.Bb(2),c.Hc(n.due),c.Bb(2),c.Hc(n.ref),c.Bb(2),c.Hc(n.commission),c.Bb(1),c.oc("ngClass",c.tc(16,dt,"Paid"==n.status,"Unpaid"==n.status)),c.Bb(1),c.Ic(" ",n.status," ")}}function ht(t,e){1&t&&c.Pb(0,"td")}function pt(t,e){if(1&t&&(c.Tb(0,"table",15),c.Tb(1,"thead"),c.Tb(2,"tr"),c.Tb(3,"th"),c.Gc(4,"Check in Date"),c.Sb(),c.Tb(5,"th"),c.Gc(6,"Hotel Name"),c.Sb(),c.Tb(7,"th"),c.Gc(8,"Sold by"),c.Sb(),c.Tb(9,"th"),c.Gc(10,"Customer"),c.Sb(),c.Tb(11,"th"),c.Gc(12,"Room No."),c.Sb(),c.Ec(13,ut,2,0,"th",16),c.Tb(14,"th",17),c.Gc(15,"Rent"),c.Sb(),c.Tb(16,"th",17),c.Gc(17,"Advance"),c.Sb(),c.Tb(18,"th",17),c.Gc(19,"Due"),c.Sb(),c.Tb(20,"th"),c.Gc(21,"Ref"),c.Sb(),c.Tb(22,"th",17),c.Gc(23,"Commission"),c.Sb(),c.Tb(24,"th"),c.Gc(25,"Status"),c.Sb(),c.Sb(),c.Sb(),c.Tb(26,"tbody"),c.Ec(27,ft,24,19,"tr",18),c.Sb(),c.Tb(28,"tfoot"),c.Tb(29,"tr"),c.Pb(30,"td"),c.Pb(31,"td"),c.Pb(32,"td"),c.Tb(33,"th"),c.Gc(34,"Total"),c.Sb(),c.Ec(35,ht,1,0,"td",16),c.Pb(36,"th"),c.Tb(37,"th",17),c.Gc(38),c.Sb(),c.Tb(39,"th",17),c.Gc(40),c.Sb(),c.Tb(41,"th",17),c.Gc(42),c.Sb(),c.Pb(43,"th",19),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.gc();c.Bb(13),c.oc("ngIf","Booking"===n.reportHead),c.Bb(14),c.oc("ngForOf",n.reportList),c.Bb(8),c.oc("ngIf","Booking"===n.reportHead),c.Bb(3),c.Hc(n.total.totalrent),c.Bb(2),c.Hc(n.total.totalAdvance),c.Bb(2),c.Hc(n.total.totalDue)}}function mt(t,e){1&t&&(c.Tb(0,"h3",21),c.Pb(1,"i",22),c.Gc(2," No data found"),c.Sb())}var St=[{path:"sell",component:J},{path:"my-ledger",component:h},{path:"my-sells",component:ct},{path:"my-balance",component:at},{path:"report",component:function(){function t(t,e){this.reportService=t,this.utilService=e,this.mode="Sell",this.daterange={},this.reportList=[]}return t.prototype.ngOnInit=function(){this.total={totalrent:0,totalAdvance:0,totalDue:0},this.setDateRanges(),this.onModeChange(this.mode)},t.prototype.setDateRanges=function(){this.daterange.checkoutDate=new Date,this.daterange.checkinDate=new Date,this.daterange.checkinDate.setDate(this.daterange.checkinDate.getDate()-10);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()-90);var e=new Date;e.setDate(this.daterange.checkoutDate.getDate()+90),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.onModeChange(this.mode)},t.prototype.onModeChange=function(t){switch(this.mode=t,this.mode){case"Sell":this.getServiceAgentBookingReport(this.daterange.checkinDate,this.daterange.checkoutDate);break;case"Reserve":this.getServiceAgentReserveReport(this.daterange.checkinDate,this.daterange.checkoutDate)}},t.prototype.getServiceAgentBookingReport=function(t,e){return lt(this,void 0,void 0,function(){var n=this;return st(this,function(o){switch(o.label){case 0:return[4,this.reportService.getServiceAgentBookingReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.getServiceAgentReserveReport=function(t,e){return lt(this,void 0,void 0,function(){var n=this;return st(this,function(o){switch(o.label){case 0:return[4,this.reportService.getServiceAgentReserveReport(this.utilService.getDateString(t),this.utilService.getDateString(e)).subscribe(function(t){n.reportList=t,n.calculateServiceAdminBookingReportList()})];case 1:return o.sent(),[2]}})})},t.prototype.calculateServiceAdminBookingReportList=function(){var t=this;this.total={totalrent:0,totalAdvance:0,totalDue:0},this.reportList.forEach(function(e){t.total.totalrent+=e.price,t.total.totalAdvance+=e.advance,t.total.totalDue+=e.due})},t.\u0275fac=function(e){return new(e||t)(c.Ob(bt.a),c.Ob(p.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-service-agent-report"]],decls:24,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-auto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[1,"input-group","mb-2"],["id","reportType",1,"form-control",3,"ngModel","ngModelChange","change"],["value","Reserve"],["value","Sell"],["class","table table-bordered table-hover table-responsive-sm",4,"ngIf","ngIfElse"],["noDataFound",""],[1,"table","table-bordered","table-hover","table-responsive-sm"],[4,"ngIf"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-white",3,"ngClass"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-frown-o"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"span",1),c.Gc(2,"Hotel Agent report"),c.Sb(),c.Sb(),c.Tb(3,"div",0),c.Tb(4,"div",2),c.Tb(5,"div",3),c.Tb(6,"div",4),c.Tb(7,"div",5),c.Tb(8,"div",6),c.Pb(9,"i",7),c.Sb(),c.Sb(),c.Tb(10,"input",8),c.ec("selected",function(t){return e.selectedDate(t)}),c.Sb(),c.Sb(),c.Sb(),c.Tb(11,"div",3),c.Tb(12,"div",9),c.Tb(13,"div",5),c.Tb(14,"div",6),c.Gc(15,"Type"),c.Sb(),c.Sb(),c.Tb(16,"select",10),c.ec("ngModelChange",function(t){return e.mode=t})("change",function(t){return e.onModeChange(t.target.value)}),c.Tb(17,"option",11),c.Gc(18," By checkin date "),c.Sb(),c.Tb(19,"option",12),c.Gc(20," By sell's date "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Ec(21,pt,44,6,"table",13),c.Ec(22,mt,3,0,"ng-template",null,14,c.Fc),c.Sb()),2&t){var n=c.yc(23);c.Bb(10),c.oc("options",e.options),c.Bb(6),c.oc("ngModel",e.mode),c.Bb(5),c.oc("ngIf",e.reportList.length>0)("ngIfElse",n)}},directives:[B.b,x.u,x.m,x.p,x.q,x.w,a.p,a.o,a.n],pipes:[a.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}()}],vt=function(){function t(){}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.a,o.e.forChild(St)]]}),t}()}}]);