(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{wXy8:function(t,o,n){"use strict";n.r(o),n.d(o,"ROUTES",function(){return St}),n.d(o,"AdminBookingModule",function(){return Mt});var e=n("0sMf"),i=n("/e7+"),r=n("Sa+r"),c=n("FJeW"),l=n("8Y7J"),a=n("iInd"),b=n("G0yt"),s=n("SVse"),u=n("/YPm"),d=n("yBZE"),g=n("53Co"),f=n("HF3I"),h=function(){return(h=Object.assign||function(t){for(var o,n=1,e=arguments.length;n<e;n++)for(var i in o=arguments[n])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)};function m(t,o){if(1&t){var n=l.Rb();l.Qb(0,"span"),l.Qb(1,"button",16),l.bc("click",function(){l.wc(n);var t=o.$implicit;return l.dc(2).onSelectCategory(t)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var e=o.$implicit,i=l.dc(2);l.zb(1),l.lc("ngClass",e==i.category?"btn-primary":"btn-secondary"),l.zb(1),l.Hc(" ",e," ")}}var p=function(t,o){return{disabled:t,selected:o}};function v(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",17),l.Qb(1,"div",18),l.bc("click",function(){l.wc(n);var t=o.$implicit;return l.dc(2).onRoomSelect(t.id,t.available)}),l.Fc(2),l.Pb(),l.Pb()}if(2&t){var e=o.$implicit;l.zb(1),l.lc("ngClass",l.qc(2,p,!e.available,e.selected)),l.zb(1),l.Hc(" ",e.roomNumber," ")}}function k(t,o){if(1&t&&(l.Qb(0,"div"),l.Qb(1,"div",11),l.Qb(2,"div",12),l.Qb(3,"h4"),l.Fc(4),l.Pb(),l.Pb(),l.Dc(5,m,3,2,"span",13),l.Pb(),l.Qb(6,"div",14),l.Dc(7,v,3,5,"div",15),l.Pb(),l.Pb()),2&t){var n=l.dc();l.zb(4),l.Gc(n.hotel.name),l.zb(1),l.lc("ngForOf",n.categoryList),l.zb(2),l.lc("ngForOf",n.filteredRoomList)}}function y(t,o){if(1&t&&l.Mb(0,"loading",19),2&t){var n=l.dc();l.lc("message",n.message)}}var P=function(){function t(t,o){this.roomService=t,this.util=o,this.showHotels=new l.n,this.roomSelected=new l.n,this.daterange={},this.showRoomListLoading=!1,this.message=""}return t.prototype.ngOnInit=function(){this.setDateRanges(),this.hotel&&this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.ngOnChanges=function(t){var o=this;if(t.unSelect&&t.unSelect.currentValue&&this.roomList&&this.roomList.length>0){var n=this.roomList.find(function(t){return t.id===o.unSelect}),e=h(h({},n),{selected:!1});this.roomList.splice(this.roomList.findIndex(function(t){return t.id==o.unSelect}),1,e)}t.reloadRoomList&&this.daterange&&this.daterange.checkinDate&&this.daterange.checkoutDate&&this.reload(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.setDateRanges=function(){this.daterange.checkinDate=new Date,this.daterange.checkoutDate=new Date,this.daterange.checkoutDate.setDate(this.daterange.checkoutDate.getDate()+1);var t=new Date;t.setDate(this.daterange.checkinDate.getDate()+90);var o=new Date;o.setDate(this.daterange.checkinDate.getDate()-60),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:o,maxDate:t,startDate:this.daterange.checkinDate,endDate:this.daterange.checkoutDate,alwaysShowCalendars:!1}},t.prototype.selectedDate=function(t){this.daterange.checkinDate=t.start._d,this.daterange.checkoutDate=t.end._d,this.daterange.label=t.label,this.getAdminAvailableRoomList(this.hotel.id,this.daterange.checkinDate,this.daterange.checkoutDate)},t.prototype.reload=function(t,o,n){this.getAdminAvailableRoomList(t,o,n)},t.prototype.getAdminAvailableRoomList=function(t,o,n,e){return void 0===e&&(e=null),i=this,void 0,c=function(){var i,r,c=this;return function(t,o){var n,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(t,c)}catch(l){r=[6,l],e=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,function(l){switch(l.label){case 0:return i=this.util.getDateString(o),r=this.util.getDateString(n),this.showRoomListLoading=!0,this.message="Room List loading",[4,this.roomService.getAdminAvailableRoomListByHotelId(t,i,r,e).subscribe(function(t){c.showRoomListLoading=!1,c.roomList=t,c.filteredRoomList=t,c.category="All",c.categoryList=["All"],c.roomList.forEach(function(t){c.categoryList.includes(t.category.name)||c.categoryList.push(t.category.name)})})];case 1:return l.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(t,o){function n(t){try{l(c.next(t))}catch(n){o(n)}}function e(t){try{l(c.throw(t))}catch(n){o(n)}}function l(o){var i;o.done?t(o.value):(i=o.value,i instanceof r?i:new r(function(t){t(i)})).then(n,e)}l((c=c.apply(i,[])).next())});var i,r,c},t.prototype.onSelectCategory=function(t){this.category=t,this.filteredRoomList="All"==t?this.roomList:this.roomList.filter(function(o){return o.category.name==t})},t.prototype.onRoomSelect=function(t,o){if(o){var n=this.roomList.find(function(o){return o.id===t}),e=h({selected:!0},n);this.roomList.splice(this.roomList.findIndex(function(o){return o.id==t}),1,e);var i={room:n,checkInDate:new Date(this.daterange.checkinDate),checkOutDate:new Date(this.daterange.checkoutDate)};this.roomSelected.emit(i)}},t.prototype.onHotelList=function(){this.showHotels.emit(!0)},t.\u0275fac=function(o){return new(o||t)(l.Lb(d.a),l.Lb(i.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["admin-available-room-list"]],inputs:{hotel:"hotel",unSelect:"unSelect",reloadRoomList:"reloadRoomList"},outputs:{showHotels:"showHotels",roomSelected:"roomSelected"},features:[l.xb],decls:13,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-9"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"],[4,"ngIf","ngIfElse"],["roomListLoading",""],[1,"btn","btn-sm","btn-info",3,"click"],[1,"row","mt-1"],[1,"col-12"],[4,"ngFor","ngForOf"],[1,"row","m-0"],["class","col-md-2 col-4 p-0",4,"ngFor","ngForOf"],[1,"btn-sm","m-1",3,"ngClass","click"],[1,"col-md-2","col-4","p-0"],[1,"room-box",3,"ngClass","click"],[3,"message"]],template:function(t,o){if(1&t&&(l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"div",3),l.Qb(4,"div",4),l.Qb(5,"div",5),l.Mb(6,"i",6),l.Pb(),l.Pb(),l.Qb(7,"input",7),l.bc("selected",function(t){return o.selectedDate(t)}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Dc(8,k,8,3,"div",8),l.Dc(9,y,1,1,"ng-template",null,9,l.Ec),l.Qb(11,"button",10),l.bc("click",function(){return o.onHotelList()}),l.Fc(12," Back to hotel list "),l.Pb(),l.Pb()),2&t){var n=l.vc(10);l.zb(7),l.lc("options",o.options),l.zb(1),l.lc("ngIf",!o.showRoomListLoading)("ngIfElse",n)}},directives:[g.b,s.q,s.p,s.o,f.a],styles:[".room-box[_ngcontent-%COMP%]{cursor:pointer;padding:5px;border:1px solid grey;border-radius:5px;text-align:center;margin:10px 10px 10px 0}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3!important}.selected[_ngcontent-%COMP%]{background-color:#90ee90;color:#fff}"]}),t}(),Q=n("s7LF");function w(t,o){1&t&&(l.Qb(0,"small",12),l.Fc(1," Name required "),l.Pb())}function D(t,o){if(1&t&&(l.Qb(0,"small",12),l.Qb(1,"div",13),l.Fc(2," Phone number required "),l.Pb(),l.Qb(3,"div",13),l.Fc(4," Phone number format 01934953023 "),l.Pb(),l.Pb()),2&t){var n=l.dc();l.zb(1),l.lc("hidden",!n.form.controls.phoneNumber.errors.required),l.zb(2),l.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}var F=function(t){return{disabled:t}},S=function(){function t(t){this.builder=t,this.user=new l.n}return t.prototype.ngOnInit=function(){this.createForm()},t.prototype.createForm=function(){this.form=this.builder.group({name:["",Q.v.required],phoneNumber:["",[Q.v.required,Q.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:""})},t.prototype.submit=function(){this.form.valid&&(this.user.emit(this.form.value),this.form.reset())},t.\u0275fac=function(o){return new(o||t)(l.Lb(Q.d))},t.\u0275cmp=l.Fb({type:t,selectors:[["admin-user-form"]],outputs:{user:"user"},decls:21,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,o){1&t&&(l.Qb(0,"h4"),l.Fc(1,"User Info"),l.Pb(),l.Qb(2,"form",0),l.bc("ngSubmit",function(){return o.submit()}),l.Qb(3,"div",1),l.Qb(4,"div",2),l.Qb(5,"label",3),l.Fc(6,"Name *"),l.Pb(),l.Mb(7,"input",4),l.Dc(8,w,2,0,"small",5),l.Pb(),l.Qb(9,"div",2),l.Qb(10,"label",6),l.Fc(11,"Phone *"),l.Pb(),l.Mb(12,"input",7),l.Dc(13,D,5,2,"small",5),l.Pb(),l.Qb(14,"div",2),l.Qb(15,"label",8),l.Fc(16,"Email"),l.Pb(),l.Mb(17,"input",9),l.Pb(),l.Pb(),l.Qb(18,"div",10),l.Qb(19,"button",11),l.Fc(20," Submit "),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(2),l.lc("formGroup",o.form),l.zb(6),l.lc("ngIf",o.form.controls.name.errors&&o.form.controls.name.touched),l.zb(5),l.lc("ngIf",o.form.controls.phoneNumber.errors&&o.form.controls.phoneNumber.touched),l.zb(6),l.lc("ngClass",l.pc(4,F,o.form.invalid)))},directives:[Q.x,Q.n,Q.g,Q.b,Q.m,Q.f,s.q,Q.j,s.o],styles:[""]}),t}(),M=function(){return(M=Object.assign||function(t){for(var o,n=1,e=arguments.length;n<e;n++)for(var i in o=arguments[n])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)};function R(t,o){if(1&t){var n=l.Rb();l.Qb(0,"admin-hotel-list",5),l.bc("hotel",function(t){return l.wc(n),l.dc().onHotel(t)}),l.Pb()}}function B(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",6),l.Qb(1,"div",7),l.Qb(2,"div",8),l.Qb(3,"div",9),l.bc("click",function(){return l.wc(n),l.vc(7).toggle()}),l.Qb(4,"div",10),l.Mb(5,"i",11),l.Pb(),l.Pb(),l.Qb(6,"input",12,13),l.bc("ngModelChange",function(t){return l.wc(n),l.dc().dd=t})("dateSelect",function(){l.wc(n);var t=l.dc();return t.getAdminBookingList(t.hotelId,t.dd)})("click",function(){return l.wc(n),l.vc(7).toggle()}),l.Pb(),l.Pb(),l.Pb(),l.Pb()}if(2&t){var e=l.dc();l.zb(6),l.lc("ngModel",e.dd)("minDate",e.minDate)("maxDate",e.maxDate)}}var x=function(t,o,n,e,i){return{"bg-lightgray":t,"bg-yellow":o,"bg-green":n,"bg-red":e,"bg-white":i}};function L(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",17),l.Qb(1,"div",18),l.bc("click",function(){l.wc(n);var t=o.$implicit,e=l.dc(2);return e.onRoomClick(t.id,t.bookingId,e.dd)}),l.Fc(2),l.Mb(3,"br"),l.Pb(),l.Pb()}if(2&t){var e=o.$implicit;l.zb(1),l.lc("ngClass",l.tc(2,x,"ROOM_BLOCKED"===e.status,"ROOM_BOOKED"===e.status,"ROOM_RESERVED"===e.status,"ROOM_SOLD"===e.status,"ROOM_FREE"===e.status)),l.zb(1),l.Hc(" ",e.roomNumber," ")}}function I(t,o){if(1&t&&(l.Qb(0,"div",14),l.Qb(1,"div",15),l.Qb(2,"h4"),l.Fc(3),l.Pb(),l.Pb(),l.Dc(4,L,4,8,"div",16),l.Pb()),2&t){var n=l.dc();l.zb(3),l.Gc(n.hotel.name),l.zb(1),l.lc("ngForOf",n.roomList)}}function z(t,o){1&t&&(l.Qb(0,"div",19),l.Qb(1,"div",20),l.Mb(2,"div",21),l.Fc(3," Blocked "),l.Pb(),l.Qb(4,"div",20),l.Mb(5,"div",22),l.Fc(6," Reserved "),l.Pb(),l.Qb(7,"div",20),l.Mb(8,"div",23),l.Fc(9," Sold "),l.Pb(),l.Qb(10,"div",20),l.Mb(11,"div",24),l.Fc(12," Free "),l.Pb(),l.Pb())}function O(t,o){if(1&t){var n=l.Rb();l.Qb(0,"button",25),l.bc("click",function(){return l.wc(n),l.dc().onHotelList()}),l.Mb(1,"i",26),l.Fc(2," Back to hotel list\n"),l.Pb()}}var C=function(){function t(t){this.roomService=t,this.roomSelected=new l.n,this.loading=!1,this.showRoomList=!1}return t.prototype.ngOnChanges=function(t){t.reload&&this.dd&&this.getAdminBookingList(this.hotelId,this.dd)},t.prototype.ngOnInit=function(){var t=new Date;this.dd={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.minDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()-60},this.maxDate={year:t.getFullYear(),month:t.getMonth()+4,day:t.getDate()},this.maxDate.month>12&&(this.maxDate.year+=1,this.maxDate.month-=12)},t.prototype.getAdminBookingList=function(t,o){return n=this,void 0,i=function(){var n=this;return function(t,o){var n,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(t,c)}catch(l){r=[6,l],e=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,function(e){switch(e.label){case 0:return this.loading=!0,[4,this.roomService.getAdminBookingList(t,this.makeDateString(o)).subscribe(function(t){n.roomList=t,n.loading=!1})];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(t,o){function r(t){try{l(i.next(t))}catch(n){o(n)}}function c(t){try{l(i.throw(t))}catch(n){o(n)}}function l(o){var n;o.done?t(o.value):(n=o.value,n instanceof e?n:new e(function(t){t(n)})).then(r,c)}l((i=i.apply(n,[])).next())});var n,e,i},t.prototype.onRoomClick=function(t,o,n){if(o>0){var e=this.roomList.find(function(o){return o.id==t});this.status=e.status;var i=M({date:n.year+"-"+(n.month+1)+"-"+n.day},e);this.roomSelected.emit(i)}},t.prototype.onHotel=function(t){this.hotelId=t.id,this.hotel=t,this.getAdminBookingList(t.id,this.dd),this.showRoomList=!0},t.prototype.onHotelList=function(){this.showRoomList=!1,localStorage.removeItem("hotelId")},t.prototype.makeDateString=function(t){return t.year+"-"+(t.month<10?"0"+t.month:t.month)+"-"+(t.day<10?"0"+t.day:t.day)},t.\u0275fac=function(o){return new(o||t)(l.Lb(d.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["admin-room-status-date"]],inputs:{reload:"reload"},outputs:{roomSelected:"roomSelected"},features:[l.xb],decls:5,vars:5,consts:[[3,"hotel",4,"ngIf"],["class","row my-2",4,"ngIf"],["class","row",4,"ngIf"],["class","row border m-0 py-2",4,"ngIf"],["class","btn btn-sm btn-info mt-1",3,"click",4,"ngIf"],[3,"hotel"],[1,"row","my-2"],[1,"col-auto"],[1,"input-group","mb-2"],[1,"input-group-prepend",3,"click"],[1,"input-group-text"],[1,"fa","fa-calendar"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","minDate","maxDate","ngModelChange","dateSelect","click"],["date","ngbDatepicker"],[1,"row"],[1,"col-12"],["class","col-md-2 col-sm-3 col-3 p-1",4,"ngFor","ngForOf"],[1,"col-md-2","col-sm-3","col-3","p-1"],[1,"room-map-box",3,"ngClass","click"],[1,"row","border","m-0","py-2"],[1,"col-3"],[1,"foo","bg-lightgray"],[1,"foo","bg-green"],[1,"foo","bg-red"],[1,"foo","bg-white"],[1,"btn","btn-sm","btn-info","mt-1",3,"click"],[1,"fa","fa-chevron-left"]],template:function(t,o){1&t&&(l.Dc(0,R,1,0,"admin-hotel-list",0),l.Dc(1,B,8,3,"div",1),l.Dc(2,I,5,2,"div",2),l.Dc(3,z,13,0,"div",3),l.Dc(4,O,3,0,"button",4)),2&t&&(l.lc("ngIf",!o.showRoomList),l.zb(1),l.lc("ngIf",o.showRoomList),l.zb(1),l.lc("ngIf",o.showRoomList),l.zb(1),l.lc("ngIf",null==o.roomList?null:o.roomList.length),l.zb(1),l.lc("ngIf",o.showRoomList))},directives:[s.q,u.a,b.g,Q.b,Q.m,Q.p,s.p,s.o],styles:[".room-map-box[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:10px;padding:5px;text-align:center;border:1px solid grey;border-radius:5px}.room-map-box[_ngcontent-%COMP%]:hover{border:1px solid #4f71e0}.bg-lightgray[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.bg-yellow[_ngcontent-%COMP%]{background-color:#ff0!important}.bg-green[_ngcontent-%COMP%]{color:#fff;background-color:green!important}.bg-red[_ngcontent-%COMP%]{color:#fff;background-color:red!important}.bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.foo[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin:5px;border:1px solid grey}"]}),t}(),A=n("Xtf6"),H=n("V9jR"),_=function(){return(_=Object.assign||function(t){for(var o,n=1,e=arguments.length;n<e;n++)for(var i in o=arguments[n])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)},E=function(t,o,n,e){return new(n||(n=Promise))(function(i,r){function c(t){try{a(e.next(t))}catch(o){r(o)}}function l(t){try{a(e.throw(t))}catch(o){r(o)}}function a(t){var o;t.done?i(t.value):(o=t.value,o instanceof n?o:new n(function(t){t(o)})).then(c,l)}a((e=e.apply(t,o||[])).next())})},N=function(t,o){var n,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(t,c)}catch(l){r=[6,l],e=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};function T(t,o){if(1&t){var n=l.Rb();l.Qb(0,"admin-hotel-list",14),l.bc("hotel",function(t){return l.wc(n),l.dc(2).onHotel(t)}),l.Pb()}}function G(t,o){if(1&t){var n=l.Rb();l.Qb(0,"admin-available-room-list",15),l.bc("showHotels",function(t){return l.wc(n),l.dc(2).onShowHotels(t)})("roomSelected",function(t){return l.wc(n),l.dc(2).onRoomSelect(t)}),l.Pb()}if(2&t){var e=l.dc(2);l.lc("hotel",e.hotel)("unSelect",e.unSelect)("reloadRoomList",e.reloadRoomList)}}function q(t,o){1&t&&(l.Qb(0,"th",45),l.Fc(1," Commission "),l.Pb())}function $(t,o){if(1&t){var n=l.Rb();l.Qb(0,"td"),l.Qb(1,"input",54),l.bc("ngModelChange",function(t){return l.wc(n),l.dc().$implicit.commission=t}),l.Pb(),l.Pb()}if(2&t){var e=l.dc().$implicit;l.zb(1),l.lc("ngModel",e.commission)}}function j(t,o){if(1&t){var n=l.Rb();l.Qb(0,"tr"),l.Qb(1,"td"),l.Fc(2),l.Pb(),l.Qb(3,"td"),l.Fc(4),l.Pb(),l.Qb(5,"td"),l.Fc(6),l.Pb(),l.Qb(7,"td",45),l.Fc(8),l.Pb(),l.Qb(9,"td",45),l.Fc(10),l.Pb(),l.Qb(11,"td"),l.Qb(12,"input",50),l.bc("ngModelChange",function(t){return l.wc(n),o.$implicit.discount=t})("keyup",function(){l.wc(n);var t=o.index;return l.dc(4).updateSubBooking(t)}),l.Pb(),l.Pb(),l.Qb(13,"td",45),l.Fc(14),l.ec(15,"number"),l.Pb(),l.Qb(16,"td",45),l.Qb(17,"input",51),l.bc("ngModelChange",function(t){return l.wc(n),o.$implicit.advance=t})("keyup",function(){l.wc(n);var t=o.index;return l.dc(4).updateSubBooking(t)}),l.Pb(),l.Pb(),l.Qb(18,"td",45),l.Fc(19),l.Pb(),l.Dc(20,$,2,1,"td",49),l.Qb(21,"td"),l.Qb(22,"button",52),l.bc("click",function(){l.wc(n);var t=o.index;return l.dc(4).onRemove(t)}),l.Mb(23,"i",53),l.Pb(),l.Pb(),l.Pb()}if(2&t){var e=o.$implicit,i=l.dc(4);l.zb(2),l.Gc(e.room.category.hotel.name),l.zb(2),l.Gc(e.date),l.zb(2),l.Ic("",e.room.roomNumber," [",e.room.category.name,"]"),l.zb(2),l.Gc(e.room.price),l.zb(2),l.Hc("",e.room.vatService," %"),l.zb(2),l.lc("ngModel",e.discount),l.zb(2),l.Hc(" ",l.gc(15,11,e.payablePrice,"1.1-2")," "),l.zb(3),l.lc("ngModel",e.advance),l.zb(2),l.Gc(null==e?null:e.due),l.zb(1),l.lc("ngIf",(null==i.refBy?null:i.refBy.length)>0)}}function V(t,o){1&t&&l.Mb(0,"td")}function Y(t,o){1&t&&l.Mb(0,"td")}function J(t,o){1&t&&l.Mb(0,"td")}function U(t,o){1&t&&l.Mb(0,"td")}function K(t,o){if(1&t&&(l.Qb(0,"table",44),l.Qb(1,"thead"),l.Qb(2,"tr"),l.Qb(3,"th"),l.Fc(4,"Hotel"),l.Pb(),l.Qb(5,"th"),l.Fc(6,"Date"),l.Pb(),l.Qb(7,"th"),l.Fc(8,"Room No."),l.Pb(),l.Qb(9,"th",45),l.Fc(10,"Per night"),l.Pb(),l.Qb(11,"th",45),l.Fc(12,"Vat & Service"),l.Pb(),l.Qb(13,"th",45),l.Fc(14,"Discount"),l.Pb(),l.Qb(15,"th",45),l.Fc(16,"Payable"),l.Pb(),l.Qb(17,"th",45),l.Fc(18,"Advance"),l.Pb(),l.Qb(19,"th",45),l.Fc(20,"Due"),l.Pb(),l.Dc(21,q,2,0,"th",46),l.Mb(22,"th"),l.Pb(),l.Pb(),l.Qb(23,"tbody"),l.Dc(24,j,24,14,"tr",47),l.Pb(),l.Qb(25,"tfoot"),l.Qb(26,"tr"),l.Qb(27,"th",48),l.Fc(28,"Vat and Service Charge"),l.Pb(),l.Qb(29,"th",45),l.Fc(30),l.Pb(),l.Mb(31,"td"),l.Dc(32,V,1,0,"td",49),l.Pb(),l.Qb(33,"tr"),l.Qb(34,"th",48),l.Fc(35,"Total"),l.Pb(),l.Qb(36,"th",45),l.Fc(37),l.Pb(),l.Mb(38,"td"),l.Dc(39,Y,1,0,"td",49),l.Pb(),l.Qb(40,"tr"),l.Qb(41,"th",48),l.Fc(42,"Total Advance"),l.Pb(),l.Qb(43,"th",45),l.Fc(44),l.Pb(),l.Mb(45,"td"),l.Dc(46,J,1,0,"td",49),l.Pb(),l.Qb(47,"tr"),l.Qb(48,"th",48),l.Fc(49,"Total due"),l.Pb(),l.Qb(50,"th",45),l.Fc(51),l.Pb(),l.Mb(52,"td"),l.Dc(53,U,1,0,"td",49),l.Pb(),l.Pb(),l.Pb()),2&t){var n=l.dc(3);l.zb(21),l.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),l.zb(3),l.lc("ngForOf",n.subBookings),l.zb(6),l.Hc("",null==n.booking?null:n.booking.totalVatService," BDT"),l.zb(2),l.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),l.zb(5),l.Hc("",null==n.booking?null:n.booking.total," BDT"),l.zb(2),l.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),l.zb(5),l.Hc("",null==n.booking?null:n.booking.totalAdvance," BDT"),l.zb(2),l.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0),l.zb(5),l.Hc("",null==n.booking?null:n.booking.totalDue," BDT"),l.zb(2),l.lc("ngIf",(null==n.refBy?null:n.refBy.length)>0)}}function X(t,o){if(1&t&&(l.Qb(0,"option",55),l.Fc(1),l.Pb()),2&t){var n=o.$implicit;l.lc("value",n.key),l.zb(1),l.Hc(" ",n.value," ")}}function W(t,o){if(1&t){var n=l.Rb();l.Qb(0,"admin-user-form",56),l.bc("user",function(t){return l.wc(n),l.dc(3).onCreateUser(t)}),l.Pb()}}var Z=function(t,o){return{"btn-primary active":t,"btn-light":o}};function tt(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",16),l.Qb(1,"div",17),l.Qb(2,"label",18),l.Qb(3,"input",19),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).mode=t}),l.Pb(),l.Fc(4," Sell "),l.Pb(),l.Qb(5,"label",20),l.Qb(6,"input",21),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).mode=t}),l.Pb(),l.Fc(7," Reserve "),l.Pb(),l.Pb(),l.Qb(8,"h3",22),l.Fc(9,"New Booking"),l.Pb(),l.Qb(10,"div",23),l.Mb(11,"div",24),l.Qb(12,"div",25),l.Qb(13,"div",26),l.Qb(14,"input",27),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).changeSimilar=t}),l.Pb(),l.Qb(15,"label",28),l.Fc(16," Auto Change Similar Category "),l.Pb(),l.Pb(),l.Pb(),l.Qb(17,"div",25),l.Qb(18,"div",29),l.Qb(19,"div",30),l.Qb(20,"div",31),l.Fc(21,"Ref. By"),l.Pb(),l.Pb(),l.Qb(22,"input",32),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).refBy=t}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(23,"div",33),l.Qb(24,"div",34),l.Qb(25,"h5"),l.Fc(26,"Booking List"),l.Pb(),l.Pb(),l.Pb(),l.Dc(27,K,54,10,"table",35),l.Qb(28,"h4"),l.Fc(29,"Payment Info"),l.Pb(),l.Qb(30,"div",36),l.Qb(31,"div",37),l.Qb(32,"label",38),l.Fc(33,"Payment Method"),l.Pb(),l.Qb(34,"select",39),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).booking.paymentMethod=t}),l.Dc(35,X,2,2,"option",40),l.ec(36,"keyvalue"),l.Pb(),l.Pb(),l.Qb(37,"div",37),l.Qb(38,"label",41),l.Fc(39,"Reference"),l.Pb(),l.Qb(40,"input",42),l.bc("ngModelChange",function(t){return l.wc(n),l.dc(2).booking.paymentRef=t}),l.Pb(),l.Pb(),l.Pb(),l.Dc(41,W,1,0,"admin-user-form",43),l.Pb()}if(2&t){var e=l.dc(2);l.zb(2),l.lc("ngClass",l.qc(14,Z,"Sell"==e.mode,"Sell"!=e.mode)),l.zb(1),l.lc("ngModel",e.mode),l.zb(2),l.lc("ngClass",l.qc(17,Z,"Reserve"==e.mode,"Reserve"!=e.mode)),l.zb(1),l.lc("ngModel",e.mode),l.zb(8),l.lc("ngModel",e.changeSimilar),l.zb(8),l.lc("ngModel",e.refBy),l.zb(5),l.lc("ngIf",!e.sendingInfo)("ngIfElse",e.sending),l.zb(7),l.lc("ngModel",e.booking.paymentMethod),l.zb(1),l.lc("ngForOf",l.fc(36,12,e.paymentMethods)),l.zb(5),l.lc("ngModel",e.booking.paymentRef),l.zb(1),l.lc("ngIf",!e.sendingInfo)}}function ot(t,o){if(1&t&&(l.Qb(0,"div",9),l.Qb(1,"div",10),l.Dc(2,T,1,0,"admin-hotel-list",11),l.Dc(3,G,1,3,"admin-available-room-list",12),l.Pb(),l.Dc(4,tt,42,20,"div",13),l.Pb()),2&t){var n=l.dc();l.zb(2),l.lc("ngIf",!n.showRoomList),l.zb(1),l.lc("ngIf",n.showRoomList),l.zb(1),l.lc("ngIf",n.subBookings.length>0)}}function nt(t,o){if(1&t&&l.Mb(0,"booking-info",64),2&t){var n=l.dc(3);l.lc("booking",n.reservation)}}function et(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",65),l.Qb(1,"a",66),l.Mb(2,"i",67),l.Fc(3," Print"),l.Pb(),l.Qb(4,"button",68),l.bc("click",function(){l.wc(n);var t=l.dc(3);return t.onCancelBooking(t.reservation.id)}),l.Fc(5," Cancel Booking "),l.Pb(),l.Pb()}if(2&t){var e=l.dc(3);l.zb(1),l.nc("routerLink","/dashboard/printTicket/",e.reservation.id,"")}}function it(t,o){if(1&t){var n=l.Rb();l.Qb(0,"booking-form",69),l.bc("onBooking",function(t){return l.wc(n),l.dc(3).onConfirmRerservation(t)})("cancelBooking",function(t){return l.wc(n),l.dc(3).onCancelRerservation(t)}),l.Pb()}if(2&t){var e=l.dc(3);l.lc("booking",e.reservation)}}var rt=function(t,o){return{"bg-danger":t,"bg-primary":o}};function ct(t,o){if(1&t&&(l.Qb(0,"div",16),l.Qb(1,"div",60),l.Fc(2),l.Pb(),l.Dc(3,nt,1,1,"booking-info",61),l.Dc(4,et,6,1,"div",62),l.Dc(5,it,1,1,"booking-form",63),l.Pb()),2&t){var n=l.dc(2);l.zb(1),l.lc("ngClass",l.qc(5,rt,"ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus),"ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))),l.zb(1),l.Hc(" ","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)?"Booking Details":"Reservation Details"," "),l.zb(1),l.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),l.zb(1),l.lc("ngIf","ROOM_SOLD"==(null==n.reservation?null:n.reservation.bookingStatus)),l.zb(1),l.lc("ngIf","ROOM_RESERVED"==(null==n.reservation?null:n.reservation.bookingStatus))}}function lt(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",57),l.Qb(1,"div",58),l.Qb(2,"admin-room-status-date",59),l.bc("roomSelected",function(t){return l.wc(n),l.dc().onRoomSelectFromRoomStatus(t)}),l.Pb(),l.Pb(),l.Dc(3,ct,6,8,"div",13),l.Pb()}if(2&t){var e=l.dc();l.zb(3),l.lc("ngIf",e.reservation)}}var at=function(){function t(t,o,n){this.utilService=t,this.bookingService=o,this.router=n,this.subBookings=[],this.reloadRoomList=!1,this.showRoomList=!1,this.sendingInfo=!1,this.changeSimilar=!0,this.message="",this.paymentMethods=r.b,this.active=1,this.mode="Sell"}return t.prototype.ngOnInit=function(){this.booking={total:0,totalAdvance:0,totalDue:0},this.booking.paymentMethod="CASH"},t.prototype.onHotel=function(t){this.hotel=t,this.hotelId=t.id,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t,localStorage.removeItem("hotelId")},t.prototype.onRoomSelect=function(t){var o=this;this.utilService.getDatesBetween(t.checkInDate,t.checkOutDate).forEach(function(n){var e=new c.a(n,t.room);e.room.discount>0&&(e.discount=e.room.discount),o.isContain(e)||(o.subBookings.push(e),o.updateSubBooking(o.subBookings.length-1),o.subBookings.sort(o.utilService.dynamicSortObject("date")),o.subBookings.sort(o.utilService.dynamicSortObject("room.roomNumber")))})},t.prototype.onCreateUser=function(t){var o=_({id:0},t);this.createBooking(o)},t.prototype.createBooking=function(t){var o=this,n=new r.a(t,this.subBookings),e=_({total:this.booking.total,totalAdvance:this.booking.totalAdvance,totalDue:this.booking.totalDue,refBy:this.refBy,paymentMethod:this.booking.paymentMethod,paymentRef:this.booking.paymentRef},n);switch(this.message="generating booking",this.sendingInfo=!0,this.mode){case"Sell":this.bookingService.createAdminBooking(e).subscribe(function(t){o.message="Booking generated, Thank you.",o.sendingInfo=!1,o.booking.subBookingList=[],o.subBookings=[],o.ngOnInit(),o.reloadRoomList=!o.reloadRoomList,o.router.navigate(["/dashboard/printTicket",t.id])});break;case"Reserve":this.bookingService.reserveAdminBooking(e).subscribe(function(t){o.message="Booking complete, Thank you.",o.sendingInfo=!1,o.reloadRoomList=!o.reloadRoomList,o.ngOnInit(),o.router.navigate(["/dashboard/printTicket",t.id])})}},t.prototype.onReload=function(){this.reloadRoomList=!this.reloadRoomList},t.prototype.isContain=function(t){return this.subBookings.find(function(o){return o.room.id===t.room.id&&o.date===t.date&&o.room.category.hotel.id===t.room.category.hotel.id})},t.prototype.onRemove=function(t){this.unSelect=this.subBookings[t].room.id,this.subBookings.splice(t,1),this.updateBooking(t)},t.prototype.updateSubBooking=function(t){var o=this.subBookings[t];o.payablePrice=Math.round((o.room.price-o.discount)*(1+o.room.vatService/100)),o.due=o.payablePrice-o.advance,this.updateBooking(t)},t.prototype.updateBooking=function(t){var o=0,n=0,e=0,i=0;if(this.changeSimilar){var r=this.subBookings[t];this.subBookings.forEach(function(t){t.room.category.id==r.room.category.id&&(t.discount=r.discount,t.advance=r.advance,t.payablePrice=Math.round((t.room.price-t.discount)*(1+t.room.vatService/100)),t.due=t.payablePrice-t.advance)})}this.subBookings.forEach(function(t){o+=t.payablePrice,n+=t.advance,e+=t.due,i+=t.room.vatService/100*(t.room.price-t.discount)}),this.booking.totalVatService=i,this.booking.total=o,this.booking.totalAdvance=n,this.booking.totalDue=e},t.prototype.onRoomSelectFromRoomStatus=function(t){return E(this,void 0,void 0,function(){var o=this;return N(this,function(n){switch(n.label){case 0:return[4,this.bookingService.getAdminBooking(t.bookingId).subscribe(function(t){o.reservation=t})];case 1:return n.sent(),[2]}})})},t.prototype.onConfirmRerservation=function(t){return E(this,void 0,void 0,function(){var o=this;return N(this,function(n){switch(n.label){case 0:return confirm("Are you sure to confirm reservation with id : "+t.id)?[4,this.bookingService.confirmAdminReservation(t).subscribe(function(t){o.reservation=null,console.log(t),console.log("Confirm Reservation Done")})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.onCancelRerservation=function(t){return E(this,void 0,void 0,function(){var o=this;return N(this,function(n){switch(n.label){case 0:return console.log("onCancelRerservation ",t),confirm("Are you sure to cancel reservation with id : "+t)?[4,this.bookingService.cancelAdminReservation(t).subscribe(function(t){o.reservation=null,console.log("Cancel Reservation done")})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.onCancelBooking=function(t){return E(this,void 0,void 0,function(){var o=this;return N(this,function(n){return confirm("Are you sure to cancel booking with id : "+t)&&(console.log("cancel booking : ",t),this.bookingService.cancelAdminBooking(t).subscribe(function(t){console.log(t),console.log("Booking canceled"),o.reservation=null})),[2]})})},t.prototype.getMySells=function(){return E(this,void 0,void 0,function(){return N(this,function(t){return[2]})})},t.\u0275fac=function(o){return new(o||t)(l.Lb(i.a),l.Lb(e.a),l.Lb(a.b))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-admin-sell-room"]],decls:15,vars:4,consts:[[1,"container-fluid","d-print-none"],[1,"row","px-3","details-title","text-left"],[1,"container-fluid"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row","m-0","py-2"],[1,"col-md-4","p-0"],[3,"hotel",4,"ngIf"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected",4,"ngIf"],["class","col-md-8",4,"ngIf"],[3,"hotel"],[3,"hotel","unSelect","reloadRoomList","showHotels","roomSelected"],[1,"col-md-8"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","border"],[1,"btn",3,"ngClass"],["type","radio","value","Sell","name","mode","id","mode_sell","autocomplete","off",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"ngClass"],["type","radio","value","Reserve","name","mode","id","mode_reservation","autocomplete","off",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"row"],[1,"col-md-6"],[1,"col-md-3"],[1,"form-check","mb-2"],["type","checkbox","id","changeSimilar",1,"form-check-input",3,"ngModel","ngModelChange"],["for","changeSimilar",1,"form-check-label"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","refBy",1,"form-control","sized-form",3,"ngModel","ngModelChange"],[1,"row","m-0"],[1,"col-12","bg-primary","text-white","text-center"],["class","table mb-4 border table-responsive-sm",4,"ngIf","ngIfElse"],[1,"form-row"],[1,"form-group","col-md-3"],["for","paymentMethod"],["id","paymentMethod",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","reference"],["type","text","id","reference",1,"form-control",3,"ngModel","ngModelChange"],[3,"user",4,"ngIf"],[1,"table","mb-4","border","table-responsive-sm"],[1,"text-right"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","8",1,"text-right"],[4,"ngIf"],["type","number","name","totalDiscount",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],["type","number","name","advance",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange","keyup"],[1,"btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],["type","number","name","commission",1,"form-control","sized-form","float-right","text-right",3,"ngModel","ngModelChange"],[3,"value"],[3,"user"],[1,"mt-2","row"],[1,"col-md-4"],[3,"roomSelected"],[1,"p-3","mb-2","text-white",3,"ngClass"],[3,"booking",4,"ngIf"],["class","d-flex flex-row-reverse bd-highlight mb-4",4,"ngIf"],[3,"booking","onBooking","cancelBooking",4,"ngIf"],[3,"booking"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-4"],[1,"btn","btn-sm","btn-primary","mx-1",3,"routerLink"],[1,"fa","fa-print"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"booking","onBooking","cancelBooking"]],template:function(t,o){if(1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Sell room"),l.Pb(),l.Pb(),l.Qb(3,"div",2),l.Qb(4,"ul",3,4),l.bc("activeIdChange",function(t){return o.active=t}),l.Qb(6,"li",5),l.Qb(7,"a",6),l.Fc(8,"Sell room"),l.Pb(),l.Dc(9,ot,5,3,"ng-template",7),l.Pb(),l.Qb(10,"li",5),l.Qb(11,"a",6),l.Fc(12,"Room status"),l.Pb(),l.Dc(13,lt,4,1,"ng-template",7),l.Pb(),l.Pb(),l.Mb(14,"div",8),l.Pb()),2&t){var n=l.vc(5);l.zb(4),l.lc("activeId",o.active),l.zb(2),l.lc("ngbNavItem",1),l.zb(4),l.lc("ngbNavItem",2),l.zb(4),l.lc("ngbNavOutlet",n)}},directives:[b.i,b.k,b.l,b.j,b.m,s.q,u.a,P,s.o,Q.s,Q.b,Q.m,Q.p,Q.a,Q.u,s.p,Q.r,Q.q,Q.w,S,C,A.a,a.d,H.a],pipes:[s.k,s.g],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}.form-control.sized-form[_ngcontent-%COMP%]{max-width:90px;padding:.15rem .5rem;height:calc(1.75rem + 2px)}"]}),t}(),bt=n("3whx"),st=function(){return(st=Object.assign||function(t){for(var o,n=1,e=arguments.length;n<e;n++)for(var i in o=arguments[n])Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);return t}).apply(this,arguments)};function ut(t,o){if(1&t){var n=l.Rb();l.Qb(0,"a",10),l.bc("click",function(){l.wc(n);var t=o.$implicit;return l.dc(2).onSelectBooking(t.id)}),l.Fc(1),l.ec(2,"date"),l.Pb()}if(2&t){var e=o.$implicit;l.zb(1),l.Jc(" [",e.id,"] ",e.user.name," - ",l.gc(2,3,e.created,"MMM d, y, h:mm:ss a")," ")}}function dt(t,o){if(1&t&&(l.Qb(0,"ul",7),l.Qb(1,"li",8),l.Qb(2,"h5"),l.Fc(3,"Booking List"),l.Pb(),l.Qb(4,"small"),l.Fc(5,"Choose a booking from below list"),l.Pb(),l.Pb(),l.Dc(6,ut,3,6,"a",9),l.Pb()),2&t){var n=l.dc();l.zb(6),l.lc("ngForOf",n.offlineBookings)}}function gt(t,o){1&t&&l.Mb(0,"loading")}function ft(t,o){if(1&t){var n=l.Rb();l.Qb(0,"tr"),l.Qb(1,"td"),l.Fc(2),l.Pb(),l.Qb(3,"td"),l.Fc(4),l.ec(5,"date"),l.Pb(),l.Qb(6,"td"),l.Fc(7),l.Pb(),l.Qb(8,"td",15),l.Fc(9),l.Pb(),l.Qb(10,"td",15),l.Fc(11),l.Pb(),l.Qb(12,"td",15),l.Fc(13),l.Pb(),l.Qb(14,"td"),l.Qb(15,"button",22),l.bc("click",function(){l.wc(n);var t=o.index;return l.dc(3).removeRoom(t)}),l.Mb(16,"i",23),l.Pb(),l.Pb(),l.Pb()}if(2&t){var e=o.$implicit;l.zb(2),l.Gc(null==e||null==e.room.category||null==e.room.category.hotel?null:e.room.category.hotel.name),l.zb(2),l.Gc(l.gc(5,7,null==e?null:e.date,"d MMM,yy")),l.zb(3),l.Ic(" ",null==e||null==e.room?null:e.room.roomNumber," [",null==e||null==e.room.category?null:e.room.category.name,"] "),l.zb(2),l.Hc("",null==e||null==e.room?null:e.room.price," BDT"),l.zb(2),l.Hc("",null==e?null:e.discount," BDT"),l.zb(2),l.Hc("",null==e?null:e.payablePrice," BDT")}}function ht(t,o){if(1&t&&(l.Qb(0,"tbody"),l.Dc(1,ft,17,10,"tr",21),l.Pb()),2&t){var n=l.dc(2);l.zb(1),l.lc("ngForOf",n.booking.subBookingList)}}function mt(t,o){if(1&t){var n=l.Rb();l.Qb(0,"button",24),l.bc("click",function(){l.wc(n);var t=l.dc(2);return t.onConfirmBooking(t.booking.id)}),l.Mb(1,"i",25),l.Fc(2," Confirm booking "),l.Pb()}}function pt(t,o){if(1&t){var n=l.Rb();l.Qb(0,"button",26),l.bc("click",function(){l.wc(n);var t=l.dc(2);return t.onDeleteBooking(t.booking.id)}),l.Mb(1,"i",27),l.Fc(2," Delete booking "),l.Pb()}}function vt(t,o){1&t&&l.Mb(0,"loading")}function kt(t,o){if(1&t&&(l.Qb(0,"div",11),l.Qb(1,"div",2),l.Qb(2,"div",12),l.Qb(3,"h3"),l.Fc(4,"Customer Info"),l.Pb(),l.Qb(5,"table"),l.Qb(6,"tr"),l.Qb(7,"th"),l.Fc(8,"Name :"),l.Pb(),l.Qb(9,"th"),l.Fc(10),l.Pb(),l.Pb(),l.Qb(11,"tr"),l.Qb(12,"th"),l.Fc(13,"Phone :"),l.Pb(),l.Qb(14,"th"),l.Fc(15),l.Pb(),l.Pb(),l.Qb(16,"tr"),l.Qb(17,"th"),l.Fc(18,"Email :"),l.Pb(),l.Qb(19,"th"),l.Fc(20),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Mb(21,"div",13),l.Qb(22,"div",12),l.Qb(23,"h3"),l.Fc(24,"Hotel Info"),l.Pb(),l.Qb(25,"table"),l.Qb(26,"tr"),l.Qb(27,"th"),l.Fc(28,"Name :"),l.Pb(),l.Qb(29,"td"),l.Fc(30),l.Pb(),l.Pb(),l.Qb(31,"tr"),l.Qb(32,"th"),l.Fc(33,"Phone :"),l.Pb(),l.Qb(34,"td"),l.Fc(35),l.Pb(),l.Pb(),l.Qb(36,"tr"),l.Qb(37,"th"),l.Fc(38,"Address:"),l.Pb(),l.Qb(39,"td"),l.Fc(40),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(41,"div",2),l.Qb(42,"table",14),l.Qb(43,"thead"),l.Qb(44,"tr"),l.Qb(45,"th"),l.Fc(46,"Hotel"),l.Pb(),l.Qb(47,"th"),l.Fc(48,"Date"),l.Pb(),l.Qb(49,"th"),l.Fc(50,"Room number"),l.Pb(),l.Qb(51,"th",15),l.Fc(52,"Per night"),l.Pb(),l.Qb(53,"th",15),l.Fc(54,"Discount"),l.Pb(),l.Qb(55,"th",15),l.Fc(56,"Payable"),l.Pb(),l.Mb(57,"th",15),l.Pb(),l.Pb(),l.Dc(58,ht,2,1,"tbody",5),l.Qb(59,"tfoot"),l.Qb(60,"tr"),l.Qb(61,"th",16),l.Fc(62,"Sub total"),l.Pb(),l.Qb(63,"th",15),l.Fc(64),l.Pb(),l.Mb(65,"td"),l.Pb(),l.Qb(66,"tr"),l.Qb(67,"th",16),l.Fc(68,"Discount"),l.Pb(),l.Qb(69,"th",15),l.Fc(70),l.Pb(),l.Mb(71,"td"),l.Pb(),l.Qb(72,"tr"),l.Qb(73,"th",16),l.Fc(74,"Promotional Discount"),l.Pb(),l.Qb(75,"th",15),l.Fc(76),l.Pb(),l.Mb(77,"td"),l.Pb(),l.Qb(78,"tr"),l.Qb(79,"th",16),l.Fc(80,"Total"),l.Pb(),l.Qb(81,"th",15),l.Fc(82),l.Pb(),l.Mb(83,"td"),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(84,"div",17),l.Dc(85,mt,3,0,"button",18),l.Dc(86,pt,3,0,"button",19),l.Dc(87,vt,1,0,"ng-template",null,20,l.Ec),l.Pb(),l.Pb()),2&t){var n=l.dc();l.zb(10),l.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.name),l.zb(5),l.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.phoneNumber),l.zb(5),l.Gc(null==n.booking||null==n.booking.user?null:n.booking.user.email),l.zb(10),l.Gc(null==n.booking?null:n.booking.hotels[0].name),l.zb(5),l.Gc(null==n.booking?null:n.booking.hotels[0].phoneNumber),l.zb(5),l.Gc(null==n.booking?null:n.booking.hotels[0].address.commaSeperatedString),l.zb(18),l.lc("ngIf",null!=n.booking&&null!=n.booking.subBookingList&&n.booking.subBookingList.length>0),l.zb(6),l.Hc("",null==n.booking?null:n.booking.subtotal," BDT"),l.zb(6),l.Hc("",null==n.booking?null:n.booking.totalDiscount," BDT"),l.zb(6),l.Hc("",null==n.booking?null:n.booking.promotionDiscount," BDT"),l.zb(6),l.Hc("",null==n.booking?null:n.booking.total," BDT"),l.zb(3),l.lc("ngIf",null!=(null==n.booking?null:n.booking.subBookingList)&&n.booking.subBookingList.length>0),l.zb(1),l.lc("ngIf",!n.loading)}}var yt=function(){function t(t){this.bookingService=t,this.loading=!1}return t.prototype.ngOnInit=function(){this.getOfflineBookings()},t.prototype.onSelectBooking=function(t){var o=this.offlineBookings.find(function(o){return o.id===t});this.booking=st({},o)},t.prototype.getOfflineBookings=function(){return t=this,void 0,n=function(){var t=this;return function(t,o){var n,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(t,c)}catch(l){r=[6,l],e=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.bookingService.getOfflineBookings().subscribe(function(o){t.offlineBookings=o,t.loading=!1})];case 1:return o.sent(),[2]}})},new((o=void 0)||(o=Promise))(function(e,i){function r(t){try{l(n.next(t))}catch(o){i(o)}}function c(t){try{l(n.throw(t))}catch(o){i(o)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(t){t(n)})).then(r,c)}l((n=n.apply(t,[])).next())});var t,o,n},t.prototype.onConfirmBooking=function(t){var o=this;console.log("CON",t),this.loading=!0,this.bookingService.confirmOfflineBookings(t).subscribe(function(t){console.log(t),o.booking=null,o.loading=!1,o.getOfflineBookings()})},t.prototype.onDeleteBooking=function(t){var o=this;this.loading=!0,this.bookingService.deleteOfflineBookings(t).subscribe(function(t){o.booking=null,o.loading=!1,o.getOfflineBookings()})},t.\u0275fac=function(o){return new(o||t)(l.Lb(e.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-offline-bookings"]],decls:9,vars:3,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-3"],["class","list-group",4,"ngIf"],[4,"ngIf"],["class","col-md-9",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"col-md-9"],[1,"col-md-4","border","my-4","p-2"],[1,"col-md-4","my-4","p-2"],[1,"table","table-responsive-sm","border"],[1,"text-right"],["colspan","5",1,"text-right"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],["class","btn btn-sm btn-success mx-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger mx-2",3,"click",4,"ngIf"],["loadMessage",""],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-sm","btn-danger","mx-2",3,"click"],[1,"fa","fa-trash"]],template:function(t,o){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Offline bookings"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Dc(6,dt,7,1,"ul",4),l.Dc(7,gt,1,0,"loading",5),l.Pb(),l.Dc(8,kt,89,13,"div",6),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("ngIf",!o.loading),l.zb(1),l.lc("ngIf",o.loading),l.zb(1),l.lc("ngIf",o.booking))},directives:[s.q,s.p,f.a],pipes:[s.f],styles:[".list-group-item[_ngcontent-%COMP%]{cursor:pointer;padding:.15rem 1.25rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),t}(),Pt=n("YBP9"),Qt=function(t,o,n,e){return new(n||(n=Promise))(function(i,r){function c(t){try{a(e.next(t))}catch(o){r(o)}}function l(t){try{a(e.throw(t))}catch(o){r(o)}}function a(t){var o;t.done?i(t.value):(o=t.value,o instanceof n?o:new n(function(t){t(o)})).then(c,l)}a((e=e.apply(t,o||[])).next())})},wt=function(t,o){var n,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(t,c)}catch(l){r=[6,l],e=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};function Dt(t,o){if(1&t){var n=l.Rb();l.Qb(0,"div",9),l.Qb(1,"button",10),l.bc("click",function(){l.wc(n);var t=l.dc(2);return t.onCancelBooking(t.booking.id)}),l.Mb(2,"i",11),l.Fc(3," Cancel booking "),l.Pb(),l.Pb()}}function Ft(t,o){if(1&t&&(l.Qb(0,"div",6),l.Mb(1,"admin-booking-details",7),l.Dc(2,Dt,4,0,"div",8),l.Pb()),2&t){var n=l.dc();l.zb(1),l.lc("booking",n.booking),l.zb(1),l.lc("ngIf",null!=(null==n.booking?null:n.booking.subBookingList)&&n.booking.subBookingList.length>0)}}var St=[{path:"sell-rooms",component:at},{path:"offline-bookings",component:yt},{path:"cancel-bookings",component:function(){function t(t,o){this.utilService=t,this.bookingService=o,this.showRoomList=!1,this.reload=!1}return t.prototype.ngOnInit=function(){},t.prototype.onHotel=function(t){this.hotelId=t.id,this.showRoomList=!0},t.prototype.onShowHotels=function(t){this.showRoomList=!t},t.prototype.onRoomSelect=function(t){this.getAdminBooking(t.bookingId)},t.prototype.getAdminBooking=function(t){return Qt(this,void 0,void 0,function(){var o=this;return wt(this,function(n){switch(n.label){case 0:return null!=this.booking&&this.booking.id==t?[3,2]:[4,this.bookingService.getAdminBooking(t).subscribe(function(t){o.booking=t})];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.onCancelBooking=function(t){return Qt(this,void 0,void 0,function(){var o=this;return wt(this,function(n){switch(n.label){case 0:return confirm("Are you sure to cancel booking with booking id "+t)?[4,this.bookingService.cancelAdminBooking(t).subscribe(function(t){console.log(t),o.booking=null,o.reload=!o.reload})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.\u0275fac=function(o){return new(o||t)(l.Lb(i.a),l.Lb(e.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-cancel-bookings"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-4","mb-5"],[3,"reload","roomSelected"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],[3,"booking"],["class","d-flex flex-row-reverse bd-highlight mb-5",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight","mb-5"],[1,"btn","btn-sm","btn-success","mx-2",3,"click"],[1,"fa","fa-check"]],template:function(t,o){1&t&&(l.Qb(0,"div",0),l.Qb(1,"span",1),l.Fc(2,"Cancel Bookings"),l.Pb(),l.Pb(),l.Qb(3,"div",0),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"admin-room-status-date",4),l.bc("roomSelected",function(t){return o.onRoomSelect(t)}),l.Pb(),l.Pb(),l.Dc(7,Ft,3,2,"div",5),l.Pb(),l.Pb()),2&t&&(l.zb(6),l.lc("reload",o.reload),l.zb(1),l.lc("ngIf",o.booking))},directives:[C,s.q,Pt.a],styles:[""]}),t}()}],Mt=function(){function t(){}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(o){return new(o||t)},imports:[[bt.a,a.e.forChild(St)]]}),t}()}}]);