(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{R0GP:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return M}),n.d(t,"ServiceAdminCategoryModule",function(){return E});var r=n("tyNb"),i=n("KZX/"),o=n("3M1h"),c=n("d26D"),a=n("fXoL"),s=n("ofXK"),l=n("cGek"),u=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}s((r=r.apply(e,t||[])).next())})},b=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function d(e,t){if(1&e){var n=a.Ub();a.Tb(0,"div",5),a.Tb(1,"category-form",6),a.ec("create",function(e){return a.zc(n),a.gc().onCreate(e)})("update",function(e){return a.zc(n),a.gc().onUpdate(e)}),a.Sb(),a.Sb()}if(2&e){var r=a.gc();a.Bb(1),a.oc("hotel",r.hotel)("category",r.category)}}var g=function(){function e(e,t,n,r){this.hotelService=e,this.categoryService=t,this.activeRoute=n,this.router=r,this.id=n.snapshot.params.id}return e.prototype.ngOnInit=function(){this.id&&this.getServiceAdminCategory(this.id),this.getServiceAdminHotel()},e.prototype.getServiceAdminHotel=function(){return u(this,void 0,void 0,function(){var e=this;return b(this,function(t){return this.hotelService.getServiceAdminHotel().subscribe(function(t){e.hotel=t}),[2]})})},e.prototype.getServiceAdminCategory=function(e){return u(this,void 0,void 0,function(){var t=this;return b(this,function(n){return this.categoryService.getServiceAdminCategory(e).subscribe(function(e){t.category=e}),[2]})})},e.prototype.onCreate=function(e){var t=this;this.categoryService.saveAdminServiceCategory(e).subscribe(function(e){t.router.navigate(["/dashboard/service-admin/category"])})},e.prototype.onUpdate=function(e){var t=this;e.id=this.category.id,this.categoryService.saveAdminServiceCategory(e).subscribe(function(e){t.router.navigate(["/dashboard/service-admin/category"])})},e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a),a.Ob(o.a),a.Ob(r.a),a.Ob(r.b))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-add"]],decls:7,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[3,"hotel","category","create","update"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"span",1),a.Gc(2,"Add Category"),a.Sb(),a.Sb(),a.Tb(3,"div",0),a.Tb(4,"div",2),a.Pb(5,"div",3),a.Ec(6,d,2,2,"div",4),a.Sb(),a.Sb()),2&e&&(a.Bb(6),a.oc("ngIf",null!=t.hotel&&t.hotel.id))},directives:[s.p,l.a],styles:[""]}),e}(),f=n("4+Eq"),p=n("LLt/"),h=n("eIep"),m=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}s((r=r.apply(e,t||[])).next())})},v=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function y(e,t){if(1&e&&a.Pb(0,"img",22),2&e){var n=a.gc();a.oc("src",n.imageUrl,a.Bc)}}function S(e,t){if(1&e&&(a.Tb(0,"div",23),a.Gc(1),a.Sb()),2&e){var n=a.gc();a.Bb(1),a.Ic(" ",n.errorMessage," ")}}function T(e,t){if(1&e){var n=a.Ub();a.Tb(0,"p"),a.Tb(1,"input",24),a.ec("change",function(e){return a.zc(n),a.gc().fileChange(e)}),a.Sb(),a.Sb()}}function w(e,t){1&e&&(a.Tb(0,"div"),a.Gc(1," Uploaded "),a.Pb(2,"i",25),a.Sb())}function x(e,t){if(1&e){var n=a.Ub();a.Tb(0,"button",26),a.ec("click",function(){return a.zc(n),a.gc().startUpload()}),a.Gc(1," Upload "),a.Sb()}}function I(e,t){if(1&e){var n=a.Ub();a.Tb(0,"div"),a.Tb(1,"button",28),a.ec("click",function(){a.zc(n);var e=a.gc().$implicit;return a.gc().deleteImage(e)}),a.Tb(2,"span"),a.Gc(3,"\xd7"),a.Sb(),a.Sb(),a.Tb(4,"div",29),a.Pb(5,"img",30),a.Sb(),a.Sb()}if(2&e){var r=a.gc().$implicit;a.Bb(5),a.oc("src",r,a.Bc)}}function k(e,t){if(1&e&&(a.Tb(0,"div",27),a.Ec(1,I,6,1,"div",16),a.Sb()),2&e){var n=t.$implicit;a.Bb(1),a.oc("ngIf",n.length)}}var C=function(){function e(e,t,n,r){this.ng2ImgMax=e,this.auth=t,this.categoryService=n,this.activeRoute=r,this.categoryImagesUrl=[],this.errorMessage="",this.id=r.snapshot.params.id}return e.prototype.ngOnInit=function(){this.id&&(this.getServiceAdminCategory(this.id),this.loadCategoryImages())},e.prototype.getServiceAdminCategory=function(e){return m(this,void 0,void 0,function(){var t=this;return v(this,function(n){switch(n.label){case 0:return[4,this.categoryService.getServiceAdminCategory(e).subscribe(function(e){t.category=e})];case 1:return n.sent(),[2]}})})},e.prototype.loadCategoryImages=function(){return m(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return[4,this.categoryService.getCategoryImageUrls(this.id).subscribe(function(t){e.categoryImagesUrl=[],t.forEach(function(t){var n=e.categoryService.imageUrl+t+"?access_token="+e.auth.getAccessToken();e.categoryImagesUrl.push(n)})},function(e){console.log(e)})];case 1:return t.sent(),[2]}})})},e.prototype.previewFile=function(e){var t=this,n=new FileReader;n.onload=function(e){t.imageUrl=e.target.result},n.readAsDataURL(e.target.files[0])},e.prototype.fileChange=function(e){this.previewFile(e),this.fileList=e.target.files,this.progressPercentage=0,this.errorMessage=""},e.prototype.startUpload=function(){var e=this;if(this.fileList.length>0){var t=new FormData,n=this.fileList[0];this.ng2ImgMax.resizeImage(n,800,600).pipe(Object(h.a)(function(r){return t.append("image",r,n.name),e.categoryService.uploadServiceAdminCategoryImage(e.id,t)})).subscribe(function(t){e.imageUrl="",e.fileList=null,e.progressPercentage=100,e.loadCategoryImages()},function(t){console.log(t),e.errorMessage=t._body})}},e.prototype.deleteImage=function(e){var t=this,n=new URL(e).pathname.split("/"),r=parseInt(n[n.length-1]);this.categoryService.deleteServiceAdminCategoryImage(n[n.length-3],r).subscribe(function(e){t.categoryImagesUrl.splice(r,1,"")},function(e){console.log("Image could not delete")})},e.prototype.resizeImage=function(e,t,n){return this.ng2ImgMax.resizeImage(e,t,n)},e.\u0275fac=function(t){return new(t||e)(a.Ob(f.b),a.Ob(p.a),a.Ob(o.a),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-details"]],decls:40,vars:10,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[1,"list-group"],[1,"list-group-item","active"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"routerLink"],[1,"fa","fa-pencil-square-o"],[1,"col-md-9"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","","style","width: 100%; height: auto;",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/service-admin/category",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-3 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",2,"width","100%","height","auto",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-3","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"],["alt","",1,"img-thumbnail",3,"src"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"span",1),a.Gc(2,"Category Details"),a.Sb(),a.Sb(),a.Tb(3,"div",0),a.Tb(4,"div",2),a.Tb(5,"div",3),a.Tb(6,"ul",4),a.Tb(7,"li",5),a.Tb(8,"h4"),a.Gc(9),a.Sb(),a.Sb(),a.Tb(10,"li",6),a.Gc(11," Maximum number of Adult "),a.Tb(12,"span",7),a.Gc(13),a.Sb(),a.Sb(),a.Tb(14,"li",6),a.Gc(15," Maximum number of child "),a.Tb(16,"span",7),a.Gc(17),a.Sb(),a.Sb(),a.Tb(18,"a",8),a.Pb(19,"i",9),a.Gc(20," Edit category "),a.Sb(),a.Sb(),a.Sb(),a.Tb(21,"div",10),a.Tb(22,"div",11),a.Tb(23,"div",12),a.Ec(24,y,1,1,"img",13),a.Sb(),a.Tb(25,"div",14),a.Ec(26,S,2,1,"div",15),a.Tb(27,"div"),a.Gc(28," Please select a image to upload "),a.Pb(29,"br"),a.Gc(30," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),a.Sb(),a.Ec(31,T,2,0,"p",16),a.Ec(32,w,3,0,"div",16),a.Tb(33,"div"),a.Ec(34,x,2,0,"button",17),a.Tb(35,"a",18),a.Gc(36," Back "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(37,"div",19),a.Tb(38,"div",20),a.Ec(39,k,2,1,"div",21),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Bb(9),a.Hc(null==t.category?null:t.category.name),a.Bb(4),a.Ic(" ",null==t.category?null:t.category.maxAdultNumber," "),a.Bb(4),a.Ic(" ",null==t.category?null:t.category.maxChildNumber," "),a.Bb(1),a.qc("routerLink","/dashboard/service-admin/category/add/",t.id,""),a.Bb(6),a.oc("ngIf",t.imageUrl),a.Bb(2),a.oc("ngIf",t.errorMessage.length>0),a.Bb(5),a.oc("ngIf",t.categoryImagesUrl.length<5),a.Bb(1),a.oc("ngIf",100==t.progressPercentage),a.Bb(2),a.oc("ngIf",t.fileList),a.Bb(5),a.oc("ngForOf",t.categoryImagesUrl))},directives:[r.d,s.p,s.o],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;height:135px;width:240px}"]}),e}(),G=n("uEz7"),P=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}s((r=r.apply(e,t||[])).next())})},B=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function U(e,t){if(1&e){var n=a.Ub();a.Tb(0,"div",15),a.Gc(1),a.Tb(2,"button",16),a.ec("click",function(){return a.zc(n),a.gc(2).clear()}),a.Gc(3,"Clear"),a.Sb(),a.Sb()}if(2&e){var r=a.gc(2);a.Bb(1),a.Ic(" ",r.message," ")}}function A(e,t){if(1&e){var n=a.Ub();a.Tb(0,"tr"),a.Tb(1,"td"),a.Tb(2,"a",17),a.Gc(3),a.Sb(),a.Sb(),a.Tb(4,"td"),a.Gc(5),a.Sb(),a.Tb(6,"td"),a.Gc(7),a.Sb(),a.Pb(8,"td"),a.Tb(9,"td"),a.Tb(10,"a",18),a.Gc(11,"Images"),a.Sb(),a.Tb(12,"a",19),a.Gc(13,"Details"),a.Sb(),a.Tb(14,"a",20),a.Gc(15,"Edit"),a.Sb(),a.Tb(16,"button",21),a.ec("click",function(){a.zc(n);var e=t.$implicit;return a.gc(2).onDelete(e.id,e.name)}),a.Gc(17," Delete "),a.Sb(),a.Sb(),a.Sb()}if(2&e){var r=t.$implicit;a.Bb(2),a.qc("routerLink","/dashboard/service-admin/category/details/",r.id,""),a.Bb(1),a.Ic(" ",r.name," "),a.Bb(2),a.Hc(r.maxAdultNumber),a.Bb(2),a.Hc(r.maxChildNumber),a.Bb(3),a.qc("routerLink","/dashboard/service-admin/category/details/",r.id,""),a.Bb(2),a.qc("routerLink","/dashboard/service-admin/category/details/",r.id,""),a.Bb(2),a.qc("routerLink","/dashboard/service-admin/category/add/",r.id,"")}}function L(e,t){if(1&e){var n=a.Ub();a.Tb(0,"pagination",22),a.ec("getPage",function(e){a.zc(n);var t=a.gc(2);return t.getCategoryPage(t.hotelId,e)}),a.Sb()}if(2&e){var r=a.gc(2);a.oc("page",r.categoryPage)}}function O(e,t){if(1&e&&(a.Tb(0,"div",5),a.Tb(1,"h3",6),a.Gc(2,"Category List"),a.Sb(),a.Ec(3,U,4,1,"div",7),a.Tb(4,"table",8),a.Tb(5,"thead"),a.Tb(6,"tr"),a.Tb(7,"th"),a.Gc(8,"Category Name"),a.Sb(),a.Tb(9,"th"),a.Gc(10,"Max. Adult"),a.Sb(),a.Tb(11,"th"),a.Gc(12,"Max. Child"),a.Sb(),a.Tb(13,"th"),a.Gc(14,"Images"),a.Sb(),a.Pb(15,"th"),a.Sb(),a.Sb(),a.Tb(16,"tbody"),a.Ec(17,A,18,7,"tr",9),a.Tb(18,"tr"),a.Tb(19,"td",10),a.Tb(20,"div",11),a.Tb(21,"button",12),a.Pb(22,"i",13),a.Gc(23," Add Category "),a.Sb(),a.Ec(24,L,1,1,"pagination",14),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e){var n=a.gc();a.Bb(3),a.oc("ngIf",n.message.length>0),a.Bb(14),a.oc("ngForOf",null==n.categoryPage?null:n.categoryPage.content),a.Bb(7),a.oc("ngIf",null!=n.categoryPage)}}var M=[{path:"add",component:g},{path:"add/:id",component:g},{path:"details/:id",component:C},{path:"",component:function(){function e(e,t){this.hotelService=e,this.categoryService=t,this.message=""}return e.prototype.ngOnInit=function(){this.getMyCategories()},e.prototype.getMyCategories=function(e){return void 0===e&&(e=0),P(this,void 0,void 0,function(){var t=this;return B(this,function(n){return this.categoryService.getServiceAdminCategoryPage(e).subscribe(function(e){t.categoryPage=e}),[2]})})},e.prototype.onDelete=function(e,t){return P(this,void 0,void 0,function(){var n=this;return B(this,function(r){switch(r.label){case 0:return confirm('Are you sure to delete catgory "'+t+'" with id '+e)?[4,this.categoryService.deleteServiceAdminCategory(e).subscribe(function(e){n.getMyCategories(),n.message="success"==e.response?"Category deleted successfully":"Category deleted Failed"})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.clear=function(){this.message=""},e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a),a.Ob(o.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-list"]],decls:7,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[1,"text-center"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","5"],[1,"d-flex","justify-content-between"],["routerLink","/dashboard/service-admin/category/add",1,"btn","btn-sm","btn-success"],[1,"fa","fa-plus"],[3,"page","getPage",4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[2,"text-decoration","none",3,"routerLink"],[1,"btn","btn-primary","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-success","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-warning","btn-sm","mx-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[3,"page","getPage"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"span",1),a.Gc(2,"Category List"),a.Sb(),a.Sb(),a.Tb(3,"div",0),a.Tb(4,"div",2),a.Pb(5,"div",3),a.Ec(6,O,25,3,"div",4),a.Sb(),a.Sb()),2&e&&(a.Bb(6),a.oc("ngIf",null!=(null==t.categoryPage?null:t.categoryPage.content)))},directives:[s.p,s.o,r.c,r.d,G.a],styles:[""]}),e}()}],E=function(){function e(){}return e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({factory:function(t){return new(t||e)},imports:[[i.a,r.e.forChild(M)]]}),e}()}}]);