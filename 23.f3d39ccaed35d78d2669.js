(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{R0GP:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return D}),n.d(t,"ServiceAdminCategoryModule",function(){return O});var r=n("iInd"),i=n("KZX/"),o=n("3M1h"),c=n("d26D"),a=n("8Y7J"),l=n("SVse"),s=n("cGek"),u=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((r=r.apply(e,t||[])).next())})},b=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function d(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",5),a.Qb(1,"category-form",6),a.bc("create",function(e){return a.wc(n),a.dc().onCreate(e)})("update",function(e){return a.wc(n),a.dc().onUpdate(e)}),a.Pb(),a.Pb()}if(2&e){var r=a.dc();a.zb(1),a.lc("hotel",r.hotel)("category",r.category)}}var g=function(){function e(e,t,n,r){this.hotelService=e,this.categoryService=t,this.activeRoute=n,this.router=r,this.id=n.snapshot.params.id}return e.prototype.ngOnInit=function(){this.id&&this.getServiceAdminCategory(this.id),this.getServiceAdminHotel()},e.prototype.getServiceAdminHotel=function(){return u(this,void 0,void 0,function(){var e=this;return b(this,function(t){return this.hotelService.getServiceAdminHotel().subscribe(function(t){e.hotel=t}),[2]})})},e.prototype.getServiceAdminCategory=function(e){return u(this,void 0,void 0,function(){var t=this;return b(this,function(n){return this.categoryService.getServiceAdminCategory(e).subscribe(function(e){t.category=e}),[2]})})},e.prototype.onCreate=function(e){var t=this;this.categoryService.saveAdminServiceCategory(e).subscribe(function(e){t.router.navigate(["/dashboard/service-admin/category"])})},e.prototype.onUpdate=function(e){var t=this;e.id=this.category.id,this.categoryService.saveAdminServiceCategory(e).subscribe(function(e){t.router.navigate(["/dashboard/service-admin/category"])})},e.\u0275fac=function(t){return new(t||e)(a.Lb(c.a),a.Lb(o.a),a.Lb(r.a),a.Lb(r.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-add"]],decls:7,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],[3,"hotel","category","create","update"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Add Category"),a.Pb(),a.Pb(),a.Qb(3,"div",0),a.Qb(4,"div",2),a.Mb(5,"div",3),a.Dc(6,d,2,2,"div",4),a.Pb(),a.Pb()),2&e&&(a.zb(6),a.lc("ngIf",null!=t.hotel&&t.hotel.id))},directives:[l.p,s.a],styles:[""]}),e}(),f=n("R/zX"),p=n("LLt/"),h=n("eIep"),v=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((r=r.apply(e,t||[])).next())})},m=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function y(e,t){if(1&e&&a.Mb(0,"img",22),2&e){var n=a.dc();a.lc("src",n.imageUrl,a.yc)}}function P(e,t){if(1&e&&(a.Qb(0,"div",23),a.Fc(1),a.Pb()),2&e){var n=a.dc();a.zb(1),a.Hc(" ",n.errorMessage," ")}}function w(e,t){if(1&e){var n=a.Rb();a.Qb(0,"p"),a.Qb(1,"input",24),a.bc("change",function(e){return a.wc(n),a.dc().fileChange(e)}),a.Pb(),a.Pb()}}function Q(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1," Uploaded "),a.Mb(2,"i",25),a.Pb())}function x(e,t){if(1&e){var n=a.Rb();a.Qb(0,"button",26),a.bc("click",function(){return a.wc(n),a.dc().startUpload()}),a.Fc(1," Upload "),a.Pb()}}function I(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div"),a.Qb(1,"button",28),a.bc("click",function(){a.wc(n);var e=a.dc().$implicit;return a.dc().deleteImage(e)}),a.Qb(2,"span"),a.Fc(3,"\xd7"),a.Pb(),a.Pb(),a.Qb(4,"div",29),a.Mb(5,"img",30),a.Pb(),a.Pb()}if(2&e){var r=a.dc().$implicit;a.zb(5),a.lc("src",r,a.yc)}}function C(e,t){if(1&e&&(a.Qb(0,"div",27),a.Dc(1,I,6,1,"div",16),a.Pb()),2&e){var n=t.$implicit;a.zb(1),a.lc("ngIf",n.length)}}var k=function(){function e(e,t,n,r){this.ng2ImgMax=e,this.auth=t,this.categoryService=n,this.activeRoute=r,this.categoryImagesUrl=[],this.errorMessage="",this.id=r.snapshot.params.id}return e.prototype.ngOnInit=function(){this.id&&(this.getServiceAdminCategory(this.id),this.loadCategoryImages())},e.prototype.getServiceAdminCategory=function(e){return v(this,void 0,void 0,function(){var t=this;return m(this,function(n){switch(n.label){case 0:return[4,this.categoryService.getServiceAdminCategory(e).subscribe(function(e){t.category=e})];case 1:return n.sent(),[2]}})})},e.prototype.loadCategoryImages=function(){return v(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return[4,this.categoryService.getCategoryImageUrls(this.id).subscribe(function(t){e.categoryImagesUrl=[],t.forEach(function(t){var n=e.categoryService.imageUrl+t+"?access_token="+e.auth.getAccessToken();e.categoryImagesUrl.push(n)})},function(e){console.log(e)})];case 1:return t.sent(),[2]}})})},e.prototype.previewFile=function(e){var t=this,n=new FileReader;n.onload=function(e){t.imageUrl=e.target.result},n.readAsDataURL(e.target.files[0])},e.prototype.fileChange=function(e){this.previewFile(e),this.fileList=e.target.files,this.progressPercentage=0,this.errorMessage=""},e.prototype.startUpload=function(){var e=this;if(this.fileList.length>0){var t=new FormData,n=this.fileList[0];this.ng2ImgMax.resizeImage(n,800,600).pipe(Object(h.a)(function(r){return t.append("image",r,n.name),e.categoryService.uploadServiceAdminCategoryImage(e.id,t)})).subscribe(function(t){e.imageUrl="",e.fileList=null,e.progressPercentage=100,e.loadCategoryImages()},function(t){console.log(t),e.errorMessage=t._body})}},e.prototype.deleteImage=function(e){var t=this,n=new URL(e).pathname.split("/"),r=parseInt(n[n.length-1]);this.categoryService.deleteServiceAdminCategoryImage(n[n.length-3],r).subscribe(function(e){t.categoryImagesUrl.splice(r,1,"")},function(e){console.log("Image could not delete")})},e.prototype.resizeImage=function(e,t,n){return this.ng2ImgMax.resizeImage(e,t,n)},e.\u0275fac=function(t){return new(t||e)(a.Lb(f.b),a.Lb(p.a),a.Lb(o.a),a.Lb(r.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-details"]],decls:40,vars:10,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],[1,"col-md-3","p-0"],[1,"list-group"],[1,"list-group-item","active"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","badge-primary","badge-pill"],[1,"list-group-item","list-group-item-action","list-group-item-info","text-center",3,"routerLink"],[1,"fa","fa-pencil-square-o"],[1,"col-md-9"],[1,"form-row","uploadbox"],[1,"col-md-4"],["class","img-thumbnail","alt","","style","width: 100%; height: auto;",3,"src",4,"ngIf"],[1,"col-md-8","border","p-2","rounded"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-dark btn-sm mr-1",3,"click",4,"ngIf"],["routerLink","/dashboard/service-admin/category",1,"btn","btn-outline-dark","btn-sm"],[1,"col-md-10","offset-md-1","my-2","raised"],[1,"row","py-3"],["class","col-md-3 pb-3",4,"ngFor","ngForOf"],["alt","",1,"img-thumbnail",2,"width","100%","height","auto",3,"src"],[1,"alert","alert-danger"],["type","file","placeholder","Upload file","accept","image/x-png,image/gif,image/jpeg",3,"change"],[1,"fa","fa-check-square-o","text-success"],["type","button",1,"btn","btn-outline-dark","btn-sm","mr-1",3,"click"],[1,"col-md-3","pb-3"],["type","button",1,"delete",3,"click"],[1,"image-panel"],["alt","",1,"img-thumbnail",3,"src"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Category Details"),a.Pb(),a.Pb(),a.Qb(3,"div",0),a.Qb(4,"div",2),a.Qb(5,"div",3),a.Qb(6,"ul",4),a.Qb(7,"li",5),a.Qb(8,"h4"),a.Fc(9),a.Pb(),a.Pb(),a.Qb(10,"li",6),a.Fc(11," Maximum number of Adult "),a.Qb(12,"span",7),a.Fc(13),a.Pb(),a.Pb(),a.Qb(14,"li",6),a.Fc(15," Maximum number of child "),a.Qb(16,"span",7),a.Fc(17),a.Pb(),a.Pb(),a.Qb(18,"a",8),a.Mb(19,"i",9),a.Fc(20," Edit category "),a.Pb(),a.Pb(),a.Pb(),a.Qb(21,"div",10),a.Qb(22,"div",11),a.Qb(23,"div",12),a.Dc(24,y,1,1,"img",13),a.Pb(),a.Qb(25,"div",14),a.Dc(26,P,2,1,"div",15),a.Qb(27,"div"),a.Fc(28," Please select a image to upload "),a.Mb(29,"br"),a.Fc(30," Image ratio should be 16:9 (i.e. height:450px, width:800px) "),a.Pb(),a.Dc(31,w,2,0,"p",16),a.Dc(32,Q,3,0,"div",16),a.Qb(33,"div"),a.Dc(34,x,2,0,"button",17),a.Qb(35,"a",18),a.Fc(36," Back "),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(37,"div",19),a.Qb(38,"div",20),a.Dc(39,C,2,1,"div",21),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e&&(a.zb(9),a.Gc(null==t.category?null:t.category.name),a.zb(4),a.Hc(" ",null==t.category?null:t.category.maxAdultNumber," "),a.zb(4),a.Hc(" ",null==t.category?null:t.category.maxChildNumber," "),a.zb(1),a.nc("routerLink","/dashboard/service-admin/category/add/",t.id,""),a.zb(6),a.lc("ngIf",t.imageUrl),a.zb(2),a.lc("ngIf",t.errorMessage.length>0),a.zb(5),a.lc("ngIf",t.categoryImagesUrl.length<5),a.zb(1),a.lc("ngIf",100==t.progressPercentage),a.zb(2),a.lc("ngIf",t.fileList),a.zb(5),a.lc("ngForOf",t.categoryImagesUrl))},directives:[r.d,l.p,l.o],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer!important;font-size:20px;position:absolute;color:#fff;border:none;background:none;right:10px;top:0;line-height:1;z-index:99;padding:0}.delete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:20px;width:20px;background-color:red;border-radius:50%;display:block}.uploadbox[_ngcontent-%COMP%]{font-size:18px;min-height:230px}.img-thumbnail[_ngcontent-%COMP%]{margin:0 5px;height:135px;width:240px}"]}),e}(),F=n("uEz7"),S=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}l((r=r.apply(e,t||[])).next())})},M=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function z(e,t){if(1&e){var n=a.Rb();a.Qb(0,"div",16),a.Fc(1),a.Qb(2,"button",17),a.bc("click",function(){return a.wc(n),a.dc(2).clear()}),a.Fc(3,"Clear"),a.Pb(),a.Pb()}if(2&e){var r=a.dc(2);a.zb(1),a.Hc(" ",r.message," ")}}function L(e,t){if(1&e){var n=a.Rb();a.Qb(0,"tr"),a.Qb(1,"td"),a.Qb(2,"a",18),a.Fc(3),a.Pb(),a.Pb(),a.Qb(4,"td"),a.Fc(5),a.Pb(),a.Qb(6,"td"),a.Fc(7),a.Pb(),a.Qb(8,"td"),a.Qb(9,"div",19),a.Qb(10,"a",20),a.Fc(11,"Images"),a.Pb(),a.Qb(12,"a",20),a.Fc(13,"Edit"),a.Pb(),a.Qb(14,"button",21),a.bc("click",function(){a.wc(n);var e=t.$implicit;return a.dc(2).onDelete(e.id,e.name)}),a.Fc(15," Delete "),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&e){var r=t.$implicit;a.zb(2),a.nc("routerLink","/dashboard/service-admin/category/details/",r.id,""),a.zb(1),a.Hc(" ",r.name," "),a.zb(2),a.Gc(r.maxAdultNumber),a.zb(2),a.Gc(r.maxChildNumber),a.zb(3),a.nc("routerLink","/dashboard/service-admin/category/details/",r.id,""),a.zb(2),a.nc("routerLink","/dashboard/service-admin/category/add/",r.id,"")}}function A(e,t){if(1&e){var n=a.Rb();a.Qb(0,"pagination",22),a.bc("getPage",function(e){a.wc(n);var t=a.dc(2);return t.getCategoryPage(t.hotelId,e)}),a.Pb()}if(2&e){var r=a.dc(2);a.lc("page",r.categoryPage)}}function U(e,t){if(1&e&&(a.Qb(0,"div",6),a.Dc(1,z,4,1,"div",7),a.Qb(2,"table",8),a.Qb(3,"thead"),a.Qb(4,"tr"),a.Qb(5,"td",9),a.Qb(6,"h5"),a.Fc(7," Category List "),a.Pb(),a.Pb(),a.Pb(),a.Qb(8,"tr"),a.Qb(9,"th"),a.Fc(10,"Category Name"),a.Pb(),a.Qb(11,"th"),a.Fc(12,"Max. Adult"),a.Pb(),a.Qb(13,"th"),a.Fc(14,"Max. Child"),a.Pb(),a.Mb(15,"th"),a.Pb(),a.Pb(),a.Qb(16,"tbody"),a.Dc(17,L,16,6,"tr",10),a.Qb(18,"tr"),a.Qb(19,"td",11),a.Qb(20,"div",12),a.Qb(21,"button",13),a.Mb(22,"i",14),a.Fc(23," Add Category "),a.Pb(),a.Dc(24,A,1,1,"pagination",15),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e){var n=a.dc();a.zb(1),a.lc("ngIf",n.message.length>0),a.zb(16),a.lc("ngForOf",null==n.categoryPage?null:n.categoryPage.content),a.zb(7),a.lc("ngIf",null!=n.categoryPage)}}var D=[{path:"add",component:g},{path:"add/:id",component:g},{path:"details/:id",component:k},{path:"",component:function(){function e(e,t){this.hotelService=e,this.categoryService=t,this.message=""}return e.prototype.ngOnInit=function(){this.getMyCategories()},e.prototype.getMyCategories=function(e){return void 0===e&&(e=0),S(this,void 0,void 0,function(){var t=this;return M(this,function(n){return this.categoryService.getServiceAdminCategoryPage(e).subscribe(function(e){t.categoryPage=e}),[2]})})},e.prototype.onDelete=function(e,t){return S(this,void 0,void 0,function(){var n=this;return M(this,function(r){switch(r.label){case 0:return confirm('Are you sure to delete catgory "'+t+'" with id '+e)?[4,this.categoryService.deleteServiceAdminCategory(e).subscribe(function(e){n.getMyCategories(),n.message="success"==e.response?"Category deleted successfully":"Category deleted Failed"})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.clear=function(){this.message=""},e.\u0275fac=function(t){return new(t||e)(a.Lb(c.a),a.Lb(o.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-list"]],decls:7,vars:1,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"container"],[1,"row"],[1,"col-md-3","p-0"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"table","border","table-responsive-sm"],["colspan","4",2,"background-color","#e9ecef"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"d-flex","justify-content-between"],["routerLink","/dashboard/service-admin/category/add",1,"btn","btn-sm","btn-success"],[1,"fa","fa-plus"],[3,"page","getPage",4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-warning","btn-sm",3,"click"],[2,"text-decoration","none",3,"routerLink"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"btn","btn-sm","btn-secondary",3,"routerLink"],[1,"btn","btn-sm","btn-secondary",3,"click"],[3,"page","getPage"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"span",1),a.Fc(2,"Category List"),a.Pb(),a.Pb(),a.Qb(3,"div",2),a.Qb(4,"div",3),a.Mb(5,"div",4),a.Dc(6,U,25,3,"div",5),a.Pb(),a.Pb()),2&e&&(a.zb(6),a.lc("ngIf",null!=(null==t.categoryPage?null:t.categoryPage.content)))},directives:[l.p,l.o,r.c,r.d,F.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}()}],O=function(){function e(){}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[i.a,r.e.forChild(D)]]}),e}()}}]);