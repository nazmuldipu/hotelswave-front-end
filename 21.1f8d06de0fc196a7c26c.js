(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{IxGd:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return ae}),n.d(t,"UsersModule",function(){return le});var r=n("iInd"),o=n("KZX/"),i=n("8Y7J"),c=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Fb({type:e,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(i.Qb(0,"p"),i.Fc(1," add works!\n"),i.Pb())},styles:[""]}),e}(),b=n("ITiG"),s=n("IzEk"),u=n("s7LF"),a=n("SVse"),l=n("uEz7"),f=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},d=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function g(e,t){if(1&e&&(i.Qb(0,"span"),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.zb(1),i.Hc(" ",n.name,", ")}}function h(e,t){if(1&e){var n=i.Rb();i.Qb(0,"div",25),i.Qb(1,"div",26),i.Qb(2,"h4",27),i.Fc(3,"User details"),i.Pb(),i.Qb(4,"table",28),i.Qb(5,"tr"),i.Qb(6,"td"),i.Fc(7,"id"),i.Pb(),i.Qb(8,"td"),i.Fc(9),i.Pb(),i.Pb(),i.Qb(10,"tr"),i.Qb(11,"td"),i.Fc(12,"name"),i.Pb(),i.Qb(13,"td"),i.Fc(14),i.Pb(),i.Pb(),i.Qb(15,"tr"),i.Qb(16,"td"),i.Fc(17,"Username"),i.Pb(),i.Qb(18,"td"),i.Fc(19),i.Pb(),i.Pb(),i.Qb(20,"tr"),i.Qb(21,"td"),i.Fc(22,"Email"),i.Pb(),i.Qb(23,"td"),i.Fc(24),i.Pb(),i.Pb(),i.Qb(25,"tr"),i.Qb(26,"td"),i.Fc(27,"Phone Number"),i.Pb(),i.Qb(28,"td"),i.Fc(29),i.Pb(),i.Pb(),i.Qb(30,"tr"),i.Qb(31,"td"),i.Fc(32,"Enabled"),i.Pb(),i.Qb(33,"td"),i.Mb(34,"i",29),i.Pb(),i.Pb(),i.Qb(35,"tr"),i.Qb(36,"td"),i.Fc(37,"Roles"),i.Pb(),i.Qb(38,"td"),i.Dc(39,g,2,1,"span",22),i.Pb(),i.Pb(),i.Pb(),i.Qb(40,"span"),i.Qb(41,"a",30),i.bc("click",function(){i.wc(n);var e=i.dc();return e.chageRole(e.user.id,"ROLE_USER")}),i.Fc(42," User "),i.Pb(),i.Qb(43,"a",30),i.bc("click",function(){i.wc(n);var e=i.dc();return e.chageRole(e.user.id,"ROLE_HOTEL_AGENT")}),i.Fc(44," Hotel Agent "),i.Pb(),i.Qb(45,"a",31),i.bc("click",function(){i.wc(n);var e=i.dc();return e.chageRole(e.user.id,"ROLE_HOTEL_ADMIN")}),i.Fc(46," Hotel Admin "),i.Pb(),i.Qb(47,"a",31),i.bc("click",function(){i.wc(n);var e=i.dc();return e.chageRole(e.user.id,"ROLE_AGENT")}),i.Fc(48," Agent "),i.Pb(),i.Qb(49,"button",32),i.bc("click",function(){i.wc(n);var e=i.dc();return e.activate(e.user.id)}),i.Mb(50,"i",33),i.Pb(),i.Qb(51,"button",34),i.bc("click",function(){return i.wc(n),i.dc().clear()}),i.Fc(52," Close "),i.Pb(),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=i.dc();i.zb(9),i.Gc(r.user.id),i.zb(5),i.Gc(r.user.name),i.zb(5),i.Gc(r.user.username),i.zb(5),i.Gc(r.user.email),i.zb(5),i.Gc(r.user.phoneNumber),i.zb(5),i.lc("ngClass",r.user.enabled?"fa-check":"fa-times"),i.zb(5),i.lc("ngForOf",r.user.roles),i.zb(10),i.lc("ngClass",r.user.enabled?"btn-success":"btn-danger")}}function p(e,t){if(1&e&&(i.Qb(0,"span",38),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.lc("ngClass",t.index%2==0?"badge-success":"badge-info"),i.zb(1),i.Hc(" ",n.name," ")}}function m(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Dc(3,p,2,2,"span",35),i.Pb(),i.Qb(4,"td"),i.Fc(5),i.Mb(6,"br"),i.Fc(7),i.Pb(),i.Qb(8,"td"),i.Fc(9),i.ec(10,"date"),i.Pb(),i.Qb(11,"td"),i.Fc(12),i.Pb(),i.Qb(13,"td"),i.Qb(14,"button",36),i.bc("click",function(){i.wc(n);var e=t.$implicit;return i.dc().onEdit(e.id)}),i.Mb(15,"i",37),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Hc(" ",r.name," "),i.zb(1),i.lc("ngForOf",null==r?null:r.roles),i.zb(2),i.Hc(" ",r.phoneNumber," "),i.zb(2),i.Hc(" ",r.email," "),i.zb(2),i.Gc(i.gc(10,6,r.created,"MMM d, y, h:mm:ss a")),i.zb(3),i.Gc(r.enabled?"ACTIVE":"INACTIVE")}}function P(e,t){if(1&e){var n=i.Rb();i.Qb(0,"pagination",39),i.bc("getPage",function(e){i.wc(n);var t=i.dc();return t.getUserPage(t.userQuery,t.role,e)}),i.Pb()}if(2&e){var r=i.dc();i.lc("page",r.users)("short",r.short)}}var v=function(){function e(e){this.userService=e,this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage()},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),f(this,void 0,void 0,function(){var r=this;return d(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.users=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onRoleChange=function(e){this.role=e.length>0?e:null,this.getUserPage(this.userQuery,this.role)},e.prototype.chageRole=function(e,t){var n=this;this.userService.changeUserRole(e,t).pipe(Object(s.a)(1)).subscribe(function(e){n.users.content.splice(n.users.content.findIndex(function(t){return t.id===e.id}),1,e),n.user&&n.getUser(n.user.id)},function(e){return console.log("Role change failed",e)})},e.prototype.onEdit=function(e){var t=this.users.content.find(function(t){return t.id===e});this.user=t},e.prototype.activate=function(e){var t,n=this;t=this.user?!this.user.enabled:!this.users.content.find(function(t){return t.id===e}).enabled,this.userService.changeUserEnable(e,t).pipe(Object(s.a)(1)).subscribe(function(e){n.users.content.splice(n.users.content.findIndex(function(t){return t.id===e.id}),1,e),n.user&&n.getUser(n.user.id)},function(e){return console.log("Status change failed",e)})},e.prototype.getUser=function(e){return f(this,void 0,void 0,function(){var t=this;return d(this,function(n){switch(n.label){case 0:return[4,this.userService.getUer(e).subscribe(function(e){t.user=e})];case 1:return n.sent(),[2]}})})},e.prototype.clear=function(){this.user=null},e.\u0275fac=function(t){return new(t||e)(i.Lb(b.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-list"]],decls:50,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"pull-right"],[1,"form-control",3,"change"],["value","","selected",""],["value","User"],["value","Service Admin"],["value","Service Agent"],["value","Agent"],["value","Admin"],[1,"row","m-0"],["class","offset-md-3 col-md-6 p-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-hover","table-responsive-sm","shadow"],[1,"pl-3"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","short","getPage",4,"ngIf"],[1,"offset-md-3","col-md-6","p-2"],[1,"p-4","shadow"],[1,"text-center"],[1,"table"],[1,"fa",3,"ngClass"],[1,"btn","btn-info","btn-sm","raised","mr-1",3,"click"],[1,"btn","btn-success","btn-sm","raised","mr-1",3,"click"],[1,"btn","btn-sm","raised",3,"ngClass","click"],[1,"fa","fa-power-off"],[1,"btn","btn-sm","btn-danger","float-right",3,"click"],["class","badge badge-pill",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"badge","badge-pill",3,"ngClass"],[3,"page","short","getPage"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"span",1),i.Fc(2," All User "),i.Qb(3,"span",2),i.Qb(4,"select",3),i.bc("change",function(e){return t.onRoleChange(e.target.value)}),i.Qb(5,"option",4),i.Fc(6,"All"),i.Pb(),i.Qb(7,"option",5),i.Fc(8,"User"),i.Pb(),i.Qb(9,"option",6),i.Fc(10,"Hotel Admin"),i.Pb(),i.Qb(11,"option",7),i.Fc(12,"Hotel Agent"),i.Pb(),i.Qb(13,"option",8),i.Fc(14,"Agent"),i.Pb(),i.Qb(15,"option",9),i.Fc(16,"Admin "),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(17,"div",0),i.Qb(18,"div",10),i.Dc(19,h,53,8,"div",11),i.Pb(),i.Qb(20,"div",12),i.Qb(21,"div",13),i.Qb(22,"form",14),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(23,"div",15),i.Qb(24,"div",16),i.Qb(25,"div",17),i.Mb(26,"i",18),i.Fc(27,"\xa0 Search"),i.Pb(),i.Pb(),i.Qb(28,"input",19),i.bc("ngModelChange",function(e){return t.userQuery=e}),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(29,"div",10),i.Qb(30,"table",20),i.Qb(31,"thead"),i.Qb(32,"tr"),i.Qb(33,"th",21),i.Fc(34,"Name"),i.Pb(),i.Qb(35,"th"),i.Fc(36,"Phone "),i.Mb(37,"br"),i.Fc(38,"Email"),i.Pb(),i.Qb(39,"th"),i.Fc(40,"Registration time"),i.Pb(),i.Qb(41,"th"),i.Fc(42,"Staus"),i.Pb(),i.Mb(43,"th"),i.Pb(),i.Pb(),i.Qb(44,"tbody"),i.Dc(45,m,16,9,"tr",22),i.Pb(),i.Qb(46,"tfoot"),i.Qb(47,"tr"),i.Qb(48,"td",23),i.Dc(49,P,1,2,"pagination",24),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(19),i.lc("ngIf",t.user),i.zb(9),i.lc("ngModel",t.userQuery),i.zb(17),i.lc("ngForOf",null==t.users?null:t.users.content),i.zb(4),i.lc("ngIf",null!=t.users))},directives:[u.q,u.w,a.q,u.x,u.n,u.o,u.b,u.m,u.p,a.p,a.o,l.a],pipes:[a.f],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),Q=n("d26D"),y=function(e){return e.ROLE_ADMIN="Admin",e.ROLE_AGENT="Agent",e.ROLE_SERVICE_ADMIN="Service Admin",e.ROLE_SERVICE_AGENT="Service Agent",e.ROLE_USER="User",e}({});function F(e,t){if(1&e&&(i.Qb(0,"option",8),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.lc("value",n.key),i.zb(1),i.Hc(" ",n.value," ")}}var w=function(e){return{disabled:e}};function z(e,t){if(1&e&&(i.Qb(0,"div",9),i.Qb(1,"button",10),i.Fc(2," Submit "),i.Pb(),i.Pb()),2&e){var n=i.dc();i.zb(1),i.lc("ngClass",i.pc(1,w,n.form.invalid))}}var x=function(){function e(e){this.builder=e,this.role=new i.n,this.roleEnum=y}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.createForm=function(){this.form=this.builder.group({role:["",u.v.required]})},e.prototype.submit=function(){this.form.valid&&(this.role.emit(this.form.value),this.form.reset())},e.\u0275fac=function(t){return new(t||e)(i.Lb(u.d))},e.\u0275cmp=i.Fb({type:e,selectors:[["assign-user-form"]],inputs:{hotel:"hotel",user:"user"},outputs:{role:"role"},decls:18,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],[1,"form-control"],["for","role"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex flex-row-reverse bd-highlight",4,"ngIf"],[3,"value"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","submit","type","submit",1,"btn","btn-success","mx-1",3,"ngClass"]],template:function(e,t){1&e&&(i.Qb(0,"form",0),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(1,"div",1),i.Qb(2,"label",2),i.Fc(3,"Hotel Name *"),i.Pb(),i.Qb(4,"label",3),i.Fc(5),i.Pb(),i.Pb(),i.Qb(6,"div",1),i.Qb(7,"label",2),i.Fc(8,"User Name *"),i.Pb(),i.Qb(9,"label",3),i.Fc(10),i.Pb(),i.Pb(),i.Qb(11,"div",1),i.Qb(12,"label",4),i.Fc(13,"Role "),i.Pb(),i.Qb(14,"select",5),i.Dc(15,F,2,2,"option",6),i.ec(16,"keyvalue"),i.Pb(),i.Pb(),i.Dc(17,z,3,3,"div",7),i.Pb()),2&e&&(i.lc("formGroup",t.form),i.zb(5),i.Hc(" ",null==t.hotel?null:t.hotel.name," "),i.zb(5),i.Hc(" ",null==t.user?null:t.user.name," "),i.zb(5),i.lc("ngForOf",i.fc(16,5,t.roleEnum)),i.zb(2),i.lc("ngIf",(null==t.hotel?null:t.hotel.id)&&(null==t.user?null:t.user.id)))},directives:[u.x,u.n,u.g,u.u,u.m,u.f,a.p,a.q,u.q,u.w,a.o],pipes:[a.k],styles:[""]}),e}(),M=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},C=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function O(e,t){if(1&e){var n=i.Rb();i.Qb(0,"div",21),i.Qb(1,"div",22),i.Qb(2,"h4",7),i.Fc(3,"Assign user"),i.Pb(),i.Qb(4,"assign-user-form",23),i.bc("role",function(e){return i.wc(n),i.dc().onSaveRole(e)}),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=i.dc();i.zb(4),i.lc("hotel",r.hotel)("user",r.user)}}function S(e,t){if(1&e&&(i.Qb(0,"span"),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.zb(1),i.Hc(" ",n.name," ")}}function U(e,t){if(1&e&&(i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Pb(),i.Qb(3,"td"),i.Fc(4),i.Pb(),i.Qb(5,"td"),i.Dc(6,S,2,1,"span",20),i.Pb(),i.Pb()),2&e){var n=t.$implicit;i.zb(2),i.Hc(" ",n.name," "),i.zb(2),i.Hc(" ",n.phoneNumber," "),i.zb(2),i.lc("ngForOf",null==n?null:n.roles)}}function I(e,t){if(1&e&&(i.Qb(0,"div",24),i.Qb(1,"h3",7),i.Fc(2),i.Pb(),i.Qb(3,"table",14),i.Qb(4,"thead"),i.Qb(5,"tr"),i.Qb(6,"th"),i.Fc(7,"Name"),i.Pb(),i.Qb(8,"th"),i.Fc(9,"Phone, Email"),i.Pb(),i.Qb(10,"th"),i.Fc(11,"Staus"),i.Pb(),i.Pb(),i.Pb(),i.Qb(12,"tbody"),i.Dc(13,U,7,3,"tr",20),i.Pb(),i.Pb(),i.Pb()),2&e){var n=i.dc();i.zb(2),i.Hc("",n.hotel.name," - User list"),i.zb(11),i.lc("ngForOf",n.hotelUser)}}function A(e,t){if(1&e&&(i.Qb(0,"span",28),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.lc("ngClass",t.index%2==0?"badge-success":"badge-info"),i.zb(1),i.Hc(" ",n.name," ")}}function E(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Mb(3,"br"),i.Dc(4,A,2,2,"span",25),i.Pb(),i.Qb(5,"td"),i.Fc(6),i.Mb(7,"br"),i.Fc(8),i.Pb(),i.Qb(9,"td"),i.Fc(10),i.Pb(),i.Qb(11,"td"),i.Qb(12,"button",26),i.bc("click",function(){i.wc(n);var e=t.$implicit;return i.dc(2).onSelectUser(e.id)}),i.Mb(13,"i",27),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Hc(" ",r.name," "),i.zb(2),i.lc("ngForOf",null==r?null:r.roles),i.zb(2),i.Hc(" ",r.phoneNumber," "),i.zb(2),i.Hc(" ",r.email," "),i.zb(2),i.Gc(r.enabled?"ACTIVE":"INACTIVE")}}function N(e,t){if(1&e&&(i.Qb(0,"tbody"),i.Dc(1,E,14,5,"tr",20),i.Pb()),2&e){var n=i.dc();i.zb(1),i.lc("ngForOf",n.userPage.content)}}function k(e,t){if(1&e){var n=i.Rb();i.Qb(0,"pagination",29),i.bc("getPage",function(e){i.wc(n);var t=i.dc();return t.getUserPage(t.userQuery,t.role,e)}),i.Pb()}if(2&e){var r=i.dc();i.lc("page",r.userPage)("short",r.short)}}function R(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Pb(),i.Qb(3,"td"),i.Fc(4),i.Pb(),i.Qb(5,"td"),i.Fc(6),i.Pb(),i.Qb(7,"td"),i.Qb(8,"button",26),i.bc("click",function(){i.wc(n);var e=t.$implicit;return i.dc().onSelectHotel(e.id)}),i.Mb(9,"i",27),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Gc(r.name),i.zb(2),i.Gc(r.phoneNumber),i.zb(2),i.Gc(r.enabled)}}function H(e,t){if(1&e){var n=i.Rb();i.Qb(0,"pagination",29),i.bc("getPage",function(e){return i.wc(n),i.dc().getAdminHotelPage(e)}),i.Pb()}if(2&e){var r=i.dc();i.lc("page",r.hotelPage)("short",r.short)}}var D=function(){function e(e,t){this.hotelService=e,this.userService=t,this.loading=!1,this.short=!0}return e.prototype.ngOnInit=function(){this.getAdminHotelPage(),this.getUserPage()},e.prototype.getAdminHotelPage=function(e){return void 0===e&&(e=0),M(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return localStorage.getItem("hotelId"),[4,this.hotelService.getAdminHotelPage(e,this.hotelName).subscribe(function(e){t.hotelPage=e})];case 1:return n.sent(),[2]}})})},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),M(this,void 0,void 0,function(){var r=this;return C(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.getAdminHotelUser=function(e){return M(this,void 0,void 0,function(){var t=this;return C(this,function(n){switch(n.label){case 0:return[4,this.userService.getHotelUsers(e).subscribe(function(e){t.hotelUser=e})];case 1:return n.sent(),[2]}})})},e.prototype.onSelectUser=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onSelectHotel=function(e){var t=this.hotelPage.content.find(function(t){return t.id===e});this.hotel=t,this.getAdminHotelUser(e)},e.prototype.onSaveRole=function(e){this.userService.assignHotel(this.user.id,this.hotel.id,e.role).subscribe(function(e){console.log("Assign user success")})},e.\u0275fac=function(t){return new(t||e)(i.Lb(Q.a),i.Lb(b.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-assign-user"]],decls:56,vars:8,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row","m-0"],["class","offset-md-3 col-md-4 p-2",4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border"],[4,"ngIf"],["colspan","4"],[3,"page","short","getPage",4,"ngIf"],[1,"form-group","mb-0"],["type","text","id","hotelName","name","hotelName","placeholder","Hotel name",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"offset-md-3","col-md-4","p-2"],[1,"p-4","shadow-sm"],[3,"hotel","user","role"],[1,"col-md-4"],["class","badge badge-pill",3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[1,"badge","badge-pill",3,"ngClass"],[3,"page","short","getPage"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"span",1),i.Fc(2," Assign User "),i.Pb(),i.Pb(),i.Qb(3,"div",0),i.Qb(4,"div",2),i.Dc(5,O,5,2,"div",3),i.Dc(6,I,14,2,"div",4),i.Pb(),i.Pb(),i.Qb(7,"div",0),i.Qb(8,"div",5),i.Qb(9,"div",6),i.Qb(10,"h3",7),i.Fc(11,"User list"),i.Pb(),i.Qb(12,"form",8),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(13,"div",9),i.Qb(14,"div",10),i.Qb(15,"div",11),i.Mb(16,"i",12),i.Fc(17,"\xa0 Search"),i.Pb(),i.Pb(),i.Qb(18,"input",13),i.bc("ngModelChange",function(e){return t.userQuery=e}),i.Pb(),i.Pb(),i.Pb(),i.Qb(19,"table",14),i.Qb(20,"thead"),i.Qb(21,"tr"),i.Qb(22,"th"),i.Fc(23,"Name"),i.Pb(),i.Qb(24,"th"),i.Fc(25,"Phone, Email"),i.Pb(),i.Qb(26,"th"),i.Fc(27,"Staus"),i.Pb(),i.Mb(28,"th"),i.Pb(),i.Pb(),i.Dc(29,N,2,1,"tbody",15),i.Qb(30,"tfoot"),i.Qb(31,"tr"),i.Qb(32,"td",16),i.Dc(33,k,1,2,"pagination",17),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(34,"div",6),i.Qb(35,"h3",7),i.Fc(36,"Hotel list"),i.Pb(),i.Qb(37,"form",8),i.bc("ngSubmit",function(){return t.getAdminHotelPage()}),i.Qb(38,"div",18),i.Qb(39,"input",19),i.bc("ngModelChange",function(e){return t.hotelName=e}),i.Pb(),i.Pb(),i.Pb(),i.Qb(40,"table",14),i.Qb(41,"thead"),i.Qb(42,"tr"),i.Qb(43,"th"),i.Fc(44,"Name"),i.Pb(),i.Qb(45,"th"),i.Fc(46,"Phone"),i.Pb(),i.Qb(47,"th"),i.Fc(48,"Enabled"),i.Pb(),i.Mb(49,"th"),i.Pb(),i.Pb(),i.Qb(50,"tbody"),i.Dc(51,R,10,3,"tr",20),i.Pb(),i.Qb(52,"tfoot"),i.Qb(53,"tr"),i.Qb(54,"td",16),i.Dc(55,H,1,2,"pagination",17),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(5),i.lc("ngIf",t.user||t.hotel),i.zb(1),i.lc("ngIf",t.hotelUser),i.zb(12),i.lc("ngModel",t.userQuery),i.zb(11),i.lc("ngIf",t.userPage),i.zb(4),i.lc("ngIf",null!=t.userPage),i.zb(6),i.lc("ngModel",t.hotelName),i.zb(12),i.lc("ngForOf",null==t.hotelPage?null:t.hotelPage.content),i.zb(4),i.lc("ngIf",null!=t.hotelPage))},directives:[a.q,u.x,u.n,u.o,u.b,u.m,u.p,a.p,x,a.o,l.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function _(e,t){1&e&&(i.Qb(0,"small",16),i.Fc(1," Name required "),i.Pb())}function L(e,t){if(1&e&&(i.Qb(0,"small",16),i.Qb(1,"div",17),i.Fc(2," Phone number required "),i.Pb(),i.Qb(3,"div",17),i.Fc(4," Phone number format 01934953023 "),i.Pb(),i.Pb()),2&e){var n=i.dc();i.zb(1),i.lc("hidden",!n.form.controls.phoneNumber.errors.required),i.zb(2),i.lc("hidden",!n.form.controls.phoneNumber.errors.pattern)}}function $(e,t){1&e&&(i.Qb(0,"small",16),i.Fc(1," Commission Percent required "),i.Pb())}function q(e,t){if(1&e){var n=i.Rb();i.Qb(0,"button",18),i.bc("click",function(){i.wc(n);var e=i.dc();return e.onRemoveAgent(e.user.id)}),i.Fc(1," Remove this agent "),i.Pb()}}var T=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},j=function(){function e(e){this.builder=e,this.create=new i.n,this.removeAgent=new i.n,this.exists=!1,this.createForm()}return e.prototype.ngOnChanges=function(e){e.user&&this.user&&this.user.id&&(this.exists=!0,this.form.patchValue(G({},{name:this.user.name,phoneNumber:this.user.phoneNumber,email:this.user.email,commissionPercent:this.user.commissionPercent})))},e.prototype.createForm=function(){this.form=this.builder.group({name:["",u.v.required],phoneNumber:["",[u.v.required,u.v.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],email:"",commissionPercent:["",u.v.required]})},e.prototype.submit=function(){if(this.form.valid){if(this.exists){var e=G(G({},this.user),this.form.value);this.create.emit(e)}else this.create.emit(this.form.value);this.onClear()}},e.prototype.onRemoveAgent=function(e){this.removeAgent.emit(e),this.onClear()},e.prototype.onClear=function(){this.form.reset(),this.exists=!1},e.\u0275fac=function(t){return new(t||e)(i.Lb(u.d))},e.\u0275cmp=i.Fb({type:e,selectors:[["admin-agent-form"]],inputs:{user:"user"},outputs:{create:"create",removeAgent:"removeAgent"},features:[i.xb],decls:27,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["id","name","placeholder","Name","formControlName","name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","phone"],["placeholder","Phone","id","phone","maxlength","11","formControlName","phoneNumber",1,"form-control"],["for","email"],["type","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["for","commissionPercent"],["id","commissionPercent","placeholder","Commission Percent","formControlName","commissionPercent",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight","my-2","mb-5"],["type","submit",1,"btn","btn-sm","mx-1",3,"ngClass"],["type","button","class","btn btn-sm btn-success mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"],["type","button",1,"btn","btn-sm","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(i.Qb(0,"form",0),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(1,"div",1),i.Qb(2,"div",2),i.Qb(3,"label",3),i.Fc(4,"Name *"),i.Pb(),i.Mb(5,"input",4),i.Dc(6,_,2,0,"small",5),i.Pb(),i.Qb(7,"div",2),i.Qb(8,"label",6),i.Fc(9,"Phone *"),i.Pb(),i.Mb(10,"input",7),i.Dc(11,L,5,2,"small",5),i.Pb(),i.Qb(12,"div",2),i.Qb(13,"label",8),i.Fc(14,"Email"),i.Pb(),i.Mb(15,"input",9),i.Pb(),i.Qb(16,"div",2),i.Qb(17,"label",10),i.Fc(18,"Commission Percent *"),i.Pb(),i.Mb(19,"input",11),i.Dc(20,$,2,0,"small",5),i.Pb(),i.Pb(),i.Qb(21,"div",12),i.Qb(22,"button",13),i.Fc(23),i.Pb(),i.Dc(24,q,2,0,"button",14),i.Qb(25,"button",15),i.bc("click",function(){return t.onClear()}),i.Fc(26," Clear "),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.lc("formGroup",t.form),i.zb(6),i.lc("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),i.zb(5),i.lc("ngIf",t.form.controls.phoneNumber.errors&&t.form.controls.phoneNumber.touched),i.zb(9),i.lc("ngIf",t.form.controls.commissionPercent.errors&&t.form.controls.commissionPercent.touched),i.zb(2),i.lc("ngClass",i.rc(7,T,t.form.invalid,t.exists,!t.exists)),i.zb(1),i.Hc(" ",t.exists?"Update":"Create"," User "),i.zb(1),i.lc("ngIf",t.exists))},directives:[u.x,u.n,u.g,u.b,u.m,u.f,a.q,u.j,a.o],styles:[""]}),e}(),V=n("HF3I"),B=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},J=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function K(e,t){1&e&&i.Mb(0,"loading")}function W(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Pb(),i.Qb(3,"td"),i.Fc(4),i.Pb(),i.Qb(5,"td"),i.Fc(6),i.Pb(),i.Qb(7,"td"),i.Fc(8),i.Pb(),i.Qb(9,"td"),i.Qb(10,"button",18),i.bc("click",function(){i.wc(n);var e=t.$implicit;return i.dc(2).onSelect(e.id)}),i.Mb(11,"i",19),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Gc(r.name),i.zb(2),i.Gc(r.phoneNumber),i.zb(2),i.Gc(r.commissionPercent),i.zb(2),i.Gc(r.email)}}function X(e,t){if(1&e){var n=i.Rb();i.Qb(0,"table",14),i.Qb(1,"thead"),i.Qb(2,"tr"),i.Qb(3,"th"),i.Fc(4,"Name"),i.Pb(),i.Qb(5,"th"),i.Fc(6,"Phone"),i.Pb(),i.Qb(7,"th"),i.Fc(8,"Commission Percent"),i.Pb(),i.Qb(9,"th"),i.Fc(10,"Email"),i.Pb(),i.Mb(11,"th"),i.Pb(),i.Pb(),i.Qb(12,"tbody"),i.Dc(13,W,12,4,"tr",15),i.Pb(),i.Qb(14,"tfoot"),i.Qb(15,"tr"),i.Qb(16,"td",16),i.Qb(17,"pagination",17),i.bc("getPage",function(e){return i.wc(n),i.dc().getUserPage(e)}),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=i.dc();i.zb(13),i.lc("ngForOf",null==r.userPage?null:r.userPage.content),i.zb(4),i.lc("page",r.userPage)}}var Y=function(){function e(e){this.userService=e,this.role="Agent",this.loading=!1}return e.prototype.ngOnInit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),B(this,void 0,void 0,function(){var r=this;return J(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onCreate=function(e){return B(this,void 0,void 0,function(){var t=this;return J(this,function(n){switch(n.label){case 0:return[4,this.userService.createAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery,t.role)})];case 1:return n.sent(),[2]}})})},e.prototype.onSelect=function(e){var t=this.userPage.content.find(function(t){return t.id===e});this.user=t},e.prototype.onRemoveAgent=function(e){return B(this,void 0,void 0,function(){var t=this;return J(this,function(n){switch(n.label){case 0:return console.log("On leave ",e),[4,this.userService.removeAdminAgent(e).subscribe(function(e){t.getUserPage(t.userQuery,t.role)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Lb(b.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-admin-agent"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","table border",4,"ngIf"],[3,"user","create","removeAgent"],[1,"table","border"],[4,"ngFor","ngForOf"],["colspan","5"],[3,"page","getPage"],[1,"btn-sm","btn-warning",3,"click"],[1,"fa","fa-pencil-square-o"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"span",1),i.Fc(2,"Agents"),i.Pb(),i.Pb(),i.Qb(3,"div",0),i.Qb(4,"div",2),i.Qb(5,"div",3),i.Qb(6,"h3",4),i.Fc(7,"Agent list"),i.Pb(),i.Qb(8,"form",5),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(9,"div",6),i.Qb(10,"div",7),i.Qb(11,"div",8),i.Mb(12,"i",9),i.Fc(13,"\xa0 Search"),i.Pb(),i.Pb(),i.Qb(14,"input",10),i.bc("ngModelChange",function(e){return t.userQuery=e}),i.Pb(),i.Pb(),i.Pb(),i.Dc(15,K,1,0,"loading",11),i.Dc(16,X,18,2,"table",12),i.Pb(),i.Qb(17,"div",3),i.Qb(18,"h3",4),i.Fc(19,"Add Agent"),i.Pb(),i.Qb(20,"admin-agent-form",13),i.bc("create",function(e){return t.onCreate(e)})("removeAgent",function(e){return t.onRemoveAgent(e)}),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(14),i.lc("ngModel",t.userQuery),i.zb(1),i.lc("ngIf",t.loading),i.zb(1),i.lc("ngIf",!t.loading),i.zb(4),i.lc("user",t.user))},directives:[u.x,u.n,u.o,u.b,u.m,u.p,a.q,j,V.a,a.p,l.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem .75rem}"]}),e}(),Z=n("WGvi"),ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},te=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function b(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,b)}s((r=r.apply(e,t||[])).next())})},ne=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function b(i){return function(b){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(b){i=[6,b],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,b])}}};function re(e,t){1&e&&i.Mb(0,"loading")}function oe(e,t){if(1&e&&(i.Qb(0,"span"),i.Fc(1),i.Pb()),2&e){var n=t.$implicit;i.zb(1),i.Hc(" ",n.name," ")}}function ie(e,t){if(1&e){var n=i.Rb();i.Qb(0,"tr"),i.Qb(1,"td"),i.Fc(2),i.Pb(),i.Qb(3,"td"),i.Fc(4),i.Pb(),i.Qb(5,"td"),i.Fc(6),i.Pb(),i.Qb(7,"td"),i.Dc(8,oe,2,1,"span",16),i.Pb(),i.Qb(9,"td",17),i.Qb(10,"button",18),i.bc("click",function(){i.wc(n);var e=t.$implicit;return i.dc(2).onEdit(e.id)}),i.Mb(11,"i",19),i.Pb(),i.Pb(),i.Pb()}if(2&e){var r=t.$implicit;i.zb(2),i.Gc(r.name),i.zb(2),i.Gc(r.phoneNumber),i.zb(2),i.Gc(r.email),i.zb(2),i.lc("ngForOf",null==r?null:r.roles)}}function ce(e,t){if(1&e&&(i.Qb(0,"tbody"),i.Dc(1,ie,12,4,"tr",16),i.Pb()),2&e){var n=i.dc();i.zb(1),i.lc("ngForOf",n.userPage.content)}}function be(e,t){if(1&e){var n=i.Rb();i.Qb(0,"pagination",20),i.bc("getPage",function(e){i.wc(n);var t=i.dc();return t.getUserPage(t.userQuery,t.role,e)}),i.Pb()}if(2&e){var r=i.dc();i.lc("page",r.userPage)}}function se(e,t){if(1&e){var n=i.Rb();i.Qb(0,"div",3),i.Qb(1,"change-password-form",21),i.bc("create",function(e){return i.wc(n),i.dc().onChangePassword(e)}),i.Pb(),i.Pb()}if(2&e){var r=i.dc();i.zb(1),i.lc("user",r.user)}}function ue(e,t){1&e&&(i.Qb(0,"div",3),i.Qb(1,"div",22),i.Fc(2," Congratulation! Password changed successfully "),i.Pb(),i.Pb())}var ae=[{path:"add",component:c},{path:"assign",component:D},{path:"admin-agent",component:Y},{path:"change-password",component:function(){function e(e){this.userService=e,this.loading=!1,this.successMessage=!1}return e.prototype.ngOnInit=function(){this.getUserPage()},e.prototype.getUserPage=function(e,t,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),te(this,void 0,void 0,function(){var r=this;return ne(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.userService.findByUsernameOrPhoneNumber(e,t,n).subscribe(function(e){r.userPage=e,r.loading=!1},function(e){return console.log("User list loading error!",e)})];case 1:return o.sent(),[2]}})})},e.prototype.submit=function(){this.getUserPage(this.userQuery,this.role)},e.prototype.onEdit=function(e){this.successMessage=!1;var t=this.userPage.content.find(function(t){return t.id===e});this.user=ee({},t)},e.prototype.onChangePassword=function(e){return te(this,void 0,void 0,function(){var t=this;return ne(this,function(n){switch(n.label){case 0:return console.log(e.id,e.password),[4,this.userService.changeUserPasswordByAdmin(e.id,e.password).subscribe(function(e){t.user=null,t.successMessage=!0,console.log(e)})];case 1:return n.sent(),[2]}})})},e.\u0275fac=function(t){return new(t||e)(i.Lb(b.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-change-password"]],decls:35,vars:6,consts:[[1,"container-fluid"],[1,"row","px-3","details-title","text-left"],[1,"row"],[1,"col-md-6"],[1,"text-center"],[4,"ngIf"],[1,"mx-3","my-1",3,"ngSubmit"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["type","text","id","userQuery","name","userQuery","placeholder","User name or phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","border","table-responsive-sm"],["colspan","5"],[3,"page","getPage",4,"ngIf"],["class","col-md-6",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fa","fa-edit"],[3,"page","getPage"],[3,"user","create"],["role","alert",1,"alert","alert-success"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"span",1),i.Fc(2," Change password "),i.Pb(),i.Pb(),i.Qb(3,"div",0),i.Qb(4,"div",2),i.Qb(5,"div",3),i.Qb(6,"h3",4),i.Fc(7,"User List"),i.Pb(),i.Dc(8,re,1,0,"loading",5),i.Qb(9,"form",6),i.bc("ngSubmit",function(){return t.submit()}),i.Qb(10,"div",7),i.Qb(11,"div",8),i.Qb(12,"div",9),i.Mb(13,"i",10),i.Fc(14,"\xa0 Search"),i.Pb(),i.Pb(),i.Qb(15,"input",11),i.bc("ngModelChange",function(e){return t.userQuery=e}),i.Pb(),i.Pb(),i.Pb(),i.Qb(16,"table",12),i.Qb(17,"thead"),i.Qb(18,"tr"),i.Qb(19,"th"),i.Fc(20,"Name"),i.Pb(),i.Qb(21,"th"),i.Fc(22,"Phone"),i.Pb(),i.Qb(23,"th"),i.Fc(24,"Email"),i.Pb(),i.Qb(25,"th"),i.Fc(26,"Role"),i.Pb(),i.Mb(27,"th"),i.Pb(),i.Pb(),i.Dc(28,ce,2,1,"tbody",5),i.Qb(29,"tfoot"),i.Qb(30,"tr"),i.Qb(31,"td",13),i.Dc(32,be,1,1,"pagination",14),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Dc(33,se,2,1,"div",15),i.Dc(34,ue,3,0,"div",15),i.Pb(),i.Pb()),2&e&&(i.zb(8),i.lc("ngIf",t.loading),i.zb(7),i.lc("ngModel",t.userQuery),i.zb(13),i.lc("ngIf",(null==t.userPage?null:t.userPage.content.length)>0),i.zb(4),i.lc("ngIf",null!=t.userPage),i.zb(1),i.lc("ngIf",t.user),i.zb(1),i.lc("ngIf",t.successMessage))},directives:[a.q,u.x,u.n,u.o,u.b,u.m,u.p,V.a,a.p,l.a,Z.a],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.15rem}"]}),e}()},{path:"",component:v}],le=function(){function e(){}return e.\u0275mod=i.Jb({type:e}),e.\u0275inj=i.Ib({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(ae)]]}),e}()}}]);